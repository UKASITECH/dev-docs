<h1>renderToNodeStream
</h1>
<h3>
Deprecated</h3>
<div><p>This API will be removed in a future major version of React. Use <a href="rendertopipeablestream"><code dir="ltr">renderToPipeableStream</code></a> instead.</p></div> <div>
<p><code dir="ltr">renderToNodeStream</code> renders a React tree to a <a href="https://nodejs.org/api/stream.html#readable-streams" target="_blank" rel="nofollow noopener noreferrer">Node.js Readable Stream.</a></p>
<pre data-language="jsx"><code><span>const</span> <span>stream</span> = <span>renderToNodeStream</span><span>(</span><span>reactNode</span><span>,</span> <span>options</span>?<span>)</span></code></pre>
</div> <ul>
<li>
<a href="#reference">Reference </a><ul><li><a href="#rendertonodestream"><code dir="ltr">renderToNodeStream(reactNode, options?)</code> </a></li></ul>
</li>
<li>
<a href="#usage">Usage </a><ul><li><a href="#rendering-a-react-tree-as-html-to-a-nodejs-readable-stream">Rendering a React tree as HTML to a Node.js Readable Stream </a></li></ul>
</li>
</ul> <hr> <h2 id="reference">Reference 
</h2> <h3 id="rendertonodestream">
<code dir="ltr">renderToNodeStream(reactNode, options?)</code> 
</h3> <p>On the server, call <code dir="ltr">renderToNodeStream</code> to get a <a href="https://nodejs.org/api/stream.html#readable-streams" target="_blank" rel="nofollow noopener noreferrer">Node.js Readable Stream</a> which you can pipe into the response.</p> <pre data-language="jsx"><code><span>import</span> <span>{</span> <span>renderToNodeStream</span> <span>}</span> <span>from</span> <span>'react-dom/server'</span><span>;</span>

<span>const</span> <span>stream</span> = <span>renderToNodeStream</span><span>(</span><span>&lt;</span><span>App</span> <span>/&gt;</span><span>)</span><span>;</span>
<span>stream</span>.<span>pipe</span><span>(</span><span>response</span><span>)</span><span>;</span></code></pre> <p>On the client, call <a href="../client/hydrateroot"><code dir="ltr">hydrateRoot</code></a> to make the server-generated HTML interactive.</p> <p><a href="#usage">See more examples below.</a></p> <h4 id="parameters">Parameters 
</h4> <ul> <li> <p><code dir="ltr">reactNode</code>: A React node you want to render to HTML. For example, a JSX element like <code dir="ltr">&lt;App /&gt;</code>.</p> </li> <li> <p><strong>optional</strong> <code dir="ltr">options</code>: An object for server render.</p> <ul> <li>
<strong>optional</strong> <code dir="ltr">identifierPrefix</code>: A string prefix React uses for IDs generated by <a href="../../react/useid"><code dir="ltr">useId</code>.</a> Useful to avoid conflicts when using multiple roots on the same page. Must be the same prefix as passed to <a href="../client/hydrateroot#parameters"><code dir="ltr">hydrateRoot</code>.</a>
</li> </ul> </li> </ul> <h4 id="returns">Returns 
</h4> <p>A <a href="https://nodejs.org/api/stream.html#readable-streams" target="_blank" rel="nofollow noopener noreferrer">Node.js Readable Stream</a> that outputs an HTML string.</p> <h4 id="caveats">Caveats 
</h4> <ul> <li> <p>This method will wait for all <a href="../../react/suspense">Suspense boundaries</a> to complete before returning any output.</p> </li> <li> <p>As of React 18, this method buffers all of its output, so it doesn’t actually provide any streaming benefits. This is why it’s recommended that you migrate to <a href="rendertopipeablestream"><code dir="ltr">renderToPipeableStream</code></a> instead.</p> </li> <li> <p>The returned stream is a byte stream encoded in utf-8. If you need a stream in another encoding, take a look at a project like <a href="https://www.npmjs.com/package/iconv-lite" target="_blank" rel="nofollow noopener noreferrer">iconv-lite</a>, which provides transform streams for transcoding text.</p> </li> </ul> <hr> <h2 id="usage">Usage 
</h2> <h3 id="rendering-a-react-tree-as-html-to-a-nodejs-readable-stream">Rendering a React tree as HTML to a Node.js Readable Stream 
</h3> <p>Call <code dir="ltr">renderToNodeStream</code> to get a <a href="https://nodejs.org/api/stream.html#readable-streams" target="_blank" rel="nofollow noopener noreferrer">Node.js Readable Stream</a> which you can pipe to your server response:</p> <pre data-language="jsx"><code><span>import</span> <span>{</span> <span>renderToNodeStream</span> <span>}</span> <span>from</span> <span>'react-dom/server'</span><span>;</span>

<span>// The route handler syntax depends on your backend framework</span>
<span>app</span>.<span>use</span><span>(</span><span>'/'</span><span>,</span> <span>(</span><span>request</span><span>,</span> <span>response</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>const</span> <span>stream</span> = <span>renderToNodeStream</span><span>(</span><span>&lt;</span><span>App</span> <span>/&gt;</span><span>)</span><span>;</span>
  <span>stream</span>.<span>pipe</span><span>(</span><span>response</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>;</span></code></pre> <p>The stream will produce the initial non-interactive HTML output of your React components. On the client, you will need to call <a href="../client/hydrateroot"><code dir="ltr">hydrateRoot</code></a> to <em>hydrate</em> that server-generated HTML and make it interactive.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2013&ndash;present Facebook Inc.<br>Licensed under the Creative Commons Attribution 4.0 International Public License.<br>
    <a href="https://18.react.dev/reference/react-dom/server/renderToNodeStream" class="_attribution-link">https://18.react.dev/reference/react-dom/server/renderToNodeStream</a>
  </p>
</div>
