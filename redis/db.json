{"index":"<h1>Redis</h1>  <h1 class=\"truncate font-mono font-medium mb-1.5\"> ACL CAT </h1> <p class=\"opacity-70\"> Lists the ACL categories, or the commands inside a category. </p> <a class=\"absolute inset-0 outline-0\" href=\"acl-cat/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ACL DELUSER </h1> <p class=\"opacity-70\"> Deletes ACL users, and terminates their connections. </p> <a class=\"absolute inset-0 outline-0\" href=\"acl-deluser/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ACL DRYRUN </h1> <p class=\"opacity-70\"> Simulates the execution of a command by a user, without executing the command. </p> <a class=\"absolute inset-0 outline-0\" href=\"acl-dryrun/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ACL GENPASS </h1> <p class=\"opacity-70\"> Generates a pseudorandom, secure password that can be used to identify ACL users. </p> <a class=\"absolute inset-0 outline-0\" href=\"acl-genpass/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ACL GETUSER </h1> <p class=\"opacity-70\"> Lists the ACL rules of a user. </p> <a class=\"absolute inset-0 outline-0\" href=\"acl-getuser/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ACL LIST </h1> <p class=\"opacity-70\"> Dumps the effective rules in ACL file format. </p> <a class=\"absolute inset-0 outline-0\" href=\"acl-list/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ACL LOAD </h1> <p class=\"opacity-70\"> Reloads the rules from the configured ACL file. </p> <a class=\"absolute inset-0 outline-0\" href=\"acl-load/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ACL LOG </h1> <p class=\"opacity-70\"> Lists recent security events generated due to ACL rules. </p> <a class=\"absolute inset-0 outline-0\" href=\"acl-log/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ACL SAVE </h1> <p class=\"opacity-70\"> Saves the effective ACL rules in the configured ACL file. </p> <a class=\"absolute inset-0 outline-0\" href=\"acl-save/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ACL SETUSER </h1> <p class=\"opacity-70\"> Creates and modifies an ACL user and its rules. </p> <a class=\"absolute inset-0 outline-0\" href=\"acl-setuser/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ACL USERS </h1> <p class=\"opacity-70\"> Lists all ACL users. </p> <a class=\"absolute inset-0 outline-0\" href=\"acl-users/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ACL WHOAMI </h1> <p class=\"opacity-70\"> Returns the authenticated username of the current connection. </p> <a class=\"absolute inset-0 outline-0\" href=\"acl-whoami/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> APPEND </h1> <p class=\"opacity-70\"> Appends a string to the value of a key. Creates the key if it doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"append/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ASKING </h1> <p class=\"opacity-70\"> Signals that a cluster client is following an -ASK redirect. </p> <a class=\"absolute inset-0 outline-0\" href=\"asking/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> AUTH </h1> <p class=\"opacity-70\"> Authenticates the connection. </p> <a class=\"absolute inset-0 outline-0\" href=\"auth/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BF.ADD </h1> <p class=\"opacity-70\"> Adds an item to a Bloom Filter </p> <a class=\"absolute inset-0 outline-0\" href=\"bf.add/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BF.CARD </h1> <p class=\"opacity-70\"> Returns the cardinality of a Bloom filter </p> <a class=\"absolute inset-0 outline-0\" href=\"bf.card/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BF.EXISTS </h1> <p class=\"opacity-70\"> Checks whether an item exists in a Bloom Filter </p> <a class=\"absolute inset-0 outline-0\" href=\"bf.exists/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BF.INFO </h1> <p class=\"opacity-70\"> Returns information about a Bloom Filter </p> <a class=\"absolute inset-0 outline-0\" href=\"bf.info/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BF.INSERT </h1> <p class=\"opacity-70\"> Adds one or more items to a Bloom Filter. A filter will be created if it does not exist </p> <a class=\"absolute inset-0 outline-0\" href=\"bf.insert/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BF.LOADCHUNK </h1> <p class=\"opacity-70\"> Restores a filter previously saved using SCANDUMP </p> <a class=\"absolute inset-0 outline-0\" href=\"bf.loadchunk/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BF.MADD </h1> <p class=\"opacity-70\"> Adds one or more items to a Bloom Filter. A filter will be created if it does not exist </p> <a class=\"absolute inset-0 outline-0\" href=\"bf.madd/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BF.MEXISTS </h1> <p class=\"opacity-70\"> Checks whether one or more items exist in a Bloom Filter </p> <a class=\"absolute inset-0 outline-0\" href=\"bf.mexists/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BF.RESERVE </h1> <p class=\"opacity-70\"> Creates a new Bloom Filter </p> <a class=\"absolute inset-0 outline-0\" href=\"bf.reserve/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BF.SCANDUMP </h1> <p class=\"opacity-70\"> Begins an incremental save of the bloom filter </p> <a class=\"absolute inset-0 outline-0\" href=\"bf.scandump/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BGREWRITEAOF </h1> <p class=\"opacity-70\"> Asynchronously rewrites the append-only file to disk. </p> <a class=\"absolute inset-0 outline-0\" href=\"bgrewriteaof/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BGSAVE </h1> <p class=\"opacity-70\"> Asynchronously saves the database(s) to disk. </p> <a class=\"absolute inset-0 outline-0\" href=\"bgsave/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BITCOUNT </h1> <p class=\"opacity-70\"> Counts the number of set bits (population counting) in a string. </p> <a class=\"absolute inset-0 outline-0\" href=\"bitcount/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BITFIELD </h1> <p class=\"opacity-70\"> Performs arbitrary bitfield integer operations on strings. </p> <a class=\"absolute inset-0 outline-0\" href=\"bitfield/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BITFIELD_RO </h1> <p class=\"opacity-70\"> Performs arbitrary read-only bitfield integer operations on strings. </p> <a class=\"absolute inset-0 outline-0\" href=\"bitfield_ro/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BITOP </h1> <p class=\"opacity-70\"> Performs bitwise operations on multiple strings, and stores the result. </p> <a class=\"absolute inset-0 outline-0\" href=\"bitop/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BITPOS </h1> <p class=\"opacity-70\"> Finds the first set (1) or clear (0) bit in a string. </p> <a class=\"absolute inset-0 outline-0\" href=\"bitpos/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BLMOVE </h1> <p class=\"opacity-70\"> Pops an element from a list, pushes it to another list and returns it. Blocks until an element is available otherwise. Deletes the list if the last element was moved. </p> <a class=\"absolute inset-0 outline-0\" href=\"blmove/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BLMPOP </h1> <p class=\"opacity-70\"> Pops the first element from one of multiple lists. Blocks until an element is available otherwise. Deletes the list if the last element was popped. </p> <a class=\"absolute inset-0 outline-0\" href=\"blmpop/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BLPOP </h1> <p class=\"opacity-70\"> Removes and returns the first element in a list. Blocks until an element is available otherwise. Deletes the list if the last element was popped. </p> <a class=\"absolute inset-0 outline-0\" href=\"blpop/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BRPOP </h1> <p class=\"opacity-70\"> Removes and returns the last element in a list. Blocks until an element is available otherwise. Deletes the list if the last element was popped. </p> <a class=\"absolute inset-0 outline-0\" href=\"brpop/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BRPOPLPUSH </h1> <p class=\"opacity-70\"> Pops an element from a list, pushes it to another list and returns it. Block until an element is available otherwise. Deletes the list if the last element was popped. </p> <a class=\"absolute inset-0 outline-0\" href=\"brpoplpush/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BZMPOP </h1> <p class=\"opacity-70\"> Removes and returns a member by score from one or more sorted sets. Blocks until a member is available otherwise. Deletes the sorted set if the last element was popped. </p> <a class=\"absolute inset-0 outline-0\" href=\"bzmpop/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BZPOPMAX </h1> <p class=\"opacity-70\"> Removes and returns the member with the highest score from one or more sorted sets. Blocks until a member available otherwise. Deletes the sorted set if the last element was popped. </p> <a class=\"absolute inset-0 outline-0\" href=\"bzpopmax/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> BZPOPMIN </h1> <p class=\"opacity-70\"> Removes and returns the member with the lowest score from one or more sorted sets. Blocks until a member is available otherwise. Deletes the sorted set if the last element was popped. </p> <a class=\"absolute inset-0 outline-0\" href=\"bzpopmin/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CF.ADD </h1> <p class=\"opacity-70\"> Adds an item to a Cuckoo Filter </p> <a class=\"absolute inset-0 outline-0\" href=\"cf.add/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CF.ADDNX </h1> <p class=\"opacity-70\"> Adds an item to a Cuckoo Filter if the item did not exist previously. </p> <a class=\"absolute inset-0 outline-0\" href=\"cf.addnx/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CF.COUNT </h1> <p class=\"opacity-70\"> Return the number of times an item might be in a Cuckoo Filter </p> <a class=\"absolute inset-0 outline-0\" href=\"cf.count/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CF.DEL </h1> <p class=\"opacity-70\"> Deletes an item from a Cuckoo Filter </p> <a class=\"absolute inset-0 outline-0\" href=\"cf.del/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CF.EXISTS </h1> <p class=\"opacity-70\"> Checks whether one or more items exist in a Cuckoo Filter </p> <a class=\"absolute inset-0 outline-0\" href=\"cf.exists/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CF.INFO </h1> <p class=\"opacity-70\"> Returns information about a Cuckoo Filter </p> <a class=\"absolute inset-0 outline-0\" href=\"cf.info/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CF.INSERT </h1> <p class=\"opacity-70\"> Adds one or more items to a Cuckoo Filter. A filter will be created if it does not exist </p> <a class=\"absolute inset-0 outline-0\" href=\"cf.insert/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CF.INSERTNX </h1> <p class=\"opacity-70\"> Adds one or more items to a Cuckoo Filter if the items did not exist previously. A filter will be created if it does not exist </p> <a class=\"absolute inset-0 outline-0\" href=\"cf.insertnx/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CF.LOADCHUNK </h1> <p class=\"opacity-70\"> Restores a filter previously saved using SCANDUMP </p> <a class=\"absolute inset-0 outline-0\" href=\"cf.loadchunk/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CF.MEXISTS </h1> <p class=\"opacity-70\"> Checks whether one or more items exist in a Cuckoo Filter </p> <a class=\"absolute inset-0 outline-0\" href=\"cf.mexists/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CF.RESERVE </h1> <p class=\"opacity-70\"> Creates a new Cuckoo Filter </p> <a class=\"absolute inset-0 outline-0\" href=\"cf.reserve/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CF.SCANDUMP </h1> <p class=\"opacity-70\"> Begins an incremental save of the bloom filter </p> <a class=\"absolute inset-0 outline-0\" href=\"cf.scandump/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLIENT CACHING </h1> <p class=\"opacity-70\"> Instructs the server whether to track the keys in the next request. </p> <a class=\"absolute inset-0 outline-0\" href=\"client-caching/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLIENT GETNAME </h1> <p class=\"opacity-70\"> Returns the name of the connection. </p> <a class=\"absolute inset-0 outline-0\" href=\"client-getname/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLIENT GETREDIR </h1> <p class=\"opacity-70\"> Returns the client ID to which the connection's tracking notifications are redirected. </p> <a class=\"absolute inset-0 outline-0\" href=\"client-getredir/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLIENT ID </h1> <p class=\"opacity-70\"> Returns the unique client ID of the connection. </p> <a class=\"absolute inset-0 outline-0\" href=\"client-id/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLIENT INFO </h1> <p class=\"opacity-70\"> Returns information about the connection. </p> <a class=\"absolute inset-0 outline-0\" href=\"client-info/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLIENT KILL </h1> <p class=\"opacity-70\"> Terminates open connections. </p> <a class=\"absolute inset-0 outline-0\" href=\"client-kill/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLIENT LIST </h1> <p class=\"opacity-70\"> Lists open connections. </p> <a class=\"absolute inset-0 outline-0\" href=\"client-list/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLIENT NO-EVICT </h1> <p class=\"opacity-70\"> Sets the client eviction mode of the connection. </p> <a class=\"absolute inset-0 outline-0\" href=\"client-no-evict/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLIENT NO-TOUCH </h1> <p class=\"opacity-70\"> Controls whether commands sent by the client affect the LRU/LFU of accessed keys. </p> <a class=\"absolute inset-0 outline-0\" href=\"client-no-touch/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLIENT PAUSE </h1> <p class=\"opacity-70\"> Suspends commands processing. </p> <a class=\"absolute inset-0 outline-0\" href=\"client-pause/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLIENT REPLY </h1> <p class=\"opacity-70\"> Instructs the server whether to reply to commands. </p> <a class=\"absolute inset-0 outline-0\" href=\"client-reply/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLIENT SETINFO </h1> <p class=\"opacity-70\"> Sets information specific to the client or connection. </p> <a class=\"absolute inset-0 outline-0\" href=\"client-setinfo/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLIENT SETNAME </h1> <p class=\"opacity-70\"> Sets the connection name. </p> <a class=\"absolute inset-0 outline-0\" href=\"client-setname/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLIENT TRACKING </h1> <p class=\"opacity-70\"> Controls server-assisted client-side caching for the connection. </p> <a class=\"absolute inset-0 outline-0\" href=\"client-tracking/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLIENT TRACKINGINFO </h1> <p class=\"opacity-70\"> Returns information about server-assisted client-side caching for the connection. </p> <a class=\"absolute inset-0 outline-0\" href=\"client-trackinginfo/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLIENT UNBLOCK </h1> <p class=\"opacity-70\"> Unblocks a client blocked by a blocking command from a different connection. </p> <a class=\"absolute inset-0 outline-0\" href=\"client-unblock/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLIENT UNPAUSE </h1> <p class=\"opacity-70\"> Resumes processing commands from paused clients. </p> <a class=\"absolute inset-0 outline-0\" href=\"client-unpause/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER ADDSLOTS </h1> <p class=\"opacity-70\"> Assigns new hash slots to a node. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-addslots/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER ADDSLOTSRANGE </h1> <p class=\"opacity-70\"> Assigns new hash slot ranges to a node. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-addslotsrange/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER BUMPEPOCH </h1> <p class=\"opacity-70\"> Advances the cluster config epoch. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-bumpepoch/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER COUNT-FAILURE-REPORTS </h1> <p class=\"opacity-70\"> Returns the number of active failure reports active for a node. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-count-failure-reports/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER COUNTKEYSINSLOT </h1> <p class=\"opacity-70\"> Returns the number of keys in a hash slot. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-countkeysinslot/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER DELSLOTS </h1> <p class=\"opacity-70\"> Sets hash slots as unbound for a node. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-delslots/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER DELSLOTSRANGE </h1> <p class=\"opacity-70\"> Sets hash slot ranges as unbound for a node. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-delslotsrange/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER FAILOVER </h1> <p class=\"opacity-70\"> Forces a replica to perform a manual failover of its master. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-failover/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER FLUSHSLOTS </h1> <p class=\"opacity-70\"> Deletes all slots information from a node. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-flushslots/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER FORGET </h1> <p class=\"opacity-70\"> Removes a node from the nodes table. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-forget/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER GETKEYSINSLOT </h1> <p class=\"opacity-70\"> Returns the key names in a hash slot. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-getkeysinslot/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER INFO </h1> <p class=\"opacity-70\"> Returns information about the state of a node. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-info/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER KEYSLOT </h1> <p class=\"opacity-70\"> Returns the hash slot for a key. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-keyslot/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER LINKS </h1> <p class=\"opacity-70\"> Returns a list of all TCP links to and from peer nodes. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-links/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER MEET </h1> <p class=\"opacity-70\"> Forces a node to handshake with another node. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-meet/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER MYID </h1> <p class=\"opacity-70\"> Returns the ID of a node. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-myid/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER MYSHARDID </h1> <p class=\"opacity-70\"> Returns the shard ID of a node. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-myshardid/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER NODES </h1> <p class=\"opacity-70\"> Returns the cluster configuration for a node. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-nodes/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER REPLICAS </h1> <p class=\"opacity-70\"> Lists the replica nodes of a master node. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-replicas/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER REPLICATE </h1> <p class=\"opacity-70\"> Configure a node as replica of a master node. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-replicate/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER RESET </h1> <p class=\"opacity-70\"> Resets a node. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-reset/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER SAVECONFIG </h1> <p class=\"opacity-70\"> Forces a node to save the cluster configuration to disk. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-saveconfig/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER SET-CONFIG-EPOCH </h1> <p class=\"opacity-70\"> Sets the configuration epoch for a new node. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-set-config-epoch/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER SETSLOT </h1> <p class=\"opacity-70\"> Binds a hash slot to a node. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-setslot/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER SHARDS </h1> <p class=\"opacity-70\"> Returns the mapping of cluster slots to shards. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-shards/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER SLAVES </h1> <p class=\"opacity-70\"> Lists the replica nodes of a master node. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-slaves/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CLUSTER SLOTS </h1> <p class=\"opacity-70\"> Returns the mapping of cluster slots to nodes. </p> <a class=\"absolute inset-0 outline-0\" href=\"cluster-slots/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CMS.INCRBY </h1> <p class=\"opacity-70\"> Increases the count of one or more items by increment </p> <a class=\"absolute inset-0 outline-0\" href=\"cms.incrby/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CMS.INFO </h1> <p class=\"opacity-70\"> Returns information about a sketch </p> <a class=\"absolute inset-0 outline-0\" href=\"cms.info/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CMS.INITBYDIM </h1> <p class=\"opacity-70\"> Initializes a Count-Min Sketch to dimensions specified by user </p> <a class=\"absolute inset-0 outline-0\" href=\"cms.initbydim/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CMS.INITBYPROB </h1> <p class=\"opacity-70\"> Initializes a Count-Min Sketch to accommodate requested tolerances. </p> <a class=\"absolute inset-0 outline-0\" href=\"cms.initbyprob/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CMS.MERGE </h1> <p class=\"opacity-70\"> Merges several sketches into one sketch </p> <a class=\"absolute inset-0 outline-0\" href=\"cms.merge/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CMS.QUERY </h1> <p class=\"opacity-70\"> Returns the count for one or more items in a sketch </p> <a class=\"absolute inset-0 outline-0\" href=\"cms.query/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> COMMAND </h1> <p class=\"opacity-70\"> Returns detailed information about all commands. </p> <a class=\"absolute inset-0 outline-0\" href=\"command/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> COMMAND COUNT </h1> <p class=\"opacity-70\"> Returns a count of commands. </p> <a class=\"absolute inset-0 outline-0\" href=\"command-count/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> COMMAND DOCS </h1> <p class=\"opacity-70\"> Returns documentary information about a command. </p> <a class=\"absolute inset-0 outline-0\" href=\"command-docs/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> COMMAND GETKEYS </h1> <p class=\"opacity-70\"> Extracts the key names from an arbitrary command. </p> <a class=\"absolute inset-0 outline-0\" href=\"command-getkeys/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> COMMAND GETKEYSANDFLAGS </h1> <p class=\"opacity-70\"> Extracts the key names and access flags for an arbitrary command. </p> <a class=\"absolute inset-0 outline-0\" href=\"command-getkeysandflags/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> COMMAND INFO </h1> <p class=\"opacity-70\"> Returns information about one, multiple or all commands. </p> <a class=\"absolute inset-0 outline-0\" href=\"command-info/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> COMMAND LIST </h1> <p class=\"opacity-70\"> Returns a list of command names. </p> <a class=\"absolute inset-0 outline-0\" href=\"command-list/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CONFIG GET </h1> <p class=\"opacity-70\"> Returns the effective values of configuration parameters. </p> <a class=\"absolute inset-0 outline-0\" href=\"config-get/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CONFIG RESETSTAT </h1> <p class=\"opacity-70\"> Resets the server's statistics. </p> <a class=\"absolute inset-0 outline-0\" href=\"config-resetstat/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CONFIG REWRITE </h1> <p class=\"opacity-70\"> Persists the effective configuration to file. </p> <a class=\"absolute inset-0 outline-0\" href=\"config-rewrite/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> CONFIG SET </h1> <p class=\"opacity-70\"> Sets configuration parameters in-flight. </p> <a class=\"absolute inset-0 outline-0\" href=\"config-set/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> COPY </h1> <p class=\"opacity-70\"> Copies the value of a key to a new key. </p> <a class=\"absolute inset-0 outline-0\" href=\"copy/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> DBSIZE </h1> <p class=\"opacity-70\"> Returns the number of keys in the database. </p> <a class=\"absolute inset-0 outline-0\" href=\"dbsize/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> DECR </h1> <p class=\"opacity-70\"> Decrements the integer value of a key by one. Uses 0 as initial value if the key doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"decr/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> DECRBY </h1> <p class=\"opacity-70\"> Decrements a number from the integer value of a key. Uses 0 as initial value if the key doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"decrby/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> DEL </h1> <p class=\"opacity-70\"> Deletes one or more keys. </p> <a class=\"absolute inset-0 outline-0\" href=\"del/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> DISCARD </h1> <p class=\"opacity-70\"> Discards a transaction. </p> <a class=\"absolute inset-0 outline-0\" href=\"discard/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> DUMP </h1> <p class=\"opacity-70\"> Returns a serialized representation of the value stored at a key. </p> <a class=\"absolute inset-0 outline-0\" href=\"dump/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ECHO </h1> <p class=\"opacity-70\"> Returns the given string. </p> <a class=\"absolute inset-0 outline-0\" href=\"echo/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> EVAL </h1> <p class=\"opacity-70\"> Executes a server-side Lua script. </p> <a class=\"absolute inset-0 outline-0\" href=\"eval/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> EVAL_RO </h1> <p class=\"opacity-70\"> Executes a read-only server-side Lua script. </p> <a class=\"absolute inset-0 outline-0\" href=\"eval_ro/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> EVALSHA </h1> <p class=\"opacity-70\"> Executes a server-side Lua script by SHA1 digest. </p> <a class=\"absolute inset-0 outline-0\" href=\"evalsha/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> EVALSHA_RO </h1> <p class=\"opacity-70\"> Executes a read-only server-side Lua script by SHA1 digest. </p> <a class=\"absolute inset-0 outline-0\" href=\"evalsha_ro/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> EXEC </h1> <p class=\"opacity-70\"> Executes all commands in a transaction. </p> <a class=\"absolute inset-0 outline-0\" href=\"exec/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> EXISTS </h1> <p class=\"opacity-70\"> Determines whether one or more keys exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"exists/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> EXPIRE </h1> <p class=\"opacity-70\"> Sets the expiration time of a key in seconds. </p> <a class=\"absolute inset-0 outline-0\" href=\"expire/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> EXPIREAT </h1> <p class=\"opacity-70\"> Sets the expiration time of a key to a Unix timestamp. </p> <a class=\"absolute inset-0 outline-0\" href=\"expireat/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> EXPIRETIME </h1> <p class=\"opacity-70\"> Returns the expiration time of a key as a Unix timestamp. </p> <a class=\"absolute inset-0 outline-0\" href=\"expiretime/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FAILOVER </h1> <p class=\"opacity-70\"> Starts a coordinated failover from a server to one of its replicas. </p> <a class=\"absolute inset-0 outline-0\" href=\"failover/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FCALL </h1> <p class=\"opacity-70\"> Invokes a function. </p> <a class=\"absolute inset-0 outline-0\" href=\"fcall/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FCALL_RO </h1> <p class=\"opacity-70\"> Invokes a read-only function. </p> <a class=\"absolute inset-0 outline-0\" href=\"fcall_ro/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FLUSHALL </h1> <p class=\"opacity-70\"> Removes all keys from all databases. </p> <a class=\"absolute inset-0 outline-0\" href=\"flushall/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FLUSHDB </h1> <p class=\"opacity-70\"> Remove all keys from the current database. </p> <a class=\"absolute inset-0 outline-0\" href=\"flushdb/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT._LIST </h1> <p class=\"opacity-70\"> Returns a list of all existing indexes </p> <a class=\"absolute inset-0 outline-0\" href=\"ft._list/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.AGGREGATE </h1> <p class=\"opacity-70\"> Run a search query on an index and perform aggregate transformations on the results </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.aggregate/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.ALIASADD </h1> <p class=\"opacity-70\"> Adds an alias to the index </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.aliasadd/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.ALIASDEL </h1> <p class=\"opacity-70\"> Deletes an alias from the index </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.aliasdel/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.ALIASUPDATE </h1> <p class=\"opacity-70\"> Adds or updates an alias to the index </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.aliasupdate/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.ALTER </h1> <p class=\"opacity-70\"> Adds a new field to the index </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.alter/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.CONFIG GET </h1> <p class=\"opacity-70\"> Retrieves runtime configuration options </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.config-get/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.CONFIG SET </h1> <p class=\"opacity-70\"> Sets runtime configuration options </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.config-set/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.CREATE </h1> <p class=\"opacity-70\"> Creates an index with the given spec </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.create/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.CURSOR DEL </h1> <p class=\"opacity-70\"> Deletes a cursor </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.cursor-del/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.CURSOR READ </h1> <p class=\"opacity-70\"> Reads from a cursor </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.cursor-read/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.DICTADD </h1> <p class=\"opacity-70\"> Adds terms to a dictionary </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.dictadd/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.DICTDEL </h1> <p class=\"opacity-70\"> Deletes terms from a dictionary </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.dictdel/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.DICTDUMP </h1> <p class=\"opacity-70\"> Dumps all terms in the given dictionary </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.dictdump/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.DROPINDEX </h1> <p class=\"opacity-70\"> Deletes the index </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.dropindex/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.EXPLAIN </h1> <p class=\"opacity-70\"> Returns the execution plan for a complex query </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.explain/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.EXPLAINCLI </h1> <p class=\"opacity-70\"> Returns the execution plan for a complex query </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.explaincli/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.INFO </h1> <p class=\"opacity-70\"> Returns information and statistics on the index </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.info/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.PROFILE </h1> <p class=\"opacity-70\"> Performs a `FT.SEARCH` or `FT.AGGREGATE` command and collects performance information </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.profile/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.SEARCH </h1> <p class=\"opacity-70\"> Searches the index with a textual query, returning either documents or just ids </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.search/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.SPELLCHECK </h1> <p class=\"opacity-70\"> Performs spelling correction on a query, returning suggestions for misspelled terms </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.spellcheck/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.SUGADD </h1> <p class=\"opacity-70\"> Adds a suggestion string to an auto-complete suggestion dictionary </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.sugadd/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.SUGDEL </h1> <p class=\"opacity-70\"> Deletes a string from a suggestion index </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.sugdel/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.SUGGET </h1> <p class=\"opacity-70\"> Gets completion suggestions for a prefix </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.sugget/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.SUGLEN </h1> <p class=\"opacity-70\"> Gets the size of an auto-complete suggestion dictionary </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.suglen/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.SYNDUMP </h1> <p class=\"opacity-70\"> Dumps the contents of a synonym group </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.syndump/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.SYNUPDATE </h1> <p class=\"opacity-70\"> Creates or updates a synonym group with additional terms </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.synupdate/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FT.TAGVALS </h1> <p class=\"opacity-70\"> Returns the distinct tags indexed in a Tag field </p> <a class=\"absolute inset-0 outline-0\" href=\"ft.tagvals/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FUNCTION DELETE </h1> <p class=\"opacity-70\"> Deletes a library and its functions. </p> <a class=\"absolute inset-0 outline-0\" href=\"function-delete/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FUNCTION DUMP </h1> <p class=\"opacity-70\"> Dumps all libraries into a serialized binary payload. </p> <a class=\"absolute inset-0 outline-0\" href=\"function-dump/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FUNCTION FLUSH </h1> <p class=\"opacity-70\"> Deletes all libraries and functions. </p> <a class=\"absolute inset-0 outline-0\" href=\"function-flush/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FUNCTION KILL </h1> <p class=\"opacity-70\"> Terminates a function during execution. </p> <a class=\"absolute inset-0 outline-0\" href=\"function-kill/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FUNCTION LIST </h1> <p class=\"opacity-70\"> Returns information about all libraries. </p> <a class=\"absolute inset-0 outline-0\" href=\"function-list/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FUNCTION LOAD </h1> <p class=\"opacity-70\"> Creates a library. </p> <a class=\"absolute inset-0 outline-0\" href=\"function-load/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FUNCTION RESTORE </h1> <p class=\"opacity-70\"> Restores all libraries from a payload. </p> <a class=\"absolute inset-0 outline-0\" href=\"function-restore/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> FUNCTION STATS </h1> <p class=\"opacity-70\"> Returns information about a function during execution. </p> <a class=\"absolute inset-0 outline-0\" href=\"function-stats/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GEOADD </h1> <p class=\"opacity-70\"> Adds one or more members to a geospatial index. The key is created if it doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"geoadd/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GEODIST </h1> <p class=\"opacity-70\"> Returns the distance between two members of a geospatial index. </p> <a class=\"absolute inset-0 outline-0\" href=\"geodist/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GEOHASH </h1> <p class=\"opacity-70\"> Returns members from a geospatial index as geohash strings. </p> <a class=\"absolute inset-0 outline-0\" href=\"geohash/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GEOPOS </h1> <p class=\"opacity-70\"> Returns the longitude and latitude of members from a geospatial index. </p> <a class=\"absolute inset-0 outline-0\" href=\"geopos/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GEORADIUS </h1> <p class=\"opacity-70\"> Queries a geospatial index for members within a distance from a coordinate, optionally stores the result. </p> <a class=\"absolute inset-0 outline-0\" href=\"georadius/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GEORADIUS_RO </h1> <p class=\"opacity-70\"> Returns members from a geospatial index that are within a distance from a coordinate. </p> <a class=\"absolute inset-0 outline-0\" href=\"georadius_ro/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GEORADIUSBYMEMBER </h1> <p class=\"opacity-70\"> Queries a geospatial index for members within a distance from a member, optionally stores the result. </p> <a class=\"absolute inset-0 outline-0\" href=\"georadiusbymember/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GEORADIUSBYMEMBER_RO </h1> <p class=\"opacity-70\"> Returns members from a geospatial index that are within a distance from a member. </p> <a class=\"absolute inset-0 outline-0\" href=\"georadiusbymember_ro/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GEOSEARCH </h1> <p class=\"opacity-70\"> Queries a geospatial index for members inside an area of a box or a circle. </p> <a class=\"absolute inset-0 outline-0\" href=\"geosearch/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GEOSEARCHSTORE </h1> <p class=\"opacity-70\"> Queries a geospatial index for members inside an area of a box or a circle, optionally stores the result. </p> <a class=\"absolute inset-0 outline-0\" href=\"geosearchstore/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GET </h1> <p class=\"opacity-70\"> Returns the string value of a key. </p> <a class=\"absolute inset-0 outline-0\" href=\"get/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GETBIT </h1> <p class=\"opacity-70\"> Returns a bit value by offset. </p> <a class=\"absolute inset-0 outline-0\" href=\"getbit/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GETDEL </h1> <p class=\"opacity-70\"> Returns the string value of a key after deleting the key. </p> <a class=\"absolute inset-0 outline-0\" href=\"getdel/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GETEX </h1> <p class=\"opacity-70\"> Returns the string value of a key after setting its expiration time. </p> <a class=\"absolute inset-0 outline-0\" href=\"getex/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GETRANGE </h1> <p class=\"opacity-70\"> Returns a substring of the string stored at a key. </p> <a class=\"absolute inset-0 outline-0\" href=\"getrange/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GETSET </h1> <p class=\"opacity-70\"> Returns the previous string value of a key after setting it to a new value. </p> <a class=\"absolute inset-0 outline-0\" href=\"getset/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GRAPH.CONFIG GET </h1> <p class=\"opacity-70\"> Retrieves a RedisGraph configuration </p> <a class=\"absolute inset-0 outline-0\" href=\"graph.config-get/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GRAPH.CONFIG SET </h1> <p class=\"opacity-70\"> Updates a RedisGraph configuration </p> <a class=\"absolute inset-0 outline-0\" href=\"graph.config-set/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GRAPH.CONSTRAINT CREATE </h1> <p class=\"opacity-70\"> Creates a constraint on specified graph </p> <a class=\"absolute inset-0 outline-0\" href=\"graph.constraint-create/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GRAPH.CONSTRAINT DROP </h1> <p class=\"opacity-70\"> Deletes a constraint from specified graph </p> <a class=\"absolute inset-0 outline-0\" href=\"graph.constraint-drop/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GRAPH.DELETE </h1> <p class=\"opacity-70\"> Completely removes the graph and all of its entities </p> <a class=\"absolute inset-0 outline-0\" href=\"graph.delete/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GRAPH.EXPLAIN </h1> <p class=\"opacity-70\"> Returns a query execution plan without running the query </p> <a class=\"absolute inset-0 outline-0\" href=\"graph.explain/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GRAPH.LIST </h1> <p class=\"opacity-70\"> Lists all graph keys in the keyspace </p> <a class=\"absolute inset-0 outline-0\" href=\"graph.list/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GRAPH.PROFILE </h1> <p class=\"opacity-70\"> Executes a query and returns an execution plan augmented with metrics for each operation's execution </p> <a class=\"absolute inset-0 outline-0\" href=\"graph.profile/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GRAPH.QUERY </h1> <p class=\"opacity-70\"> Executes the given query against a specified graph </p> <a class=\"absolute inset-0 outline-0\" href=\"graph.query/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GRAPH.RO_QUERY </h1> <p class=\"opacity-70\"> Executes a given read only query against a specified graph </p> <a class=\"absolute inset-0 outline-0\" href=\"graph.ro_query/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> GRAPH.SLOWLOG </h1> <p class=\"opacity-70\"> Returns a list containing up to 10 of the slowest queries issued against the given graph </p> <a class=\"absolute inset-0 outline-0\" href=\"graph.slowlog/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> HDEL </h1> <p class=\"opacity-70\"> Deletes one or more fields and their values from a hash. Deletes the hash if no fields remain. </p> <a class=\"absolute inset-0 outline-0\" href=\"hdel/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> HELLO </h1> <p class=\"opacity-70\"> Handshakes with the Redis server. </p> <a class=\"absolute inset-0 outline-0\" href=\"hello/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> HEXISTS </h1> <p class=\"opacity-70\"> Determines whether a field exists in a hash. </p> <a class=\"absolute inset-0 outline-0\" href=\"hexists/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> HGET </h1> <p class=\"opacity-70\"> Returns the value of a field in a hash. </p> <a class=\"absolute inset-0 outline-0\" href=\"hget/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> HGETALL </h1> <p class=\"opacity-70\"> Returns all fields and values in a hash. </p> <a class=\"absolute inset-0 outline-0\" href=\"hgetall/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> HINCRBY </h1> <p class=\"opacity-70\"> Increments the integer value of a field in a hash by a number. Uses 0 as initial value if the field doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"hincrby/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> HINCRBYFLOAT </h1> <p class=\"opacity-70\"> Increments the floating point value of a field by a number. Uses 0 as initial value if the field doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"hincrbyfloat/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> HKEYS </h1> <p class=\"opacity-70\"> Returns all fields in a hash. </p> <a class=\"absolute inset-0 outline-0\" href=\"hkeys/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> HLEN </h1> <p class=\"opacity-70\"> Returns the number of fields in a hash. </p> <a class=\"absolute inset-0 outline-0\" href=\"hlen/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> HMGET </h1> <p class=\"opacity-70\"> Returns the values of all fields in a hash. </p> <a class=\"absolute inset-0 outline-0\" href=\"hmget/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> HMSET </h1> <p class=\"opacity-70\"> Sets the values of multiple fields. </p> <a class=\"absolute inset-0 outline-0\" href=\"hmset/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> HRANDFIELD </h1> <p class=\"opacity-70\"> Returns one or more random fields from a hash. </p> <a class=\"absolute inset-0 outline-0\" href=\"hrandfield/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> HSCAN </h1> <p class=\"opacity-70\"> Iterates over fields and values of a hash. </p> <a class=\"absolute inset-0 outline-0\" href=\"hscan/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> HSET </h1> <p class=\"opacity-70\"> Creates or modifies the value of a field in a hash. </p> <a class=\"absolute inset-0 outline-0\" href=\"hset/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> HSETNX </h1> <p class=\"opacity-70\"> Sets the value of a field in a hash only when the field doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"hsetnx/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> HSTRLEN </h1> <p class=\"opacity-70\"> Returns the length of the value of a field. </p> <a class=\"absolute inset-0 outline-0\" href=\"hstrlen/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> HVALS </h1> <p class=\"opacity-70\"> Returns all values in a hash. </p> <a class=\"absolute inset-0 outline-0\" href=\"hvals/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> INCR </h1> <p class=\"opacity-70\"> Increments the integer value of a key by one. Uses 0 as initial value if the key doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"incr/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> INCRBY </h1> <p class=\"opacity-70\"> Increments the integer value of a key by a number. Uses 0 as initial value if the key doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"incrby/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> INCRBYFLOAT </h1> <p class=\"opacity-70\"> Increment the floating point value of a key by a number. Uses 0 as initial value if the key doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"incrbyfloat/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> INFO </h1> <p class=\"opacity-70\"> Returns information and statistics about the server. </p> <a class=\"absolute inset-0 outline-0\" href=\"info/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.ARRAPPEND </h1> <p class=\"opacity-70\"> Append one or more json values into the array at path after the last element in it. </p> <a class=\"absolute inset-0 outline-0\" href=\"json.arrappend/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.ARRINDEX </h1> <p class=\"opacity-70\"> Returns the index of the first occurrence of a JSON scalar value in the array at path </p> <a class=\"absolute inset-0 outline-0\" href=\"json.arrindex/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.ARRINSERT </h1> <p class=\"opacity-70\"> Inserts the JSON scalar(s) value at the specified index in the array at path </p> <a class=\"absolute inset-0 outline-0\" href=\"json.arrinsert/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.ARRLEN </h1> <p class=\"opacity-70\"> Returns the length of the array at path </p> <a class=\"absolute inset-0 outline-0\" href=\"json.arrlen/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.ARRPOP </h1> <p class=\"opacity-70\"> Removes and returns the element at the specified index in the array at path </p> <a class=\"absolute inset-0 outline-0\" href=\"json.arrpop/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.ARRTRIM </h1> <p class=\"opacity-70\"> Trims the array at path to contain only the specified inclusive range of indices from start to stop </p> <a class=\"absolute inset-0 outline-0\" href=\"json.arrtrim/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.CLEAR </h1> <p class=\"opacity-70\"> Clears all values from an array or an object and sets numeric values to `0` </p> <a class=\"absolute inset-0 outline-0\" href=\"json.clear/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.DEBUG </h1> <p class=\"opacity-70\"> Debugging container command </p> <a class=\"absolute inset-0 outline-0\" href=\"json.debug/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.DEBUG MEMORY </h1> <p class=\"opacity-70\"> Reports the size in bytes of a key </p> <a class=\"absolute inset-0 outline-0\" href=\"json.debug-memory/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.DEL </h1> <p class=\"opacity-70\"> Deletes a value </p> <a class=\"absolute inset-0 outline-0\" href=\"json.del/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.FORGET </h1> <p class=\"opacity-70\"> Deletes a value </p> <a class=\"absolute inset-0 outline-0\" href=\"json.forget/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.GET </h1> <p class=\"opacity-70\"> Gets the value at one or more paths in JSON serialized form </p> <a class=\"absolute inset-0 outline-0\" href=\"json.get/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.MGET </h1> <p class=\"opacity-70\"> Returns the values at a path from one or more keys </p> <a class=\"absolute inset-0 outline-0\" href=\"json.mget/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.NUMINCRBY </h1> <p class=\"opacity-70\"> Increments the numeric value at path by a value </p> <a class=\"absolute inset-0 outline-0\" href=\"json.numincrby/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.NUMMULTBY </h1> <p class=\"opacity-70\"> Multiplies the numeric value at path by a value </p> <a class=\"absolute inset-0 outline-0\" href=\"json.nummultby/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.OBJKEYS </h1> <p class=\"opacity-70\"> Returns the JSON keys of the object at path </p> <a class=\"absolute inset-0 outline-0\" href=\"json.objkeys/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.OBJLEN </h1> <p class=\"opacity-70\"> Returns the number of keys of the object at path </p> <a class=\"absolute inset-0 outline-0\" href=\"json.objlen/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.RESP </h1> <p class=\"opacity-70\"> Returns the JSON value at path in Redis Serialization Protocol (RESP) </p> <a class=\"absolute inset-0 outline-0\" href=\"json.resp/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.SET </h1> <p class=\"opacity-70\"> Sets or updates the JSON value at a path </p> <a class=\"absolute inset-0 outline-0\" href=\"json.set/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.STRAPPEND </h1> <p class=\"opacity-70\"> Appends a string to a JSON string value at path </p> <a class=\"absolute inset-0 outline-0\" href=\"json.strappend/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.STRLEN </h1> <p class=\"opacity-70\"> Returns the length of the JSON String at path in key </p> <a class=\"absolute inset-0 outline-0\" href=\"json.strlen/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.TOGGLE </h1> <p class=\"opacity-70\"> Toggles a boolean value </p> <a class=\"absolute inset-0 outline-0\" href=\"json.toggle/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> JSON.TYPE </h1> <p class=\"opacity-70\"> Returns the type of the JSON value at path </p> <a class=\"absolute inset-0 outline-0\" href=\"json.type/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> KEYS </h1> <p class=\"opacity-70\"> Returns all key names that match a pattern. </p> <a class=\"absolute inset-0 outline-0\" href=\"keys/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> LASTSAVE </h1> <p class=\"opacity-70\"> Returns the Unix timestamp of the last successful save to disk. </p> <a class=\"absolute inset-0 outline-0\" href=\"lastsave/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> LATENCY DOCTOR </h1> <p class=\"opacity-70\"> Returns a human-readable latency analysis report. </p> <a class=\"absolute inset-0 outline-0\" href=\"latency-doctor/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> LATENCY GRAPH </h1> <p class=\"opacity-70\"> Returns a latency graph for an event. </p> <a class=\"absolute inset-0 outline-0\" href=\"latency-graph/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> LATENCY HISTOGRAM </h1> <p class=\"opacity-70\"> Returns the cumulative distribution of latencies of a subset or all commands. </p> <a class=\"absolute inset-0 outline-0\" href=\"latency-histogram/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> LATENCY HISTORY </h1> <p class=\"opacity-70\"> Returns timestamp-latency samples for an event. </p> <a class=\"absolute inset-0 outline-0\" href=\"latency-history/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> LATENCY LATEST </h1> <p class=\"opacity-70\"> Returns the latest latency samples for all events. </p> <a class=\"absolute inset-0 outline-0\" href=\"latency-latest/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> LATENCY RESET </h1> <p class=\"opacity-70\"> Resets the latency data for one or more events. </p> <a class=\"absolute inset-0 outline-0\" href=\"latency-reset/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> LCS </h1> <p class=\"opacity-70\"> Finds the longest common substring. </p> <a class=\"absolute inset-0 outline-0\" href=\"lcs/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> LINDEX </h1> <p class=\"opacity-70\"> Returns an element from a list by its index. </p> <a class=\"absolute inset-0 outline-0\" href=\"lindex/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> LINSERT </h1> <p class=\"opacity-70\"> Inserts an element before or after another element in a list. </p> <a class=\"absolute inset-0 outline-0\" href=\"linsert/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> LLEN </h1> <p class=\"opacity-70\"> Returns the length of a list. </p> <a class=\"absolute inset-0 outline-0\" href=\"llen/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> LMOVE </h1> <p class=\"opacity-70\"> Returns an element after popping it from one list and pushing it to another. Deletes the list if the last element was moved. </p> <a class=\"absolute inset-0 outline-0\" href=\"lmove/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> LMPOP </h1> <p class=\"opacity-70\"> Returns multiple elements from a list after removing them. Deletes the list if the last element was popped. </p> <a class=\"absolute inset-0 outline-0\" href=\"lmpop/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> LOLWUT </h1> <p class=\"opacity-70\"> Displays computer art and the Redis version </p> <a class=\"absolute inset-0 outline-0\" href=\"lolwut/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> LPOP </h1> <p class=\"opacity-70\"> Returns the first elements in a list after removing it. Deletes the list if the last element was popped. </p> <a class=\"absolute inset-0 outline-0\" href=\"lpop/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> LPOS </h1> <p class=\"opacity-70\"> Returns the index of matching elements in a list. </p> <a class=\"absolute inset-0 outline-0\" href=\"lpos/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> LPUSH </h1> <p class=\"opacity-70\"> Prepends one or more elements to a list. Creates the key if it doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"lpush/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> LPUSHX </h1> <p class=\"opacity-70\"> Prepends one or more elements to a list only when the list exists. </p> <a class=\"absolute inset-0 outline-0\" href=\"lpushx/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> LRANGE </h1> <p class=\"opacity-70\"> Returns a range of elements from a list. </p> <a class=\"absolute inset-0 outline-0\" href=\"lrange/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> LREM </h1> <p class=\"opacity-70\"> Removes elements from a list. Deletes the list if the last element was removed. </p> <a class=\"absolute inset-0 outline-0\" href=\"lrem/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> LSET </h1> <p class=\"opacity-70\"> Sets the value of an element in a list by its index. </p> <a class=\"absolute inset-0 outline-0\" href=\"lset/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> LTRIM </h1> <p class=\"opacity-70\"> Removes elements from both ends a list. Deletes the list if all elements were trimmed. </p> <a class=\"absolute inset-0 outline-0\" href=\"ltrim/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> MEMORY DOCTOR </h1> <p class=\"opacity-70\"> Outputs a memory problems report. </p> <a class=\"absolute inset-0 outline-0\" href=\"memory-doctor/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> MEMORY MALLOC-STATS </h1> <p class=\"opacity-70\"> Returns the allocator statistics. </p> <a class=\"absolute inset-0 outline-0\" href=\"memory-malloc-stats/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> MEMORY PURGE </h1> <p class=\"opacity-70\"> Asks the allocator to release memory. </p> <a class=\"absolute inset-0 outline-0\" href=\"memory-purge/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> MEMORY STATS </h1> <p class=\"opacity-70\"> Returns details about memory usage. </p> <a class=\"absolute inset-0 outline-0\" href=\"memory-stats/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> MEMORY USAGE </h1> <p class=\"opacity-70\"> Estimates the memory usage of a key. </p> <a class=\"absolute inset-0 outline-0\" href=\"memory-usage/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> MGET </h1> <p class=\"opacity-70\"> Atomically returns the string values of one or more keys. </p> <a class=\"absolute inset-0 outline-0\" href=\"mget/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> MIGRATE </h1> <p class=\"opacity-70\"> Atomically transfers a key from one Redis instance to another. </p> <a class=\"absolute inset-0 outline-0\" href=\"migrate/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> MODULE LIST </h1> <p class=\"opacity-70\"> Returns all loaded modules. </p> <a class=\"absolute inset-0 outline-0\" href=\"module-list/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> MODULE LOAD </h1> <p class=\"opacity-70\"> Loads a module. </p> <a class=\"absolute inset-0 outline-0\" href=\"module-load/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> MODULE LOADEX </h1> <p class=\"opacity-70\"> Loads a module using extended parameters. </p> <a class=\"absolute inset-0 outline-0\" href=\"module-loadex/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> MODULE UNLOAD </h1> <p class=\"opacity-70\"> Unloads a module. </p> <a class=\"absolute inset-0 outline-0\" href=\"module-unload/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> MONITOR </h1> <p class=\"opacity-70\"> Listens for all requests received by the server in real-time. </p> <a class=\"absolute inset-0 outline-0\" href=\"monitor/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> MOVE </h1> <p class=\"opacity-70\"> Moves a key to another database. </p> <a class=\"absolute inset-0 outline-0\" href=\"move/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> MSET </h1> <p class=\"opacity-70\"> Atomically creates or modifies the string values of one or more keys. </p> <a class=\"absolute inset-0 outline-0\" href=\"mset/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> MSETNX </h1> <p class=\"opacity-70\"> Atomically modifies the string values of one or more keys only when all keys don't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"msetnx/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> MULTI </h1> <p class=\"opacity-70\"> Starts a transaction. </p> <a class=\"absolute inset-0 outline-0\" href=\"multi/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> OBJECT ENCODING </h1> <p class=\"opacity-70\"> Returns the internal encoding of a Redis object. </p> <a class=\"absolute inset-0 outline-0\" href=\"object-encoding/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> OBJECT FREQ </h1> <p class=\"opacity-70\"> Returns the logarithmic access frequency counter of a Redis object. </p> <a class=\"absolute inset-0 outline-0\" href=\"object-freq/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> OBJECT IDLETIME </h1> <p class=\"opacity-70\"> Returns the time since the last access to a Redis object. </p> <a class=\"absolute inset-0 outline-0\" href=\"object-idletime/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> OBJECT REFCOUNT </h1> <p class=\"opacity-70\"> Returns the reference count of a value of a key. </p> <a class=\"absolute inset-0 outline-0\" href=\"object-refcount/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> PERSIST </h1> <p class=\"opacity-70\"> Removes the expiration time of a key. </p> <a class=\"absolute inset-0 outline-0\" href=\"persist/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> PEXPIRE </h1> <p class=\"opacity-70\"> Sets the expiration time of a key in milliseconds. </p> <a class=\"absolute inset-0 outline-0\" href=\"pexpire/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> PEXPIREAT </h1> <p class=\"opacity-70\"> Sets the expiration time of a key to a Unix milliseconds timestamp. </p> <a class=\"absolute inset-0 outline-0\" href=\"pexpireat/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> PEXPIRETIME </h1> <p class=\"opacity-70\"> Returns the expiration time of a key as a Unix milliseconds timestamp. </p> <a class=\"absolute inset-0 outline-0\" href=\"pexpiretime/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> PFADD </h1> <p class=\"opacity-70\"> Adds elements to a HyperLogLog key. Creates the key if it doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"pfadd/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> PFCOUNT </h1> <p class=\"opacity-70\"> Returns the approximated cardinality of the set(s) observed by the HyperLogLog key(s). </p> <a class=\"absolute inset-0 outline-0\" href=\"pfcount/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> PFDEBUG </h1> <p class=\"opacity-70\"> Internal commands for debugging HyperLogLog values. </p> <a class=\"absolute inset-0 outline-0\" href=\"pfdebug/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> PFMERGE </h1> <p class=\"opacity-70\"> Merges one or more HyperLogLog values into a single key. </p> <a class=\"absolute inset-0 outline-0\" href=\"pfmerge/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> PFSELFTEST </h1> <p class=\"opacity-70\"> An internal command for testing HyperLogLog values. </p> <a class=\"absolute inset-0 outline-0\" href=\"pfselftest/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> PING </h1> <p class=\"opacity-70\"> Returns the server's liveliness response. </p> <a class=\"absolute inset-0 outline-0\" href=\"ping/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> PSETEX </h1> <p class=\"opacity-70\"> Sets both string value and expiration time in milliseconds of a key. The key is created if it doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"psetex/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> PSUBSCRIBE </h1> <p class=\"opacity-70\"> Listens for messages published to channels that match one or more patterns. </p> <a class=\"absolute inset-0 outline-0\" href=\"psubscribe/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> PSYNC </h1> <p class=\"opacity-70\"> An internal command used in replication. </p> <a class=\"absolute inset-0 outline-0\" href=\"psync/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> PTTL </h1> <p class=\"opacity-70\"> Returns the expiration time in milliseconds of a key. </p> <a class=\"absolute inset-0 outline-0\" href=\"pttl/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> PUBLISH </h1> <p class=\"opacity-70\"> Posts a message to a channel. </p> <a class=\"absolute inset-0 outline-0\" href=\"publish/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> PUBSUB CHANNELS </h1> <p class=\"opacity-70\"> Returns the active channels. </p> <a class=\"absolute inset-0 outline-0\" href=\"pubsub-channels/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> PUBSUB NUMPAT </h1> <p class=\"opacity-70\"> Returns a count of unique pattern subscriptions. </p> <a class=\"absolute inset-0 outline-0\" href=\"pubsub-numpat/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> PUBSUB NUMSUB </h1> <p class=\"opacity-70\"> Returns a count of subscribers to channels. </p> <a class=\"absolute inset-0 outline-0\" href=\"pubsub-numsub/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> PUBSUB SHARDCHANNELS </h1> <p class=\"opacity-70\"> Returns the active shard channels. </p> <a class=\"absolute inset-0 outline-0\" href=\"pubsub-shardchannels/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> PUBSUB SHARDNUMSUB </h1> <p class=\"opacity-70\"> Returns the count of subscribers of shard channels. </p> <a class=\"absolute inset-0 outline-0\" href=\"pubsub-shardnumsub/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> PUNSUBSCRIBE </h1> <p class=\"opacity-70\"> Stops listening to messages published to channels that match one or more patterns. </p> <a class=\"absolute inset-0 outline-0\" href=\"punsubscribe/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> QUIT </h1> <p class=\"opacity-70\"> Closes the connection. </p> <a class=\"absolute inset-0 outline-0\" href=\"quit/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> RANDOMKEY </h1> <p class=\"opacity-70\"> Returns a random key name from the database. </p> <a class=\"absolute inset-0 outline-0\" href=\"randomkey/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> READONLY </h1> <p class=\"opacity-70\"> Enables read-only queries for a connection to a Redis Cluster replica node. </p> <a class=\"absolute inset-0 outline-0\" href=\"readonly/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> READWRITE </h1> <p class=\"opacity-70\"> Enables read-write queries for a connection to a Reids Cluster replica node. </p> <a class=\"absolute inset-0 outline-0\" href=\"readwrite/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> RENAME </h1> <p class=\"opacity-70\"> Renames a key and overwrites the destination. </p> <a class=\"absolute inset-0 outline-0\" href=\"rename/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> RENAMENX </h1> <p class=\"opacity-70\"> Renames a key only when the target key name doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"renamenx/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> REPLCONF </h1> <p class=\"opacity-70\"> An internal command for configuring the replication stream. </p> <a class=\"absolute inset-0 outline-0\" href=\"replconf/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> REPLICAOF </h1> <p class=\"opacity-70\"> Configures a server as replica of another, or promotes it to a master. </p> <a class=\"absolute inset-0 outline-0\" href=\"replicaof/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> RESET </h1> <p class=\"opacity-70\"> Resets the connection. </p> <a class=\"absolute inset-0 outline-0\" href=\"reset/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> RESTORE </h1> <p class=\"opacity-70\"> Creates a key from the serialized representation of a value. </p> <a class=\"absolute inset-0 outline-0\" href=\"restore/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> RESTORE-ASKING </h1> <p class=\"opacity-70\"> An internal command for migrating keys in a cluster. </p> <a class=\"absolute inset-0 outline-0\" href=\"restore-asking/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ROLE </h1> <p class=\"opacity-70\"> Returns the replication role. </p> <a class=\"absolute inset-0 outline-0\" href=\"role/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> RPOP </h1> <p class=\"opacity-70\"> Returns and removes the last elements of a list. Deletes the list if the lst element was popped. </p> <a class=\"absolute inset-0 outline-0\" href=\"rpop/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> RPOPLPUSH </h1> <p class=\"opacity-70\"> Returns the last element of a list after removing and pushing it to another list. Deletes the list if the lst element was popped. </p> <a class=\"absolute inset-0 outline-0\" href=\"rpoplpush/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> RPUSH </h1> <p class=\"opacity-70\"> Appends one or more elements to a list. Creates the key if it doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"rpush/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> RPUSHX </h1> <p class=\"opacity-70\"> Appends an element to a list only when the list exists. </p> <a class=\"absolute inset-0 outline-0\" href=\"rpushx/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SADD </h1> <p class=\"opacity-70\"> Adds one or more members to a set. Creates the key if it doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"sadd/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SAVE </h1> <p class=\"opacity-70\"> Synchronously saves the database(s) to disk. </p> <a class=\"absolute inset-0 outline-0\" href=\"save/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SCAN </h1> <p class=\"opacity-70\"> Iterates over the key names in the database. </p> <a class=\"absolute inset-0 outline-0\" href=\"scan/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SCARD </h1> <p class=\"opacity-70\"> Returns the number of members in a set. </p> <a class=\"absolute inset-0 outline-0\" href=\"scard/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SCRIPT DEBUG </h1> <p class=\"opacity-70\"> Sets the debug mode of server-side Lua scripts. </p> <a class=\"absolute inset-0 outline-0\" href=\"script-debug/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SCRIPT EXISTS </h1> <p class=\"opacity-70\"> Determines whether server-side Lua scripts exist in the script cache. </p> <a class=\"absolute inset-0 outline-0\" href=\"script-exists/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SCRIPT FLUSH </h1> <p class=\"opacity-70\"> Removes all server-side Lua scripts from the script cache. </p> <a class=\"absolute inset-0 outline-0\" href=\"script-flush/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SCRIPT KILL </h1> <p class=\"opacity-70\"> Terminates a server-side Lua script during execution. </p> <a class=\"absolute inset-0 outline-0\" href=\"script-kill/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SCRIPT LOAD </h1> <p class=\"opacity-70\"> Loads a server-side Lua script to the script cache. </p> <a class=\"absolute inset-0 outline-0\" href=\"script-load/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SDIFF </h1> <p class=\"opacity-70\"> Returns the difference of multiple sets. </p> <a class=\"absolute inset-0 outline-0\" href=\"sdiff/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SDIFFSTORE </h1> <p class=\"opacity-70\"> Stores the difference of multiple sets in a key. </p> <a class=\"absolute inset-0 outline-0\" href=\"sdiffstore/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SELECT </h1> <p class=\"opacity-70\"> Changes the selected database. </p> <a class=\"absolute inset-0 outline-0\" href=\"select/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SET </h1> <p class=\"opacity-70\"> Sets the string value of a key, ignoring its type. The key is created if it doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"set/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SETBIT </h1> <p class=\"opacity-70\"> Sets or clears the bit at offset of the string value. Creates the key if it doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"setbit/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SETEX </h1> <p class=\"opacity-70\"> Sets the string value and expiration time of a key. Creates the key if it doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"setex/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SETNX </h1> <p class=\"opacity-70\"> Set the string value of a key only when the key doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"setnx/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SETRANGE </h1> <p class=\"opacity-70\"> Overwrites a part of a string value with another by an offset. Creates the key if it doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"setrange/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SHUTDOWN </h1> <p class=\"opacity-70\"> Synchronously saves the database(s) to disk and shuts down the Redis server. </p> <a class=\"absolute inset-0 outline-0\" href=\"shutdown/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SINTER </h1> <p class=\"opacity-70\"> Returns the intersect of multiple sets. </p> <a class=\"absolute inset-0 outline-0\" href=\"sinter/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SINTERCARD </h1> <p class=\"opacity-70\"> Returns the number of members of the intersect of multiple sets. </p> <a class=\"absolute inset-0 outline-0\" href=\"sintercard/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SINTERSTORE </h1> <p class=\"opacity-70\"> Stores the intersect of multiple sets in a key. </p> <a class=\"absolute inset-0 outline-0\" href=\"sinterstore/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SISMEMBER </h1> <p class=\"opacity-70\"> Determines whether a member belongs to a set. </p> <a class=\"absolute inset-0 outline-0\" href=\"sismember/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SLAVEOF </h1> <p class=\"opacity-70\"> Sets a Redis server as a replica of another, or promotes it to being a master. </p> <a class=\"absolute inset-0 outline-0\" href=\"slaveof/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SLOWLOG GET </h1> <p class=\"opacity-70\"> Returns the slow log's entries. </p> <a class=\"absolute inset-0 outline-0\" href=\"slowlog-get/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SLOWLOG LEN </h1> <p class=\"opacity-70\"> Returns the number of entries in the slow log. </p> <a class=\"absolute inset-0 outline-0\" href=\"slowlog-len/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SLOWLOG RESET </h1> <p class=\"opacity-70\"> Clears all entries from the slow log. </p> <a class=\"absolute inset-0 outline-0\" href=\"slowlog-reset/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SMEMBERS </h1> <p class=\"opacity-70\"> Returns all members of a set. </p> <a class=\"absolute inset-0 outline-0\" href=\"smembers/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SMISMEMBER </h1> <p class=\"opacity-70\"> Determines whether multiple members belong to a set. </p> <a class=\"absolute inset-0 outline-0\" href=\"smismember/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SMOVE </h1> <p class=\"opacity-70\"> Moves a member from one set to another. </p> <a class=\"absolute inset-0 outline-0\" href=\"smove/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SORT </h1> <p class=\"opacity-70\"> Sorts the elements in a list, a set, or a sorted set, optionally storing the result. </p> <a class=\"absolute inset-0 outline-0\" href=\"sort/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SORT_RO </h1> <p class=\"opacity-70\"> Returns the sorted elements of a list, a set, or a sorted set. </p> <a class=\"absolute inset-0 outline-0\" href=\"sort_ro/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SPOP </h1> <p class=\"opacity-70\"> Returns one or more random members from a set after removing them. Deletes the set if the last member was popped. </p> <a class=\"absolute inset-0 outline-0\" href=\"spop/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SPUBLISH </h1> <p class=\"opacity-70\"> Post a message to a shard channel </p> <a class=\"absolute inset-0 outline-0\" href=\"spublish/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SRANDMEMBER </h1> <p class=\"opacity-70\"> Get one or multiple random members from a set </p> <a class=\"absolute inset-0 outline-0\" href=\"srandmember/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SREM </h1> <p class=\"opacity-70\"> Removes one or more members from a set. Deletes the set if the last member was removed. </p> <a class=\"absolute inset-0 outline-0\" href=\"srem/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SSCAN </h1> <p class=\"opacity-70\"> Iterates over members of a set. </p> <a class=\"absolute inset-0 outline-0\" href=\"sscan/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SSUBSCRIBE </h1> <p class=\"opacity-70\"> Listens for messages published to shard channels. </p> <a class=\"absolute inset-0 outline-0\" href=\"ssubscribe/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> STRLEN </h1> <p class=\"opacity-70\"> Returns the length of a string value. </p> <a class=\"absolute inset-0 outline-0\" href=\"strlen/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SUBSCRIBE </h1> <p class=\"opacity-70\"> Listens for messages published to channels. </p> <a class=\"absolute inset-0 outline-0\" href=\"subscribe/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SUBSTR </h1> <p class=\"opacity-70\"> Returns a substring from a string value. </p> <a class=\"absolute inset-0 outline-0\" href=\"substr/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SUNION </h1> <p class=\"opacity-70\"> Returns the union of multiple sets. </p> <a class=\"absolute inset-0 outline-0\" href=\"sunion/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SUNIONSTORE </h1> <p class=\"opacity-70\"> Stores the union of multiple sets in a key. </p> <a class=\"absolute inset-0 outline-0\" href=\"sunionstore/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SUNSUBSCRIBE </h1> <p class=\"opacity-70\"> Stops listening to messages posted to shard channels. </p> <a class=\"absolute inset-0 outline-0\" href=\"sunsubscribe/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SWAPDB </h1> <p class=\"opacity-70\"> Swaps two Redis databases. </p> <a class=\"absolute inset-0 outline-0\" href=\"swapdb/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> SYNC </h1> <p class=\"opacity-70\"> An internal command used in replication. </p> <a class=\"absolute inset-0 outline-0\" href=\"sync/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TDIGEST.ADD </h1> <p class=\"opacity-70\"> Adds one or more observations to a t-digest sketch </p> <a class=\"absolute inset-0 outline-0\" href=\"tdigest.add/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TDIGEST.BYRANK </h1> <p class=\"opacity-70\"> Returns, for each input rank, an estimation of the value (floating-point) with that rank </p> <a class=\"absolute inset-0 outline-0\" href=\"tdigest.byrank/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TDIGEST.BYREVRANK </h1> <p class=\"opacity-70\"> Returns, for each input reverse rank, an estimation of the value (floating-point) with that reverse rank </p> <a class=\"absolute inset-0 outline-0\" href=\"tdigest.byrevrank/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TDIGEST.CDF </h1> <p class=\"opacity-70\"> Returns, for each input value, an estimation of the fraction (floating-point) of (observations smaller than the given value + half the observations equal to the given value) </p> <a class=\"absolute inset-0 outline-0\" href=\"tdigest.cdf/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TDIGEST.CREATE </h1> <p class=\"opacity-70\"> Allocates memory and initializes a new t-digest sketch </p> <a class=\"absolute inset-0 outline-0\" href=\"tdigest.create/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TDIGEST.INFO </h1> <p class=\"opacity-70\"> Returns information and statistics about a t-digest sketch </p> <a class=\"absolute inset-0 outline-0\" href=\"tdigest.info/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TDIGEST.MAX </h1> <p class=\"opacity-70\"> Returns the maximum observation value from a t-digest sketch </p> <a class=\"absolute inset-0 outline-0\" href=\"tdigest.max/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TDIGEST.MERGE </h1> <p class=\"opacity-70\"> Merges multiple t-digest sketches into a single sketch </p> <a class=\"absolute inset-0 outline-0\" href=\"tdigest.merge/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TDIGEST.MIN </h1> <p class=\"opacity-70\"> Returns the minimum observation value from a t-digest sketch </p> <a class=\"absolute inset-0 outline-0\" href=\"tdigest.min/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TDIGEST.QUANTILE </h1> <p class=\"opacity-70\"> Returns, for each input fraction, an estimation of the value (floating point) that is smaller than the given fraction of observations </p> <a class=\"absolute inset-0 outline-0\" href=\"tdigest.quantile/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TDIGEST.RANK </h1> <p class=\"opacity-70\"> Returns, for each input value (floating-point), the estimated rank of the value (the number of observations in the sketch that are smaller than the value + half the number of observations that are equal to the value) </p> <a class=\"absolute inset-0 outline-0\" href=\"tdigest.rank/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TDIGEST.RESET </h1> <p class=\"opacity-70\"> Resets a t-digest sketch: empty the sketch and re-initializes it. </p> <a class=\"absolute inset-0 outline-0\" href=\"tdigest.reset/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TDIGEST.REVRANK </h1> <p class=\"opacity-70\"> Returns, for each input value (floating-point), the estimated reverse rank of the value (the number of observations in the sketch that are larger than the value + half the number of observations that are equal to the value) </p> <a class=\"absolute inset-0 outline-0\" href=\"tdigest.revrank/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TDIGEST.TRIMMED_MEAN </h1> <p class=\"opacity-70\"> Returns an estimation of the mean value from the sketch, excluding observation values outside the low and high cutoff quantiles </p> <a class=\"absolute inset-0 outline-0\" href=\"tdigest.trimmed_mean/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TIME </h1> <p class=\"opacity-70\"> Returns the server time. </p> <a class=\"absolute inset-0 outline-0\" href=\"time/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TOPK.ADD </h1> <p class=\"opacity-70\"> Increases the count of one or more items by increment </p> <a class=\"absolute inset-0 outline-0\" href=\"topk.add/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TOPK.COUNT </h1> <p class=\"opacity-70\"> Return the count for one or more items are in a sketch </p> <a class=\"absolute inset-0 outline-0\" href=\"topk.count/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TOPK.INCRBY </h1> <p class=\"opacity-70\"> Increases the count of one or more items by increment </p> <a class=\"absolute inset-0 outline-0\" href=\"topk.incrby/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TOPK.INFO </h1> <p class=\"opacity-70\"> Returns information about a sketch </p> <a class=\"absolute inset-0 outline-0\" href=\"topk.info/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TOPK.LIST </h1> <p class=\"opacity-70\"> Return full list of items in Top K list </p> <a class=\"absolute inset-0 outline-0\" href=\"topk.list/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TOPK.QUERY </h1> <p class=\"opacity-70\"> Checks whether one or more items are in a sketch </p> <a class=\"absolute inset-0 outline-0\" href=\"topk.query/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TOPK.RESERVE </h1> <p class=\"opacity-70\"> Initializes a TopK with specified parameters </p> <a class=\"absolute inset-0 outline-0\" href=\"topk.reserve/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TOUCH </h1> <p class=\"opacity-70\"> Returns the number of existing keys out of those specified after updating the time they were last accessed. </p> <a class=\"absolute inset-0 outline-0\" href=\"touch/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TS.ADD </h1> <p class=\"opacity-70\"> Append a sample to a time series </p> <a class=\"absolute inset-0 outline-0\" href=\"ts.add/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TS.ALTER </h1> <p class=\"opacity-70\"> Update the retention, chunk size, duplicate policy, and labels of an existing time series </p> <a class=\"absolute inset-0 outline-0\" href=\"ts.alter/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TS.CREATE </h1> <p class=\"opacity-70\"> Create a new time series </p> <a class=\"absolute inset-0 outline-0\" href=\"ts.create/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TS.CREATERULE </h1> <p class=\"opacity-70\"> Create a compaction rule </p> <a class=\"absolute inset-0 outline-0\" href=\"ts.createrule/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TS.DECRBY </h1> <p class=\"opacity-70\"> Decrease the value of the sample with the maximal existing timestamp, or create a new sample with a value equal to the value of the sample with the maximal existing timestamp with a given decrement </p> <a class=\"absolute inset-0 outline-0\" href=\"ts.decrby/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TS.DEL </h1> <p class=\"opacity-70\"> Delete all samples between two timestamps for a given time series </p> <a class=\"absolute inset-0 outline-0\" href=\"ts.del/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TS.DELETERULE </h1> <p class=\"opacity-70\"> Delete a compaction rule </p> <a class=\"absolute inset-0 outline-0\" href=\"ts.deleterule/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TS.GET </h1> <p class=\"opacity-70\"> Get the sample with the highest timestamp from a given time series </p> <a class=\"absolute inset-0 outline-0\" href=\"ts.get/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TS.INCRBY </h1> <p class=\"opacity-70\"> Increase the value of the sample with the maximal existing timestamp, or create a new sample with a value equal to the value of the sample with the maximal existing timestamp with a given increment </p> <a class=\"absolute inset-0 outline-0\" href=\"ts.incrby/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TS.INFO </h1> <p class=\"opacity-70\"> Returns information and statistics for a time series </p> <a class=\"absolute inset-0 outline-0\" href=\"ts.info/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TS.MADD </h1> <p class=\"opacity-70\"> Append new samples to one or more time series </p> <a class=\"absolute inset-0 outline-0\" href=\"ts.madd/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TS.MGET </h1> <p class=\"opacity-70\"> Get the sample with the highest timestamp from each time series matching a specific filter </p> <a class=\"absolute inset-0 outline-0\" href=\"ts.mget/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TS.MRANGE </h1> <p class=\"opacity-70\"> Query a range across multiple time series by filters in forward direction </p> <a class=\"absolute inset-0 outline-0\" href=\"ts.mrange/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TS.MREVRANGE </h1> <p class=\"opacity-70\"> Query a range across multiple time-series by filters in reverse direction </p> <a class=\"absolute inset-0 outline-0\" href=\"ts.mrevrange/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TS.QUERYINDEX </h1> <p class=\"opacity-70\"> Get all time series keys matching a filter list </p> <a class=\"absolute inset-0 outline-0\" href=\"ts.queryindex/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TS.RANGE </h1> <p class=\"opacity-70\"> Query a range in forward direction </p> <a class=\"absolute inset-0 outline-0\" href=\"ts.range/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TS.REVRANGE </h1> <p class=\"opacity-70\"> Query a range in reverse direction </p> <a class=\"absolute inset-0 outline-0\" href=\"ts.revrange/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TTL </h1> <p class=\"opacity-70\"> Returns the expiration time in seconds of a key. </p> <a class=\"absolute inset-0 outline-0\" href=\"ttl/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> TYPE </h1> <p class=\"opacity-70\"> Determines the type of value stored at a key. </p> <a class=\"absolute inset-0 outline-0\" href=\"type/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> UNLINK </h1> <p class=\"opacity-70\"> Asynchronously deletes one or more keys. </p> <a class=\"absolute inset-0 outline-0\" href=\"unlink/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> UNSUBSCRIBE </h1> <p class=\"opacity-70\"> Stops listening to messages posted to channels. </p> <a class=\"absolute inset-0 outline-0\" href=\"unsubscribe/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> UNWATCH </h1> <p class=\"opacity-70\"> Forgets about watched keys of a transaction. </p> <a class=\"absolute inset-0 outline-0\" href=\"unwatch/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> WAIT </h1> <p class=\"opacity-70\"> Blocks until the asynchronous replication of all preceding write commands sent by the connection is completed. </p> <a class=\"absolute inset-0 outline-0\" href=\"wait/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> WAITAOF </h1> <p class=\"opacity-70\"> Blocks until all of the preceding write commands sent by the connection are written to the append-only file of the master and/or replicas. </p> <a class=\"absolute inset-0 outline-0\" href=\"waitaof/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> WATCH </h1> <p class=\"opacity-70\"> Monitors changes to keys to determine the execution of a transaction. </p> <a class=\"absolute inset-0 outline-0\" href=\"watch/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> XACK </h1> <p class=\"opacity-70\"> Returns the number of messages that were successfully acknowledged by the consumer group member of a stream. </p> <a class=\"absolute inset-0 outline-0\" href=\"xack/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> XADD </h1> <p class=\"opacity-70\"> Appends a new message to a stream. Creates the key if it doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"xadd/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> XAUTOCLAIM </h1> <p class=\"opacity-70\"> Changes, or acquires, ownership of messages in a consumer group, as if the messages were delivered to as consumer group member. </p> <a class=\"absolute inset-0 outline-0\" href=\"xautoclaim/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> XCLAIM </h1> <p class=\"opacity-70\"> Changes, or acquires, ownership of a message in a consumer group, as if the message was delivered a consumer group member. </p> <a class=\"absolute inset-0 outline-0\" href=\"xclaim/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> XDEL </h1> <p class=\"opacity-70\"> Returns the number of messages after removing them from a stream. </p> <a class=\"absolute inset-0 outline-0\" href=\"xdel/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> XGROUP CREATE </h1> <p class=\"opacity-70\"> Creates a consumer group. </p> <a class=\"absolute inset-0 outline-0\" href=\"xgroup-create/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> XGROUP CREATECONSUMER </h1> <p class=\"opacity-70\"> Creates a consumer in a consumer group. </p> <a class=\"absolute inset-0 outline-0\" href=\"xgroup-createconsumer/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> XGROUP DELCONSUMER </h1> <p class=\"opacity-70\"> Deletes a consumer from a consumer group. </p> <a class=\"absolute inset-0 outline-0\" href=\"xgroup-delconsumer/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> XGROUP DESTROY </h1> <p class=\"opacity-70\"> Destroys a consumer group. </p> <a class=\"absolute inset-0 outline-0\" href=\"xgroup-destroy/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> XGROUP SETID </h1> <p class=\"opacity-70\"> Sets the last-delivered ID of a consumer group. </p> <a class=\"absolute inset-0 outline-0\" href=\"xgroup-setid/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> XINFO CONSUMERS </h1> <p class=\"opacity-70\"> Returns a list of the consumers in a consumer group. </p> <a class=\"absolute inset-0 outline-0\" href=\"xinfo-consumers/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> XINFO GROUPS </h1> <p class=\"opacity-70\"> Returns a list of the consumer groups of a stream. </p> <a class=\"absolute inset-0 outline-0\" href=\"xinfo-groups/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> XINFO STREAM </h1> <p class=\"opacity-70\"> Returns information about a stream. </p> <a class=\"absolute inset-0 outline-0\" href=\"xinfo-stream/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> XLEN </h1> <p class=\"opacity-70\"> Return the number of messages in a stream. </p> <a class=\"absolute inset-0 outline-0\" href=\"xlen/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> XPENDING </h1> <p class=\"opacity-70\"> Returns the information and entries from a stream consumer group's pending entries list. </p> <a class=\"absolute inset-0 outline-0\" href=\"xpending/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> XRANGE </h1> <p class=\"opacity-70\"> Returns the messages from a stream within a range of IDs. </p> <a class=\"absolute inset-0 outline-0\" href=\"xrange/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> XREAD </h1> <p class=\"opacity-70\"> Returns messages from multiple streams with IDs greater than the ones requested. Blocks until a message is available otherwise. </p> <a class=\"absolute inset-0 outline-0\" href=\"xread/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> XREADGROUP </h1> <p class=\"opacity-70\"> Returns new or historical messages from a stream for a consumer in agroup. Blocks until a message is available otherwise. </p> <a class=\"absolute inset-0 outline-0\" href=\"xreadgroup/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> XREVRANGE </h1> <p class=\"opacity-70\"> Returns the messages from a stream within a range of IDs in reverse order. </p> <a class=\"absolute inset-0 outline-0\" href=\"xrevrange/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> XSETID </h1> <p class=\"opacity-70\"> An internal command for replicating stream values. </p> <a class=\"absolute inset-0 outline-0\" href=\"xsetid/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> XTRIM </h1> <p class=\"opacity-70\"> Deletes messages from the beginning of a stream. </p> <a class=\"absolute inset-0 outline-0\" href=\"xtrim/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZADD </h1> <p class=\"opacity-70\"> Adds one or more members to a sorted set, or updates their scores. Creates the key if it doesn't exist. </p> <a class=\"absolute inset-0 outline-0\" href=\"zadd/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZCARD </h1> <p class=\"opacity-70\"> Returns the number of members in a sorted set. </p> <a class=\"absolute inset-0 outline-0\" href=\"zcard/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZCOUNT </h1> <p class=\"opacity-70\"> Returns the count of members in a sorted set that have scores within a range. </p> <a class=\"absolute inset-0 outline-0\" href=\"zcount/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZDIFF </h1> <p class=\"opacity-70\"> Returns the difference between multiple sorted sets. </p> <a class=\"absolute inset-0 outline-0\" href=\"zdiff/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZDIFFSTORE </h1> <p class=\"opacity-70\"> Stores the difference of multiple sorted sets in a key. </p> <a class=\"absolute inset-0 outline-0\" href=\"zdiffstore/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZINCRBY </h1> <p class=\"opacity-70\"> Increments the score of a member in a sorted set. </p> <a class=\"absolute inset-0 outline-0\" href=\"zincrby/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZINTER </h1> <p class=\"opacity-70\"> Returns the intersect of multiple sorted sets. </p> <a class=\"absolute inset-0 outline-0\" href=\"zinter/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZINTERCARD </h1> <p class=\"opacity-70\"> Returns the number of members of the intersect of multiple sorted sets. </p> <a class=\"absolute inset-0 outline-0\" href=\"zintercard/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZINTERSTORE </h1> <p class=\"opacity-70\"> Stores the intersect of multiple sorted sets in a key. </p> <a class=\"absolute inset-0 outline-0\" href=\"zinterstore/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZLEXCOUNT </h1> <p class=\"opacity-70\"> Returns the number of members in a sorted set within a lexicographical range. </p> <a class=\"absolute inset-0 outline-0\" href=\"zlexcount/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZMPOP </h1> <p class=\"opacity-70\"> Returns the highest- or lowest-scoring members from one or more sorted sets after removing them. Deletes the sorted set if the last member was popped. </p> <a class=\"absolute inset-0 outline-0\" href=\"zmpop/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZMSCORE </h1> <p class=\"opacity-70\"> Returns the score of one or more members in a sorted set. </p> <a class=\"absolute inset-0 outline-0\" href=\"zmscore/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZPOPMAX </h1> <p class=\"opacity-70\"> Returns the highest-scoring members from a sorted set after removing them. Deletes the sorted set if the last member was popped. </p> <a class=\"absolute inset-0 outline-0\" href=\"zpopmax/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZPOPMIN </h1> <p class=\"opacity-70\"> Returns the lowest-scoring members from a sorted set after removing them. Deletes the sorted set if the last member was popped. </p> <a class=\"absolute inset-0 outline-0\" href=\"zpopmin/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZRANDMEMBER </h1> <p class=\"opacity-70\"> Returns one or more random members from a sorted set. </p> <a class=\"absolute inset-0 outline-0\" href=\"zrandmember/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZRANGE </h1> <p class=\"opacity-70\"> Returns members in a sorted set within a range of indexes. </p> <a class=\"absolute inset-0 outline-0\" href=\"zrange/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZRANGEBYLEX </h1> <p class=\"opacity-70\"> Returns members in a sorted set within a lexicographical range. </p> <a class=\"absolute inset-0 outline-0\" href=\"zrangebylex/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZRANGEBYSCORE </h1> <p class=\"opacity-70\"> Returns members in a sorted set within a range of scores. </p> <a class=\"absolute inset-0 outline-0\" href=\"zrangebyscore/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZRANGESTORE </h1> <p class=\"opacity-70\"> Stores a range of members from sorted set in a key. </p> <a class=\"absolute inset-0 outline-0\" href=\"zrangestore/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZRANK </h1> <p class=\"opacity-70\"> Returns the index of a member in a sorted set ordered by ascending scores. </p> <a class=\"absolute inset-0 outline-0\" href=\"zrank/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZREM </h1> <p class=\"opacity-70\"> Removes one or more members from a sorted set. Deletes the sorted set if all members were removed. </p> <a class=\"absolute inset-0 outline-0\" href=\"zrem/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZREMRANGEBYLEX </h1> <p class=\"opacity-70\"> Removes members in a sorted set within a lexicographical range. Deletes the sorted set if all members were removed. </p> <a class=\"absolute inset-0 outline-0\" href=\"zremrangebylex/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZREMRANGEBYRANK </h1> <p class=\"opacity-70\"> Removes members in a sorted set within a range of indexes. Deletes the sorted set if all members were removed. </p> <a class=\"absolute inset-0 outline-0\" href=\"zremrangebyrank/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZREMRANGEBYSCORE </h1> <p class=\"opacity-70\"> Removes members in a sorted set within a range of scores. Deletes the sorted set if all members were removed. </p> <a class=\"absolute inset-0 outline-0\" href=\"zremrangebyscore/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZREVRANGE </h1> <p class=\"opacity-70\"> Returns members in a sorted set within a range of indexes in reverse order. </p> <a class=\"absolute inset-0 outline-0\" href=\"zrevrange/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZREVRANGEBYLEX </h1> <p class=\"opacity-70\"> Returns members in a sorted set within a lexicographical range in reverse order. </p> <a class=\"absolute inset-0 outline-0\" href=\"zrevrangebylex/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZREVRANGEBYSCORE </h1> <p class=\"opacity-70\"> Returns members in a sorted set within a range of scores in reverse order. </p> <a class=\"absolute inset-0 outline-0\" href=\"zrevrangebyscore/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZREVRANK </h1> <p class=\"opacity-70\"> Returns the index of a member in a sorted set ordered by descending scores. </p> <a class=\"absolute inset-0 outline-0\" href=\"zrevrank/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZSCAN </h1> <p class=\"opacity-70\"> Iterates over members and scores of a sorted set. </p> <a class=\"absolute inset-0 outline-0\" href=\"zscan/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZSCORE </h1> <p class=\"opacity-70\"> Returns the score of a member in a sorted set. </p> <a class=\"absolute inset-0 outline-0\" href=\"zscore/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZUNION </h1> <p class=\"opacity-70\"> Returns the union of multiple sorted sets. </p> <a class=\"absolute inset-0 outline-0\" href=\"zunion/index\"> <span class=\"sr-only\">Read more</span> </a>   <h1 class=\"truncate font-mono font-medium mb-1.5\"> ZUNIONSTORE </h1> <p class=\"opacity-70\"> Stores the union of multiple sorted sets in a key. </p> <a class=\"absolute inset-0 outline-0\" href=\"zunionstore/index\"> <span class=\"sr-only\">Read more</span> </a><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands\" class=\"_attribution-link\">https://redis.io/commands</a>\n  </p>\n</div>\n","acl-cat/index":"<h1 class=\"command-name\">ACL</h1>\n<pre>ACL CAT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ACL CAT [category]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) since the categories and commands are a fixed set.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The command shows the available ACL categories if called without arguments. If a category name is given, the command shows all the Redis commands in the specified category.</p> <p>ACL categories are very useful in order to create ACL rules that include or exclude a large set of commands at once, without specifying every single command. For instance, the following rule will let the user <code>karin</code> perform everything but the most dangerous operations that may affect the server stability:</p> <pre>ACL SETUSER karin on +@all -@dangerous\n</pre> <p>We first add all the commands to the set of commands that <code>karin</code> is able to execute, but then we remove all the dangerous commands.</p> <p>Checking for all the available categories is as simple as:</p> <pre tabindex=\"0\">&gt; ACL CAT\n 1) \"keyspace\"\n 2) \"read\"\n 3) \"write\"\n 4) \"set\"\n 5) \"sortedset\"\n 6) \"list\"\n 7) \"hash\"\n 8) \"string\"\n 9) \"bitmap\"\n10) \"hyperloglog\"\n11) \"geo\"\n12) \"stream\"\n13) \"pubsub\"\n14) \"admin\"\n15) \"fast\"\n16) \"slow\"\n17) \"blocking\"\n18) \"dangerous\"\n19) \"connection\"\n20) \"transaction\"\n21) \"scripting\"\n</pre>\n<p>Then we may want to know what commands are part of a given category:</p> <pre tabindex=\"0\">&gt; ACL CAT dangerous\n 1) \"flushdb\"\n 2) \"acl\"\n 3) \"slowlog\"\n 4) \"debug\"\n 5) \"role\"\n 6) \"keys\"\n 7) \"pfselftest\"\n 8) \"client\"\n 9) \"bgrewriteaof\"\n10) \"replicaof\"\n11) \"monitor\"\n12) \"restore-asking\"\n13) \"latency\"\n14) \"replconf\"\n15) \"pfdebug\"\n16) \"bgsave\"\n17) \"sync\"\n18) \"config\"\n19) \"flushall\"\n20) \"cluster\"\n21) \"info\"\n22) \"lastsave\"\n23) \"slaveof\"\n24) \"swapdb\"\n25) \"module\"\n26) \"restore\"\n27) \"migrate\"\n28) \"save\"\n29) \"shutdown\"\n30) \"psync\"\n31) \"sort\"\n</pre>\n<h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a list of ACL categories or a list of commands inside a given category. The command may return an error if an invalid category name is given as argument.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/acl-cat/\" class=\"_attribution-link\">https://redis.io/commands/acl-cat/</a>\n  </p>\n</div>\n","asking/index":"<h1 class=\"command-name\">ASKING</h1>\n<pre>ASKING</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ASKING</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>When a cluster client receives an <code>-ASK</code> redirect, the <code>ASKING</code> command is sent to the target node followed by the command which was redirected. This is normally done automatically by cluster clients.</p> <p>If an <code>-ASK</code> redirect is received during a transaction, only one ASKING command needs to be sent to the target node before sending the complete transaction to the target node.</p> <p>See <a href=\"https://redis.io/topics/cluster-spec#ask-redirection\">ASK redirection in the Redis Cluster Specification</a> for details.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code>.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/asking/\" class=\"_attribution-link\">https://redis.io/commands/asking/</a>\n  </p>\n</div>\n","bf.exists/index":"<h1 class=\"command-name\">BF.EXISTS</h1>\n<pre>BF.EXISTS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BF.EXISTS key item</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(k), where k is the number of hash functions used by the last sub-filter</dd> </dl> <p>Determines whether an item may exist in the Bloom Filter or not.</p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: The name of the filter</li> <li>\n<strong>item</strong>: The item to check for</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> - where \"1\" value means the item may exist in the filter, and a \"0\" value means it does not exist in the filter.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; BF.EXISTS bf item1\n(integer) 1\nredis&gt; BF.EXISTS bf item_new\n(integer) 0\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/bf.exists/\" class=\"_attribution-link\">https://redis.io/commands/bf.exists/</a>\n  </p>\n</div>\n","acl-list/index":"<h1 class=\"command-name\">ACL</h1>\n<pre>ACL LIST</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ACL LIST</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N). Where N is the number of configured users.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The command shows the currently active ACL rules in the Redis server. Each line in the returned array defines a different user, and the format is the same used in the redis.conf file or the external ACL file, so you can cut and paste what is returned by the ACL LIST command directly inside a configuration file if you wish (but make sure to check <a href=\"../acl-save\"><code>ACL SAVE</code></a>).</p> <h2 id=\"return\">Return</h2> <p>An array of strings.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; ACL LIST\n1) \"user antirez on #9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08 ~objects:* &amp;* +@all -@admin -@dangerous\"\n2) \"user default on nopass ~* &amp;* +@all\"\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/acl-list/\" class=\"_attribution-link\">https://redis.io/commands/acl-list/</a>\n  </p>\n</div>\n","bf.card/index":"<h1 class=\"command-name\">BF.CARD</h1>\n<pre>BF.CARD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BF.CARD key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.4.4</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Returns the cardinality of a Bloom filter - number of items that were added to a Bloom filter and detected as unique (items that caused at least one bit to be set in at least one sub-filter)</p> <p>(since RedisBloom 2.4.4)</p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: The name of the filter</li> </ul> <h2 id=\"return\">Return</h2> <ul> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> - the number of items that were added to this Bloom filter and detected as unique (items that caused at least one bit to be set in at least one sub-filter).</li> <li>0 when <code>key</code> does not exist.</li> <li>Error when <code>key</code> is of a type other than Bloom filter.</li> </ul> <p>Note: when <code>key</code> exists - return the same value as <code>BF.INFO key ITEMS</code>.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; BF.ADD bf1 item_foo\n(integer) 1\nredis&gt; BF.CARD bf1\n(integer) 1\nredis&gt; BF.CARD bf_new\n(integer) 0\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/bf.card/\" class=\"_attribution-link\">https://redis.io/commands/bf.card/</a>\n  </p>\n</div>\n","bf.insert/index":"<h1 class=\"command-name\">BF.INSERT</h1>\n<pre>BF.INSERT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BF.INSERT key [CAPACITYcapacity] [ERRORerror]\n  [EXPANSIONexpansion] [NOCREATE] [NONSCALING] ITEMS item [item\n  ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(k * n), where k is the number of hash functions and n is the number of items</dd> </dl> <p>BF.INSERT is a sugarcoated combination of BF.RESERVE and BF.ADD. It creates a new filter if the <code>key</code> does not exist using the relevant arguments (see BF.RESERVE). Next, all <code>ITEMS</code> are inserted.</p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: The name of the filter</li> <li>\n<strong>item</strong>: One or more items to add. The <code>ITEMS</code> keyword must precede the list of items to add.</li> </ul> <p>Optional parameters:</p> <ul> <li>\n<strong>NOCREATE</strong>: (Optional) Indicates that the filter should not be created if it does not already exist. If the filter does not yet exist, an error is returned rather than creating it automatically. This may be used where a strict separation between filter creation and filter addition is desired. It is an error to specify <code>NOCREATE</code> together with either <code>CAPACITY</code> or <code>ERROR</code>.</li> <li>\n<strong>capacity</strong>: (Optional) Specifies the desired <code>capacity</code> for the filter to be created. This parameter is ignored if the filter already exists. If the filter is automatically created and this parameter is absent, then the module-level <code>capacity</code> is used. See <a href=\"../bf.reserve\"><code>BF.RESERVE</code></a> for more information about the impact of this value.</li> <li>\n<strong>error</strong>: (Optional) Specifies the <code>error</code> ratio of the newly created filter if it does not yet exist. If the filter is automatically created and <code>error</code> is not specified then the module-level error rate is used. See <a href=\"../bf.reserve\"><code>BF.RESERVE</code></a> for more information about the format of this value.</li> <li>\n<strong>NONSCALING</strong>: Prevents the filter from creating additional sub-filters if initial capacity is reached. Non-scaling filters require slightly less memory than their scaling counterparts. The filter returns an error when <code>capacity</code> is reached.</li> <li>\n<strong>expansion</strong>: When <code>capacity</code> is reached, an additional sub-filter is created. The size of the new sub-filter is the size of the last sub-filter multiplied by <code>expansion</code>. If the number of elements to be stored in the filter is unknown, we recommend that you use an <code>expansion</code> of 2 or more to reduce the number of sub-filters. Otherwise, we recommend that you use an <code>expansion</code> of 1 to reduce memory consumption. The default expansion value is 2.</li> </ul> <h2 id=\"return\">Return</h2> <p>An array of booleans (integers). Each element is either true or false depending on whether the corresponding input element was newly added to the filter or may have previously existed.</p> <h2 id=\"examples\">Examples</h2> <p>Add three items to a filter with default parameters if the filter does not already exist:</p> <pre tabindex=\"0\">BF.INSERT filter ITEMS foo bar baz\n</pre>\n<p>Add one item to a filter with a capacity of 10000 if the filter does not already exist:</p> <pre tabindex=\"0\">BF.INSERT filter CAPACITY 10000 ITEMS hello\n</pre>\n<p>Add 2 items to a filter with an error if the filter does not already exist:</p> <pre tabindex=\"0\">BF.INSERT filter NOCREATE ITEMS foo bar\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/bf.insert/\" class=\"_attribution-link\">https://redis.io/commands/bf.insert/</a>\n  </p>\n</div>\n","bf.info/index":"<h1 class=\"command-name\">BF.INFO</h1>\n<pre>BF.INFO</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BF.INFO key [CAPACITY | SIZE | FILTERS | ITEMS | EXPANSION]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Return information about a Bloom filter.</p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: key name for an existing Bloom filter.</li> </ul> <p>Optional parameters:</p> <ul> <li>\n<code>CAPACITY</code> Number of unique items that can be stored in this Bloom filter before scaling would be required (including already added items)</li> <li>\n<code>SIZE</code> Memory size: number of bytes allocated for this Bloom filter</li> <li>\n<code>FILTERS</code> Number of sub-filters</li> <li>\n<code>ITEMS</code> Number of items that were added to this Bloom filter and detected as unique (items that caused at least one bit to be set in at least one sub-filter)</li> <li>\n<code>EXPANSION</code> Expansion rate</li> </ul> <p>When no optional parameter is specified: return all information fields.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> with information about the Bloom filter.</p> <p>Error when <code>key</code> does not exist.</p> <p>Error when <code>key</code> is of a type other than Bloom filter.</p> <h2 id=\"examples\">Examples</h2> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\"><span class=\"n\">redis</span><span class=\"o\">&gt;</span><span class=\"n\">BF</span><span class=\"p\">.</span><span class=\"k\">ADD</span><span class=\"n\">bf1</span><span class=\"n\">observation1</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"p\">(</span><span class=\"nb\">integer</span><span class=\"p\">)</span><span class=\"mi\">1</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"n\">redis</span><span class=\"o\">&gt;</span><span class=\"n\">BF</span><span class=\"p\">.</span><span class=\"n\">INFO</span><span class=\"n\">bf1</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"mi\">1</span><span class=\"p\">)</span><span class=\"n\">Capacity</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"mi\">2</span><span class=\"p\">)</span><span class=\"p\">(</span><span class=\"nb\">integer</span><span class=\"p\">)</span><span class=\"mi\">100</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"mi\">3</span><span class=\"p\">)</span><span class=\"k\">Size</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"mi\">4</span><span class=\"p\">)</span><span class=\"p\">(</span><span class=\"nb\">integer</span><span class=\"p\">)</span><span class=\"mi\">240</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"mi\">5</span><span class=\"p\">)</span><span class=\"nb\">Number</span><span class=\"k\">of</span><span class=\"n\">filters</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"mi\">6</span><span class=\"p\">)</span><span class=\"p\">(</span><span class=\"nb\">integer</span><span class=\"p\">)</span><span class=\"mi\">1</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"mi\">7</span><span class=\"p\">)</span><span class=\"nb\">Number</span><span class=\"k\">of</span><span class=\"n\">items</span><span class=\"n\">inserted</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"mi\">8</span><span class=\"p\">)</span><span class=\"p\">(</span><span class=\"nb\">integer</span><span class=\"p\">)</span><span class=\"mi\">1</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"mi\">9</span><span class=\"p\">)</span><span class=\"n\">Expansion</span><span class=\"n\">rate</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"mi\">10</span><span class=\"p\">)</span><span class=\"p\">(</span><span class=\"nb\">integer</span><span class=\"p\">)</span><span class=\"mi\">2</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"n\">redis</span><span class=\"o\">&gt;</span><span class=\"n\">BF</span><span class=\"p\">.</span><span class=\"n\">INFO</span><span class=\"n\">bf1</span><span class=\"n\">CAPACITY</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"mi\">1</span><span class=\"p\">)</span><span class=\"p\">(</span><span class=\"nb\">integer</span><span class=\"p\">)</span><span class=\"mi\">100</span></span></span></pre></div><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/bf.info/\" class=\"_attribution-link\">https://redis.io/commands/bf.info/</a>\n  </p>\n</div>\n","acl-whoami/index":"<h1 class=\"command-name\">ACL</h1>\n<pre>ACL WHOAMI</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ACL WHOAMI</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Return the username the current connection is authenticated with. New connections are authenticated with the \"default\" user. They can change user using <a href=\"../auth\"><code>AUTH</code></a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the username of the current connection.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; ACL WHOAMI\n\"default\"\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/acl-whoami/\" class=\"_attribution-link\">https://redis.io/commands/acl-whoami/</a>\n  </p>\n</div>\n","append/index":"<h1 class=\"command-name\">APPEND</h1>\n<pre>APPEND</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">APPEND key value</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1). The amortized time complexity is O(1) assuming the appended value is small and the already present value is of any size, since the dynamic string library used by Redis will double the free space available on every reallocation.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@string</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>If <code>key</code> already exists and is a string, this command appends the <code>value</code> at the end of the string. If <code>key</code> does not exist it is created and set as an empty string, so <code>APPEND</code> will be similar to <a href=\"../set\"><code>SET</code></a> in this special case.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the length of the string after the append operation.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nEXISTS mykey\nAPPEND mykey \"Hello\"\nAPPEND mykey \" World\"\nGET mykey\n</pre> <h2 id=\"pattern-time-series\">Pattern: Time series</h2> <p>The <code>APPEND</code> command can be used to create a very compact representation of a list of fixed-size samples, usually referred as <em>time series</em>. Every time a new sample arrives we can store it using the command</p> <pre tabindex=\"0\">APPEND timeseries \"fixed-size sample\"\n</pre>\n<p>Accessing individual elements in the time series is not hard:</p> <ul> <li>\n<a href=\"../strlen\"><code>STRLEN</code></a> can be used in order to obtain the number of samples.</li> <li>\n<a href=\"../getrange\"><code>GETRANGE</code></a> allows for random access of elements. If our time series have associated time information we can easily implement a binary search to get range combining <a href=\"../getrange\"><code>GETRANGE</code></a> with the Lua scripting engine available in Redis 2.6.</li> <li>\n<a href=\"../setrange\"><code>SETRANGE</code></a> can be used to overwrite an existing time series.</li> </ul> <p>The limitation of this pattern is that we are forced into an append-only mode of operation, there is no way to cut the time series to a given size easily because Redis currently lacks a command able to trim string objects. However the space efficiency of time series stored in this way is remarkable.</p> <p>Hint: it is possible to switch to a different key based on the current Unix time, in this way it is possible to have just a relatively small amount of samples per key, to avoid dealing with very big keys, and to make this pattern more friendly to be distributed across many Redis instances.</p> <p>An example sampling the temperature of a sensor using fixed-size strings (using a binary format is better in real implementations).</p>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nAPPEND ts \"0043\"\nAPPEND ts \"0035\"\nGETRANGE ts 0 3\nGETRANGE ts 4 7\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/append/\" class=\"_attribution-link\">https://redis.io/commands/append/</a>\n  </p>\n</div>\n","bf.loadchunk/index":"<h1 class=\"command-name\">BF.LOADCHUNK</h1>\n<pre>BF.LOADCHUNK</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BF.LOADCHUNK key iterator data</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(n), where n is the capacity</dd> </dl> <p>Restores a filter previously saved using <code>SCANDUMP</code>. See the <code>SCANDUMP</code> command for example usage.</p> <p>This command overwrites any bloom filter stored under <code>key</code>. Make sure that the bloom filter is not be changed between invocations.</p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: Name of the key to restore</li> <li>\n<strong>iter</strong>: Iterator value associated with <code>data</code> (returned by <code>SCANDUMP</code>)</li> <li>\n<strong>data</strong>: Current data chunk (returned by <code>SCANDUMP</code>)</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> - <code>OK</code> if executed correctly, or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> otherwise.</p> <h2 id=\"examples\">Examples</h2> <p>See BF.SCANDUMP for an example.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/bf.loadchunk/\" class=\"_attribution-link\">https://redis.io/commands/bf.loadchunk/</a>\n  </p>\n</div>\n","bf.scandump/index":"<h1 class=\"command-name\">BF.SCANDUMP</h1>\n<pre>BF.SCANDUMP</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BF.SCANDUMP key iterator</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(n), where n is the capacity</dd> </dl> <p>Begins an incremental save of the bloom filter. This is useful for large bloom filters which cannot fit into the normal <a href=\"../dump\"><code>DUMP</code></a> and <a href=\"../restore\"><code>RESTORE</code></a> model.</p> <p>The first time this command is called, the value of <code>iter</code> should be 0. This command returns successive <code>(iter, data)</code> pairs until <code>(0, NULL)</code> to indicate completion.</p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: Name of the filter</li> <li>\n<strong>iter</strong>: Iterator value; either 0 or the iterator from a previous invocation of this command</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of <a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> (<em>Iterator</em>) and [] (<em>Data</em>). The Iterator is passed as input to the next invocation of <code>SCANDUMP</code>. If <em>Iterator</em> is 0, then it means iteration has completed.</p> <p>The iterator-data pair should also be passed to <code>LOADCHUNK</code> when restoring the filter.</p> <p>@example</p> <pre tabindex=\"0\">redis&gt; BF.RESERVE bf 0.1 10\nOK\nredis&gt; BF.ADD bf item1\n1) (integer) 1\nredis&gt; BF.SCANDUMP bf 0\n1) (integer) 1\n2) \"\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x05\\x00\\x00\\x00\\x02\\x00\\x00\\x00\\b\\x00\\x00\\x00\\x00\\x00\\x00\\x00@\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x9a\\x99\\x99\\x99\\x99\\x99\\xa9?J\\xf7\\xd4\\x9e\\xde\\xf0\\x18@\\x05\\x00\\x00\\x00\\n\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\"\nredis&gt; BF.SCANDUMP bf 1\n1) (integer) 9\n2) \"\\x01\\b\\x00\\x80\\x00\\x04 \\x00\"\nredis&gt; BF.SCANDUMP bf 9\n1) (integer) 0\n2) \"\"\nredis&gt; FLUSHALL\nOK\nredis&gt; BF.LOADCHUNK bf 1 \"\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x05\\x00\\x00\\x00\\x02\\x00\\x00\\x00\\b\\x00\\x00\\x00\\x00\\x00\\x00\\x00@\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x9a\\x99\\x99\\x99\\x99\\x99\\xa9?J\\xf7\\xd4\\x9e\\xde\\xf0\\x18@\\x05\\x00\\x00\\x00\\n\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\"\nOK\nredis&gt; BF.LOADCHUNK bf 9 \"\\x01\\b\\x00\\x80\\x00\\x04 \\x00\"\nOK\nredis&gt; BF.EXISTS bf item1\n(integer) 1\n</pre>\n<p>python code:</p> <pre tabindex=\"0\">chunks = []\niter = 0\nwhile True:\n    iter, data = BF.SCANDUMP(key, iter)\n    if iter == 0:\n        break\n    else:\n        chunks.append([iter, data])\n\n# Load it back\nfor chunk in chunks:\n    iter, data = chunk\n    BF.LOADCHUNK(key, iter, data)\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/bf.scandump/\" class=\"_attribution-link\">https://redis.io/commands/bf.scandump/</a>\n  </p>\n</div>\n","acl-getuser/index":"<h1 class=\"command-name\">ACL</h1>\n<pre>ACL GETUSER</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ACL GETUSER username</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N). Where N is the number of password, command and pattern rules that the user has.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The command returns all the rules defined for an existing ACL user.</p> <p>Specifically, it lists the user's ACL flags, password hashes, commands, key patterns, channel patterns (Added in version 6.2) and selectors (Added in version 7.0). Additional information may be returned in the future if more metadata is added to the user.</p> <p>Command rules are always returned in the same format as the one used in the <a href=\"../acl-setuser\"><code>ACL SETUSER</code></a> command. Before version 7.0, keys and channels were returned as an array of patterns, however in version 7.0 later they are now also returned in same format as the one used in the <a href=\"../acl-setuser\"><code>ACL SETUSER</code></a> command. Note: This description of command rules reflects the user's effective permissions, so while it may not be identical to the set of rules used to configure the user, it is still functionally identical.</p> <p>Selectors are listed in the order they were applied to the user, and include information about commands, key patterns, and channel patterns.</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a list of ACL rule definitions for the user.</p> <p>If <code>user</code> does not exist a <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Null reply</a> is returned.</p> <h2 id=\"examples\">Examples</h2> <p>Here's an example configuration for a user</p> <pre tabindex=\"0\">&gt; ACL SETUSER sample on nopass +GET allkeys &amp;* (+SET ~key2)\n\"OK\"\n&gt; ACL GETUSER sample\n1) \"flags\"\n2) 1) \"on\"\n   2) \"allkeys\"\n   3) \"nopass\"\n3) \"passwords\"\n4) (empty array)\n5) \"commands\"\n6) \"+@all\"\n7) \"keys\"\n8) \"~*\"\n9) \"channels\"\n10) \"&amp;*\"\n11) \"selectors\"\n12) 1) 1) \"commands\"\n       6) \"+SET\"\n       7) \"keys\"\n       8) \"~key2\"\n       9) \"channels\"\n       10) \"&amp;*\"\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 6.2.0: Added Pub/Sub channel patterns.</li> <li>Starting with Redis version 7.0.0: Added selectors and changed the format of key and channel patterns from a list to their rule representation.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/acl-getuser/\" class=\"_attribution-link\">https://redis.io/commands/acl-getuser/</a>\n  </p>\n</div>\n","bf.mexists/index":"<h1 class=\"command-name\">BF.MEXISTS</h1>\n<pre>BF.MEXISTS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BF.MEXISTS key item [item ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(k * n), where k is the number of hash functions and n is the number of items</dd> </dl> <p>Determines if one or more items may exist in the filter or not.</p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: The name of the filter</li> <li>\n<strong>items</strong>: One or more items to check</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of <a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> - for each item where \"1\" value means the corresponding item may exist in the filter, and a \"0\" value means it does not exist in the filter.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; BF.MEXISTS bf item1 item_new\n1) (integer) 1\n2) (integer) 0\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/bf.mexists/\" class=\"_attribution-link\">https://redis.io/commands/bf.mexists/</a>\n  </p>\n</div>\n","bf.madd/index":"<h1 class=\"command-name\">BF.MADD</h1>\n<pre>BF.MADD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BF.MADD key item [item ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(k * n), where k is the number of hash functions and n is the number of items</dd> </dl> <p>Adds one or more items to the Bloom Filter and creates the filter if it does not exist yet. This command operates identically to <a href=\"../bf.add\"><code>BF.ADD</code></a> except that it allows multiple inputs and returns multiple values.</p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: The name of the filter</li> <li>\n<strong>item</strong>: One or more items to add</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of <a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> - for each item which is either \"1\" or \"0\" depending on whether the corresponding input element was newly added to the filter or may have previously existed.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; BF.MADD bf item1 item2\n1) (integer) 0\n2) (integer) 1\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/bf.madd/\" class=\"_attribution-link\">https://redis.io/commands/bf.madd/</a>\n  </p>\n</div>\n","bf.reserve/index":"<h1 class=\"command-name\">BF.RESERVE</h1>\n<pre>BF.RESERVE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BF.RESERVE key error_rate capacity [EXPANSIONexpansion]\n  [NONSCALING]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Creates an empty Bloom Filter with a single sub-filter for the initial capacity requested and with an upper bound <code>error_rate</code>. By default, the filter auto-scales by creating additional sub-filters when <code>capacity</code> is reached. The new sub-filter is created with size of the previous sub-filter multiplied by <code>expansion</code>.</p> <p>Though the filter can scale up by creating sub-filters, it is recommended to reserve the estimated required <code>capacity</code> since maintaining and querying sub-filters requires additional memory (each sub-filter uses an extra bits and hash function) and consume further CPU time than an equivalent filter that had the right capacity at creation time.</p> <p>The number of hash functions is <code>-log(error)/ln(2)^2</code>. The number of bits per item is <code>-log(error)/ln(2)</code>  1.44.</p> <ul> <li>\n<strong>1%</strong> error rate requires 7 hash functions and 10.08 bits per item.</li> <li>\n<strong>0.1%</strong> error rate requires 10 hash functions and 14.4 bits per item.</li> <li>\n<strong>0.01%</strong> error rate requires 14 hash functions and 20.16 bits per item.</li> </ul> <h3 id=\"parameters\">Parameters:</h3> <ul> <li>\n<strong>key</strong>: The key under which the filter is found</li> <li>\n<strong>error_rate</strong>: The desired probability for false positives. The rate is a decimal value between 0 and 1. For example, for a desired false positive rate of 0.1% (1 in 1000), error_rate should be set to 0.001.</li> <li>\n<strong>capacity</strong>: The number of entries intended to be added to the filter. If your filter allows scaling, performance will begin to degrade after adding more items than this number. The actual degradation depends on how far the limit has been exceeded. Performance degrades linearly with the number of <code>sub-filters</code>.</li> </ul> <p>Optional parameters:</p> <ul> <li>\n<strong>NONSCALING</strong>: Prevents the filter from creating additional sub-filters if initial capacity is reached. Non-scaling filters requires slightly less memory than their scaling counterparts. The filter returns an error when <code>capacity</code> is reached.</li> <li>\n<strong>EXPANSION</strong>: When <code>capacity</code> is reached, an additional sub-filter is created. The size of the new sub-filter is the size of the last sub-filter multiplied by <code>expansion</code>. If the number of elements to be stored in the filter is unknown, we recommend that you use an <code>expansion</code> of 2 or more to reduce the number of sub-filters. Otherwise, we recommend that you use an <code>expansion</code> of 1 to reduce memory consumption. The default expansion value is 2.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> - <code>OK</code> if executed correctly, or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> otherwise.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; BF.RESERVE bf 0.01 1000\nOK\n</pre>\n<pre tabindex=\"0\">redis&gt; BF.RESERVE bf 0.01 1000\n(error) ERR item exists\n</pre>\n<pre tabindex=\"0\">redis&gt; BF.RESERVE bf_exp 0.01 1000 EXPANSION 2\nOK\n</pre>\n<pre tabindex=\"0\">redis&gt; BF.RESERVE bf_non 0.01 1000 NONSCALING\nOK\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/bf.reserve/\" class=\"_attribution-link\">https://redis.io/commands/bf.reserve/</a>\n  </p>\n</div>\n","acl-deluser/index":"<h1 class=\"command-name\">ACL</h1>\n<pre>ACL DELUSER</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ACL DELUSER username [username ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) amortized time considering the typical user.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Delete all the specified ACL users and terminate all the connections that are authenticated with such users. Note: the special <code>default</code> user cannot be removed from the system, this is the default user that every new connection is authenticated with. The list of users may include usernames that do not exist, in such case no operation is performed for the non existing users.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: The number of users that were deleted. This number will not always match the number of arguments since certain users may not exist.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; ACL DELUSER antirez\n1\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/acl-deluser/\" class=\"_attribution-link\">https://redis.io/commands/acl-deluser/</a>\n  </p>\n</div>\n","bitcount/index":"<h1 class=\"command-name\">BITCOUNT</h1>\n<pre>BITCOUNT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BITCOUNT key [start end [BYTE | BIT]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.6.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@bitmap</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Count the number of set bits (population counting) in a string.</p> <p>By default all the bytes contained in the string are examined. It is possible to specify the counting operation only in an interval passing the additional arguments <em>start</em> and <em>end</em>.</p> <p>Like for the <a href=\"../getrange\"><code>GETRANGE</code></a> command start and end can contain negative values in order to index bytes starting from the end of the string, where -1 is the last byte, -2 is the penultimate, and so forth.</p> <p>Non-existent keys are treated as empty strings, so the command will return zero.</p> <p>By default, the additional arguments <em>start</em> and <em>end</em> specify a byte index. We can use an additional argument <code>BIT</code> to specify a bit index. So 0 is the first bit, 1 is the second bit, and so forth. For negative values, -1 is the last bit, -2 is the penultimate, and so forth.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a></p> <p>The number of bits set to 1.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"foobar\"\nBITCOUNT mykey\nBITCOUNT mykey 0 0\nBITCOUNT mykey 1 1\nBITCOUNT mykey 1 1 BYTE\nBITCOUNT mykey 5 30 BIT\n</pre> <h2 id=\"pattern-real-time-metrics-using-bitmaps\">Pattern: real-time metrics using bitmaps</h2> <p>Bitmaps are a very space-efficient representation of certain kinds of information. One example is a Web application that needs the history of user visits, so that for instance it is possible to determine what users are good targets of beta features.</p> <p>Using the <a href=\"../setbit\"><code>SETBIT</code></a> command this is trivial to accomplish, identifying every day with a small progressive integer. For instance day 0 is the first day the application was put online, day 1 the next day, and so forth.</p> <p>Every time a user performs a page view, the application can register that in the current day the user visited the web site using the <a href=\"../setbit\"><code>SETBIT</code></a> command setting the bit corresponding to the current day.</p> <p>Later it will be trivial to know the number of single days the user visited the web site simply calling the <code>BITCOUNT</code> command against the bitmap.</p> <p>A similar pattern where user IDs are used instead of days is described in the article called \"<a href=\"http://blog.getspool.com/2011/11/29/fast-easy-realtime-metrics-using-redis-bitmaps\">Fast easy realtime metrics using Redis bitmaps</a>\".</p> <h2 id=\"performance-considerations\">Performance considerations</h2> <p>In the above example of counting days, even after 10 years the application is online we still have just <code>365*10</code> bits of data per user, that is just 456 bytes per user. With this amount of data <code>BITCOUNT</code> is still as fast as any other O(1) Redis command like <a href=\"../get\"><code>GET</code></a> or <a href=\"../incr\"><code>INCR</code></a>.</p> <p>When the bitmap is big, there are two alternatives:</p> <ul> <li>Taking a separated key that is incremented every time the bitmap is modified. This can be very efficient and atomic using a small Redis Lua script.</li> <li>Running the bitmap incrementally using the <code>BITCOUNT</code> <em>start</em> and <em>end</em> optional parameters, accumulating the results client-side, and optionally caching the result into a key.</li> </ul> <h2>History</h2> <ul> <li>Starting with Redis version 7.0.0: Added the <code>BYTE|BIT</code> option.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/bitcount/\" class=\"_attribution-link\">https://redis.io/commands/bitcount/</a>\n  </p>\n</div>\n","bgsave/index":"<h1 class=\"command-name\">BGSAVE</h1>\n<pre>BGSAVE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BGSAVE [SCHEDULE]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Save the DB in background.</p> <p>Normally the OK code is immediately returned. Redis forks, the parent continues to serve the clients, the child saves the DB on disk then exits.</p> <p>An error is returned if there is already a background save running or if there is another non-background-save process running, specifically an in-progress AOF rewrite.</p> <p>If <code>BGSAVE SCHEDULE</code> is used, the command will immediately return <code>OK</code> when an AOF rewrite is in progress and schedule the background save to run at the next opportunity.</p> <p>A client may be able to check if the operation succeeded using the <a href=\"../lastsave\"><code>LASTSAVE</code></a> command.</p> <p>Please refer to the <a href=\"https://redis.io/topics/persistence\">persistence documentation</a> for detailed information.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>Background saving started</code> if <code>BGSAVE</code> started correctly or <code>Background saving scheduled</code> when used with the <code>SCHEDULE</code> subcommand.</p> <h2>History</h2> <ul> <li>Starting with Redis version 3.2.2: Added the <code>SCHEDULE</code> option.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/bgsave/\" class=\"_attribution-link\">https://redis.io/commands/bgsave/</a>\n  </p>\n</div>\n","bitfield_ro/index":"<h1 class=\"command-name\">BITFIELD_RO</h1>\n<pre>BITFIELD_RO</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BITFIELD_RO key [GETencoding offset [GET encoding offset ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) for each subcommand specified</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@bitmap</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Read-only variant of the <a href=\"../bitfield\"><code>BITFIELD</code></a> command. It is like the original <a href=\"../bitfield\"><code>BITFIELD</code></a> but only accepts <code>GET</code> subcommand and can safely be used in read-only replicas.</p> <p>Since the original <a href=\"../bitfield\"><code>BITFIELD</code></a> has <code>SET</code> and <code>INCRBY</code> options it is technically flagged as a writing command in the Redis command table. For this reason read-only replicas in a Redis Cluster will redirect it to the master instance even if the connection is in read-only mode (see the <a href=\"../readonly\"><code>READONLY</code></a> command of Redis Cluster).</p> <p>Since Redis 6.2, the <code>BITFIELD_RO</code> variant was introduced in order to allow <a href=\"../bitfield\"><code>BITFIELD</code></a> behavior in read-only replicas without breaking compatibility on command flags.</p> <p>See original <a href=\"../bitfield\"><code>BITFIELD</code></a> for more details.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">BITFIELD_RO hello GET i8 16\n</pre>\n<h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: An array with each entry being the corresponding result of the subcommand given at the same position.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/bitfield_ro/\" class=\"_attribution-link\">https://redis.io/commands/bitfield_ro/</a>\n  </p>\n</div>\n","bgrewriteaof/index":"<h1 class=\"command-name\">BGREWRITEAOF</h1>\n<pre>BGREWRITEAOF</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BGREWRITEAOF</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Instruct Redis to start an <a href=\"https://redis.io/topics/persistence#append-only-file\">Append Only File</a> rewrite process. The rewrite will create a small optimized version of the current Append Only File.</p> <p>If <code>BGREWRITEAOF</code> fails, no data gets lost as the old AOF will be untouched.</p> <p>The rewrite will be only triggered by Redis if there is not already a background process doing persistence.</p> <p>Specifically:</p> <ul> <li>If a Redis child is creating a snapshot on disk, the AOF rewrite is <em>scheduled</em> but not started until the saving child producing the RDB file terminates. In this case the <code>BGREWRITEAOF</code> will still return a positive status reply, but with an appropriate message. You can check if an AOF rewrite is scheduled looking at the <a href=\"../info\"><code>INFO</code></a> command as of Redis 2.6 or successive versions.</li> <li>If an AOF rewrite is already in progress the command returns an error and no AOF rewrite will be scheduled for a later time.</li> <li>If the AOF rewrite could start, but the attempt at starting it fails (for instance because of an error in creating the child process), an error is returned to the caller.</li> </ul> <p>Since Redis 2.4 the AOF rewrite is automatically triggered by Redis, however the <code>BGREWRITEAOF</code> command can be used to trigger a rewrite at any time.</p> <p>Please refer to the <a href=\"https://redis.io/topics/persistence\">persistence documentation</a> for detailed information.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: A simple string reply indicating that the rewriting started or is about to start ASAP, when the call is executed with success.</p> <p>The command may reply with an error in certain cases, as documented above.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/bgrewriteaof/\" class=\"_attribution-link\">https://redis.io/commands/bgrewriteaof/</a>\n  </p>\n</div>\n","acl-setuser/index":"<h1 class=\"command-name\">ACL</h1>\n<pre>ACL SETUSER</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ACL SETUSER username [rule [rule ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N). Where N is the number of rules provided.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Create an ACL user with the specified rules or modify the rules of an existing user.</p> <p>Manipulate Redis ACL users interactively. If the username does not exist, the command creates the username without any privilege. It then reads from left to right all the <a href=\"#acl-rules\">rules</a> provided as successive arguments, setting the user ACL rules as specified. If the user already exists, the provided ACL rules are simply applied <em>in addition</em> to the rules already set. For example:</p> <pre>ACL SETUSER virginia on allkeys +set\n</pre> <p>The above command creates a user called <code>virginia</code> who is active(the <em>on</em> rule), can access any key (<em>allkeys</em> rule), and can call the set command (<em>+set</em> rule). Then, you can use another <code>ACL SETUSER</code> call to modify the user rules:</p> <pre>ACL SETUSER virginia +get\n</pre> <p>The above rule applies the new rule to the user <code>virginia</code>, so other than <a href=\"../set\"><code>SET</code></a>, the user <code>virginia</code> can now also use the <a href=\"../get\"><code>GET</code></a> command.</p> <p>Starting from Redis 7.0, ACL rules can also be grouped into multiple distinct sets of rules, called <em>selectors</em>. Selectors are added by wrapping the rules in parentheses and providing them just like any other rule. In order to execute a command, either the root permissions (rules defined outside of parenthesis) or any of the selectors (rules defined inside parenthesis) must match the given command. For example:</p> <pre>ACL SETUSER virginia on +GET allkeys (+SET ~app1*)\n</pre> <p>This sets a user with two sets of permissions, one defined on the user and one defined with a selector. The root user permissions only allow executing the get command, but can be executed on any keys. The selector then grants a secondary set of permissions: access to the <a href=\"../set\"><code>SET</code></a> command to be executed on any key that starts with <code>app1</code>. Using multiple selectors allows you to grant permissions that are different depending on what keys are being accessed.</p> <p>When we want to be sure to define a user from scratch, without caring if it had previously defined rules associated, we can use the special rule <code>reset</code> as first rule, in order to flush all the other existing rules:</p> <pre>ACL SETUSER antirez reset [... other rules ...]\n</pre> <p>After resetting a user, its ACL rules revert to the default: inactive, passwordless, can't execute any command nor access any key or channel:</p> <pre>&gt; ACL SETUSER antirez reset\n+OK\n&gt; ACL LIST\n1) \"user antirez off -@all\"\n</pre> <p>ACL rules are either words like \"on\", \"off\", \"reset\", \"allkeys\", or are special rules that start with a special character, and are followed by another string (without any space in between), like \"+SET\".</p> <p>The following documentation is a reference manual about the capabilities of this command, however our <a href=\"https://redis.io/topics/acl\">ACL tutorial</a> may be a more gentle introduction to how the ACL system works in general.</p> <h2 id=\"acl-rules\">ACL rules</h2> <p>Redis ACL rules are split into two categories: rules that define command permissions or <em>command rules</em>, and rules that define the user state or <em>user management rules</em>. This is a list of all the supported Redis ACL rules:</p> <h3 id=\"command-rules\">Command rules</h3> <ul> <li>\n<code>~&lt;pattern&gt;</code>: Adds the specified key pattern (glob style pattern, like in the <a href=\"../keys\"><code>KEYS</code></a> command), to the list of key patterns accessible by the user. This grants both read and write permissions to keys that match the pattern. You can add multiple key patterns to the same user. Example: <code>~objects:*</code>\n</li> <li>\n<code>%R~&lt;pattern&gt;</code>: (Available in Redis 7.0 and later) Adds the specified read key pattern. This behaves similar to the regular key pattern but only grants permission to read from keys that match the given pattern. See <a href=\"https://redis.io/topics/acl#key-permissions\">key permissions</a> for more information.</li> <li>\n<code>%W~&lt;pattern&gt;</code>: (Available in Redis 7.0 and later) Adds the specified write key pattern. This behaves similar to the regular key pattern but only grants permission to write to keys that match the given pattern. See <a href=\"https://redis.io/topics/acl#key-permissions\">key permissions</a> for more information.</li> <li>\n<code>%RW~&lt;pattern&gt;</code>: (Available in Redis 7.0 and later) Alias for <code>~&lt;pattern&gt;</code>.</li> <li>\n<code>allkeys</code>: Alias for <code>~*</code>, it allows the user to access all the keys.</li> <li>\n<code>resetkeys</code>: Removes all the key patterns from the list of key patterns the user can access.</li> <li>\n<code>&amp;&lt;pattern&gt;</code>: (Available in Redis 6.2 and later) Adds the specified glob style pattern to the list of Pub/Sub channel patterns accessible by the user. You can add multiple channel patterns to the same user. Example: <code>&amp;chatroom:*</code>\n</li> <li>\n<code>allchannels</code>: Alias for <code>&amp;*</code>, it allows the user to access all Pub/Sub channels.</li> <li>\n<code>resetchannels</code>: Removes all channel patterns from the list of Pub/Sub channel patterns the user can access.</li> <li>\n<code>+&lt;command&gt;</code>: Adds the command to the list of commands the user can call. Can be used with <code>|</code> for allowing subcommands (e.g \"+config|get\").</li> <li>\n<code>+@&lt;category&gt;</code>: Adds all the commands in the specified category to the list of commands the user is able to execute. Example: <code>+@string</code> (adds all the string commands). For a list of categories, check the <a href=\"../acl-cat\"><code>ACL CAT</code></a> command.</li> <li>\n<code>+&lt;command&gt;|first-arg</code>: Allows a specific first argument of an otherwise disabled command. It is only supported on commands with no sub-commands, and is not allowed as negative form like -SELECT|1, only additive starting with \"+\". This feature is deprecated and may be removed in the future.</li> <li>\n<code>allcommands</code>: Alias of <code>+@all</code>. Adds all the commands there are in the server, including <em>future commands</em> loaded via module, to be executed by this user.</li> <li>\n<code>-&lt;command&gt;</code>: Remove the command to the list of commands the user can call. Starting Redis 7.0, it can be used with <code>|</code> for blocking subcommands (e.g., \"-config|set\").</li> <li>\n<code>-@&lt;category&gt;</code>: Like <code>+@&lt;category&gt;</code> but removes all the commands in the category instead of adding them.</li> <li>\n<code>nocommands</code>: Alias for <code>-@all</code>. Removes all the commands, and the user is no longer able to execute anything.</li> </ul> <h3 id=\"user-management-rules\">User management rules</h3> <ul> <li>\n<code>on</code>: Set the user as active, it will be possible to authenticate as this user using <code>AUTH &lt;username&gt; &lt;password&gt;</code>.</li> <li>\n<code>off</code>: Set user as not active, it will be impossible to log as this user. Please note that if a user gets disabled (set to off) after there are connections already authenticated with such a user, the connections will continue to work as expected. To also kill the old connections you can use <a href=\"../client-kill\"><code>CLIENT KILL</code></a> with the user option. An alternative is to delete the user with <a href=\"../acl-deluser\"><code>ACL DELUSER</code></a>, that will result in all the connections authenticated as the deleted user to be disconnected.</li> <li>\n<code>nopass</code>: The user is set as a <em>no password</em> user. It means that it will be possible to authenticate as such user with any password. By default, the <code>default</code> special user is set as \"nopass\". The <code>nopass</code> rule will also reset all the configured passwords for the user.</li> <li>\n<code>&gt;password</code>: Adds the specified clear text password as a hashed password in the list of the users passwords. Every user can have many active passwords, so that password rotation will be simpler. The specified password is not stored as clear text inside the server. Example: <code>&gt;mypassword</code>.</li> <li>\n<code>#&lt;hashedpassword&gt;</code>: Adds the specified hashed password to the list of user passwords. A Redis hashed password is hashed with SHA256 and translated into a hexadecimal string. Example: <code>#c3ab8ff13720e8ad9047dd39466b3c8974e592c2fa383d4a3960714caef0c4f2</code>.</li> <li>\n<code>&lt;password</code>: Like <code>&gt;password</code> but removes the password instead of adding it.</li> <li>\n<code>!&lt;hashedpassword&gt;</code>: Like <code>#&lt;hashedpassword&gt;</code> but removes the password instead of adding it.</li> <li>\n<code>(&lt;rule list&gt;)</code>: (Available in Redis 7.0 and later) Creates a new selector to match rules against. Selectors are evaluated after the user permissions, and are evaluated according to the order they are defined. If a command matches either the user permissions or any selector, it is allowed. See <a href=\"https://redis.io/docs/management/security/acl#selectors\">selectors</a> for more information.</li> <li>\n<code>clearselectors</code>: (Available in Redis 7.0 and later) Deletes all of the selectors attached to the user.</li> <li>\n<code>reset</code>: Removes any capability from the user. They are set to off, without passwords, unable to execute any command, unable to access any key.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> on success.</p> <p>If the rules contain errors, the error is returned.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; ACL SETUSER alan allkeys +@string +@set -SADD &gt;alanpassword\n+OK\n\n&gt; ACL SETUSER antirez heeyyyy\n(error) ERR Error in ACL SETUSER modifier 'heeyyyy': Syntax error\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 6.2.0: Added Pub/Sub channel patterns.</li> <li>Starting with Redis version 7.0.0: Added selectors and key based permissions.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/acl-setuser/\" class=\"_attribution-link\">https://redis.io/commands/acl-setuser/</a>\n  </p>\n</div>\n","bitop/index":"<h1 class=\"command-name\">BITOP</h1>\n<pre>BITOP</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BITOP &lt;AND | OR | XOR | NOT&gt; destkey key [key ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.6.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@bitmap</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Perform a bitwise operation between multiple keys (containing string values) and store the result in the destination key.</p> <p>The <code>BITOP</code> command supports four bitwise operations: <strong>AND</strong>, <strong>OR</strong>, <strong>XOR</strong> and <strong>NOT</strong>, thus the valid forms to call the command are:</p> <ul> <li><code>BITOP AND destkey srckey1 srckey2 srckey3 ... srckeyN</code></li> <li><code>BITOP OR  destkey srckey1 srckey2 srckey3 ... srckeyN</code></li> <li><code>BITOP XOR destkey srckey1 srckey2 srckey3 ... srckeyN</code></li> <li><code>BITOP NOT destkey srckey</code></li> </ul> <p>As you can see <strong>NOT</strong> is special as it only takes an input key, because it performs inversion of bits so it only makes sense as a unary operator.</p> <p>The result of the operation is always stored at <code>destkey</code>.</p> <h2 id=\"handling-of-strings-with-different-lengths\">Handling of strings with different lengths</h2> <p>When an operation is performed between strings having different lengths, all the strings shorter than the longest string in the set are treated as if they were zero-padded up to the length of the longest string.</p> <p>The same holds true for non-existent keys, that are considered as a stream of zero bytes up to the length of the longest string.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a></p> <p>The size of the string stored in the destination key, that is equal to the size of the longest input string.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET key1 \"foobar\"\nSET key2 \"abcdef\"\nBITOP AND dest key1 key2\nGET dest\n</pre> <h2 id=\"pattern-real-time-metrics-using-bitmaps\">Pattern: real time metrics using bitmaps</h2> <p><code>BITOP</code> is a good complement to the pattern documented in the <a href=\"../bitcount\"><code>BITCOUNT</code></a> command documentation. Different bitmaps can be combined in order to obtain a target bitmap where the population counting operation is performed.</p> <p>See the article called \"<a href=\"http://blog.getspool.com/2011/11/29/fast-easy-realtime-metrics-using-redis-bitmaps\">Fast easy realtime metrics using Redis bitmaps</a>\" for an interesting use cases.</p> <h2 id=\"performance-considerations\">Performance considerations</h2> <p><code>BITOP</code> is a potentially slow command as it runs in O(N) time. Care should be taken when running it against long input strings.</p> <p>For real-time metrics and statistics involving large inputs a good approach is to use a replica (with replica-read-only option enabled) where the bit-wise operations are performed to avoid blocking the master instance.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/bitop/\" class=\"_attribution-link\">https://redis.io/commands/bitop/</a>\n  </p>\n</div>\n","bitpos/index":"<h1 class=\"command-name\">BITPOS</h1>\n<pre>BITPOS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BITPOS key bit [start [end [BYTE | BIT]]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.7</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@bitmap</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Return the position of the first bit set to 1 or 0 in a string.</p> <p>The position is returned, thinking of the string as an array of bits from left to right, where the first byte's most significant bit is at position 0, the second byte's most significant bit is at position 8, and so forth.</p> <p>The same bit position convention is followed by <a href=\"../getbit\"><code>GETBIT</code></a> and <a href=\"../setbit\"><code>SETBIT</code></a>.</p> <p>By default, all the bytes contained in the string are examined. It is possible to look for bits only in a specified interval passing the additional arguments <em>start</em> and <em>end</em> (it is possible to just pass <em>start</em>, the operation will assume that the end is the last byte of the string. However there are semantic differences as explained later). By default, the range is interpreted as a range of bytes and not a range of bits, so <code>start=0</code> and <code>end=2</code> means to look at the first three bytes.</p> <p>You can use the optional <code>BIT</code> modifier to specify that the range should be interpreted as a range of bits. So <code>start=0</code> and <code>end=2</code> means to look at the first three bits.</p> <p>Note that bit positions are returned always as absolute values starting from bit zero even when <em>start</em> and <em>end</em> are used to specify a range.</p> <p>Like for the <a href=\"../getrange\"><code>GETRANGE</code></a> command start and end can contain negative values in order to index bytes starting from the end of the string, where -1 is the last byte, -2 is the penultimate, and so forth. When <code>BIT</code> is specified, -1 is the last bit, -2 is the penultimate, and so forth.</p> <p>Non-existent keys are treated as empty strings.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a></p> <p>The command returns the position of the first bit set to 1 or 0 according to the request.</p> <p>If we look for set bits (the bit argument is 1) and the string is empty or composed of just zero bytes, -1 is returned.</p> <p>If we look for clear bits (the bit argument is 0) and the string only contains bit set to 1, the function returns the first bit not part of the string on the right. So if the string is three bytes set to the value <code>0xff</code> the command <code>BITPOS key 0</code> will return 24, since up to bit 23 all the bits are 1.</p> <p>Basically, the function considers the right of the string as padded with zeros if you look for clear bits and specify no range or the <em>start</em> argument <strong>only</strong>.</p> <p>However, this behavior changes if you are looking for clear bits and specify a range with both <strong>start</strong> and <strong>end</strong>. If no clear bit is found in the specified range, the function returns -1 as the user specified a clear range and there are no 0 bits in that range.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"\\xff\\xf0\\x00\"\nBITPOS mykey 0\nSET mykey \"\\x00\\xff\\xf0\"\nBITPOS mykey 1 0\nBITPOS mykey 1 2\nBITPOS mykey 1 2 -1 BYTE\nBITPOS mykey 1 7 15 BIT\nset mykey \"\\x00\\x00\\x00\"\nBITPOS mykey 1\nBITPOS mykey 1 7 -3 BIT\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 7.0.0: Added the <code>BYTE|BIT</code> option.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/bitpos/\" class=\"_attribution-link\">https://redis.io/commands/bitpos/</a>\n  </p>\n</div>\n","acl-log/index":"<h1 class=\"command-name\">ACL</h1>\n<pre>ACL LOG</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ACL LOG [count | RESET]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) with N being the number of entries shown.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The command shows a list of recent ACL security events:</p> <ol> <li>Failures to authenticate their connections with <a href=\"../auth\"><code>AUTH</code></a> or <a href=\"../hello\"><code>HELLO</code></a>.</li> <li>Commands denied because against the current ACL rules.</li> <li>Commands denied because accessing keys not allowed in the current ACL rules.</li> </ol> <p>The optional argument specifies how many entries to show. By default up to ten failures are returned. The special <a href=\"../reset\"><code>RESET</code></a> argument clears the log. Entries are displayed starting from the most recent.</p> <h2 id=\"return\">Return</h2> <p>When called to show security events:</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a list of ACL security events.</p> <p>When called with <a href=\"../reset\"><code>RESET</code></a>:</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> if the security log was cleared.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; AUTH someuser wrongpassword\n(error) WRONGPASS invalid username-password pair\n&gt; ACL LOG 1\n1)  1) \"count\"\n    2) (integer) 1\n    3) \"reason\"\n    4) \"auth\"\n    5) \"context\"\n    6) \"toplevel\"\n    7) \"object\"\n    8) \"AUTH\"\n    9) \"username\"\n   10) \"someuser\"\n   11) \"age-seconds\"\n   12) \"8.038\"\n   13) \"client-info\"\n   14) \"id=3 addr=127.0.0.1:57275 laddr=127.0.0.1:6379 fd=8 name= age=16 idle=0 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=48 qbuf-free=16842 argv-mem=25 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=18737 events=r cmd=auth user=default redir=-1 resp=2\"\n   15) \"entry-id\"\n   16) (integer) 0\n   17) \"timestamp-created\"\n   18) (integer) 1675361492408\n   19) \"timestamp-last-updated\"\n   20) (integer) 1675361492408\n</pre>\n<p>Each log entry is composed of the following fields:</p> <ol> <li>\n<code>count</code>: The number of security events detected within a 60 second period that are represented by this entry.</li> <li>\n<code>reason</code>: The reason that the security events were logged. Either <code>command</code>, <code>key</code>, <code>channel</code>, or <code>auth</code>.</li> <li>\n<code>context</code>: The context that the security events were detected in. Either <code>toplevel</code>, <code>multi</code>, <code>lua</code>, or <code>module</code>.</li> <li>\n<code>object</code>: The resource that the user had insufficient permissions to access. <code>auth</code> when the reason is <code>auth</code>.</li> <li>\n<code>username</code>: The username that executed the command that caused the security events or the username that had a failed authentication attempt.</li> <li>\n<code>age-seconds</code>: Age of the log entry in seconds.</li> <li>\n<code>client-info</code>: Displays the client info of a client which caused one of the security events.</li> <li>\n<code>entry-id</code>: The sequence number of the entry (starting at 0) since the server process started. Can also be used to check if items were lost, if they fell between periods.</li> <li>\n<code>timestamp-created</code>: A UNIX timestamp in <code>milliseconds</code> at the time the entry was first created.</li> <li>\n<code>timestamp-last-updated</code>: A UNIX timestamp in <code>milliseconds</code> at the time the entry was last updated.</li> </ol> <h2>History</h2> <ul> <li>Starting with Redis version 7.2.0: Added entry ID, timestamp created, and timestamp last updated.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/acl-log/\" class=\"_attribution-link\">https://redis.io/commands/acl-log/</a>\n  </p>\n</div>\n","acl-save/index":"<h1 class=\"command-name\">ACL</h1>\n<pre>ACL SAVE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ACL SAVE</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N). Where N is the number of configured users.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>When Redis is configured to use an ACL file (with the <code>aclfile</code> configuration option), this command will save the currently defined ACLs from the server memory to the ACL file.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> on success.</p> <p>The command may fail with an error for several reasons: if the file cannot be written or if the server is not configured to use an external ACL file.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; ACL SAVE\n+OK\n\n&gt; ACL SAVE\n-ERR There was an error trying to save the ACLs. Please check the server logs for more information\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/acl-save/\" class=\"_attribution-link\">https://redis.io/commands/acl-save/</a>\n  </p>\n</div>\n","bf.add/index":"<h1 class=\"command-name\">BF.ADD</h1>\n<pre>BF.ADD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BF.ADD key item</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(k), where k is the number of hash functions used by the last sub-filter</dd> </dl> <p>Creates an empty Bloom Filter with a single sub-filter for the initial capacity requested and with an upper bound <code>error_rate</code>. By default, the filter auto-scales by creating additional sub-filters when <code>capacity</code> is reached. The new sub-filter is created with size of the previous sub-filter multiplied by <code>expansion</code>.</p> <p>Though the filter can scale up by creating sub-filters, it is recommended to reserve the estimated required <code>capacity</code> since maintaining and querying sub-filters requires additional memory (each sub-filter uses an extra bits and hash function) and consume further CPU time than an equivalent filter that had the right capacity at creation time.</p> <p>The number of hash functions is <code>-log(error)/ln(2)^2</code>. The number of bits per item is <code>-log(error)/ln(2)</code>  1.44.</p> <ul> <li>\n<strong>1%</strong> error rate requires 7 hash functions and 10.08 bits per item.</li> <li>\n<strong>0.1%</strong> error rate requires 10 hash functions and 14.4 bits per item.</li> <li>\n<strong>0.01%</strong> error rate requires 14 hash functions and 20.16 bits per item.</li> </ul> <h3 id=\"parameters\">Parameters:</h3> <ul> <li>\n<strong>key</strong>: The key under which the filter is found</li> <li>\n<strong>error_rate</strong>: The desired probability for false positives. The rate is a decimal value between 0 and 1. For example, for a desired false positive rate of 0.1% (1 in 1000), error_rate should be set to 0.001.</li> <li>\n<strong>capacity</strong>: The number of entries intended to be added to the filter. If your filter allows scaling, performance will begin to degrade after adding more items than this number. The actual degradation depends on how far the limit has been exceeded. Performance degrades linearly with the number of <code>sub-filters</code>.</li> </ul> <p>Optional parameters:</p> <ul> <li>\n<strong>NONSCALING</strong>: Prevents the filter from creating additional sub-filters if initial capacity is reached. Non-scaling filters requires slightly less memory than their scaling counterparts. The filter returns an error when <code>capacity</code> is reached.</li> <li>\n<strong>EXPANSION</strong>: When <code>capacity</code> is reached, an additional sub-filter is created. The size of the new sub-filter is the size of the last sub-filter multiplied by <code>expansion</code>. If the number of elements to be stored in the filter is unknown, we recommend that you use an <code>expansion</code> of 2 or more to reduce the number of sub-filters. Otherwise, we recommend that you use an <code>expansion</code> of 1 to reduce memory consumption. The default expansion value is 2.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> - \"1\" if such item did not exist in the filter, \"0\" if such item was likely added to the filter before (false positives are possible).</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; BF.ADD bf item1\n(integer) 0\nredis&gt; BF.ADD bf item_new\n(integer) 1\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/bf.add/\" class=\"_attribution-link\">https://redis.io/commands/bf.add/</a>\n  </p>\n</div>\n","blmove/index":"<h1 class=\"command-name\">BLMOVE</h1>\n<pre>BLMOVE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BLMOVE source destination &lt;LEFT | RIGHT&gt; &lt;LEFT | RIGHT&gt; timeout</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@blocking</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><code>BLMOVE</code> is the blocking variant of <a href=\"../lmove\"><code>LMOVE</code></a>. When <code>source</code> contains elements, this command behaves exactly like <a href=\"../lmove\"><code>LMOVE</code></a>. When used inside a <a href=\"../multi\"><code>MULTI</code></a>/<a href=\"../exec\"><code>EXEC</code></a> block, this command behaves exactly like <a href=\"../lmove\"><code>LMOVE</code></a>. When <code>source</code> is empty, Redis will block the connection until another client pushes to it or until <code>timeout</code> (a double value specifying the maximum number of seconds to block) is reached. A <code>timeout</code> of zero can be used to block indefinitely.</p> <p>This command comes in place of the now deprecated <a href=\"../brpoplpush\"><code>BRPOPLPUSH</code></a>. Doing <code>BLMOVE RIGHT LEFT</code> is equivalent.</p> <p>See <a href=\"../lmove\"><code>LMOVE</code></a> for more information.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the element being popped from <code>source</code> and pushed to <code>destination</code>. If <code>timeout</code> is reached, a <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Null reply</a> is returned.</p> <h2 id=\"pattern-reliable-queue\">Pattern: Reliable queue</h2> <p>Please see the pattern description in the <a href=\"../lmove\"><code>LMOVE</code></a> documentation.</p> <h2 id=\"pattern-circular-list\">Pattern: Circular list</h2> <p>Please see the pattern description in the <a href=\"../lmove\"><code>LMOVE</code></a> documentation.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/blmove/\" class=\"_attribution-link\">https://redis.io/commands/blmove/</a>\n  </p>\n</div>\n","blmpop/index":"<h1 class=\"command-name\">BLMPOP</h1>\n<pre>BLMPOP</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BLMPOP timeout numkeys key [key ...] &lt;LEFT | RIGHT&gt; [COUNTcount]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N+M) where N is the number of provided keys and M is the number of elements returned.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@blocking</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><code>BLMPOP</code> is the blocking variant of <a href=\"../lmpop\"><code>LMPOP</code></a>.</p> <p>When any of the lists contains elements, this command behaves exactly like <a href=\"../lmpop\"><code>LMPOP</code></a>. When used inside a <a href=\"../multi\"><code>MULTI</code></a>/<a href=\"../exec\"><code>EXEC</code></a> block, this command behaves exactly like <a href=\"../lmpop\"><code>LMPOP</code></a>. When all lists are empty, Redis will block the connection until another client pushes to it or until the <code>timeout</code> (a double value specifying the maximum number of seconds to block) elapses. A <code>timeout</code> of zero can be used to block indefinitely.</p> <p>See <a href=\"../lmpop\"><code>LMPOP</code></a> for more information.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: specifically:</p> <ul> <li>A <code>nil</code> when no element could be popped, and timeout is reached.</li> <li>A two-element array with the first element being the name of the key from which elements were popped, and the second element is an array of elements.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/blmpop/\" class=\"_attribution-link\">https://redis.io/commands/blmpop/</a>\n  </p>\n</div>\n","auth/index":"<h1 class=\"command-name\">AUTH</h1>\n<pre>AUTH</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">AUTH [username] password</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of passwords defined for the user</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The AUTH command authenticates the current connection in two cases:</p> <ol> <li>If the Redis server is password protected via the <code>requirepass</code> option.</li> <li>A Redis 6.0 instance, or greater, is using the <a href=\"https://redis.io/topics/acl\">Redis ACL system</a>.</li> </ol> <p>Redis versions prior of Redis 6 were only able to understand the one argument version of the command:</p> <pre>AUTH &lt;password&gt;\n</pre> <p>This form just authenticates against the password set with <code>requirepass</code>. In this configuration Redis will deny any command executed by the just connected clients, unless the connection gets authenticated via <code>AUTH</code>.</p> <p>If the password provided via AUTH matches the password in the configuration file, the server replies with the <code>OK</code> status code and starts accepting commands. Otherwise, an error is returned and the clients needs to try a new password.</p> <p>When Redis ACLs are used, the command should be given in an extended way:</p> <pre>AUTH &lt;username&gt; &lt;password&gt;\n</pre> <p>In order to authenticate the current connection with one of the connections defined in the ACL list (see <a href=\"../acl-setuser\"><code>ACL SETUSER</code></a>) and the official <a href=\"https://redis.io/topics/acl\">ACL guide</a> for more information.</p> <p>When ACLs are used, the single argument form of the command, where only the password is specified, assumes that the implicit username is \"default\".</p> <h2 id=\"security-notice\">Security notice</h2> <p>Because of the high performance nature of Redis, it is possible to try a lot of passwords in parallel in very short time, so make sure to generate a strong and very long password so that this attack is infeasible. A good way to generate strong passwords is via the <a href=\"../acl-genpass\"><code>ACL GENPASS</code></a> command.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> or an error if the password, or username/password pair, is invalid.</p> <h2>History</h2> <ul> <li>Starting with Redis version 6.0.0: Added ACL style (username and password).</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/auth/\" class=\"_attribution-link\">https://redis.io/commands/auth/</a>\n  </p>\n</div>\n","brpoplpush/index":"<h1 class=\"command-name\">BRPOPLPUSH</h1>\n<pre>BRPOPLPUSH (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 6.2.0, this command is regarded as deprecated.</p> <p>It can be replaced by <a href=\"../blmove\"><code>BLMOVE</code></a> with the <code>RIGHT</code> and <code>LEFT</code> arguments when migrating or writing new code.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BRPOPLPUSH source destination timeout</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@blocking</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><code>BRPOPLPUSH</code> is the blocking variant of <a href=\"../rpoplpush\"><code>RPOPLPUSH</code></a>. When <code>source</code> contains elements, this command behaves exactly like <a href=\"../rpoplpush\"><code>RPOPLPUSH</code></a>. When used inside a <a href=\"../multi\"><code>MULTI</code></a>/<a href=\"../exec\"><code>EXEC</code></a> block, this command behaves exactly like <a href=\"../rpoplpush\"><code>RPOPLPUSH</code></a>. When <code>source</code> is empty, Redis will block the connection until another client pushes to it or until <code>timeout</code> is reached. A <code>timeout</code> of zero can be used to block indefinitely.</p> <p>See <a href=\"../rpoplpush\"><code>RPOPLPUSH</code></a> for more information.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the element being popped from <code>source</code> and pushed to <code>destination</code>. If <code>timeout</code> is reached, a <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Null reply</a> is returned.</p> <h2 id=\"pattern-reliable-queue\">Pattern: Reliable queue</h2> <p>Please see the pattern description in the <a href=\"../rpoplpush\"><code>RPOPLPUSH</code></a> documentation.</p> <h2 id=\"pattern-circular-list\">Pattern: Circular list</h2> <p>Please see the pattern description in the <a href=\"../rpoplpush\"><code>RPOPLPUSH</code></a> documentation.</p> <h2>History</h2> <ul> <li>Starting with Redis version 6.0.0: <code>timeout</code> is interpreted as a double instead of an integer.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/brpoplpush/\" class=\"_attribution-link\">https://redis.io/commands/brpoplpush/</a>\n  </p>\n</div>\n","bitfield/index":"<h1 class=\"command-name\">BITFIELD</h1>\n<pre>BITFIELD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BITFIELD key [GETencoding offset | [OVERFLOW&lt;WRAP | SAT | FAIL&gt;]\n  &lt;SETencoding offset value | INCRBYencoding offset increment&gt;\n  [GETencoding offset | [OVERFLOW&lt;WRAP | SAT | FAIL&gt;]\n  &lt;SETencoding offset value | INCRBYencoding offset increment&gt;\n  ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) for each subcommand specified</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@bitmap</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The command treats a Redis string as an array of bits, and is capable of addressing specific integer fields of varying bit widths and arbitrary non (necessary) aligned offset. In practical terms using this command you can set, for example, a signed 5 bits integer at bit offset 1234 to a specific value, retrieve a 31 bit unsigned integer from offset 4567. Similarly the command handles increments and decrements of the specified integers, providing guaranteed and well specified overflow and underflow behavior that the user can configure.</p> <p><code>BITFIELD</code> is able to operate with multiple bit fields in the same command call. It takes a list of operations to perform, and returns an array of replies, where each array matches the corresponding operation in the list of arguments.</p> <p>For example the following command increments a 5 bit signed integer at bit offset 100, and gets the value of the 4 bit unsigned integer at bit offset 0:</p> <pre>&gt; BITFIELD mykey INCRBY i5 100 1 GET u4 0\n1) (integer) 1\n2) (integer) 0\n</pre> <p>Note that:</p> <ol> <li>Addressing with <code>GET</code> bits outside the current string length (including the case the key does not exist at all), results in the operation to be performed like the missing part all consists of bits set to 0.</li> <li>Addressing with <code>SET</code> or <code>INCRBY</code> bits outside the current string length will enlarge the string, zero-padding it, as needed, for the minimal length needed, according to the most far bit touched.</li> </ol> <h2 id=\"supported-subcommands-and-integer-encoding\">Supported subcommands and integer encoding</h2> <p>The following is the list of supported commands.</p> <ul> <li>\n<strong>GET</strong> <code>&lt;encoding&gt;</code> <code>&lt;offset&gt;</code> -- Returns the specified bit field.</li> <li>\n<strong>SET</strong> <code>&lt;encoding&gt;</code> <code>&lt;offset&gt;</code> <code>&lt;value&gt;</code> -- Set the specified bit field and returns its old value.</li> <li>\n<strong>INCRBY</strong> <code>&lt;encoding&gt;</code> <code>&lt;offset&gt;</code> <code>&lt;increment&gt;</code> -- Increments or decrements (if a negative increment is given) the specified bit field and returns the new value.</li> </ul> <p>There is another subcommand that only changes the behavior of successive <code>INCRBY</code> and <code>SET</code> subcommands calls by setting the overflow behavior:</p> <ul> <li>\n<strong>OVERFLOW</strong> <code>[WRAP|SAT|FAIL]</code>\n</li> </ul> <p>Where an integer encoding is expected, it can be composed by prefixing with <code>i</code> for signed integers and <code>u</code> for unsigned integers with the number of bits of our integer encoding. So for example <code>u8</code> is an unsigned integer of 8 bits and <code>i16</code> is a signed integer of 16 bits.</p> <p>The supported encodings are up to 64 bits for signed integers, and up to 63 bits for unsigned integers. This limitation with unsigned integers is due to the fact that currently the Redis protocol is unable to return 64 bit unsigned integers as replies.</p> <h2 id=\"bits-and-positional-offsets\">Bits and positional offsets</h2> <p>There are two ways in order to specify offsets in the bitfield command. If a number without any prefix is specified, it is used just as a zero based bit offset inside the string.</p> <p>However if the offset is prefixed with a <code>#</code> character, the specified offset is multiplied by the integer encoding's width, so for example:</p> <pre>BITFIELD mystring SET i8 #0 100 SET i8 #1 200\n</pre> <p>Will set the first i8 integer at offset 0 and the second at offset 8. This way you don't have to do the math yourself inside your client if what you want is a plain array of integers of a given size.</p> <h2 id=\"overflow-control\">Overflow control</h2> <p>Using the <code>OVERFLOW</code> command the user is able to fine-tune the behavior of the increment or decrement overflow (or underflow) by specifying one of the following behaviors:</p> <ul> <li>\n<strong>WRAP</strong>: wrap around, both with signed and unsigned integers. In the case of unsigned integers, wrapping is like performing the operation modulo the maximum value the integer can contain (the C standard behavior). With signed integers instead wrapping means that overflows restart towards the most negative value and underflows towards the most positive ones, so for example if an <code>i8</code> integer is set to the value 127, incrementing it by 1 will yield <code>-128</code>.</li> <li>\n<strong>SAT</strong>: uses saturation arithmetic, that is, on underflows the value is set to the minimum integer value, and on overflows to the maximum integer value. For example incrementing an <code>i8</code> integer starting from value 120 with an increment of 10, will result into the value 127, and further increments will always keep the value at 127. The same happens on underflows, but towards the value is blocked at the most negative value.</li> <li>\n<strong>FAIL</strong>: in this mode no operation is performed on overflows or underflows detected. The corresponding return value is set to NULL to signal the condition to the caller.</li> </ul> <p>Note that each <code>OVERFLOW</code> statement only affects the <code>INCRBY</code> and <code>SET</code> commands that follow it in the list of subcommands, up to the next <code>OVERFLOW</code> statement.</p> <p>By default, <strong>WRAP</strong> is used if not otherwise specified.</p> <pre>&gt; BITFIELD mykey incrby u2 100 1 OVERFLOW SAT incrby u2 102 1\n1) (integer) 1\n2) (integer) 1\n&gt; BITFIELD mykey incrby u2 100 1 OVERFLOW SAT incrby u2 102 1\n1) (integer) 2\n2) (integer) 2\n&gt; BITFIELD mykey incrby u2 100 1 OVERFLOW SAT incrby u2 102 1\n1) (integer) 3\n2) (integer) 3\n&gt; BITFIELD mykey incrby u2 100 1 OVERFLOW SAT incrby u2 102 1\n1) (integer) 0\n2) (integer) 3\n</pre> <h2 id=\"return-value\">Return value</h2> <p>The command returns an array with each entry being the corresponding result of the sub command given at the same position. <code>OVERFLOW</code> subcommands don't count as generating a reply.</p> <p>The following is an example of <code>OVERFLOW FAIL</code> returning NULL.</p> <pre>&gt; BITFIELD mykey OVERFLOW FAIL incrby u2 102 1\n1) (nil)\n</pre> <h2 id=\"motivations\">Motivations</h2> <p>The motivation for this command is that the ability to store many small integers as a single large bitmap (or segmented over a few keys to avoid having huge keys) is extremely memory efficient, and opens new use cases for Redis to be applied, especially in the field of real time analytics. This use cases are supported by the ability to specify the overflow in a controlled way.</p> <p>Fun fact: Reddit's 2017 April fools' project <a href=\"https://reddit.com/r/place\">r/place</a> was <a href=\"https://redditblog.com/2017/04/13/how-we-built-rplace/\">built using the Redis BITFIELD command</a> in order to take an in-memory representation of the collaborative canvas.</p> <h2 id=\"performance-considerations\">Performance considerations</h2> <p>Usually <code>BITFIELD</code> is a fast command, however note that addressing far bits of currently short strings will trigger an allocation that may be more costly than executing the command on bits already existing.</p> <h2 id=\"orders-of-bits\">Orders of bits</h2> <p>The representation used by <code>BITFIELD</code> considers the bitmap as having the bit number 0 to be the most significant bit of the first byte, and so forth, so for example setting a 5 bits unsigned integer to value 23 at offset 7 into a bitmap previously set to all zeroes, will produce the following representation:</p> <pre>+--------+--------+\n|00000001|01110000|\n+--------+--------+\n</pre> <p>When offsets and integer sizes are aligned to bytes boundaries, this is the same as big endian, however when such alignment does not exist, its important to also understand how the bits inside a byte are ordered.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/bitfield/\" class=\"_attribution-link\">https://redis.io/commands/bitfield/</a>\n  </p>\n</div>\n","acl-genpass/index":"<h1 class=\"command-name\">ACL</h1>\n<pre>ACL GENPASS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ACL GENPASS [bits]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>ACL users need a solid password in order to authenticate to the server without security risks. Such password does not need to be remembered by humans, but only by computers, so it can be very long and strong (unguessable by an external attacker). The <code>ACL GENPASS</code> command generates a password starting from /dev/urandom if available, otherwise (in systems without /dev/urandom) it uses a weaker system that is likely still better than picking a weak password by hand.</p> <p>By default (if /dev/urandom is available) the password is strong and can be used for other uses in the context of a Redis application, for instance in order to create unique session identifiers or other kind of unguessable and not colliding IDs. The password generation is also very cheap because we don't really ask /dev/urandom for bits at every execution. At startup Redis creates a seed using /dev/urandom, then it will use SHA256 in counter mode, with HMAC-SHA256(seed,counter) as primitive, in order to create more random bytes as needed. This means that the application developer should be feel free to abuse <code>ACL GENPASS</code> to create as many secure pseudorandom strings as needed.</p> <p>The command output is a hexadecimal representation of a binary string. By default it emits 256 bits (so 64 hex characters). The user can provide an argument in form of number of bits to emit from 1 to 1024 to change the output length. Note that the number of bits provided is always rounded to the next multiple of 4. So for instance asking for just 1 bit password will result in 4 bits to be emitted, in the form of a single hex character.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: by default 64 bytes string representing 256 bits of pseudorandom data. Otherwise if an argument if needed, the output string length is the number of specified bits (rounded to the next multiple of 4) divided by 4.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; ACL GENPASS\n\"dd721260bfe1b3d9601e7fbab36de6d04e2e67b0ef1c53de59d45950db0dd3cc\"\n\n&gt; ACL GENPASS 32\n\"355ef3dd\"\n\n&gt; ACL GENPASS 5\n\"90\"\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/acl-genpass/\" class=\"_attribution-link\">https://redis.io/commands/acl-genpass/</a>\n  </p>\n</div>\n","acl-users/index":"<h1 class=\"command-name\">ACL</h1>\n<pre>ACL USERS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ACL USERS</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N). Where N is the number of configured users.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The command shows a list of all the usernames of the currently configured users in the Redis ACL system.</p> <h2 id=\"return\">Return</h2> <p>An array of strings.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; ACL USERS\n1) \"anna\"\n2) \"antirez\"\n3) \"default\"\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/acl-users/\" class=\"_attribution-link\">https://redis.io/commands/acl-users/</a>\n  </p>\n</div>\n","acl-dryrun/index":"<h1 class=\"command-name\">ACL</h1>\n<pre>ACL DRYRUN</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ACL DRYRUN username command [arg [arg ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1).</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Simulate the execution of a given command by a given user. This command can be used to test the permissions of a given user without having to enable the user or cause the side effects of running the command.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> on success. <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: An error describing why the user can't execute the command.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; ACL SETUSER VIRGINIA +SET ~*\n\"OK\"\n&gt; ACL DRYRUN VIRGINIA SET foo bar\n\"OK\"\n&gt; ACL DRYRUN VIRGINIA GET foo bar\n\"This user has no permissions to run the 'GET' command\"\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/acl-dryrun/\" class=\"_attribution-link\">https://redis.io/commands/acl-dryrun/</a>\n  </p>\n</div>\n","acl-load/index":"<h1 class=\"command-name\">ACL</h1>\n<pre>ACL LOAD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ACL LOAD</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N). Where N is the number of configured users.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>When Redis is configured to use an ACL file (with the <code>aclfile</code> configuration option), this command will reload the ACLs from the file, replacing all the current ACL rules with the ones defined in the file. The command makes sure to have an <em>all or nothing</em> behavior, that is:</p> <ul> <li>If every line in the file is valid, all the ACLs are loaded.</li> <li>If one or more line in the file is not valid, nothing is loaded, and the old ACL rules defined in the server memory continue to be used.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> on success.</p> <p>The command may fail with an error for several reasons: if the file is not readable, if there is an error inside the file, and in such case the error will be reported to the user in the error. Finally the command will fail if the server is not configured to use an external ACL file.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; ACL LOAD\n+OK\n\n&gt; ACL LOAD\n-ERR /tmp/foo:1: Unknown command or category name in ACL...\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/acl-load/\" class=\"_attribution-link\">https://redis.io/commands/acl-load/</a>\n  </p>\n</div>\n","blpop/index":"<h1 class=\"command-name\">BLPOP</h1>\n<pre>BLPOP</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BLPOP key [key ...] timeout</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of provided keys.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@blocking</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><code>BLPOP</code> is a blocking list pop primitive. It is the blocking version of <a href=\"../lpop\"><code>LPOP</code></a> because it blocks the connection when there are no elements to pop from any of the given lists. An element is popped from the head of the first list that is non-empty, with the given keys being checked in the order that they are given.</p> <h2 id=\"non-blocking-behavior\">Non-blocking behavior</h2> <p>When <code>BLPOP</code> is called, if at least one of the specified keys contains a non-empty list, an element is popped from the head of the list and returned to the caller together with the <code>key</code> it was popped from.</p> <p>Keys are checked in the order that they are given. Let's say that the key <code>list1</code> doesn't exist and <code>list2</code> and <code>list3</code> hold non-empty lists. Consider the following command:</p> <pre tabindex=\"0\">BLPOP list1 list2 list3 0\n</pre>\n<p><code>BLPOP</code> guarantees to return an element from the list stored at <code>list2</code> (since it is the first non empty list when checking <code>list1</code>, <code>list2</code> and <code>list3</code> in that order).</p> <h2 id=\"blocking-behavior\">Blocking behavior</h2> <p>If none of the specified keys exist, <code>BLPOP</code> blocks the connection until another client performs an <a href=\"../lpush\"><code>LPUSH</code></a> or <a href=\"../rpush\"><code>RPUSH</code></a> operation against one of the keys.</p> <p>Once new data is present on one of the lists, the client returns with the name of the key unblocking it and the popped value.</p> <p>When <code>BLPOP</code> causes a client to block and a non-zero timeout is specified, the client will unblock returning a <code>nil</code> multi-bulk value when the specified timeout has expired without a push operation against at least one of the specified keys.</p> <p><strong>The timeout argument is interpreted as a double value specifying the maximum number of seconds to block</strong>. A timeout of zero can be used to block indefinitely.</p> <h2 id=\"what-key-is-served-first-what-client-what-element-priority-ordering-details\">What key is served first? What client? What element? Priority ordering details.</h2> <ul> <li>If the client tries to blocks for multiple keys, but at least one key contains elements, the returned key / element pair is the first key from left to right that has one or more elements. In this case the client is not blocked. So for instance <code>BLPOP key1 key2 key3 key4 0</code>, assuming that both <code>key2</code> and <code>key4</code> are non-empty, will always return an element from <code>key2</code>.</li> <li>If multiple clients are blocked for the same key, the first client to be served is the one that was waiting for more time (the first that blocked for the key). Once a client is unblocked it does not retain any priority, when it blocks again with the next call to <code>BLPOP</code> it will be served accordingly to the number of clients already blocked for the same key, that will all be served before it (from the first to the last that blocked).</li> <li>When a client is blocking for multiple keys at the same time, and elements are available at the same time in multiple keys (because of a transaction or a Lua script added elements to multiple lists), the client will be unblocked using the first key that received a push operation (assuming it has enough elements to serve our client, as there may be other clients as well waiting for this key). Basically after the execution of every command Redis will run a list of all the keys that received data AND that have at least a client blocked. The list is ordered by new element arrival time, from the first key that received data to the last. For every key processed, Redis will serve all the clients waiting for that key in a FIFO fashion, as long as there are elements in this key. When the key is empty or there are no longer clients waiting for this key, the next key that received new data in the previous command / transaction / script is processed, and so forth.</li> </ul> <h2 id=\"behavior-of-blpop-when-multiple-elements-are-pushed-inside-a-list\">Behavior of <code>BLPOP</code> when multiple elements are pushed inside a list.</h2> <p>There are times when a list can receive multiple elements in the context of the same conceptual command:</p> <ul> <li>Variadic push operations such as <code>LPUSH mylist a b c</code>.</li> <li>After an <a href=\"../exec\"><code>EXEC</code></a> of a <a href=\"../multi\"><code>MULTI</code></a> block with multiple push operations against the same list.</li> <li>Executing a Lua Script with Redis 2.6 or newer.</li> </ul> <p>When multiple elements are pushed inside a list where there are clients blocking, the behavior is different for Redis 2.4 and Redis 2.6 or newer.</p> <p>For Redis 2.6 what happens is that the command performing multiple pushes is executed, and <em>only after</em> the execution of the command the blocked clients are served. Consider this sequence of commands.</p> <pre>Client A:   BLPOP foo 0\nClient B:   LPUSH foo a b c\n</pre> <p>If the above condition happens using a Redis 2.6 server or greater, Client <strong>A</strong> will be served with the <code>c</code> element, because after the <a href=\"../lpush\"><code>LPUSH</code></a> command the list contains <code>c,b,a</code>, so taking an element from the left means to return <code>c</code>.</p> <p>Instead Redis 2.4 works in a different way: clients are served <em>in the context</em> of the push operation, so as long as <code>LPUSH foo a b c</code> starts pushing the first element to the list, it will be delivered to the Client <strong>A</strong>, that will receive <code>a</code> (the first element pushed).</p> <p>The behavior of Redis 2.4 creates a lot of problems when replicating or persisting data into the AOF file, so the much more generic and semantically simpler behavior was introduced into Redis 2.6 to prevent problems.</p> <p>Note that for the same reason a Lua script or a <code>MULTI/EXEC</code> block may push elements into a list and afterward <strong>delete the list</strong>. In this case the blocked clients will not be served at all and will continue to be blocked as long as no data is present on the list after the execution of a single command, transaction, or script.</p> <h2 id=\"blpop-inside-a-multi--exec-transaction\">\n<code>BLPOP</code> inside a <code>MULTI</code> / <code>EXEC</code> transaction</h2> <p><code>BLPOP</code> can be used with pipelining (sending multiple commands and reading the replies in batch), however this setup makes sense almost solely when it is the last command of the pipeline.</p> <p>Using <code>BLPOP</code> inside a <a href=\"../multi\"><code>MULTI</code></a> / <a href=\"../exec\"><code>EXEC</code></a> block does not make a lot of sense as it would require blocking the entire server in order to execute the block atomically, which in turn does not allow other clients to perform a push operation. For this reason the behavior of <code>BLPOP</code> inside <a href=\"../multi\"><code>MULTI</code></a> / <a href=\"../exec\"><code>EXEC</code></a> when the list is empty is to return a <code>nil</code> multi-bulk reply, which is the same thing that happens when the timeout is reached.</p> <p>If you like science fiction, think of time flowing at infinite speed inside a <a href=\"../multi\"><code>MULTI</code></a> / <a href=\"../exec\"><code>EXEC</code></a> block...</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: specifically:</p> <ul> <li>A <code>nil</code> multi-bulk when no element could be popped and the timeout expired.</li> <li>A two-element multi-bulk with the first element being the name of the key where an element was popped and the second element being the value of the popped element.</li> </ul> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; DEL list1 list2\n(integer) 0\nredis&gt; RPUSH list1 a b c\n(integer) 3\nredis&gt; BLPOP list1 list2 0\n1) \"list1\"\n2) \"a\"\n</pre>\n<h2 id=\"reliable-queues\">Reliable queues</h2> <p>When <code>BLPOP</code> returns an element to the client, it also removes the element from the list. This means that the element only exists in the context of the client: if the client crashes while processing the returned element, it is lost forever.</p> <p>This can be a problem with some application where we want a more reliable messaging system. When this is the case, please check the <a href=\"../brpoplpush\"><code>BRPOPLPUSH</code></a> command, that is a variant of <code>BLPOP</code> that adds the returned element to a target list before returning it to the client.</p> <h2 id=\"pattern-event-notification\">Pattern: Event notification</h2> <p>Using blocking list operations it is possible to mount different blocking primitives. For instance for some application you may need to block waiting for elements into a Redis Set, so that as far as a new element is added to the Set, it is possible to retrieve it without resort to polling. This would require a blocking version of <a href=\"../spop\"><code>SPOP</code></a> that is not available, but using blocking list operations we can easily accomplish this task.</p> <p>The consumer will do:</p> <pre tabindex=\"0\">LOOP forever\n    WHILE SPOP(key) returns elements\n        ... process elements ...\n    END\n    BRPOP helper_key\nEND\n</pre>\n<p>While in the producer side we'll use simply:</p> <pre tabindex=\"0\">MULTI\nSADD key element\nLPUSH helper_key x\nEXEC\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 6.0.0: <code>timeout</code> is interpreted as a double instead of an integer.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/blpop/\" class=\"_attribution-link\">https://redis.io/commands/blpop/</a>\n  </p>\n</div>\n","brpop/index":"<h1 class=\"command-name\">BRPOP</h1>\n<pre>BRPOP</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BRPOP key [key ...] timeout</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of provided keys.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@blocking</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><code>BRPOP</code> is a blocking list pop primitive. It is the blocking version of <a href=\"../rpop\"><code>RPOP</code></a> because it blocks the connection when there are no elements to pop from any of the given lists. An element is popped from the tail of the first list that is non-empty, with the given keys being checked in the order that they are given.</p> <p>See the <a href=\"../blpop\">BLPOP documentation</a> for the exact semantics, since <code>BRPOP</code> is identical to <a href=\"../blpop\"><code>BLPOP</code></a> with the only difference being that it pops elements from the tail of a list instead of popping from the head.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: specifically:</p> <ul> <li>A <code>nil</code> multi-bulk when no element could be popped and the timeout expired.</li> <li>A two-element multi-bulk with the first element being the name of the key where an element was popped and the second element being the value of the popped element.</li> </ul> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; DEL list1 list2\n(integer) 0\nredis&gt; RPUSH list1 a b c\n(integer) 3\nredis&gt; BRPOP list1 list2 0\n1) \"list1\"\n2) \"c\"\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 6.0.0: <code>timeout</code> is interpreted as a double instead of an integer.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/brpop/\" class=\"_attribution-link\">https://redis.io/commands/brpop/</a>\n  </p>\n</div>\n","cf.addnx/index":"<h1 class=\"command-name\">CF.ADDNX</h1>\n<pre>CF.ADDNX</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CF.ADDNX key item</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(k + i), where k is the number of sub-filters and i is maxIterations</dd> </dl> <p>Adds an item to a cuckoo filter if the item did not exist previously. See documentation on <a href=\"../cf.add\"><code>CF.ADD</code></a> for more information on this command.</p> <p>This command is equivalent to a <a href=\"../cf.exists\"><code>CF.EXISTS</code></a> + <a href=\"../cf.add\"><code>CF.ADD</code></a> command. It does not insert an element into the filter if its fingerprint already exists in order to use the available capacity more efficiently. However, deleting elements can introduce <strong>false negative</strong> error rate!</p> <p>Note that this command is slower than <a href=\"../cf.add\"><code>CF.ADD</code></a> because it first checks whether the item exists.</p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: The name of the filter</li> <li>\n<strong>item</strong>: The item to add</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> - where \"1\" means the item has been added to the filter, and \"0\" mean, the item already existed.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; CF.ADDNX cf item1\n(integer) 0\nredis&gt; CF.ADDNX cf item_new\n(integer) 1\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cf.addnx/\" class=\"_attribution-link\">https://redis.io/commands/cf.addnx/</a>\n  </p>\n</div>\n","cf.loadchunk/index":"<h1 class=\"command-name\">CF.LOADCHUNK</h1>\n<pre>CF.LOADCHUNK</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CF.LOADCHUNK key iterator data</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(n), where n is the capacity</dd> </dl> <p>Restores a filter previously saved using <code>SCANDUMP</code>. See the <code>SCANDUMP</code> command for example usage.</p> <p>This command overwrites any cuckoo filter stored under <code>key</code>. Make sure that the cuckoo filter is not be modified between invocations.</p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: Name of the key to restore</li> <li>\n<strong>iter</strong>: Iterator value associated with <code>data</code> (returned by <code>SCANDUMP</code>)</li> <li>\n<strong>data</strong>: Current data chunk (returned by <code>SCANDUMP</code>)</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> - <code>OK</code> if executed correctly, or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> otherwise.</p> <h2 id=\"examples\">Examples</h2> <p>See BF.SCANDUMP for an example.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cf.loadchunk/\" class=\"_attribution-link\">https://redis.io/commands/cf.loadchunk/</a>\n  </p>\n</div>\n","cf.add/index":"<h1 class=\"command-name\">CF.ADD</h1>\n<pre>CF.ADD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CF.ADD key item</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(k + i), where k is the number of sub-filters and i is maxIterations</dd> </dl> <p>Adds an item to the cuckoo filter, creating the filter if it does not exist.</p> <p>Cuckoo filters can contain the same item multiple times, and consider each insert as separate. You can use <a href=\"../cf.addnx\"><code>CF.ADDNX</code></a> to only add the item if it does not exist yet. Keep in mind that deleting an element inserted using <a href=\"../cf.addnx\"><code>CF.ADDNX</code></a> may cause false-negative errors.</p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: The name of the filter</li> <li>\n<strong>item</strong>: The item to add</li> </ul> <h3 id=\"complexity\">Complexity</h3> <p>O(n + i), where n is the number of <code>sub-filters</code> and i is <code>maxIterations</code>. Adding items requires up to 2 memory accesses per <code>sub-filter</code>. But as the filter fills up, both locations for an item might be full. The filter attempts to <code>Cuckoo</code> swap items up to <code>maxIterations</code> times.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> - \"1\" if executed correctly, or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> otherwise.</p> <pre tabindex=\"0\">redis&gt; CF.ADD cf item\n(integer) 1\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cf.add/\" class=\"_attribution-link\">https://redis.io/commands/cf.add/</a>\n  </p>\n</div>\n","cf.insertnx/index":"<h1 class=\"command-name\">CF.INSERTNX</h1>\n<pre>CF.INSERTNX</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CF.INSERTNX key [CAPACITYcapacity] [NOCREATE] ITEMS item [item ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(n * (k + i)), where n is the number of items, k is the number of sub-filters and i is maxIterations</dd> </dl> <h2 id=\"cfinsert\">CF.INSERT</h2> <h2 id=\"cfinsertnx\">CF.INSERTNX</h2> <p>Note: <code>CF.INSERTNX</code> is an advanced command that can have unintended impact if used incorrectly.</p> <pre tabindex=\"0\">CF.INSERT {key} [CAPACITY {capacity}] [NOCREATE] ITEMS {item ...}\nCF.INSERTNX {key} [CAPACITY {capacity}] [NOCREATE] ITEMS {item ...}\n</pre>\n<h3 id=\"description\">Description</h3> <p>Adds one or more items to a cuckoo filter, allowing the filter to be created with a custom capacity if it does not exist yet.</p> <p>This command is equivalent to a <a href=\"../cf.exists\"><code>CF.EXISTS</code></a> + <a href=\"../cf.add\"><code>CF.ADD</code></a> command. It does not insert an element into the filter if its fingerprint already exists and therefore better utilizes the available capacity. However, if you delete elements it might introduce <strong>false negative</strong> error rate!</p> <p>These commands offers more flexibility over the <code>ADD</code> and <code>ADDNX</code> commands, at the cost of more verbosity.</p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: The name of the filter</li> <li>\n<strong>capacity</strong>: Specifies the desired capacity of the new filter, if this filter does not exist yet. If the filter already exists, then this parameter is ignored. If the filter does not exist yet and this parameter is <em>not</em> specified, then the filter is created with the module-level default capacity which is 1024. See <a href=\"../cf.reserve\"><code>CF.RESERVE</code></a> for more information on cuckoo filter capacities.</li> <li>\n<strong>NOCREATE</strong>: If specified, prevents automatic filter creation if the filter does not exist. Instead, an error is returned if the filter does not already exist. This option is mutually exclusive with <code>CAPACITY</code>.</li> <li>\n<strong>item</strong>: One or more items to add. The <code>ITEMS</code> keyword must precede the list of items to add.</li> </ul> <h3 id=\"complexity\">Complexity</h3> <p>O(n + i), where n is the number of <code>sub-filters</code> and i is <code>maxIterations</code>. Adding items requires up to 2 memory accesses per <code>sub-filter</code>. But as the filter fills up, both locations for an item might be full. The filter attempts to <code>Cuckoo</code> swap items up to <code>maxIterations</code> times.</p> <h3 id=\"returns\">Returns</h3> <p>An array of booleans (as integers) corresponding to the items specified. Possible values for each element are:</p> <ul> <li>\n<code>&gt; 0</code> if the item was successfully inserted</li> <li>\n<code>0</code> if the item already existed <em>and</em> <code>INSERTNX</code> is used.</li> <li>\n<code>&lt;0</code> if an error occurred</li> </ul> <p>Note that for <a href=\"../cf.insert\"><code>CF.INSERT</code></a>, the return value is always be an array of <code>&gt;0</code> values, unless an error occurs.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of <a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> - where \"1\" means the item has been added to the filter, and \"0\" mean, the item already existed. <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> when filter parameters are erroneous</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; CF.INSERTNX cf CAPACITY 1000 ITEMS item1 item2 \n1) (integer) 1\n2) (integer) 1\n</pre>\n<pre tabindex=\"0\">redis&gt; CF.INSERTNX cf CAPACITY 1000 ITEMS item1 item2 item3\n1) (integer) 0\n2) (integer) 0\n3) (integer) 1\n</pre>\n<pre tabindex=\"0\">redis&gt; CF.INSERTNX cf_new CAPACITY 1000 NOCREATE ITEMS item1 item2 \n(error) ERR not found\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cf.insertnx/\" class=\"_attribution-link\">https://redis.io/commands/cf.insertnx/</a>\n  </p>\n</div>\n","client-caching/index":"<h1 class=\"command-name\">CLIENT</h1>\n<pre>CLIENT CACHING</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLIENT CACHING &lt;YES | NO&gt;</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command controls the tracking of the keys in the next command executed by the connection, when tracking is enabled in <code>OPTIN</code> or <code>OPTOUT</code> mode. Please check the <a href=\"https://redis.io/topics/client-side-caching\">client side caching documentation</a> for background information.</p> <p>When tracking is enabled Redis, using the <a href=\"../client-tracking\"><code>CLIENT TRACKING</code></a> command, it is possible to specify the <code>OPTIN</code> or <code>OPTOUT</code> options, so that keys in read only commands are not automatically remembered by the server to be invalidated later. When we are in <code>OPTIN</code> mode, we can enable the tracking of the keys in the next command by calling <code>CLIENT CACHING yes</code> immediately before it. Similarly when we are in <code>OPTOUT</code> mode, and keys are normally tracked, we can avoid the keys in the next command to be tracked using <code>CLIENT CACHING no</code>.</p> <p>Basically the command sets a state in the connection, that is valid only for the next command execution, that will modify the behavior of client tracking.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> or an error if the argument is not yes or no.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/client-caching/\" class=\"_attribution-link\">https://redis.io/commands/client-caching/</a>\n  </p>\n</div>\n","cf.exists/index":"<h1 class=\"command-name\">CF.EXISTS</h1>\n<pre>CF.EXISTS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CF.EXISTS key item</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(k), where k is the number of sub-filters</dd> </dl> <p>Check if an <code>item</code> exists in a Cuckoo Filter <code>key</code></p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: The name of the filter</li> <li>\n<strong>item</strong>: The item to check for</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> - where \"1\" value means the item may exist in the filter, and a \"0\" value means it does not exist in the filter.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; CF.EXISTS cf item1\n(integer) 1\n</pre>\n<pre tabindex=\"0\">redis&gt; CF.EXISTS cf item_new\n(integer) 0\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cf.exists/\" class=\"_attribution-link\">https://redis.io/commands/cf.exists/</a>\n  </p>\n</div>\n","cf.count/index":"<h1 class=\"command-name\">CF.COUNT</h1>\n<pre>CF.COUNT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CF.COUNT key item</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(k), where k is the number of sub-filters</dd> </dl> <p>Returns the number of times an item may be in the filter. Because this is a probabilistic data structure, this may not necessarily be accurate.</p> <p>If you just want to know if an item exists in the filter, use <a href=\"../cf.exists\"><code>CF.EXISTS</code></a> because it is more efficient for that purpose.</p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: The name of the filter</li> <li>\n<strong>item</strong>: The item to count</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> - with the count of possible matching copies of the item in the filter.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; CF.COUNT cf item1\n(integer) 42\n</pre>\n<pre tabindex=\"0\">redis&gt; CF.COUNT cf item_new\n(integer) 0\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cf.count/\" class=\"_attribution-link\">https://redis.io/commands/cf.count/</a>\n  </p>\n</div>\n","cf.scandump/index":"<h1 class=\"command-name\">CF.SCANDUMP</h1>\n<pre>CF.SCANDUMP</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CF.SCANDUMP key iterator</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(n), where n is the capacity</dd> </dl> <p>Begins an incremental save of the cuckoo filter. This is useful for large cuckoo filters which cannot fit into the normal <a href=\"../dump\"><code>DUMP</code></a> and <a href=\"../restore\"><code>RESTORE</code></a> model.</p> <p>The first time this command is called, the value of <code>iter</code> should be 0. This command returns successive <code>(iter, data)</code> pairs until <code>(0, NULL)</code> indicates completion.</p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: Name of the filter</li> <li>\n<strong>iter</strong>: Iterator value. This is either 0, or the iterator from a previous invocation of this command</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of <a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> (<em>Iterator</em>) and [] (<em>Data</em>). The Iterator is passed as input to the next invocation of <code>SCANDUMP</code>. If <em>Iterator</em> is 0, then it means iteration has completed.</p> <p>The iterator-data pair should also be passed to <code>LOADCHUNK</code> when restoring the filter.</p> <p>@exmaples</p> <pre tabindex=\"0\">redis&gt; CF.RESERVE cf 8\nOK\nredis&gt; CF.ADD cf item1\n(integer) 1\nredis&gt; CF.SCANDUMP cf 0\n1) (integer) 1\n2) \"\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x04\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x02\\x00\\x14\\x00\\x01\\x008\\x9a\\xe0\\xd8\\xc3\\x7f\\x00\\x00\"\nredis&gt; CF.SCANDUMP cf 1\n1) (integer) 9\n2) \"\\x00\\x00\\x00\\x00\\a\\x00\\x00\\x00\"\nredis&gt; CF.SCANDUMP cf 9\n1) (integer) 0\n2) (nil)\nredis&gt; FLUSHALL\nOK\nredis&gt; CF.LOADCHUNK cf 1 \"\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x04\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x02\\x00\\x14\\x00\\x01\\x008\\x9a\\xe0\\xd8\\xc3\\x7f\\x00\\x00\"\nOK\nredis&gt; CF.LOADCHUNK cf 9 \"\\x00\\x00\\x00\\x00\\a\\x00\\x00\\x00\"\nOK\nredis&gt; CF.EXISTS cf item1\n(integer) 1\n</pre>\n<p>python code:</p> <pre tabindex=\"0\">chunks = []\niter = 0\nwhile True:\n    iter, data = CF.SCANDUMP(key, iter)\n    if iter == 0:\n        break\n    else:\n        chunks.append([iter, data])\n\n# Load it back\nfor chunk in chunks:\n    iter, data = chunk\n    CF.LOADCHUNK(key, iter, data)\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cf.scandump/\" class=\"_attribution-link\">https://redis.io/commands/cf.scandump/</a>\n  </p>\n</div>\n","client-id/index":"<h1 class=\"command-name\">CLIENT</h1>\n<pre>CLIENT ID</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLIENT ID</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The command just returns the ID of the current connection. Every connection ID has certain guarantees:</p> <ol> <li>It is never repeated, so if <code>CLIENT ID</code> returns the same number, the caller can be sure that the underlying client did not disconnect and reconnect the connection, but it is still the same connection.</li> <li>The ID is monotonically incremental. If the ID of a connection is greater than the ID of another connection, it is guaranteed that the second connection was established with the server at a later time.</li> </ol> <p>This command is especially useful together with <a href=\"../client-unblock\"><code>CLIENT UNBLOCK</code></a> which was introduced also in Redis 5 together with <code>CLIENT ID</code>. Check the <a href=\"../client-unblock\"><code>CLIENT UNBLOCK</code></a> command page for a pattern involving the two commands.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nCLIENT ID\n</pre> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a></p> <p>The id of the client.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/client-id/\" class=\"_attribution-link\">https://redis.io/commands/client-id/</a>\n  </p>\n</div>\n","cf.del/index":"<h1 class=\"command-name\">CF.DEL</h1>\n<pre>CF.DEL</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CF.DEL key item</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(k), where k is the number of sub-filters</dd> </dl> <p>Deletes an item once from the filter. If the item exists only once, it will be removed from the filter. If the item was added multiple times, it will still be present.</p> <div class=\"pl-4 border-l-8\"> <div class=\"font-semibold text-slate-900\">Warning</div> <p>Deleting elements that are not in the filter may delete a different item, resulting in false negatives.</p> </div> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: The name of the filter</li> <li>\n<strong>item</strong>: The item to delete from the filter</li> </ul> <h3 id=\"complexity\">Complexity</h3> <p>O(n), where n is the number of <code>sub-filters</code>. Both alternative locations are checked on all <code>sub-filters</code>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> - where \"1\" means the item has been deleted from the filter, and \"0\" mean, the item was not found.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; CF.DEL cf item1\n(integer) 1\n</pre>\n<pre tabindex=\"0\">redis&gt; CF.DEL cf item_new\n(integer) 0\n</pre>\n<pre tabindex=\"0\">redis&gt; CF.DEL cf1 item_new\n(error) Not found\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cf.del/\" class=\"_attribution-link\">https://redis.io/commands/cf.del/</a>\n  </p>\n</div>\n","bzpopmax/index":"<h1 class=\"command-name\">BZPOPMAX</h1>\n<pre>BZPOPMAX</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BZPOPMAX key [key ...] timeout</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N)) with N being the number of elements in the sorted set.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> <code>@blocking</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><code>BZPOPMAX</code> is the blocking variant of the sorted set <a href=\"../zpopmax\"><code>ZPOPMAX</code></a> primitive.</p> <p>It is the blocking version because it blocks the connection when there are no members to pop from any of the given sorted sets. A member with the highest score is popped from first sorted set that is non-empty, with the given keys being checked in the order that they are given.</p> <p>The <code>timeout</code> argument is interpreted as a double value specifying the maximum number of seconds to block. A timeout of zero can be used to block indefinitely.</p> <p>See the <a href=\"../bzpopmin\">BZPOPMIN documentation</a> for the exact semantics, since <code>BZPOPMAX</code> is identical to <a href=\"../bzpopmin\"><code>BZPOPMIN</code></a> with the only difference being that it pops members with the highest scores instead of popping the ones with the lowest scores.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: specifically:</p> <ul> <li>A <code>nil</code> multi-bulk when no element could be popped and the timeout expired.</li> <li>A three-element multi-bulk with the first element being the name of the key where a member was popped, the second element is the popped member itself, and the third element is the score of the popped element.</li> </ul> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; DEL zset1 zset2\n(integer) 0\nredis&gt; ZADD zset1 0 a 1 b 2 c\n(integer) 3\nredis&gt; BZPOPMAX zset1 zset2 0\n1) \"zset1\"\n2) \"c\"\n3) \"2\"\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 6.0.0: <code>timeout</code> is interpreted as a double instead of an integer.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/bzpopmax/\" class=\"_attribution-link\">https://redis.io/commands/bzpopmax/</a>\n  </p>\n</div>\n","cf.info/index":"<h1 class=\"command-name\">CF.INFO</h1>\n<pre>CF.INFO</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CF.INFO key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Return information about <code>key</code></p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: Name of the key to restore</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> with information of the filter.</p> <p>@example</p> <pre tabindex=\"0\">redis&gt; CF.INFO cf\n 1) Size\n 2) (integer) 1080\n 3) Number of buckets\n 4) (integer) 512\n 5) Number of filter\n 6) (integer) 1\n 7) Number of items inserted\n 8) (integer) 0\n 9) Number of items deleted\n10) (integer) 0\n11) Bucket size\n12) (integer) 2\n13) Expansion rate\n14) (integer) 1\n15) Max iteration\n16) (integer) 20\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cf.info/\" class=\"_attribution-link\">https://redis.io/commands/cf.info/</a>\n  </p>\n</div>\n","client-info/index":"<h1 class=\"command-name\">CLIENT</h1>\n<pre>CLIENT INFO</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLIENT INFO</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The command returns information and statistics about the current client connection in a mostly human readable format.</p> <p>The reply format is identical to that of <a href=\"../client-list\"><code>CLIENT LIST</code></a>, and the content consists only of information about the current client.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nCLIENT INFO\n</pre> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: a unique string, as described at the <a href=\"../client-list\"><code>CLIENT LIST</code></a> page, for the current client.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/client-info/\" class=\"_attribution-link\">https://redis.io/commands/client-info/</a>\n  </p>\n</div>\n","bzpopmin/index":"<h1 class=\"command-name\">BZPOPMIN</h1>\n<pre>BZPOPMIN</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BZPOPMIN key [key ...] timeout</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N)) with N being the number of elements in the sorted set.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> <code>@blocking</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><code>BZPOPMIN</code> is the blocking variant of the sorted set <a href=\"../zpopmin\"><code>ZPOPMIN</code></a> primitive.</p> <p>It is the blocking version because it blocks the connection when there are no members to pop from any of the given sorted sets. A member with the lowest score is popped from first sorted set that is non-empty, with the given keys being checked in the order that they are given.</p> <p>The <code>timeout</code> argument is interpreted as a double value specifying the maximum number of seconds to block. A timeout of zero can be used to block indefinitely.</p> <p>See the <a href=\"../blpop\">BLPOP documentation</a> for the exact semantics, since <code>BZPOPMIN</code> is identical to <a href=\"../blpop\"><code>BLPOP</code></a> with the only difference being the data structure being popped from.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: specifically:</p> <ul> <li>A <code>nil</code> multi-bulk when no element could be popped and the timeout expired.</li> <li>A three-element multi-bulk with the first element being the name of the key where a member was popped, the second element is the popped member itself, and the third element is the score of the popped element.</li> </ul> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; DEL zset1 zset2\n(integer) 0\nredis&gt; ZADD zset1 0 a 1 b 2 c\n(integer) 3\nredis&gt; BZPOPMIN zset1 zset2 0\n1) \"zset1\"\n2) \"a\"\n3) \"0\"\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 6.0.0: <code>timeout</code> is interpreted as a double instead of an integer.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/bzpopmin/\" class=\"_attribution-link\">https://redis.io/commands/bzpopmin/</a>\n  </p>\n</div>\n","cf.reserve/index":"<h1 class=\"command-name\">CF.RESERVE</h1>\n<pre>CF.RESERVE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CF.RESERVE key capacity [BUCKETSIZEbucketsize]\n  [MAXITERATIONSmaxiterations] [EXPANSIONexpansion]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Create a Cuckoo Filter as <code>key</code> with a single sub-filter for the initial amount of <code>capacity</code> for items. Because of how Cuckoo Filters work, the filter is likely to declare itself full before <code>capacity</code> is reached and therefore fill rate will likely never reach 100%. The fill rate can be improved by using a larger <code>bucketsize</code> at the cost of a higher error rate. When the filter self-declare itself <code>full</code>, it will auto-expand by generating additional sub-filters at the cost of reduced performance and increased error rate. The new sub-filter is created with size of the previous sub-filter multiplied by <code>expansion</code>. Like bucket size, additional sub-filters grow the error rate linearly. The size of the new sub-filter is the size of the last sub-filter multiplied by <code>expansion</code>.</p> <p>The minimal false positive error rate is 2/255  0.78% when bucket size of 1 is used. Larger buckets increase the error rate linearly (for example, a bucket size of 3 yields a 2.35% error rate) but improve the fill rate of the filter.</p> <p><code>maxiterations</code> dictates the number of attempts to find a slot for the incoming fingerprint. Once the filter gets full, high <code>maxIterations</code> value will slow down insertions.</p> <p>Unused capacity in prior sub-filters is automatically used when possible. The filter can grow up to 32 times.</p> <h2 id=\"parameters\">Parameters:</h2> <ul> <li>\n<strong>key</strong>: The key under which the filter is found.</li> <li>\n<strong>capacity</strong>: Estimated capacity for the filter. Capacity is rounded to the next <code>2^n</code> number. The filter will likely not fill up to 100% of it's capacity. Make sure to reserve extra capacity if you want to avoid expansions.</li> </ul> <p>Optional parameters:</p> <ul> <li>\n<strong>bucketsize</strong>: Number of items in each bucket. A higher bucket size value improves the fill rate but also causes a higher error rate and slightly slower performance. The default value is 2.</li> <li>\n<strong>maxiterations</strong>: Number of attempts to swap items between buckets before declaring filter as full and creating an additional filter. A low value is better for performance and a higher number is better for filter fill rate. The default value is 20.</li> <li>\n<strong>expansion</strong>: When a new filter is created, its size is the size of the current filter multiplied by <code>expansion</code>. Expansion is rounded to the next <code>2^n</code> number. The default value is 1.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> - <code>OK</code> if executed correctly, or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> otherwise.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; CF.RESERVE cf 1000\nOK\n</pre>\n<pre tabindex=\"0\">redis&gt; CF.RESERVE cf 1000\n(error) ERR item exists\n</pre>\n<pre tabindex=\"0\">redis&gt; CF.RESERVE cf_params 1000 BUCKETSIZE 8 MAXITERATIONS 20 EXPANSION 2\nOK\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cf.reserve/\" class=\"_attribution-link\">https://redis.io/commands/cf.reserve/</a>\n  </p>\n</div>\n","cf.mexists/index":"<h1 class=\"command-name\">CF.MEXISTS</h1>\n<pre>CF.MEXISTS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CF.MEXISTS key item [item ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(k * n), where k is the number of sub-filters and n is the number of items</dd> </dl> <p>Check if one or more <code>items</code> exists in a Cuckoo Filter <code>key</code></p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: The name of the filter</li> <li>\n<strong>items</strong>: The item to check for</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of <a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> - for each item where \"1\" value means the corresponding item may exist in the filter, and a \"0\" value means it does not exist in the filter.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; CF.MEXISTS cf item1 item_new\n1) (integer) 1\n2) (integer) 0\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cf.mexists/\" class=\"_attribution-link\">https://redis.io/commands/cf.mexists/</a>\n  </p>\n</div>\n","cf.insert/index":"<h1 class=\"command-name\">CF.INSERT</h1>\n<pre>CF.INSERT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CF.INSERT key [CAPACITYcapacity] [NOCREATE] ITEMS item [item ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(n * (k + i)), where n is the number of items, k is the number of sub-filters and i is maxIterations</dd> </dl> <p>Adds one or more items to a cuckoo filter, allowing the filter to be created with a custom capacity if it does not exist yet.</p> <p>These commands offers more flexibility over the <code>ADD</code> command, at the cost of more verbosity.</p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: The name of the filter</li> <li>\n<strong>capacity</strong>: Specifies the desired capacity of the new filter, if this filter does not exist yet. If the filter already exists, then this parameter is ignored. If the filter does not exist yet and this parameter is <em>not</em> specified, then the filter is created with the module-level default capacity which is 1024. See <a href=\"../cf.reserve\"><code>CF.RESERVE</code></a> for more information on cuckoo filter capacities.</li> <li>\n<strong>NOCREATE</strong>: If specified, prevents automatic filter creation if the filter does not exist. Instead, an error is returned if the filter does not already exist. This option is mutually exclusive with <code>CAPACITY</code>.</li> <li>\n<strong>item</strong>: One or more items to add. The <code>ITEMS</code> keyword must precede the list of items to add.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> - \"1\" if executed correctly, or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> otherwise.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; CF.INSERT cf CAPACITY 1000 ITEMS item1 item2 \n1) (integer) 1\n2) (integer) 1\n</pre>\n<pre tabindex=\"0\">redis&gt; CF.INSERT cf1 CAPACITY 1000 NOCREATE ITEMS item1 item2 \n(error) ERR not found\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cf.insert/\" class=\"_attribution-link\">https://redis.io/commands/cf.insert/</a>\n  </p>\n</div>\n","client-list/index":"<h1 class=\"command-name\">CLIENT</h1>\n<pre>CLIENT LIST</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLIENT LIST [TYPE&lt;NORMAL | MASTER | REPLICA | PUBSUB&gt;]\n  [IDclient-id [client-id ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.4.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of client connections</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>CLIENT LIST</code> command returns information and statistics about the client connections server in a mostly human readable format.</p> <p>You can use one of the optional subcommands to filter the list. The <code>TYPE type</code> subcommand filters the list by clients' type, where <em>type</em> is one of <code>normal</code>, <code>master</code>, <code>replica</code>, and <code>pubsub</code>. Note that clients blocked by the <a href=\"../monitor\"><code>MONITOR</code></a> command belong to the <code>normal</code> class.</p> <p>The <code>ID</code> filter only returns entries for clients with IDs matching the <code>client-id</code> arguments.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: a unique string, formatted as follows:</p> <ul> <li>One client connection per line (separated by LF)</li> <li>Each line is composed of a succession of <code>property=value</code> fields separated by a space character.</li> </ul> <p>Here is the meaning of the fields:</p> <ul> <li>\n<code>id</code>: a unique 64-bit client ID</li> <li>\n<code>addr</code>: address/port of the client</li> <li>\n<code>laddr</code>: address/port of local address client connected to (bind address)</li> <li>\n<code>fd</code>: file descriptor corresponding to the socket</li> <li>\n<code>name</code>: the name set by the client with <a href=\"../client-setname\"><code>CLIENT SETNAME</code></a>\n</li> <li>\n<code>age</code>: total duration of the connection in seconds</li> <li>\n<code>idle</code>: idle time of the connection in seconds</li> <li>\n<code>flags</code>: client flags (see below)</li> <li>\n<code>db</code>: current database ID</li> <li>\n<code>sub</code>: number of channel subscriptions</li> <li>\n<code>psub</code>: number of pattern matching subscriptions</li> <li>\n<code>ssub</code>: number of shard channel subscriptions. Added in Redis 7.0.3</li> <li>\n<code>multi</code>: number of commands in a MULTI/EXEC context</li> <li>\n<code>qbuf</code>: query buffer length (0 means no query pending)</li> <li>\n<code>qbuf-free</code>: free space of the query buffer (0 means the buffer is full)</li> <li>\n<code>argv-mem</code>: incomplete arguments for the next command (already extracted from query buffer)</li> <li>\n<code>multi-mem</code>: memory is used up by buffered multi commands. Added in Redis 7.0</li> <li>\n<code>obl</code>: output buffer length</li> <li>\n<code>oll</code>: output list length (replies are queued in this list when the buffer is full)</li> <li>\n<code>omem</code>: output buffer memory usage</li> <li>\n<code>tot-mem</code>: total memory consumed by this client in its various buffers</li> <li>\n<code>events</code>: file descriptor events (see below)</li> <li>\n<code>cmd</code>: last command played</li> <li>\n<code>user</code>: the authenticated username of the client</li> <li>\n<code>redir</code>: client id of current client tracking redirection</li> <li>\n<code>resp</code>: client RESP protocol version. Added in Redis 7.0</li> </ul> <p>The client flags can be a combination of:</p> <pre tabindex=\"0\">A: connection to be closed ASAP\nb: the client is waiting in a blocking operation\nc: connection to be closed after writing entire reply\nd: a watched keys has been modified - EXEC will fail\ni: the client is waiting for a VM I/O (deprecated)\nM: the client is a master\nN: no specific flag set\nO: the client is a client in MONITOR mode\nP: the client is a Pub/Sub subscriber\nr: the client is in readonly mode against a cluster node\nS: the client is a replica node connection to this instance\nu: the client is unblocked\nU: the client is connected via a Unix domain socket\nx: the client is in a MULTI/EXEC context\nt: the client enabled keys tracking in order to perform client side caching\nR: the client tracking target client is invalid\nB: the client enabled broadcast tracking mode \n</pre>\n<p>The file descriptor events can be:</p> <pre tabindex=\"0\">r: the client socket is readable (event loop)\nw: the client socket is writable (event loop)\n</pre>\n<h2 id=\"notes\">Notes</h2> <p>New fields are regularly added for debugging purpose. Some could be removed in the future. A version safe Redis client using this command should parse the output accordingly (i.e. handling gracefully missing fields, skipping unknown fields).</p> <h2>History</h2> <ul> <li>Starting with Redis version 2.8.12: Added unique client <code>id</code> field.</li> <li>Starting with Redis version 5.0.0: Added optional <code>TYPE</code> filter.</li> <li>Starting with Redis version 6.0.0: Added <code>user</code> field.</li> <li>Starting with Redis version 6.2.0: Added <code>argv-mem</code>, <code>tot-mem</code>, <code>laddr</code> and <code>redir</code> fields and the optional <code>ID</code> filter.</li> <li>Starting with Redis version 7.0.0: Added <code>resp</code>, <code>multi-mem</code>, <code>rbs</code> and <code>rbp</code> fields.</li> <li>Starting with Redis version 7.0.3: Added <code>ssub</code> field.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/client-list/\" class=\"_attribution-link\">https://redis.io/commands/client-list/</a>\n  </p>\n</div>\n","client-getredir/index":"<h1 class=\"command-name\">CLIENT</h1>\n<pre>CLIENT GETREDIR</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLIENT GETREDIR</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command returns the client ID we are redirecting our <a href=\"https://redis.io/topics/client-side-caching\">tracking</a> notifications to. We set a client to redirect to when using <a href=\"../client-tracking\"><code>CLIENT TRACKING</code></a> to enable tracking. However in order to avoid forcing client libraries implementations to remember the ID notifications are redirected to, this command exists in order to improve introspection and allow clients to check later if redirection is active and towards which client ID.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the ID of the client we are redirecting the notifications to. The command returns <code>-1</code> if client tracking is not enabled, or <code>0</code> if client tracking is enabled but we are not redirecting the notifications to any client.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/client-getredir/\" class=\"_attribution-link\">https://redis.io/commands/client-getredir/</a>\n  </p>\n</div>\n","client-kill/index":"<h1 class=\"command-name\">CLIENT</h1>\n<pre>CLIENT KILL</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLIENT KILL &lt;ip:port | &lt;[IDclient-id] | [TYPE&lt;NORMAL | MASTER |\n  SLAVE | REPLICA | PUBSUB&gt;] | [USERusername] | [ADDRip:port] |\n  [LADDRip:port] | [SKIPME&lt;YES | NO&gt;] [[IDclient-id] |\n  [TYPE&lt;NORMAL | MASTER | SLAVE | REPLICA | PUBSUB&gt;] |\n  [USERusername] | [ADDRip:port] | [LADDRip:port] | [SKIPME&lt;YES\n  | NO&gt;] ...]&gt;&gt;</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.4.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of client connections</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>CLIENT KILL</code> command closes a given client connection. This command support two formats, the old format:</p> <pre>CLIENT KILL addr:port\n</pre> <p>The <code>ip:port</code> should match a line returned by the <a href=\"../client-list\"><code>CLIENT LIST</code></a> command (<code>addr</code> field).</p> <p>The new format:</p> <pre>CLIENT KILL &lt;filter&gt; &lt;value&gt; ... ... &lt;filter&gt; &lt;value&gt;\n</pre> <p>With the new form it is possible to kill clients by different attributes instead of killing just by address. The following filters are available:</p> <ul> <li>\n<code>CLIENT KILL ADDR ip:port</code>. This is exactly the same as the old three-arguments behavior.</li> <li>\n<code>CLIENT KILL LADDR ip:port</code>. Kill all clients connected to specified local (bind) address.</li> <li>\n<code>CLIENT KILL ID client-id</code>. Allows to kill a client by its unique <code>ID</code> field. Client <code>ID</code>'s are retrieved using the <a href=\"../client-list\"><code>CLIENT LIST</code></a> command.</li> <li>\n<code>CLIENT KILL TYPE type</code>, where <em>type</em> is one of <code>normal</code>, <code>master</code>, <code>replica</code> and <code>pubsub</code>. This closes the connections of <strong>all the clients</strong> in the specified class. Note that clients blocked into the <a href=\"../monitor\"><code>MONITOR</code></a> command are considered to belong to the <code>normal</code> class.</li> <li>\n<code>CLIENT KILL USER username</code>. Closes all the connections that are authenticated with the specified <a href=\"https://redis.io/topics/acl\">ACL</a> username, however it returns an error if the username does not map to an existing ACL user.</li> <li>\n<code>CLIENT KILL SKIPME yes/no</code>. By default this option is set to <code>yes</code>, that is, the client calling the command will not get killed, however setting this option to <code>no</code> will have the effect of also killing the client calling the command.</li> </ul> <p>It is possible to provide multiple filters at the same time. The command will handle multiple filters via logical AND. For example:</p> <pre>CLIENT KILL addr 127.0.0.1:12345 type pubsub\n</pre> <p>is valid and will kill only a pubsub client with the specified address. This format containing multiple filters is rarely useful currently.</p> <p>When the new form is used the command no longer returns <code>OK</code> or an error, but instead the number of killed clients, that may be zero.</p> <h2 id=\"client-kill-and-redis-sentinel\">CLIENT KILL and Redis Sentinel</h2> <p>Recent versions of Redis Sentinel (Redis 2.8.12 or greater) use CLIENT KILL in order to kill clients when an instance is reconfigured, in order to force clients to perform the handshake with one Sentinel again and update its configuration.</p> <h2 id=\"notes\">Notes</h2> <p>Due to the single-threaded nature of Redis, it is not possible to kill a client connection while it is executing a command. From the client point of view, the connection can never be closed in the middle of the execution of a command. However, the client will notice the connection has been closed only when the next command is sent (and results in network error).</p> <h2 id=\"return\">Return</h2> <p>When called with the three arguments format:</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> if the connection exists and has been closed</p> <p>When called with the filter / value format:</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of clients killed.</p> <h2>History</h2> <ul> <li>Starting with Redis version 2.8.12: Added new filter format.</li> <li>Starting with Redis version 2.8.12: <code>ID</code> option.</li> <li>Starting with Redis version 3.2.0: Added <code>master</code> type in for <code>TYPE</code> option.</li> <li>Starting with Redis version 5.0.0: Replaced <code>slave</code> <code>TYPE</code> with <code>replica</code>. <code>slave</code> still supported for backward compatibility.</li> <li>Starting with Redis version 6.2.0: <code>LADDR</code> option.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/client-kill/\" class=\"_attribution-link\">https://redis.io/commands/client-kill/</a>\n  </p>\n</div>\n","client-getname/index":"<h1 class=\"command-name\">CLIENT</h1>\n<pre>CLIENT GETNAME</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLIENT GETNAME</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.6.9</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>CLIENT GETNAME</code> returns the name of the current connection as set by <a href=\"../client-setname\"><code>CLIENT SETNAME</code></a>. Since every new connection starts without an associated name, if no name was assigned a null bulk reply is returned.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: The connection name, or a null bulk reply if no name is set.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/client-getname/\" class=\"_attribution-link\">https://redis.io/commands/client-getname/</a>\n  </p>\n</div>\n","client-setname/index":"<h1 class=\"command-name\">CLIENT</h1>\n<pre>CLIENT SETNAME</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLIENT SETNAME connection-name</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.6.9</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>CLIENT SETNAME</code> command assigns a name to the current connection.</p> <p>The assigned name is displayed in the output of <a href=\"../client-list\"><code>CLIENT LIST</code></a> so that it is possible to identify the client that performed a given connection.</p> <p>For instance when Redis is used in order to implement a queue, producers and consumers of messages may want to set the name of the connection according to their role.</p> <p>There is no limit to the length of the name that can be assigned if not the usual limits of the Redis string type (512 MB). However it is not possible to use spaces in the connection name as this would violate the format of the <a href=\"../client-list\"><code>CLIENT LIST</code></a> reply.</p> <p>It is possible to entirely remove the connection name setting it to the empty string, that is not a valid connection name since it serves to this specific purpose.</p> <p>The connection name can be inspected using <a href=\"../client-getname\"><code>CLIENT GETNAME</code></a>.</p> <p>Every new connection starts without an assigned name.</p> <p>Tip: setting names to connections is a good way to debug connection leaks due to bugs in the application using Redis.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> if the connection name was successfully set.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/client-setname/\" class=\"_attribution-link\">https://redis.io/commands/client-setname/</a>\n  </p>\n</div>\n","client-no-evict/index":"<h1 class=\"command-name\">CLIENT</h1>\n<pre>CLIENT NO-EVICT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLIENT NO-EVICT &lt;ON | OFF&gt;</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>CLIENT NO-EVICT</code> command sets the <a href=\"https://redis.io/topics/clients#client-eviction\">client eviction</a> mode for the current connection.</p> <p>When turned on and client eviction is configured, the current connection will be excluded from the client eviction process even if we're above the configured client eviction threshold.</p> <p>When turned off, the current client will be re-included in the pool of potential clients to be evicted (and evicted if needed).</p> <p>See <a href=\"https://redis.io/topics/clients#client-eviction\">client eviction</a> for more details.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code>.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/client-no-evict/\" class=\"_attribution-link\">https://redis.io/commands/client-no-evict/</a>\n  </p>\n</div>\n","cluster-delslots/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER DELSLOTS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER DELSLOTS slot [slot ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the total number of hash slot arguments</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>In Redis Cluster, each node keeps track of which master is serving a particular hash slot.</p> <p>The <code>CLUSTER DELSLOTS</code> command asks a particular Redis Cluster node to forget which master is serving the hash slots specified as arguments.</p> <p>In the context of a node that has received a <code>CLUSTER DELSLOTS</code> command and has consequently removed the associations for the passed hash slots, we say those hash slots are <em>unbound</em>. Note that the existence of unbound hash slots occurs naturally when a node has not been configured to handle them (something that can be done with the <a href=\"../cluster-addslots\"><code>CLUSTER ADDSLOTS</code></a> command) and if it has not received any information about who owns those hash slots (something that it can learn from heartbeat or update messages).</p> <p>If a node with unbound hash slots receives a heartbeat packet from another node that claims to be the owner of some of those hash slots, the association is established instantly. Moreover, if a heartbeat or update message is received with a configuration epoch greater than the node's own, the association is re-established.</p> <p>However, note that:</p> <ol> <li>The command only works if all the specified slots are already associated with some node.</li> <li>The command fails if the same slot is specified multiple times.</li> <li>As a side effect of the command execution, the node may go into <em>down</em> state because not all hash slots are covered.</li> </ol> <h2 id=\"example\">Example</h2> <p>The following command removes the association for slots 5000 and 5001 from the node receiving the command:</p> <pre>&gt; CLUSTER DELSLOTS 5000 5001\nOK\n</pre> <h2 id=\"usage-in-redis-cluster\">Usage in Redis Cluster</h2> <p>This command only works in cluster mode and may be useful for debugging and in order to manually orchestrate a cluster configuration when a new cluster is created. It is currently not used by <code>redis-cli</code>, and mainly exists for API completeness.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> if the command was successful. Otherwise an error is returned.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-delslots/\" class=\"_attribution-link\">https://redis.io/commands/cluster-delslots/</a>\n  </p>\n</div>\n","client-pause/index":"<h1 class=\"command-name\">CLIENT</h1>\n<pre>CLIENT PAUSE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLIENT PAUSE timeout [WRITE | ALL]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><code>CLIENT PAUSE</code> is a connections control command able to suspend all the Redis clients for the specified amount of time (in milliseconds).</p> <p>The command performs the following actions:</p> <ul> <li>It stops processing all the pending commands from normal and pub/sub clients for the given mode. However interactions with replicas will continue normally. Note that clients are formally paused when they try to execute a command, so no work is taken on the server side for inactive clients.</li> <li>However it returns OK to the caller ASAP, so the <code>CLIENT PAUSE</code> command execution is not paused by itself.</li> <li>When the specified amount of time has elapsed, all the clients are unblocked: this will trigger the processing of all the commands accumulated in the query buffer of every client during the pause.</li> </ul> <p>Client pause currently supports two modes:</p> <ul> <li>\n<code>ALL</code>: This is the default mode. All client commands are blocked.</li> <li>\n<code>WRITE</code>: Clients are only blocked if they attempt to execute a write command.</li> </ul> <p>For the <code>WRITE</code> mode, some commands have special behavior:</p> <ul> <li>\n<a href=\"../eval\"><code>EVAL</code></a>/<a href=\"../evalsha\"><code>EVALSHA</code></a>: Will block client for all scripts.</li> <li>\n<a href=\"../publish\"><code>PUBLISH</code></a>: Will block client.</li> <li>\n<a href=\"../pfcount\"><code>PFCOUNT</code></a>: Will block client.</li> <li>\n<a href=\"../wait\"><code>WAIT</code></a>: Acknowledgments will be delayed, so this command will appear blocked.</li> </ul> <p>This command is useful as it makes able to switch clients from a Redis instance to another one in a controlled way. For example during an instance upgrade the system administrator could do the following:</p> <ul> <li>Pause the clients using <code>CLIENT PAUSE</code>\n</li> <li>Wait a few seconds to make sure the replicas processed the latest replication stream from the master.</li> <li>Turn one of the replicas into a master.</li> <li>Reconfigure clients to connect with the new master.</li> </ul> <p>Since Redis 6.2, the recommended mode for client pause is <code>WRITE</code>. This mode will stop all replication traffic, can be aborted with the <a href=\"../client-unpause\"><code>CLIENT UNPAUSE</code></a> command, and allows reconfiguring the old master without risking accepting writes after the failover. This is also the mode used during cluster failover.</p> <p>For versions before 6.2, it is possible to send <code>CLIENT PAUSE</code> in a MULTI/EXEC block together with the <code>INFO replication</code> command in order to get the current master offset at the time the clients are blocked. This way it is possible to wait for a specific offset in the replica side in order to make sure all the replication stream was processed.</p> <p>Since Redis 3.2.10 / 4.0.0, this command also prevents keys to be evicted or expired during the time clients are paused. This way the dataset is guaranteed to be static not just from the point of view of clients not being able to write, but also from the point of view of internal operations.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: The command returns OK or an error if the timeout is invalid.</p> <h2 id=\"behavior-change-history\">Behavior change history</h2> <ul> <li>\n<code>&gt;= 3.2.0</code>: Client pause prevents client pause and key eviction as well.</li> </ul> <h2>History</h2> <ul> <li>Starting with Redis version 6.2.0: <code>CLIENT PAUSE WRITE</code> mode added along with the <code>mode</code> option.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/client-pause/\" class=\"_attribution-link\">https://redis.io/commands/client-pause/</a>\n  </p>\n</div>\n","client-reply/index":"<h1 class=\"command-name\">CLIENT</h1>\n<pre>CLIENT REPLY</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLIENT REPLY &lt;ON | OFF | SKIP&gt;</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Sometimes it can be useful for clients to completely disable replies from the Redis server. For example when the client sends fire and forget commands or performs a mass loading of data, or in caching contexts where new data is streamed constantly. In such contexts to use server time and bandwidth in order to send back replies to clients, which are going to be ignored, is considered wasteful.</p> <p>The <code>CLIENT REPLY</code> command controls whether the server will reply the client's commands. The following modes are available:</p> <ul> <li>\n<code>ON</code>. This is the default mode in which the server returns a reply to every command.</li> <li>\n<code>OFF</code>. In this mode the server will not reply to client commands.</li> <li>\n<code>SKIP</code>. This mode skips the reply of command immediately after it.</li> </ul> <h2 id=\"return\">Return</h2> <p>When called with either <code>OFF</code> or <code>SKIP</code> subcommands, no reply is made. When called with <code>ON</code>:</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code>.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/client-reply/\" class=\"_attribution-link\">https://redis.io/commands/client-reply/</a>\n  </p>\n</div>\n","client-unblock/index":"<h1 class=\"command-name\">CLIENT</h1>\n<pre>CLIENT UNBLOCK</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLIENT UNBLOCK client-id [TIMEOUT | ERROR]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log N) where N is the number of client connections</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command can unblock, from a different connection, a client blocked in a blocking operation, such as for instance <a href=\"../brpop\"><code>BRPOP</code></a> or <a href=\"../xread\"><code>XREAD</code></a> or <a href=\"../wait\"><code>WAIT</code></a>.</p> <p>By default the client is unblocked as if the timeout of the command was reached, however if an additional (and optional) argument is passed, it is possible to specify the unblocking behavior, that can be <strong>TIMEOUT</strong> (the default) or <strong>ERROR</strong>. If <strong>ERROR</strong> is specified, the behavior is to unblock the client returning as error the fact that the client was force-unblocked. Specifically the client will receive the following error:</p> <pre>-UNBLOCKED client unblocked via CLIENT UNBLOCK\n</pre> <p>Note: of course as usually it is not guaranteed that the error text remains the same, however the error code will remain <code>-UNBLOCKED</code>.</p> <p>This command is useful especially when we are monitoring many keys with a limited number of connections. For instance we may want to monitor multiple streams with <a href=\"../xread\"><code>XREAD</code></a> without using more than N connections. However at some point the consumer process is informed that there is one more stream key to monitor. In order to avoid using more connections, the best behavior would be to stop the blocking command from one of the connections in the pool, add the new key, and issue the blocking command again.</p> <p>To obtain this behavior the following pattern is used. The process uses an additional <em>control connection</em> in order to send the <code>CLIENT UNBLOCK</code> command if needed. In the meantime, before running the blocking operation on the other connections, the process runs <a href=\"../client-id\"><code>CLIENT ID</code></a> in order to get the ID associated with that connection. When a new key should be added, or when a key should no longer be monitored, the relevant connection blocking command is aborted by sending <code>CLIENT UNBLOCK</code> in the control connection. The blocking command will return and can be finally reissued.</p> <p>This example shows the application in the context of Redis streams, however the pattern is a general one and can be applied to other cases.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">Connection A (blocking connection):\n&gt; CLIENT ID\n2934\n&gt; BRPOP key1 key2 key3 0\n(client is blocked)\n\n... Now we want to add a new key ...\n\nConnection B (control connection):\n&gt; CLIENT UNBLOCK 2934\n1\n\nConnection A (blocking connection):\n... BRPOP reply with timeout ...\nNULL\n&gt; BRPOP key1 key2 key3 key4 0\n(client is blocked again)\n</pre>\n<h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, specifically:</p> <ul> <li>\n<code>1</code> if the client was unblocked successfully.</li> <li>\n<code>0</code> if the client wasn't unblocked.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/client-unblock/\" class=\"_attribution-link\">https://redis.io/commands/client-unblock/</a>\n  </p>\n</div>\n","cluster-addslots/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER ADDSLOTS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER ADDSLOTS slot [slot ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the total number of hash slot arguments</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command is useful in order to modify a node's view of the cluster configuration. Specifically it assigns a set of hash slots to the node receiving the command. If the command is successful, the node will map the specified hash slots to itself, and will start broadcasting the new configuration.</p> <p>However note that:</p> <ol> <li>The command only works if all the specified slots are, from the point of view of the node receiving the command, currently not assigned. A node will refuse to take ownership for slots that already belong to some other node (including itself).</li> <li>The command fails if the same slot is specified multiple times.</li> <li>As a side effect of the command execution, if a slot among the ones specified as argument is set as <code>importing</code>, this state gets cleared once the node assigns the (previously unbound) slot to itself.</li> </ol> <h2 id=\"example\">Example</h2> <p>For example the following command assigns slots 1 2 3 to the node receiving the command:</p> <pre>&gt; CLUSTER ADDSLOTS 1 2 3\nOK\n</pre> <p>However trying to execute it again results into an error since the slots are already assigned:</p> <pre>&gt; CLUSTER ADDSLOTS 1 2 3\nERR Slot 1 is already busy\n</pre> <h2 id=\"usage-in-redis-cluster\">Usage in Redis Cluster</h2> <p>This command only works in cluster mode and is useful in the following Redis Cluster operations:</p> <ol> <li>To create a new cluster ADDSLOTS is used in order to initially setup master nodes splitting the available hash slots among them.</li> <li>In order to fix a broken cluster where certain slots are unassigned.</li> </ol> <h2 id=\"information-about-slots-propagation-and-warnings\">Information about slots propagation and warnings</h2> <p>Note that once a node assigns a set of slots to itself, it will start propagating this information in heartbeat packet headers. However the other nodes will accept the information only if they have the slot as not already bound with another node, or if the configuration epoch of the node advertising the new hash slot, is greater than the node currently listed in the table.</p> <p>This means that this command should be used with care only by applications orchestrating Redis Cluster, like <code>redis-cli</code>, and the command if used out of the right context can leave the cluster in a wrong state or cause data loss.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> if the command was successful. Otherwise an error is returned.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-addslots/\" class=\"_attribution-link\">https://redis.io/commands/cluster-addslots/</a>\n  </p>\n</div>\n","client-trackinginfo/index":"<h1 class=\"command-name\">CLIENT</h1>\n<pre>CLIENT TRACKINGINFO</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLIENT TRACKINGINFO</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The command returns information about the current client connection's use of the <a href=\"https://redis.io/topics/client-side-caching\">server assisted client side caching</a> feature.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a list of tracking information sections and their respective values, specifically:</p> <ul> <li>\n<strong>flags</strong>: A list of tracking flags used by the connection. The flags and their meanings are as follows: <ul> <li>\n<code>off</code>: The connection isn't using server assisted client side caching.</li> <li>\n<code>on</code>: Server assisted client side caching is enabled for the connection.</li> <li>\n<code>bcast</code>: The client uses broadcasting mode.</li> <li>\n<code>optin</code>: The client does not cache keys by default.</li> <li>\n<code>optout</code>: The client caches keys by default.</li> <li>\n<code>caching-yes</code>: The next command will cache keys (exists only together with <code>optin</code>).</li> <li>\n<code>caching-no</code>: The next command won't cache keys (exists only together with <code>optout</code>).</li> <li>\n<code>noloop</code>: The client isn't notified about keys modified by itself.</li> <li>\n<code>broken_redirect</code>: The client ID used for redirection isn't valid anymore.</li> </ul> </li> <li>\n<strong>redirect</strong>: The client ID used for notifications redirection, or -1 when none.</li> <li>\n<strong>prefixes</strong>: A list of key prefixes for which notifications are sent to the client.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/client-trackinginfo/\" class=\"_attribution-link\">https://redis.io/commands/client-trackinginfo/</a>\n  </p>\n</div>\n","client-tracking/index":"<h1 class=\"command-name\">CLIENT</h1>\n<pre>CLIENT TRACKING</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLIENT TRACKING &lt;ON | OFF&gt; [REDIRECTclient-id] [PREFIXprefix\n  [PREFIX prefix ...]] [BCAST] [OPTIN] [OPTOUT] [NOLOOP]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1). Some options may introduce additional complexity.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command enables the tracking feature of the Redis server, that is used for <a href=\"https://redis.io/topics/client-side-caching\">server assisted client side caching</a>.</p> <p>When tracking is enabled Redis remembers the keys that the connection requested, in order to send later invalidation messages when such keys are modified. Invalidation messages are sent in the same connection (only available when the RESP3 protocol is used) or redirected in a different connection (available also with RESP2 and Pub/Sub). A special <em>broadcasting</em> mode is available where clients participating in this protocol receive every notification just subscribing to given key prefixes, regardless of the keys that they requested. Given the complexity of the argument please refer to <a href=\"https://redis.io/topics/client-side-caching\">the main client side caching documentation</a> for the details. This manual page is only a reference for the options of this subcommand.</p> <p>In order to enable tracking, use:</p> <pre>CLIENT TRACKING on ... options ...\n</pre> <p>The feature will remain active in the current connection for all its life, unless tracking is turned off with <code>CLIENT TRACKING off</code> at some point.</p> <p>The following are the list of options that modify the behavior of the command when enabling tracking:</p> <ul> <li>\n<code>REDIRECT &lt;id&gt;</code>: send invalidation messages to the connection with the specified ID. The connection must exist. You can get the ID of a connection using <a href=\"../client-id\"><code>CLIENT ID</code></a>. If the connection we are redirecting to is terminated, when in RESP3 mode the connection with tracking enabled will receive <code>tracking-redir-broken</code> push messages in order to signal the condition.</li> <li>\n<code>BCAST</code>: enable tracking in broadcasting mode. In this mode invalidation messages are reported for all the prefixes specified, regardless of the keys requested by the connection. Instead when the broadcasting mode is not enabled, Redis will track which keys are fetched using read-only commands, and will report invalidation messages only for such keys.</li> <li>\n<code>PREFIX &lt;prefix&gt;</code>: for broadcasting, register a given key prefix, so that notifications will be provided only for keys starting with this string. This option can be given multiple times to register multiple prefixes. If broadcasting is enabled without this option, Redis will send notifications for every key. You can't delete a single prefix, but you can delete all prefixes by disabling and re-enabling tracking. Using this option adds the additional time complexity of O(N^2), where N is the total number of prefixes tracked.</li> <li>\n<code>OPTIN</code>: when broadcasting is NOT active, normally don't track keys in read only commands, unless they are called immediately after a <code>CLIENT CACHING yes</code> command.</li> <li>\n<code>OPTOUT</code>: when broadcasting is NOT active, normally track keys in read only commands, unless they are called immediately after a <code>CLIENT CACHING no</code> command.</li> <li>\n<code>NOLOOP</code>: don't send notifications about keys modified by this connection itself.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> if the connection was successfully put in tracking mode or if the tracking mode was successfully disabled. Otherwise an error is returned.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/client-tracking/\" class=\"_attribution-link\">https://redis.io/commands/client-tracking/</a>\n  </p>\n</div>\n","cluster-forget/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER FORGET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER FORGET node-id</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The command is used in order to remove a node, specified via its node ID, from the set of <em>known nodes</em> of the Redis Cluster node receiving the command. In other words the specified node is removed from the <em>nodes table</em> of the node receiving the command.</p> <p>Because when a given node is part of the cluster, all the other nodes participating in the cluster knows about it, in order for a node to be completely removed from a cluster, the <code>CLUSTER FORGET</code> command must be sent to all the remaining nodes, regardless of the fact they are masters or replicas.</p> <p>However the command cannot simply drop the node from the internal node table of the node receiving the command, it also implements a ban-list, not allowing the same node to be added again as a side effect of processing the <em>gossip section</em> of the heartbeat packets received from other nodes.</p> <h2 id=\"details-on-why-the-ban-list-is-needed\">Details on why the ban-list is needed</h2> <p>In the following example we'll show why the command must not just remove a given node from the nodes table, but also prevent it for being re-inserted again for some time.</p> <p>Let's assume we have four nodes, A, B, C and D. In order to end with just a three nodes cluster A, B, C we may follow these steps:</p> <ol> <li>Reshard all the hash slots from D to nodes A, B, C.</li> <li>D is now empty, but still listed in the nodes table of A, B and C.</li> <li>We contact A, and send <code>CLUSTER FORGET D</code>.</li> <li>B sends node A a heartbeat packet, where node D is listed.</li> <li>A does no longer known node D (see step 3), so it starts a handshake with D.</li> <li>D ends re-added in the nodes table of A.</li> </ol> <p>As you can see in this way removing a node is fragile, we need to send <code>CLUSTER FORGET</code> commands to all the nodes ASAP hoping there are no gossip sections processing in the meantime. Because of this problem the command implements a ban-list with an expire time for each entry.</p> <p>So what the command really does is:</p> <ol> <li>The specified node gets removed from the nodes table.</li> <li>The node ID of the removed node gets added to the ban-list, for 1 minute.</li> <li>The node will skip all the node IDs listed in the ban-list when processing gossip sections received in heartbeat packets from other nodes.</li> </ol> <p>This way we have a 60 second window to inform all the nodes in the cluster that we want to remove a node.</p> <h2 id=\"special-conditions-not-allowing-the-command-execution\">Special conditions not allowing the command execution</h2> <p>The command does not succeed and returns an error in the following cases:</p> <ol> <li>The specified node ID is not found in the nodes table.</li> <li>The node receiving the command is a replica, and the specified node ID identifies its current master.</li> <li>The node ID identifies the same node we are sending the command to.</li> </ol> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> if the command was executed successfully, otherwise an error is returned.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-forget/\" class=\"_attribution-link\">https://redis.io/commands/cluster-forget/</a>\n  </p>\n</div>\n","cluster-bumpepoch/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER BUMPEPOCH</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER BUMPEPOCH</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Advances the cluster config epoch.</p> <p>The <code>CLUSTER BUMPEPOCH</code> command triggers an increment to the cluster's config epoch from the connected node. The epoch will be incremented if the node's config epoch is zero, or if it is less than the cluster's greatest epoch.</p> <p><strong>Note:</strong> config epoch management is performed internally by the cluster, and relies on obtaining a consensus of nodes. The <code>CLUSTER BUMPEPOCH</code> attempts to increment the config epoch <strong>WITHOUT</strong> getting the consensus, so using it may violate the \"last failover wins\" rule. Use it with caution.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>BUMPED</code> if the epoch was incremented, or <code>STILL</code> if the node already has the greatest config epoch in the cluster.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-bumpepoch/\" class=\"_attribution-link\">https://redis.io/commands/cluster-bumpepoch/</a>\n  </p>\n</div>\n","bzmpop/index":"<h1 class=\"command-name\">BZMPOP</h1>\n<pre>BZMPOP</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">BZMPOP timeout numkeys key [key ...] &lt;MIN | MAX&gt; [COUNTcount]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(K) + O(M*log(N)) where K is the number of provided keys, N being the number of elements in the sorted set, and M being the number of elements popped.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@blocking</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><code>BZMPOP</code> is the blocking variant of <a href=\"../zmpop\"><code>ZMPOP</code></a>.</p> <p>When any of the sorted sets contains elements, this command behaves exactly like <a href=\"../zmpop\"><code>ZMPOP</code></a>. When used inside a <a href=\"../multi\"><code>MULTI</code></a>/<a href=\"../exec\"><code>EXEC</code></a> block, this command behaves exactly like <a href=\"../zmpop\"><code>ZMPOP</code></a>. When all sorted sets are empty, Redis will block the connection until another client adds members to one of the keys or until the <code>timeout</code> (a double value specifying the maximum number of seconds to block) elapses. A <code>timeout</code> of zero can be used to block indefinitely.</p> <p>See <a href=\"../zmpop\"><code>ZMPOP</code></a> for more information.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: specifically:</p> <ul> <li>A <code>nil</code> when no element could be popped.</li> <li>A two-element array with the first element being the name of the key from which elements were popped, and the second element is an array of the popped elements. Every entry in the elements array is also an array that contains the member and its score.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/bzmpop/\" class=\"_attribution-link\">https://redis.io/commands/bzmpop/</a>\n  </p>\n</div>\n","client-unpause/index":"<h1 class=\"command-name\">CLIENT</h1>\n<pre>CLIENT UNPAUSE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLIENT UNPAUSE</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) Where N is the number of paused clients</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><code>CLIENT UNPAUSE</code> is used to resume command processing for all clients that were paused by <a href=\"../client-pause\"><code>CLIENT PAUSE</code></a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: The command returns <code>OK</code></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/client-unpause/\" class=\"_attribution-link\">https://redis.io/commands/client-unpause/</a>\n  </p>\n</div>\n","cluster-failover/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER FAILOVER</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER FAILOVER [FORCE | TAKEOVER]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command, that can only be sent to a Redis Cluster replica node, forces the replica to start a manual failover of its master instance.</p> <p>A manual failover is a special kind of failover that is usually executed when there are no actual failures, but we wish to swap the current master with one of its replicas (which is the node we send the command to), in a safe way, without any window for data loss. It works in the following way:</p> <ol> <li>The replica tells the master to stop processing queries from clients.</li> <li>The master replies to the replica with the current <em>replication offset</em>.</li> <li>The replica waits for the replication offset to match on its side, to make sure it processed all the data from the master before it continues.</li> <li>The replica starts a failover, obtains a new configuration epoch from the majority of the masters, and broadcasts the new configuration.</li> <li>The old master receives the configuration update: unblocks its clients and starts replying with redirection messages so that they'll continue the chat with the new master.</li> </ol> <p>This way clients are moved away from the old master to the new master atomically and only when the replica that is turning into the new master has processed all of the replication stream from the old master.</p> <h2 id=\"force-option-manual-failover-when-the-master-is-down\">FORCE option: manual failover when the master is down</h2> <p>The command behavior can be modified by two options: <strong>FORCE</strong> and <strong>TAKEOVER</strong>.</p> <p>If the <strong>FORCE</strong> option is given, the replica does not perform any handshake with the master, that may be not reachable, but instead just starts a failover ASAP starting from point 4. This is useful when we want to start a manual failover while the master is no longer reachable.</p> <p>However using <strong>FORCE</strong> we still need the majority of masters to be available in order to authorize the failover and generate a new configuration epoch for the replica that is going to become master.</p> <h2 id=\"takeover-option-manual-failover-without-cluster-consensus\">TAKEOVER option: manual failover without cluster consensus</h2> <p>There are situations where this is not enough, and we want a replica to failover without any agreement with the rest of the cluster. A real world use case for this is to mass promote replicas in a different data center to masters in order to perform a data center switch, while all the masters are down or partitioned away.</p> <p>The <strong>TAKEOVER</strong> option implies everything <strong>FORCE</strong> implies, but also does not uses any cluster authorization in order to failover. A replica receiving <code>CLUSTER FAILOVER TAKEOVER</code> will instead:</p> <ol> <li>Generate a new <code>configEpoch</code> unilaterally, just taking the current greatest epoch available and incrementing it if its local configuration epoch is not already the greatest.</li> <li>Assign itself all the hash slots of its master, and propagate the new configuration to every node which is reachable ASAP, and eventually to every other node.</li> </ol> <p>Note that <strong>TAKEOVER violates the last-failover-wins principle</strong> of Redis Cluster, since the configuration epoch generated by the replica violates the normal generation of configuration epochs in several ways:</p> <ol> <li>There is no guarantee that it is actually the higher configuration epoch, since, for example, we can use the <strong>TAKEOVER</strong> option within a minority, nor any message exchange is performed to generate the new configuration epoch.</li> <li>If we generate a configuration epoch which happens to collide with another instance, eventually our configuration epoch, or the one of another instance with our same epoch, will be moved away using the <em>configuration epoch collision resolution algorithm</em>.</li> </ol> <p>Because of this the <strong>TAKEOVER</strong> option should be used with care.</p> <h2 id=\"implementation-details-and-notes\">Implementation details and notes</h2> <ul> <li>\n<code>CLUSTER FAILOVER</code>, unless the <strong>TAKEOVER</strong> option is specified, does not execute a failover synchronously. It only <em>schedules</em> a manual failover, bypassing the failure detection stage.</li> <li>An <code>OK</code> reply is no guarantee that the failover will succeed.</li> <li>A replica can only be promoted to a master if it is known as a replica by a majority of the masters in the cluster. If the replica is a new node that has just been added to the cluster (for example after upgrading it), it may not yet be known to all the masters in the cluster. To check that the masters are aware of a new replica, you can send <a href=\"../cluster-nodes\"><code>CLUSTER NODES</code></a> or <a href=\"../cluster-replicas\"><code>CLUSTER REPLICAS</code></a> to each of the master nodes and check that it appears as a replica, before sending <code>CLUSTER FAILOVER</code> to the replica.</li> <li>To check that the failover has actually happened you can use <a href=\"../role\"><code>ROLE</code></a>, <code>INFO REPLICATION</code> (which indicates \"role:master\" after successful failover), or <a href=\"../cluster-nodes\"><code>CLUSTER NODES</code></a> to verify that the state of the cluster has changed sometime after the command was sent.</li> <li>To check if the failover has failed, check the replica's log for \"Manual failover timed out\", which is logged if the replica has given up after a few seconds.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> if the command was accepted and a manual failover is going to be attempted. An error if the operation cannot be executed, for example if we are talking with a node which is already a master.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-failover/\" class=\"_attribution-link\">https://redis.io/commands/cluster-failover/</a>\n  </p>\n</div>\n","cluster-addslotsrange/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER ADDSLOTSRANGE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER ADDSLOTSRANGE start-slot end-slot [start-slot end-slot ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the total number of the slots between the start slot and end slot arguments.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>CLUSTER ADDSLOTSRANGE</code> is similar to the <a href=\"../cluster-addslots\"><code>CLUSTER ADDSLOTS</code></a> command in that they both assign hash slots to nodes.</p> <p>The difference between the two commands is that <code>ADDSLOTS</code> takes a list of slots to assign to the node, while <code>ADDSLOTSRANGE</code> takes a list of slot ranges (specified by start and end slots) to assign to the node.</p> <h2 id=\"example\">Example</h2> <p>To assign slots 1 2 3 4 5 to the node, the <code>ADDSLOTS</code> command is:</p> <pre>&gt; CLUSTER ADDSLOTS 1 2 3 4 5\nOK\n</pre> <p>The same operation can be completed with the following <code>ADDSLOTSRANGE</code> command:</p> <pre>&gt; CLUSTER ADDSLOTSRANGE 1 5\nOK\n</pre> <h2 id=\"usage-in-redis-cluster\">Usage in Redis Cluster</h2> <p>This command only works in cluster mode and is useful in the following Redis Cluster operations:</p> <ol> <li>To create a new cluster ADDSLOTSRANGE is used in order to initially setup master nodes splitting the available hash slots among them.</li> <li>In order to fix a broken cluster where certain slots are unassigned.</li> </ol> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> if the command was successful. Otherwise an error is returned.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-addslotsrange/\" class=\"_attribution-link\">https://redis.io/commands/cluster-addslotsrange/</a>\n  </p>\n</div>\n","cluster-count-failure-reports/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER COUNT-FAILURE-REPORTS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER COUNT-FAILURE-REPORTS node-id</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of failure reports</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The command returns the number of <em>failure reports</em> for the specified node. Failure reports are the way Redis Cluster uses in order to promote a <code>PFAIL</code> state, that means a node is not reachable, to a <code>FAIL</code> state, that means that the majority of masters in the cluster agreed within a window of time that the node is not reachable.</p> <p>A few more details:</p> <ul> <li>A node flags another node with <code>PFAIL</code> when the node is not reachable for a time greater than the configured <em>node timeout</em>, which is a fundamental configuration parameter of a Redis Cluster.</li> <li>Nodes in <code>PFAIL</code> state are provided in gossip sections of heartbeat packets.</li> <li>Every time a node processes gossip packets from other nodes, it creates (and refreshes the TTL if needed) <strong>failure reports</strong>, remembering that a given node said another given node is in <code>PFAIL</code> condition.</li> <li>Each failure report has a time to live of two times the <em>node timeout</em> time.</li> <li>If at a given time a node has another node flagged with <code>PFAIL</code>, and at the same time collected the majority of other master nodes <em>failure reports</em> about this node (including itself if it is a master), then it elevates the failure state of the node from <code>PFAIL</code> to <code>FAIL</code>, and broadcasts a message forcing all the nodes that can be reached to flag the node as <code>FAIL</code>.</li> </ul> <p>This command returns the number of failure reports for the current node which are currently not expired (so received within two times the <em>node timeout</em> time). The count does not include what the node we are asking this count believes about the node ID we pass as argument, the count <em>only</em> includes the failure reports the node received from other nodes.</p> <p>This command is mainly useful for debugging, when the failure detector of Redis Cluster is not operating as we believe it should.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of active failure reports for the node.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-count-failure-reports/\" class=\"_attribution-link\">https://redis.io/commands/cluster-count-failure-reports/</a>\n  </p>\n</div>\n","cluster-delslotsrange/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER DELSLOTSRANGE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER DELSLOTSRANGE start-slot end-slot [start-slot end-slot ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the total number of the slots between the start slot and end slot arguments.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>CLUSTER DELSLOTSRANGE</code> command is similar to the <a href=\"../cluster-delslots\"><code>CLUSTER DELSLOTS</code></a> command in that they both remove hash slots from the node. The difference is that <a href=\"../cluster-delslots\"><code>CLUSTER DELSLOTS</code></a> takes a list of hash slots to remove from the node, while <code>CLUSTER DELSLOTSRANGE</code> takes a list of slot ranges (specified by start and end slots) to remove from the node.</p> <h2 id=\"example\">Example</h2> <p>To remove slots 1 2 3 4 5 from the node, the <a href=\"../cluster-delslots\"><code>CLUSTER DELSLOTS</code></a> command is:</p> <pre>&gt; CLUSTER DELSLOTS 1 2 3 4 5\nOK\n</pre> <p>The same operation can be completed with the following <code>CLUSTER DELSLOTSRANGE</code> command:</p> <pre>&gt; CLUSTER DELSLOTSRANGE 1 5\nOK\n</pre> <p>However, note that:</p> <ol> <li>The command only works if all the specified slots are already associated with the node.</li> <li>The command fails if the same slot is specified multiple times.</li> <li>As a side effect of the command execution, the node may go into <em>down</em> state because not all hash slots are covered.</li> </ol> <h2 id=\"usage-in-redis-cluster\">Usage in Redis Cluster</h2> <p>This command only works in cluster mode and may be useful for debugging and in order to manually orchestrate a cluster configuration when a new cluster is created. It is currently not used by <code>redis-cli</code>, and mainly exists for API completeness.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> if the command was successful. Otherwise an error is returned.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-delslotsrange/\" class=\"_attribution-link\">https://redis.io/commands/cluster-delslotsrange/</a>\n  </p>\n</div>\n","cluster-getkeysinslot/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER GETKEYSINSLOT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER GETKEYSINSLOT slot count</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of requested keys</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The command returns an array of keys names stored in the contacted node and hashing to the specified hash slot. The maximum number of keys to return is specified via the <code>count</code> argument, so that it is possible for the user of this API to batch-processing keys.</p> <p>The main usage of this command is during rehashing of cluster slots from one node to another. The way the rehashing is performed is exposed in the Redis Cluster specification, or in a more simple to digest form, as an appendix of the <a href=\"../cluster-setslot\"><code>CLUSTER SETSLOT</code></a> command documentation.</p> <pre tabindex=\"0\">&gt; CLUSTER GETKEYSINSLOT 7000 3\n1) \"key_39015\"\n2) \"key_89793\"\n3) \"key_92937\"\n</pre>\n<h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: From 0 to <em>count</em> key names in a Redis array reply.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-getkeysinslot/\" class=\"_attribution-link\">https://redis.io/commands/cluster-getkeysinslot/</a>\n  </p>\n</div>\n","cluster-countkeysinslot/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER COUNTKEYSINSLOT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER COUNTKEYSINSLOT slot</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the number of keys in the specified Redis Cluster hash slot. The command only queries the local data set, so contacting a node that is not serving the specified hash slot will always result in a count of zero being returned.</p> <pre tabindex=\"0\">&gt; CLUSTER COUNTKEYSINSLOT 7000\n(integer) 50341\n</pre>\n<h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: The number of keys in the specified hash slot, or an error if the hash slot is invalid.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-countkeysinslot/\" class=\"_attribution-link\">https://redis.io/commands/cluster-countkeysinslot/</a>\n  </p>\n</div>\n","cluster-myid/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER MYID</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER MYID</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the node's id.</p> <p>The <code>CLUSTER MYID</code> command returns the unique, auto-generated identifier that is associated with the connected cluster node.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: The node id.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-myid/\" class=\"_attribution-link\">https://redis.io/commands/cluster-myid/</a>\n  </p>\n</div>\n","cluster-keyslot/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER KEYSLOT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER KEYSLOT key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of bytes in the key</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns an integer identifying the hash slot the specified key hashes to. This command is mainly useful for debugging and testing, since it exposes via an API the underlying Redis implementation of the hashing algorithm. Example use cases for this command:</p> <ol> <li>Client libraries may use Redis in order to test their own hashing algorithm, generating random keys and hashing them with both their local implementation and using Redis <code>CLUSTER KEYSLOT</code> command, then checking if the result is the same.</li> <li>Humans may use this command in order to check what is the hash slot, and then the associated Redis Cluster node, responsible for a given key.</li> </ol> <h2 id=\"example\">Example</h2> <pre tabindex=\"0\">&gt; CLUSTER KEYSLOT somekey\n(integer) 11058\n&gt; CLUSTER KEYSLOT foo{hash_tag}\n(integer) 2515\n&gt; CLUSTER KEYSLOT bar{hash_tag}\n(integer) 2515\n</pre>\n<p>Note that the command implements the full hashing algorithm, including support for <strong>hash tags</strong>, that is the special property of Redis Cluster key hashing algorithm, of hashing just what is between <code>{</code> and <code>}</code> if such a pattern is found inside the key name, in order to force multiple keys to be handled by the same node.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: The hash slot number.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-keyslot/\" class=\"_attribution-link\">https://redis.io/commands/cluster-keyslot/</a>\n  </p>\n</div>\n","cluster-links/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER LINKS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER LINKS</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the total number of Cluster nodes</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Each node in a Redis Cluster maintains a pair of long-lived TCP link with each peer in the cluster: One for sending outbound messages towards the peer and one for receiving inbound messages from the peer.</p> <p><code>CLUSTER LINKS</code> outputs information of all such peer links as an array, where each array element is a map that contains attributes and their values for an individual link.</p> <h2 id=\"examples\">Examples</h2> <p>The following is an example output:</p> <pre tabindex=\"0\">&gt; CLUSTER LINKS\n1)  1) \"direction\"\n    2) \"to\"\n    3) \"node\"\n    4) \"8149d745fa551e40764fecaf7cab9dbdf6b659ae\"\n    5) \"create-time\"\n    6) (integer) 1639442739375\n    7) \"events\"\n    8) \"rw\"\n    9) \"send-buffer-allocated\"\n   10) (integer) 4512\n   11) \"send-buffer-used\"\n   12) (integer) 0\n2)  1) \"direction\"\n    2) \"from\"\n    3) \"node\"\n    4) \"8149d745fa551e40764fecaf7cab9dbdf6b659ae\"\n    5) \"create-time\"\n    6) (integer) 1639442739411\n    7) \"events\"\n    8) \"r\"\n    9) \"send-buffer-allocated\"\n   10) (integer) 0\n   11) \"send-buffer-used\"\n   12) (integer) 0\n</pre>\n<p>Each map is composed of the following attributes of the corresponding cluster link and their values:</p> <ol> <li>\n<code>direction</code>: This link is established by the local node <code>to</code> the peer, or accepted by the local node <code>from</code> the peer.</li> <li>\n<code>node</code>: The node id of the peer.</li> <li>\n<code>create-time</code>: Creation time of the link. (In the case of a <code>to</code> link, this is the time when the TCP link is created by the local node, not the time when it is actually established.)</li> <li>\n<code>events</code>: Events currently registered for the link. <code>r</code> means readable event, <code>w</code> means writable event.</li> <li>\n<code>send-buffer-allocated</code>: Allocated size of the link's send buffer, which is used to buffer outgoing messages toward the peer.</li> <li>\n<code>send-buffer-used</code>: Size of the portion of the link's send buffer that is currently holding data(messages).</li> </ol> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: An array of maps where each map contains various attributes and their values of a cluster link.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-links/\" class=\"_attribution-link\">https://redis.io/commands/cluster-links/</a>\n  </p>\n</div>\n","cluster-meet/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER MEET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER MEET ip port [cluster-bus-port]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><code>CLUSTER MEET</code> is used in order to connect different Redis nodes with cluster support enabled, into a working cluster.</p> <p>The basic idea is that nodes by default don't trust each other, and are considered unknown, so that it is unlikely that different cluster nodes will mix into a single one because of system administration errors or network addresses modifications.</p> <p>So in order for a given node to accept another one into the list of nodes composing a Redis Cluster, there are only two ways:</p> <ol> <li>The system administrator sends a <code>CLUSTER MEET</code> command to force a node to meet another one.</li> <li>An already known node sends a list of nodes in the gossip section that we are not aware of. If the receiving node trusts the sending node as a known node, it will process the gossip section and send a handshake to the nodes that are still not known.</li> </ol> <p>Note that Redis Cluster needs to form a full mesh (each node is connected with each other node), but in order to create a cluster, there is no need to send all the <code>CLUSTER MEET</code> commands needed to form the full mesh. What matter is to send enough <code>CLUSTER MEET</code> messages so that each node can reach each other node through a <em>chain of known nodes</em>. Thanks to the exchange of gossip information in heartbeat packets, the missing links will be created.</p> <p>So, if we link node A with node B via <code>CLUSTER MEET</code>, and B with C, A and C will find their ways to handshake and create a link.</p> <p>Another example: if we imagine a cluster formed of the following four nodes called A, B, C and D, we may send just the following set of commands to A:</p> <ol> <li><code>CLUSTER MEET B-ip B-port</code></li> <li><code>CLUSTER MEET C-ip C-port</code></li> <li><code>CLUSTER MEET D-ip D-port</code></li> </ol> <p>As a side effect of <code>A</code> knowing and being known by all the other nodes, it will send gossip sections in the heartbeat packets that will allow each other node to create a link with each other one, forming a full mesh in a matter of seconds, even if the cluster is large.</p> <p>Moreover <code>CLUSTER MEET</code> does not need to be reciprocal. If I send the command to A in order to join B, I don't need to also send it to B in order to join A.</p> <p>If the optional <code>cluster_bus_port</code> argument is not provided, the default of port + 10000 will be used.</p> <h2 id=\"implementation-details-meet-and-ping-packets\">Implementation details: MEET and PING packets</h2> <p>When a given node receives a <code>CLUSTER MEET</code> message, the node specified in the command still does not know the node we sent the command to. So in order for the node to force the receiver to accept it as a trusted node, it sends a <code>MEET</code> packet instead of a <a href=\"../ping\"><code>PING</code></a> packet. The two packets have exactly the same format, but the former forces the receiver to acknowledge the node as trusted.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> if the command was successful. If the address or port specified are invalid an error is returned.</p> <h2>History</h2> <ul> <li>Starting with Redis version 4.0.0: Added the optional <code>cluster_bus_port</code> argument.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-meet/\" class=\"_attribution-link\">https://redis.io/commands/cluster-meet/</a>\n  </p>\n</div>\n","cluster-info/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER INFO</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER INFO</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><code>CLUSTER INFO</code> provides <a href=\"../info\"><code>INFO</code></a> style information about Redis Cluster vital parameters. The following fields are always present in the reply:</p> <pre tabindex=\"0\">cluster_state:ok\ncluster_slots_assigned:16384\ncluster_slots_ok:16384\ncluster_slots_pfail:0\ncluster_slots_fail:0\ncluster_known_nodes:6\ncluster_size:3\ncluster_current_epoch:6\ncluster_my_epoch:2\ncluster_stats_messages_sent:1483972\ncluster_stats_messages_received:1483968\ntotal_cluster_links_buffer_limit_exceeded:0\n</pre>\n<ul> <li>\n<code>cluster_state</code>: State is <code>ok</code> if the node is able to receive queries. <code>fail</code> if there is at least one hash slot which is unbound (no node associated), in error state (node serving it is flagged with FAIL flag), or if the majority of masters can't be reached by this node.</li> <li>\n<code>cluster_slots_assigned</code>: Number of slots which are associated to some node (not unbound). This number should be 16384 for the node to work properly, which means that each hash slot should be mapped to a node.</li> <li>\n<code>cluster_slots_ok</code>: Number of hash slots mapping to a node not in <code>FAIL</code> or <code>PFAIL</code> state.</li> <li>\n<code>cluster_slots_pfail</code>: Number of hash slots mapping to a node in <code>PFAIL</code> state. Note that those hash slots still work correctly, as long as the <code>PFAIL</code> state is not promoted to <code>FAIL</code> by the failure detection algorithm. <code>PFAIL</code> only means that we are currently not able to talk with the node, but may be just a transient error.</li> <li>\n<code>cluster_slots_fail</code>: Number of hash slots mapping to a node in <code>FAIL</code> state. If this number is not zero the node is not able to serve queries unless <code>cluster-require-full-coverage</code> is set to <code>no</code> in the configuration.</li> <li>\n<code>cluster_known_nodes</code>: The total number of known nodes in the cluster, including nodes in <code>HANDSHAKE</code> state that may not currently be proper members of the cluster.</li> <li>\n<code>cluster_size</code>: The number of master nodes serving at least one hash slot in the cluster.</li> <li>\n<code>cluster_current_epoch</code>: The local <code>Current Epoch</code> variable. This is used in order to create unique increasing version numbers during fail overs.</li> <li>\n<code>cluster_my_epoch</code>: The <code>Config Epoch</code> of the node we are talking with. This is the current configuration version assigned to this node.</li> <li>\n<code>cluster_stats_messages_sent</code>: Number of messages sent via the cluster node-to-node binary bus.</li> <li>\n<code>cluster_stats_messages_received</code>: Number of messages received via the cluster node-to-node binary bus.</li> <li>\n<code>total_cluster_links_buffer_limit_exceeded</code>: Accumulated count of cluster links freed due to exceeding the <code>cluster-link-sendbuf-limit</code> configuration.</li> </ul> <p>The following message-related fields may be included in the reply if the value is not 0: Each message type includes statistics on the number of messages sent and received. Here are the explanation of these fields:</p> <ul> <li>\n<code>cluster_stats_messages_ping_sent</code> and <code>cluster_stats_messages_ping_received</code>: Cluster bus PING (not to be confused with the client command <a href=\"../ping\"><code>PING</code></a>).</li> <li>\n<code>cluster_stats_messages_pong_sent</code> and <code>cluster_stats_messages_pong_received</code>: PONG (reply to PING).</li> <li>\n<code>cluster_stats_messages_meet_sent</code> and <code>cluster_stats_messages_meet_received</code>: Handshake message sent to a new node, either through gossip or <a href=\"../cluster-meet\"><code>CLUSTER MEET</code></a>.</li> <li>\n<code>cluster_stats_messages_fail_sent</code> and <code>cluster_stats_messages_fail_received</code>: Mark node xxx as failing.</li> <li>\n<code>cluster_stats_messages_publish_sent</code> and <code>cluster_stats_messages_publish_received</code>: Pub/Sub Publish propagation, see <a href=\"https://redis.io/topics/pubsub#pubsub\">Pubsub</a>.</li> <li>\n<code>cluster_stats_messages_auth-req_sent</code> and <code>cluster_stats_messages_auth-req_received</code>: Replica initiated leader election to replace its master.</li> <li>\n<code>cluster_stats_messages_auth-ack_sent</code> and <code>cluster_stats_messages_auth-ack_received</code>: Message indicating a vote during leader election.</li> <li>\n<code>cluster_stats_messages_update_sent</code> and <code>cluster_stats_messages_update_received</code>: Another node slots configuration.</li> <li>\n<code>cluster_stats_messages_mfstart_sent</code> and <code>cluster_stats_messages_mfstart_received</code>: Pause clients for manual failover.</li> <li>\n<code>cluster_stats_messages_module_sent</code> and <code>cluster_stats_messages_module_received</code>: Module cluster API message.</li> <li>\n<code>cluster_stats_messages_publishshard_sent</code> and <code>cluster_stats_messages_publishshard_received</code>: Pub/Sub Publish shard propagation, see <a href=\"https://redis.io/topics/pubsub#sharded-pubsub\">Sharded Pubsub</a>.</li> </ul> <p>More information about the Current Epoch and Config Epoch variables are available in the <a href=\"https://redis.io/topics/cluster-spec#cluster-current-epoch\">Redis Cluster specification document</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: A map between named fields and values in the form of <code>&lt;field&gt;:&lt;value&gt;</code> lines separated by newlines composed by the two bytes <code>CRLF</code>.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-info/\" class=\"_attribution-link\">https://redis.io/commands/cluster-info/</a>\n  </p>\n</div>\n","cluster-flushslots/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER FLUSHSLOTS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER FLUSHSLOTS</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Deletes all slots from a node.</p> <p>The <code>CLUSTER FLUSHSLOTS</code> deletes all information about slots from the connected node. It can only be called when the database is empty.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-flushslots/\" class=\"_attribution-link\">https://redis.io/commands/cluster-flushslots/</a>\n  </p>\n</div>\n","cluster-nodes/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER NODES</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER NODES</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the total number of Cluster nodes</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Each node in a Redis Cluster has its view of the current cluster configuration, given by the set of known nodes, the state of the connection we have with such nodes, their flags, properties and assigned slots, and so forth.</p> <p><code>CLUSTER NODES</code> provides all this information, that is, the current cluster configuration of the node we are contacting, in a serialization format which happens to be exactly the same as the one used by Redis Cluster itself in order to store on disk the cluster state (however the on disk cluster state has a few additional info appended at the end).</p> <p>Note that normally clients willing to fetch the map between Cluster hash slots and node addresses should use <a href=\"../cluster-slots\"><code>CLUSTER SLOTS</code></a> instead. <code>CLUSTER NODES</code>, that provides more information, should be used for administrative tasks, debugging, and configuration inspections. It is also used by <code>redis-cli</code> in order to manage a cluster.</p> <h2 id=\"serialization-format\">Serialization format</h2> <p>The output of the command is just a space-separated CSV string, where each line represents a node in the cluster. Starting from 7.2.0, the output of the command always contains a new auxiliary field called shard-id. The following is an example of output on Redis 7.2.0.</p> <pre tabindex=\"0\">07c37dfeb235213a872192d90877d0cd55635b91 127.0.0.1:30004@31004,,shard-id=69bc080733d1355567173199cff4a6a039a2f024 slave e7d1eecce10fd6bb5eb35b9f99a514335d9ba9ca 0 1426238317239 4 connected\n67ed2db8d677e59ec4a4cefb06858cf2a1a89fa1 127.0.0.1:30002@31002,,shard-id=114f6674a35b84949fe567f5dfd41415ee776261 master - 0 1426238316232 2 connected 5461-10922\n292f8b365bb7edb5e285caf0b7e6ddc7265d2f4f 127.0.0.1:30003@31003,,shard-id=fdb36c73e72dd027bc19811b7c219ef6e55c550e master - 0 1426238318243 3 connected 10923-16383\n6ec23923021cf3ffec47632106199cb7f496ce01 127.0.0.1:30005@31005,,shard-id=114f6674a35b84949fe567f5dfd41415ee776261 slave 67ed2db8d677e59ec4a4cefb06858cf2a1a89fa1 0 1426238316232 5 connected\n824fe116063bc5fcf9f4ffd895bc17aee7731ac3 127.0.0.1:30006@31006,,shard-id=fdb36c73e72dd027bc19811b7c219ef6e55c550e slave 292f8b365bb7edb5e285caf0b7e6ddc7265d2f4f 0 1426238317741 6 connected\ne7d1eecce10fd6bb5eb35b9f99a514335d9ba9ca 127.0.0.1:30001@31001,,shard-id=69bc080733d1355567173199cff4a6a039a2f024 myself,master - 0 0 1 connected 0-5460\n</pre>\n<p>Each line is composed of the following fields:</p> <pre tabindex=\"0\">&lt;id&gt; &lt;ip:port@cport[,hostname[,auxiliary_field=value]*]&gt; &lt;flags&gt; &lt;master&gt; &lt;ping-sent&gt; &lt;pong-recv&gt; &lt;config-epoch&gt; &lt;link-state&gt; &lt;slot&gt; &lt;slot&gt; ... &lt;slot&gt;\n</pre>\n<p>The meaning of each filed is the following:</p> <ol> <li>\n<code>id</code>: The node ID, a 40-character globally unique string generated when a node is created and never changed again (unless <code>CLUSTER RESET HARD</code> is used).</li> <li>\n<code>ip:port@cport</code>: The node address that clients should contact to run queries.</li> <li>\n<code>hostname</code>: A human readable string that can be configured via the <code>cluster-annouce-hostname</code> setting. The max length of the string is 256 characters, excluding the null terminator. The name can contain ASCII alphanumeric characters, '-', and '.' only.</li> <li>\n<code>[,auxiliary_field=value]*</code>: A list of comma-separated key-value pairs that represent various node properties, such as <code>shard-id</code>. There is no intrinsic order among auxiliary fields. The auxiliary fields can appear at different position in the list from release to release. Both the key name and value can contain ASCII alphanumeric characters and the characters in <code>!#$%&amp;()*+-.:;&lt;&gt;?@[]^_{|}~</code> only. Auxiliary fields are explained in detail in the section below.</li> <li>\n<code>flags</code>: A list of comma separated flags: <code>myself</code>, <code>master</code>, <code>slave</code>, <code>fail?</code>, <code>fail</code>, <code>handshake</code>, <code>noaddr</code>, <code>nofailover</code>, <code>noflags</code>. Flags are explained below.</li> <li>\n<code>master</code>: If the node is a replica, and the primary is known, the primary node ID, otherwise the \"-\" character.</li> <li>\n<code>ping-sent</code>: Unix time at which the currently active ping was sent, or zero if there are no pending pings, in milliseconds.</li> <li>\n<code>pong-recv</code>: Unix time the last pong was received, in milliseconds.</li> <li>\n<code>config-epoch</code>: The configuration epoch (or version) of the current node (or of the current primary if the node is a replica). Each time there is a failover, a new, unique, monotonically increasing configuration epoch is created. If multiple nodes claim to serve the same hash slots, the one with the higher configuration epoch wins.</li> <li>\n<code>link-state</code>: The state of the link used for the node-to-node cluster bus. Use this link to communicate with the node. Can be <code>connected</code> or <code>disconnected</code>.</li> <li>\n<code>slot</code>: A hash slot number or range. Starting from argument number 9, but there may be up to 16384 entries in total (limit never reached). This is the list of hash slots served by this node. If the entry is just a number, it is parsed as such. If it is a range, it is in the form <code>start-end</code>, and means that the node is responsible for all the hash slots from <code>start</code> to <code>end</code> including the start and end values.</li> </ol> <p>Auxiliary fields are:</p> <ul> <li>\n<code>shard-id</code>: a 40-character globally unique string generated when a node is created. A node's shard id changes only when the node joins a different shard via <code>cluster replicate</code> and there the node's shard id is updated to its primary's.</li> </ul> <p>Flags are:</p> <ul> <li>\n<code>myself</code>: The node you are contacting.</li> <li>\n<code>master</code>: Node is a primary.</li> <li>\n<code>slave</code>: Node is a replica.</li> <li>\n<code>fail?</code>: Node is in <code>PFAIL</code> state. Not reachable for the node you are contacting, but still logically reachable (not in <code>FAIL</code> state).</li> <li>\n<code>fail</code>: Node is in <code>FAIL</code> state. It was not reachable for multiple nodes that promoted the <code>PFAIL</code> state to <code>FAIL</code>.</li> <li>\n<code>handshake</code>: Untrusted node, we are handshaking.</li> <li>\n<code>noaddr</code>: No address known for this node.</li> <li>\n<code>nofailover</code>: Replica will not try to failover.</li> <li>\n<code>noflags</code>: No flags at all.</li> </ul> <h2 id=\"notes-on-published-config-epochs\">Notes on published config epochs</h2> <p>Replicas broadcast their primary's config epochs (in order to get an <code>UPDATE</code> message if they are found to be stale), so the real config epoch of the replica (which is meaningless more or less, since they don't serve hash slots) can be only obtained checking the node flagged as <code>myself</code>, which is the entry of the node we are asking to generate <code>CLUSTER NODES</code> output. The other replicas epochs reflect what they publish in heartbeat packets, which is, the configuration epoch of the primaries they are currently replicating.</p> <h2 id=\"special-slot-entries\">Special slot entries</h2> <p>Normally hash slots associated to a given node are in one of the following formats, as already explained above:</p> <ol> <li>Single number: 3894</li> <li>Range: 3900-4000</li> </ol> <p>However node hash slots can be in a special state, used in order to communicate errors after a node restart (mismatch between the keys in the AOF/RDB file, and the node hash slots configuration), or when there is a resharding operation in progress. This two states are <strong>importing</strong> and <strong>migrating</strong>.</p> <p>The meaning of the two states is explained in the Redis Specification, however the gist of the two states is the following:</p> <ul> <li>\n<strong>Importing</strong> slots are yet not part of the nodes hash slot, there is a migration in progress. The node will accept queries about these slots only if the <code>ASK</code> command is used.</li> <li>\n<strong>Migrating</strong> slots are assigned to the node, but are being migrated to some other node. The node will accept queries if all the keys in the command exist already, otherwise it will emit what is called an <strong>ASK redirection</strong>, to force new keys creation directly in the importing node.</li> </ul> <p>Importing and migrating slots are emitted in the <code>CLUSTER NODES</code> output as follows:</p> <ul> <li>\n<strong>Importing slot:</strong> <code>[slot_number-&lt;-importing_from_node_id]</code>\n</li> <li>\n<strong>Migrating slot:</strong> <code>[slot_number-&gt;-migrating_to_node_id]</code>\n</li> </ul> <p>The following are a few examples of importing and migrating slots:</p> <ul> <li><code>[93-&lt;-292f8b365bb7edb5e285caf0b7e6ddc7265d2f4f]</code></li> <li><code>[1002-&lt;-67ed2db8d677e59ec4a4cefb06858cf2a1a89fa1]</code></li> <li><code>[77-&gt;-e7d1eecce10fd6bb5eb35b9f99a514335d9ba9ca]</code></li> <li><code>[16311-&gt;-292f8b365bb7edb5e285caf0b7e6ddc7265d2f4f]</code></li> </ul> <p>Note that the format does not have any space, so <code>CLUSTER NODES</code> output format is plain CSV with space as separator even when this special slots are emitted. However a complete parser for the format should be able to handle them.</p> <p>Note that:</p> <ol> <li>Migration and importing slots are only added to the node flagged as <code>myself</code>. This information is local to a node, for its own slots.</li> <li>Importing and migrating slots are provided as <strong>additional info</strong>. If the node has a given hash slot assigned, it will be also a plain number in the list of hash slots, so clients that don't have a clue about hash slots migrations can just skip this special fields.</li> </ol> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: The serialized cluster configuration.</p> <p><strong>A note about the word slave used in this man page and command name</strong>: Starting with Redis 5, if not for backward compatibility, the Redis project no longer uses the word slave. Unfortunately in this command the word slave is part of the protocol, so we'll be able to remove such occurrences only when this API will be naturally deprecated.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-nodes/\" class=\"_attribution-link\">https://redis.io/commands/cluster-nodes/</a>\n  </p>\n</div>\n","cluster-replicas/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER REPLICAS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER REPLICAS node-id</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The command provides a list of replica nodes replicating from the specified master node. The list is provided in the same format used by <a href=\"../cluster-nodes\"><code>CLUSTER NODES</code></a> (please refer to its documentation for the specification of the format).</p> <p>The command will fail if the specified node is not known or if it is not a master according to the node table of the node receiving the command.</p> <p>Note that if a replica is added, moved, or removed from a given master node, and we ask <code>CLUSTER REPLICAS</code> to a node that has not yet received the configuration update, it may show stale information. However eventually (in a matter of seconds if there are no network partitions) all the nodes will agree about the set of nodes associated with a given master.</p> <h2 id=\"return\">Return</h2> <p>The command returns data in the same format as <a href=\"../cluster-nodes\"><code>CLUSTER NODES</code></a>.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-replicas/\" class=\"_attribution-link\">https://redis.io/commands/cluster-replicas/</a>\n  </p>\n</div>\n","cluster-reset/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER RESET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER RESET [HARD | SOFT]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of known nodes. The command may execute a FLUSHALL as a side effect.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Reset a Redis Cluster node, in a more or less drastic way depending on the reset type, that can be <strong>hard</strong> or <strong>soft</strong>. Note that this command <strong>does not work for masters if they hold one or more keys</strong>, in that case to completely reset a master node keys must be removed first, e.g. by using <a href=\"../flushall\"><code>FLUSHALL</code></a> first, and then <code>CLUSTER RESET</code>.</p> <p>Effects on the node:</p> <ol> <li>All the other nodes in the cluster are forgotten.</li> <li>All the assigned / open slots are reset, so the slots-to-nodes mapping is totally cleared.</li> <li>If the node is a replica it is turned into an (empty) master. Its dataset is flushed, so at the end the node will be an empty master.</li> <li>\n<strong>Hard reset only</strong>: a new Node ID is generated.</li> <li>\n<strong>Hard reset only</strong>: <code>currentEpoch</code> and <code>configEpoch</code> vars are set to 0.</li> <li>The new configuration is persisted on disk in the node cluster configuration file.</li> </ol> <p>This command is mainly useful to re-provision a Redis Cluster node in order to be used in the context of a new, different cluster. The command is also extensively used by the Redis Cluster testing framework in order to reset the state of the cluster every time a new test unit is executed.</p> <p>If no reset type is specified, the default is <strong>soft</strong>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> if the command was successful. Otherwise an error is returned.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-reset/\" class=\"_attribution-link\">https://redis.io/commands/cluster-reset/</a>\n  </p>\n</div>\n","cms.initbyprob/index":"<h1 class=\"command-name\">CMS.INITBYPROB</h1>\n<pre>CMS.INITBYPROB</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CMS.INITBYPROB key error probability</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Initializes a Count-Min Sketch to accommodate requested tolerances.</p> <h3 id=\"parameters\">Parameters:</h3> <ul> <li>\n<strong>key</strong>: The name of the sketch.</li> <li>\n<strong>error</strong>: Estimate size of error. The error is a percent of total counted items. This effects the width of the sketch.</li> <li>\n<strong>probability</strong>: The desired probability for inflated count. This should be a decimal value between 0 and 1. This effects the depth of the sketch. For example, for a desired false positive rate of 0.1% (1 in 1000), error_rate should be set to 0.001. The closer this number is to zero, the greater the memory consumption per item and the more CPU usage per operation.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> - <code>OK</code> if executed correctly, or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> otherwise.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; CMS.INITBYPROB test 0.001 0.01\nOK\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cms.initbyprob/\" class=\"_attribution-link\">https://redis.io/commands/cms.initbyprob/</a>\n  </p>\n</div>\n","cluster-shards/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER SHARDS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER SHARDS</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the total number of cluster nodes</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><code>CLUSTER SHARDS</code> returns details about the shards of the cluster. A shard is defined as a collection of nodes that serve the same set of slots and that replicate from each other. A shard may only have a single master at a given time, but may have multiple or no replicas. It is possible for a shard to not be serving any slots while still having replicas.</p> <p>This command replaces the <a href=\"../cluster-slots\"><code>CLUSTER SLOTS</code></a> command, by providing a more efficient and extensible representation of the cluster.</p> <p>The command is suitable to be used by Redis Cluster client libraries in order to understand the topology of the cluster. A client should issue this command on startup in order to retrieve the map associating cluster <em>hash slots</em> with actual node information. This map should be used to direct commands to the node that is likely serving the slot associated with a given command. In the event the command is sent to the wrong node, in that it received a '-MOVED' redirect, this command can then be used to update the topology of the cluster.</p> <p>The command returns an array of shards, with each shard containing two fields, 'slots' and 'nodes'.</p> <p>The 'slots' field is a list of slot ranges served by this shard, stored as pair of integers representing the inclusive start and end slots of the ranges. For example, if a node owns the slots 1, 2, 3, 5, 7, 8 and 9, the slots ranges would be stored as [1-3], [5-5], [7-9]. The slots field would therefore be represented by the following list of integers.</p> <pre tabindex=\"0\">1) 1) \"slots\"\n   2) 1) (integer) 1\n      2) (integer) 3\n      3) (integer) 5\n      4) (integer) 5\n      5) (integer) 7\n      6) (integer) 9\n</pre>\n<p>The 'nodes' field contains a list of all nodes within the shard. Each individual node is a map of attributes that describe the node. Some attributes are optional and more attributes may be added in the future. The current list of attributes:</p> <ul> <li>id: The unique node id for this particular node.</li> <li>endpoint: The preferred endpoint to reach the node, see below for more information about the possible values of this field.</li> <li>ip: The IP address to send requests to for this node.</li> <li>hostname (optional): The announced hostname to send requests to for this node.</li> <li>port (optional): The TCP (non-TLS) port of the node. At least one of port or tls-port will be present.</li> <li>tls-port (optional): The TLS port of the node. At least one of port or tls-port will be present.</li> <li>role: The replication role of this node.</li> <li>replication-offset: The replication offset of this node. This information can be used to send commands to the most up to date replicas.</li> <li>health: Either <code>online</code>, <code>failed</code>, or <code>loading</code>. This information should be used to determine which nodes should be sent traffic. The <code>loading</code> health state should be used to know that a node is not currently eligible to serve traffic, but may be eligible in the future.</li> </ul> <p>The endpoint, along with the port, defines the location that clients should use to send requests for a given slot. A NULL value for the endpoint indicates the node has an unknown endpoint and the client should connect to the same endpoint it used to send the <code>CLUSTER SHARDS</code> command but with the port returned from the command. This unknown endpoint configuration is useful when the Redis nodes are behind a load balancer that Redis doesn't know the endpoint of. Which endpoint is set is determined by the <code>cluster-preferred-endpoint-type</code> config.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: nested list of a map of hash ranges and shard nodes.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; CLUSTER SHARDS\n1) 1) \"slots\"\n   2) 1) (integer) 0\n      2) (integer) 5460\n   3) \"nodes\"\n   4) 1)  1) \"id\"\n          2) \"e10b7051d6bf2d5febd39a2be297bbaea6084111\"\n          3) \"port\"\n          4) (integer) 30001\n          5) \"ip\"\n          6) \"127.0.0.1\"\n          7) \"endpoint\"\n          8) \"127.0.0.1\"\n          9) \"role\"\n         10) \"master\"\n         11) \"replication-offset\"\n         12) (integer) 72156\n         13) \"health\"\n         14) \"online\"\n      2)  1) \"id\"\n          2) \"1901f5962d865341e81c85f9f596b1e7160c35ce\"\n          3) \"port\"\n          4) (integer) 30006\n          5) \"ip\"\n          6) \"127.0.0.1\"\n          7) \"endpoint\"\n          8) \"127.0.0.1\"\n          9) \"role\"\n         10) \"replica\"\n         11) \"replication-offset\"\n         12) (integer) 72156\n         13) \"health\"\n         14) \"online\"\n2) 1) \"slots\"\n   2) 1) (integer) 10923\n      2) (integer) 16383\n   3) \"nodes\"\n   4) 1)  1) \"id\"\n          2) \"fd20502fe1b32fc32c15b69b0a9537551f162f1f\"\n          3) \"port\"\n          4) (integer) 30003\n          5) \"ip\"\n          6) \"127.0.0.1\"\n          7) \"endpoint\"\n          8) \"127.0.0.1\"\n          9) \"role\"\n         10) \"master\"\n         11) \"replication-offset\"\n         12) (integer) 72156\n         13) \"health\"\n         14) \"online\"\n      2)  1) \"id\"\n          2) \"6daa25c08025a0c7e4cc0d1ab255949ce6cee902\"\n          3) \"port\"\n          4) (integer) 30005\n          5) \"ip\"\n          6) \"127.0.0.1\"\n          7) \"endpoint\"\n          8) \"127.0.0.1\"\n          9) \"role\"\n         10) \"replica\"\n         11) \"replication-offset\"\n         12) (integer) 72156\n         13) \"health\"\n         14) \"online\"\n3) 1) \"slots\"\n   2) 1) (integer) 5461\n      2) (integer) 10922\n   3) \"nodes\"\n   4) 1)  1) \"id\"\n          2) \"a4a3f445ead085eb3eb9ee7d8c644ec4481ec9be\"\n          3) \"port\"\n          4) (integer) 30002\n          5) \"ip\"\n          6) \"127.0.0.1\"\n          7) \"endpoint\"\n          8) \"127.0.0.1\"\n          9) \"role\"\n         10) \"master\"\n         11) \"replication-offset\"\n         12) (integer) 72156\n         13) \"health\"\n         14) \"online\"\n      2)  1) \"id\"\n          2) \"da6d5847aa019e9b9d2a8aa24a75f856fd3456cc\"\n          3) \"port\"\n          4) (integer) 30004\n          5) \"ip\"\n          6) \"127.0.0.1\"\n          7) \"endpoint\"\n          8) \"127.0.0.1\"\n          9) \"role\"\n         10) \"replica\"\n         11) \"replication-offset\"\n         12) (integer) 72156\n         13) \"health\"\n         14) \"online\"\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-shards/\" class=\"_attribution-link\">https://redis.io/commands/cluster-shards/</a>\n  </p>\n</div>\n","cluster-slots/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER SLOTS (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 7.0.0, this command is regarded as deprecated.</p> <p>It can be replaced by <a href=\"../cluster-shards\"><code>CLUSTER SHARDS</code></a> when migrating or writing new code.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER SLOTS</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the total number of Cluster nodes</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><code>CLUSTER SLOTS</code> returns details about which cluster slots map to which Redis instances. The command is suitable to be used by Redis Cluster client libraries implementations in order to retrieve (or update when a redirection is received) the map associating cluster <em>hash slots</em> with actual nodes network information, so that when a command is received, it can be sent to what is likely the right instance for the keys specified in the command.</p> <p>The networking information for each node is an array containing the following elements:</p> <ul> <li>Preferred endpoint (Either an IP address, hostname, or NULL)</li> <li>Port number</li> <li>The node ID</li> <li>A map of additional networking metadata</li> </ul> <p>The preferred endpoint, along with the port, defines the location that clients should use to send requests for a given slot. A NULL value for the endpoint indicates the node has an unknown endpoint and the client should connect to the same endpoint it used to send the <code>CLUSTER SLOTS</code> command but with the port returned from the command. This unknown endpoint configuration is useful when the Redis nodes are behind a load balancer that Redis doesn't know the endpoint of. Which endpoint is set as preferred is determined by the <code>cluster-preferred-endpoint-type</code> config.</p> <p>Additional networking metadata is provided as a map on the fourth argument for each node. The following networking metadata may be returned:</p> <ul> <li>IP: When the preferred endpoint is not set to IP.</li> <li>Hostname: When a node has an announced hostname but the primary endpoint is not set to hostname.</li> </ul> <h2 id=\"nested-result-array\">Nested Result Array</h2> <p>Each nested result is:</p> <ul> <li>Start slot range</li> <li>End slot range</li> <li>Master for slot range represented as nested networking information</li> <li>First replica of master for slot range</li> <li>Second replica</li> <li>...continues until all replicas for this master are returned.</li> </ul> <p>Each result includes all active replicas of the master instance for the listed slot range. Failed replicas are not returned.</p> <p>The third nested reply is guaranteed to be the networking information of the master instance for the slot range. All networking information after the third nested reply are replicas of the master.</p> <p>If a cluster instance has non-contiguous slots (e.g. 1-400,900,1800-6000) then master and replica networking information results will be duplicated for each top-level slot range reply.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: nested list of slot ranges with networking information.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; CLUSTER SLOTS\n1) 1) (integer) 0\n   2) (integer) 5460\n   3) 1) \"127.0.0.1\"\n      2) (integer) 30001\n      3) \"09dbe9720cda62f7865eabc5fd8857c5d2678366\"\n      4) 1) hostname\n         2) \"host-1.redis.example.com\"\n   4) 1) \"127.0.0.1\"\n      2) (integer) 30004\n      3) \"821d8ca00d7ccf931ed3ffc7e3db0599d2271abf\"\n      4) 1) hostname\n         2) \"host-2.redis.example.com\"\n2) 1) (integer) 5461\n   2) (integer) 10922\n   3) 1) \"127.0.0.1\"\n      2) (integer) 30002\n      3) \"c9d93d9f2c0c524ff34cc11838c2003d8c29e013\"\n      4) 1) hostname\n         2) \"host-3.redis.example.com\"\n   4) 1) \"127.0.0.1\"\n      2) (integer) 30005\n      3) \"faadb3eb99009de4ab72ad6b6ed87634c7ee410f\"\n      4) 1) hostname\n         2) \"host-4.redis.example.com\"\n3) 1) (integer) 10923\n   2) (integer) 16383\n   3) 1) \"127.0.0.1\"\n      2) (integer) 30003\n      3) \"044ec91f325b7595e76dbcb18cc688b6a5b434a1\"\n      4) 1) hostname\n         2) \"host-5.redis.example.com\"\n   4) 1) \"127.0.0.1\"\n      2) (integer) 30006\n      3) \"58e6e48d41228013e5d9c1c37c5060693925e97e\"\n      4) 1) hostname\n         2) \"host-6.redis.example.com\"\n</pre>\n<p><strong>Warning:</strong> In future versions there could be more elements describing the node better. In general a client implementation should just rely on the fact that certain parameters are at fixed positions as specified, but more parameters may follow and should be ignored. Similarly a client library should try if possible to cope with the fact that older versions may just have the primary endpoint and port parameter.</p> <h2 id=\"behavior-change-history\">Behavior change history</h2> <ul> <li>\n<code>&gt;= 7.0.0</code>: Added support for hostnames and unknown endpoints in first field of node response.</li> </ul> <h2>History</h2> <ul> <li>Starting with Redis version 4.0.0: Added node IDs.</li> <li>Starting with Redis version 7.0.0: Added additional networking metadata field.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-slots/\" class=\"_attribution-link\">https://redis.io/commands/cluster-slots/</a>\n  </p>\n</div>\n","cluster-replicate/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER REPLICATE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER REPLICATE node-id</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The command reconfigures a node as a replica of the specified master. If the node receiving the command is an <em>empty master</em>, as a side effect of the command, the node role is changed from master to replica.</p> <p>Once a node is turned into the replica of another master node, there is no need to inform the other cluster nodes about the change: heartbeat packets exchanged between nodes will propagate the new configuration automatically.</p> <p>A replica will always accept the command, assuming that:</p> <ol> <li>The specified node ID exists in its nodes table.</li> <li>The specified node ID does not identify the instance we are sending the command to.</li> <li>The specified node ID is a master.</li> </ol> <p>If the node receiving the command is not already a replica, but is a master, the command will only succeed, and the node will be converted into a replica, only if the following additional conditions are met:</p> <ol> <li>The node is not serving any hash slots.</li> <li>The node is empty, no keys are stored at all in the key space.</li> </ol> <p>If the command succeeds the new replica will immediately try to contact its master in order to replicate from it.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> if the command was executed successfully, otherwise an error is returned.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-replicate/\" class=\"_attribution-link\">https://redis.io/commands/cluster-replicate/</a>\n  </p>\n</div>\n","cms.incrby/index":"<h1 class=\"command-name\">CMS.INCRBY</h1>\n<pre>CMS.INCRBY</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CMS.INCRBY key item increment [item increment ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(n) where n is the number of items</dd> </dl> <p>Increases the count of item by increment. Multiple items can be increased with one call.</p> <h3 id=\"parameters\">Parameters:</h3> <ul> <li>\n<strong>key</strong>: The name of the sketch.</li> <li>\n<strong>item</strong>: The item which counter is to be increased.</li> <li>\n<strong>increment</strong>: Amount by which the item counter is to be increased.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of <a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> with an updated min-count of each of the items in the sketch.</p> <p>Count of each item after increment.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; CMS.INCRBY test foo 10 bar 42\n1) (integer) 10\n2) (integer) 42\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cms.incrby/\" class=\"_attribution-link\">https://redis.io/commands/cms.incrby/</a>\n  </p>\n</div>\n","cms.info/index":"<h1 class=\"command-name\">CMS.INFO</h1>\n<pre>CMS.INFO</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CMS.INFO key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Returns width, depth and total count of the sketch.</p> <h3 id=\"parameters\">Parameters:</h3> <ul> <li>\n<strong>key</strong>: The name of the sketch.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> with information of the filter.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; CMS.INFO test\n 1) width\n 2) (integer) 2000\n 3) depth\n 4) (integer) 7\n 5) count\n 6) (integer) 0\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cms.info/\" class=\"_attribution-link\">https://redis.io/commands/cms.info/</a>\n  </p>\n</div>\n","cluster-saveconfig/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER SAVECONFIG</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER SAVECONFIG</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Forces a node to save the <code>nodes.conf</code> configuration on disk. Before to return the command calls <code>fsync(2)</code> in order to make sure the configuration is flushed on the computer disk.</p> <p>This command is mainly used in the event a <code>nodes.conf</code> node state file gets lost / deleted for some reason, and we want to generate it again from scratch. It can also be useful in case of mundane alterations of a node cluster configuration via the <a href=\"../cluster\"><code>CLUSTER</code></a> command in order to ensure the new configuration is persisted on disk, however all the commands should normally be able to auto schedule to persist the configuration on disk when it is important to do so for the correctness of the system in the event of a restart.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> or an error if the operation fails.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-saveconfig/\" class=\"_attribution-link\">https://redis.io/commands/cluster-saveconfig/</a>\n  </p>\n</div>\n","cluster-slaves/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER SLAVES (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 5.0.0, this command is regarded as deprecated.</p> <p>It can be replaced by <a href=\"../cluster-replicas\"><code>CLUSTER REPLICAS</code></a> when migrating or writing new code.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER SLAVES node-id</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><strong>A note about the word slave used in this man page and command name</strong>: starting with Redis version 5, if not for backward compatibility, the Redis project no longer uses the word slave. Please use the new command <a href=\"../cluster-replicas\"><code>CLUSTER REPLICAS</code></a>. The command <code>CLUSTER SLAVES</code> will continue to work for backward compatibility.</p> <p>The command provides a list of replica nodes replicating from the specified master node. The list is provided in the same format used by <a href=\"../cluster-nodes\"><code>CLUSTER NODES</code></a> (please refer to its documentation for the specification of the format).</p> <p>The command will fail if the specified node is not known or if it is not a master according to the node table of the node receiving the command.</p> <p>Note that if a replica is added, moved, or removed from a given master node, and we ask <code>CLUSTER SLAVES</code> to a node that has not yet received the configuration update, it may show stale information. However eventually (in a matter of seconds if there are no network partitions) all the nodes will agree about the set of nodes associated with a given master.</p> <h2 id=\"return\">Return</h2> <p>The command returns data in the same format as <a href=\"../cluster-nodes\"><code>CLUSTER NODES</code></a>.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-slaves/\" class=\"_attribution-link\">https://redis.io/commands/cluster-slaves/</a>\n  </p>\n</div>\n","command-info/index":"<h1 class=\"command-name\">COMMAND</h1>\n<pre>COMMAND INFO</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">COMMAND INFO [command-name [command-name ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.13</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of commands to look up</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns <a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of details about multiple Redis commands.</p> <p>Same result format as <a href=\"../command\"><code>COMMAND</code></a> except you can specify which commands get returned.</p> <p>If you request details about non-existing commands, their return position will be nil.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: nested list of command details.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nCOMMAND INFO get set eval\nCOMMAND INFO foo evalsha config bar\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 7.0.0: Allowed to be called with no argument to get info on all commands.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/command-info/\" class=\"_attribution-link\">https://redis.io/commands/command-info/</a>\n  </p>\n</div>\n","cms.query/index":"<h1 class=\"command-name\">CMS.QUERY</h1>\n<pre>CMS.QUERY</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CMS.QUERY key item [item ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(n) where n is the number of items</dd> </dl> <p>Returns the count for one or more items in a sketch.</p> <h3 id=\"parameters\">Parameters:</h3> <ul> <li>\n<strong>key</strong>: The name of the sketch.</li> <li>\n<strong>item</strong>: One or more items for which to return the count.</li> </ul> <h2 id=\"return\">Return</h2> <p>Count of one or more items</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of <a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> with a min-count of each of the items in the sketch.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; CMS.QUERY test foo bar\n1) (integer) 10\n2) (integer) 42\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cms.query/\" class=\"_attribution-link\">https://redis.io/commands/cms.query/</a>\n  </p>\n</div>\n","cluster-set-config-epoch/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER SET-CONFIG-EPOCH</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER SET-CONFIG-EPOCH config-epoch</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command sets a specific <em>config epoch</em> in a fresh node. It only works when:</p> <ol> <li>The nodes table of the node is empty.</li> <li>The node current <em>config epoch</em> is zero.</li> </ol> <p>These prerequisites are needed since usually, manually altering the configuration epoch of a node is unsafe, we want to be sure that the node with the higher configuration epoch value (that is the last that failed over) wins over other nodes in claiming the hash slots ownership.</p> <p>However there is an exception to this rule, and it is when a new cluster is created from scratch. Redis Cluster <em>config epoch collision resolution</em> algorithm can deal with new nodes all configured with the same configuration at startup, but this process is slow and should be the exception, only to make sure that whatever happens, two more nodes eventually always move away from the state of having the same configuration epoch.</p> <p>So, using <code>CLUSTER SET-CONFIG-EPOCH</code>, when a new cluster is created, we can assign a different progressive configuration epoch to each node before joining the cluster together.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> if the command was executed successfully, otherwise an error is returned.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-set-config-epoch/\" class=\"_attribution-link\">https://redis.io/commands/cluster-set-config-epoch/</a>\n  </p>\n</div>\n","cms.merge/index":"<h1 class=\"command-name\">CMS.MERGE</h1>\n<pre>CMS.MERGE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CMS.MERGE destination numKeys source [source ...] [WEIGHTS weight\n  [weight ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(n) where n is the number of sketches</dd> </dl> <p>Merges several sketches into one sketch. All sketches must have identical width and depth. Weights can be used to multiply certain sketches. Default weight is 1.</p> <h3 id=\"parameters\">Parameters:</h3> <ul> <li>\n<strong>dest</strong>: The name of destination sketch. Must be initialized.</li> <li>\n<strong>numKeys</strong>: Number of sketches to be merged.</li> <li>\n<strong>src</strong>: Names of source sketches to be merged.</li> <li>\n<strong>weight</strong>: Multiple of each sketch. Default =1.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> - <code>OK</code> if executed correctly, or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> otherwise.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; CMS.MERGE dest 2 test1 test2 WEIGHTS 1 3\nOK\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cms.merge/\" class=\"_attribution-link\">https://redis.io/commands/cms.merge/</a>\n  </p>\n</div>\n","command/index":"<h1 class=\"command-name\">COMMAND</h1>\n<pre>COMMAND</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">COMMAND</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.13</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the total number of Redis commands</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Return an array with details about every Redis command.</p> <p>The <code>COMMAND</code> command is introspective. Its reply describes all commands that the server can process. Redis clients can call it to obtain the server's runtime capabilities during the handshake.</p> <p><code>COMMAND</code> also has several subcommands. Please refer to its subcommands for further details.</p> <p><strong>Cluster note:</strong> this command is especially beneficial for cluster-aware clients. Such clients must identify the names of keys in commands to route requests to the correct shard. Although most commands accept a single key as their first argument, there are many exceptions to this rule. You can call <code>COMMAND</code> and then keep the mapping between commands and their respective key specification rules cached in the client.</p> <p>The reply it returns is an array with an element per command. Each element that describes a Redis command is represented as an array by itself.</p> <p>The command's array consists of a fixed number of elements. The exact number of elements in the array depends on the server's version.</p> <ol> <li>Name</li> <li>Arity</li> <li>Flags</li> <li>First key</li> <li>Last key</li> <li>Step</li> <li>\n<a href=\"https://redis.io/topics/acl\">ACL categories</a> (as of Redis 6.0)</li> <li>\n<a href=\"https://redis.io/topics/command-tips\">Tips</a> (as of Redis 7.0)</li> <li>\n<a href=\"https://redis.io/topics/key-specs\">Key specifications</a> (as of Redis 7.0)</li> <li>Subcommands (as of Redis 7.0)</li> </ol> <h2 id=\"name\">Name</h2> <p>This is the command's name in lowercase.</p> <p><strong>Note:</strong> Redis command names are case-insensitive.</p> <h2 id=\"arity\">Arity</h2> <p>Arity is the number of arguments a command expects. It follows a simple pattern:</p> <ul> <li>A positive integer means a fixed number of arguments.</li> <li>A negative integer means a minimal number of arguments.</li> </ul> <p>Command arity <em>always includes</em> the command's name itself (and the subcommand when applicable).</p> <p>Examples:</p> <ul> <li>\n<a href=\"../get\"><code>GET</code></a>'s arity is <em>2</em> since the command only accepts one argument and always has the format <code>GET _key_</code>.</li> <li>\n<a href=\"../mget\"><code>MGET</code></a>'s arity is <em>-2</em> since the command accepts at least one argument, but possibly multiple ones: <code>MGET _key1_ [key2] [key3] ...</code>.</li> </ul> <h2 id=\"flags\">Flags</h2> <p>Command flags are an array. It can contain the following simple strings (status reply):</p> <ul> <li>\n<strong>admin:</strong> the command is an administrative command.</li> <li>\n<strong>asking:</strong> the command is allowed even during hash slot migration. This flag is relevant in Redis Cluster deployments.</li> <li>\n<strong>blocking:</strong> the command may block the requesting client.</li> <li>\n<strong>denyoom</strong>: the command is rejected if the server's memory usage is too high (see the <em>maxmemory</em> configuration directive).</li> <li>\n<strong>fast:</strong> the command operates in constant or log(N) time. This flag is used for monitoring latency with the <a href=\"../latency\"><code>LATENCY</code></a> command.</li> <li>\n<strong>loading:</strong> the command is allowed while the database is loading.</li> <li>\n<strong>movablekeys:</strong> the <em>first key</em>, <em>last key</em>, and <em>step</em> values don't determine all key positions. Clients need to use <a href=\"../command-getkeys\"><code>COMMAND GETKEYS</code></a> or <a href=\"https://redis.io/topics/key-specs\">key specifications</a> in this case. See below for more details.</li> <li>\n<strong>no_auth:</strong> executing the command doesn't require authentication.</li> <li>\n<strong>no_async_loading:</strong> the command is denied during asynchronous loading (that is when a replica uses disk-less <code>SWAPDB SYNC</code>, and allows access to the old dataset).</li> <li>\n<strong>no_mandatory_keys:</strong> the command may accept key name arguments, but these aren't mandatory.</li> <li>\n<strong>no_multi:</strong> the command isn't allowed inside the context of a <a href=\"https://redis.io/topics/transactions\">transaction</a>.</li> <li>\n<strong>noscript:</strong> the command can't be called from <a href=\"https://redis.io/topics/eval-intro\">scripts</a> or <a href=\"https://redis.io/topics/functions-intro\">functions</a>.</li> <li>\n<strong>pubsub:</strong> the command is related to <a href=\"https://redis.io/topics/pubsub\">Redis Pub/Sub</a>.</li> <li>\n<strong>random</strong>: the command returns random results, which is a concern with verbatim script replication. As of Redis 7.0, this flag is a <a href=\"https://redis.io/topics/command-tips\">command tip</a>.</li> <li>\n<strong>readonly:</strong> the command doesn't modify data.</li> <li>\n<strong>sort_for_script:</strong> the command's output is sorted when called from a script.</li> <li>\n<strong>skip_monitor:</strong> the command is not shown in <a href=\"../monitor\"><code>MONITOR</code></a>'s output.</li> <li>\n<strong>skip_slowlog:</strong> the command is not shown in <a href=\"../slowlog\"><code>SLOWLOG</code></a>'s output. As of Redis 7.0, this flag is a <a href=\"https://redis.io/topics/command-tips\">command tip</a>.</li> <li>\n<strong>stale:</strong> the command is allowed while a replica has stale data.</li> <li>\n<strong>write:</strong> the command may modify data.</li> </ul> <h3 id=\"movablekeys\">Movablekeys</h3> <p>Consider <a href=\"../sort\"><code>SORT</code></a>:</p> <pre tabindex=\"0\">1) 1) \"sort\"\n   2) (integer) -2\n   3) 1) write\n      2) denyoom\n      3) movablekeys\n   4) (integer) 1\n   5) (integer) 1\n   6) (integer) 1\n   ...\n</pre>\n<p>Some Redis commands have no predetermined key locations or are not easy to find. For those commands, the <em>movablekeys</em> flag indicates that the <em>first key</em>, <em>last key</em>, and <em>step</em> values are insufficient to find all the keys.</p> <p>Here are several examples of commands that have the <em>movablekeys</em> flag:</p> <ul> <li>\n<a href=\"../sort\"><code>SORT</code></a>: the optional <em>STORE</em>, <em>BY</em>, and <em>GET</em> modifiers are followed by names of keys.</li> <li>\n<a href=\"../zunion\"><code>ZUNION</code></a>: the <em>numkeys</em> argument specifies the number key name arguments.</li> <li>\n<a href=\"../migrate\"><code>MIGRATE</code></a>: the keys appear <em>KEYS</em> keyword and only when the second argument is the empty string.</li> </ul> <p>Redis Cluster clients need to use other measures, as follows, to locate the keys for such commands.</p> <p>You can use the <a href=\"../command-getkeys\"><code>COMMAND GETKEYS</code></a> command and have your Redis server report all keys of a given command's invocation.</p> <p>As of Redis 7.0, clients can use the <a href=\"#key-specifications\">key specifications</a> to identify the positions of key names. The only commands that require using <a href=\"../command-getkeys\"><code>COMMAND GETKEYS</code></a> are <a href=\"../sort\"><code>SORT</code></a> and <a href=\"../migrate\"><code>MIGRATE</code></a> for clients that parse keys' specifications.</p> <p>For more information, please refer to the <a href=\"https://redis.io/topics/key-specs\">key specifications page</a>.</p> <h2 id=\"first-key\">First key</h2> <p>The position of the command's first key name argument. For most commands, the first key's position is 1. Position 0 is always the command name itself.</p> <h2 id=\"last-key\">Last key</h2> <p>The position of the command's last key name argument. Redis commands usually accept one, two or multiple number of keys.</p> <p>Commands that accept a single key have both <em>first key</em> and <em>last key</em> set to 1.</p> <p>Commands that accept two key name arguments, e.g. <a href=\"../brpoplpush\"><code>BRPOPLPUSH</code></a>, <a href=\"../smove\"><code>SMOVE</code></a> and <a href=\"../rename\"><code>RENAME</code></a>, have this value set to the position of their second key.</p> <p>Multi-key commands that accept an arbitrary number of keys, such as <a href=\"../mset\"><code>MSET</code></a>, use the value -1.</p> <h2 id=\"step\">Step</h2> <p>The step, or increment, between the <em>first key</em> and the position of the next key.</p> <p>Consider the following two examples:</p> <pre tabindex=\"0\">1) 1) \"mset\"\n   2) (integer) -3\n   3) 1) write\n      2) denyoom\n   4) (integer) 1\n   5) (integer) -1\n   6) (integer) 2\n   ...\n</pre>\n<pre tabindex=\"0\">1) 1) \"mget\"\n   2) (integer) -2\n   3) 1) readonly\n      2) fast\n   4) (integer) 1\n   5) (integer) -1\n   6) (integer) 1\n   ...\n</pre>\n<p>The step count allows us to find keys' positions. For example <a href=\"../mset\"><code>MSET</code></a>: Its syntax is <code>MSET _key1_ _val1_ [key2] [val2] [key3] [val3]...</code>, so the keys are at every other position (step value of <em>2</em>). Unlike <a href=\"../mget\"><code>MGET</code></a>, which uses a step value of <em>1</em>.</p> <h2 id=\"acl-categories\">ACL categories</h2> <p>This is an array of simple strings that are the ACL categories to which the command belongs. Please refer to the <a href=\"https://redis.io/topics/acl\">Access Control List</a> page for more information.</p> <h2 id=\"command-tips\">Command tips</h2> <p>Helpful information about the command. To be used by clients/proxies.</p> <p>Please check the <a href=\"https://redis.io/topics/command-tips\">Command tips</a> page for more information.</p> <h2 id=\"key-specifications\">Key specifications</h2> <p>This is an array consisting of the command's key specifications. Each element in the array is a map describing a method for locating keys in the command's arguments.</p> <p>For more information please check the <a href=\"https://redis.io/topics/key-specs\">key specifications page</a>.</p> <h2 id=\"subcommands\">Subcommands</h2> <p>This is an array containing all of the command's subcommands, if any. Some Redis commands have subcommands (e.g., the <code>REWRITE</code> subcommand of <a href=\"../config\"><code>CONFIG</code></a>). Each element in the array represents one subcommand and follows the same specifications as those of <code>COMMAND</code>'s reply.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a nested list of command details.</p> <p>The order of commands in the array is random.</p> <h2 id=\"examples\">Examples</h2> <p>The following is <code>COMMAND</code>'s output for the <a href=\"../get\"><code>GET</code></a> command:</p> <pre tabindex=\"0\">1)  1) \"get\"\n    2) (integer) 2\n    3) 1) readonly\n       2) fast\n    4) (integer) 1\n    5) (integer) 1\n    6) (integer) 1\n    7) 1) @read\n       2) @string\n       3) @fast\n    8) (empty array)\n    9) 1) 1) \"flags\"\n          2) 1) read\n          3) \"begin_search\"\n          4) 1) \"type\"\n             2) \"index\"\n             3) \"spec\"\n             4) 1) \"index\"\n                2) (integer) 1\n          5) \"find_keys\"\n          6) 1) \"type\"\n             2) \"range\"\n             3) \"spec\"\n             4) 1) \"lastkey\"\n                2) (integer) 0\n                3) \"keystep\"\n                4) (integer) 1\n                5) \"limit\"\n                6) (integer) 0\n   10) (empty array)\n...\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/command/\" class=\"_attribution-link\">https://redis.io/commands/command/</a>\n  </p>\n</div>\n","command-count/index":"<h1 class=\"command-name\">COMMAND</h1>\n<pre>COMMAND COUNT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">COMMAND COUNT</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.13</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns <a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> of number of total commands in this Redis server.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: number of commands returned by <a href=\"../command\"><code>COMMAND</code></a></p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nCOMMAND COUNT\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/command-count/\" class=\"_attribution-link\">https://redis.io/commands/command-count/</a>\n  </p>\n</div>\n","command-docs/index":"<h1 class=\"command-name\">COMMAND</h1>\n<pre>COMMAND DOCS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">COMMAND DOCS [command-name [command-name ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of commands to look up</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Return documentary information about commands.</p> <p>By default, the reply includes all of the server's commands. You can use the optional <em>command-name</em> argument to specify the names of one or more commands.</p> <p>The reply includes a map for each returned command. The following keys may be included in the mapped reply:</p> <ul> <li>\n<strong>summary:</strong> short command description.</li> <li>\n<strong>since:</strong> the Redis version that added the command (or for module commands, the module version).</li> <li>\n<strong>group:</strong> the functional group to which the command belongs. Possible values are: <ul> <li><em>bitmap</em></li> <li><em>cluster</em></li> <li><em>connection</em></li> <li><em>generic</em></li> <li><em>geo</em></li> <li><em>hash</em></li> <li><em>hyperloglog</em></li> <li><em>list</em></li> <li><em>module</em></li> <li><em>pubsub</em></li> <li><em>scripting</em></li> <li><em>sentinel</em></li> <li><em>server</em></li> <li><em>set</em></li> <li><em>sorted-set</em></li> <li><em>stream</em></li> <li><em>string</em></li> <li><em>transactions</em></li> </ul> </li> <li>\n<strong>complexity:</strong> a short explanation about the command's time complexity.</li> <li>\n<strong>doc_flags:</strong> an array of documentation flags. Possible values are: <ul> <li>\n<em>deprecated:</em> the command is deprecated.</li> <li>\n<em>syscmd:</em> a system command that isn't meant to be called by users.</li> </ul> </li> <li>\n<strong>deprecated_since:</strong> the Redis version that deprecated the command (or for module commands, the module version)..</li> <li>\n<strong>replaced_by:</strong> the alternative for a deprecated command.</li> <li>\n<strong>history:</strong> an array of historical notes describing changes to the command's behavior or arguments. Each entry is an array itself, made up of two elements: <ol> <li>The Redis version that the entry applies to.</li> <li>The description of the change.</li> </ol> </li> <li>\n<strong>arguments:</strong> an array of maps that describe the command's arguments. Please refer to the <a href=\"https://redis.io/topics/command-arguments\">Redis command arguments</a> page for more information.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a map as a flattened array as described above.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nCOMMAND DOCS SET\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/command-docs/\" class=\"_attribution-link\">https://redis.io/commands/command-docs/</a>\n  </p>\n</div>\n","dbsize/index":"<h1 class=\"command-name\">DBSIZE</h1>\n<pre>DBSIZE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">DBSIZE</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Return the number of keys in the currently-selected database.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/dbsize/\" class=\"_attribution-link\">https://redis.io/commands/dbsize/</a>\n  </p>\n</div>\n","config-get/index":"<h1 class=\"command-name\">CONFIG</h1>\n<pre>CONFIG GET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CONFIG GET parameter [parameter ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) when N is the number of configuration parameters provided</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>CONFIG GET</code> command is used to read the configuration parameters of a running Redis server. Not all the configuration parameters are supported in Redis 2.4, while Redis 2.6 can read the whole configuration of a server using this command.</p> <p>The symmetric command used to alter the configuration at run time is <code>CONFIG SET</code>.</p> <p><code>CONFIG GET</code> takes multiple arguments, which are glob-style patterns. Any configuration parameter matching any of the patterns are reported as a list of key-value pairs. Example:</p> <pre tabindex=\"0\">redis&gt; config get *max-*-entries* maxmemory\n 1) \"maxmemory\"\n 2) \"0\"\n 3) \"hash-max-listpack-entries\"\n 4) \"512\"\n 5) \"hash-max-ziplist-entries\"\n 6) \"512\"\n 7) \"set-max-intset-entries\"\n 8) \"512\"\n 9) \"zset-max-listpack-entries\"\n10) \"128\"\n11) \"zset-max-ziplist-entries\"\n12) \"128\"\n</pre>\n<p>You can obtain a list of all the supported configuration parameters by typing <code>CONFIG GET *</code> in an open <code>redis-cli</code> prompt.</p> <p>All the supported parameters have the same meaning of the equivalent configuration parameter used in the <a href=\"http://github.com/redis/redis/raw/unstable/redis.conf\">redis.conf</a> file:</p> <p>Note that you should look at the redis.conf file relevant to the version you're working with as configuration options might change between versions. The link above is to the latest development version.</p> <h2 id=\"return\">Return</h2> <p>The return type of the command is a <a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>.</p> <h2>History</h2> <ul> <li>Starting with Redis version 7.0.0: Added the ability to pass multiple pattern parameters in one call</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/config-get/\" class=\"_attribution-link\">https://redis.io/commands/config-get/</a>\n  </p>\n</div>\n","command-getkeysandflags/index":"<h1 class=\"command-name\">COMMAND</h1>\n<pre>COMMAND GETKEYSANDFLAGS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">COMMAND GETKEYSANDFLAGS command [arg [arg ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of arguments to the command</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns <a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of keys from a full Redis command and their usage flags.</p> <p><code>COMMAND GETKEYSANDFLAGS</code> is a helper command to let you find the keys from a full Redis command together with flags indicating what each key is used for.</p> <p><a href=\"../command\"><code>COMMAND</code></a> provides information on how to find the key names of each command (see <code>firstkey</code>, <a href=\"https://redis.io/topics/key-specs#logical-operation-flags\">key specifications</a>, and <code>movablekeys</code>), but in some cases it's not possible to find keys of certain commands and then the entire command must be parsed to discover some / all key names. You can use <a href=\"../command-getkeys\"><code>COMMAND GETKEYS</code></a> or <code>COMMAND GETKEYSANDFLAGS</code> to discover key names directly from how Redis parses the commands.</p> <p>Refer to <a href=\"https://redis.io/topics/key-specs#logical-operation-flags\">key specifications</a> for information about the meaning of the key flags.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list of keys from your command. Each element of the array is an array containing key name in the first entry, and flags in the second.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nCOMMAND GETKEYS MSET a b c d e f\nCOMMAND GETKEYS EVAL \"not consulted\" 3 key1 key2 key3 arg1 arg2 arg3 argN\nCOMMAND GETKEYSANDFLAGS LMOVE mylist1 mylist2 left left\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/command-getkeysandflags/\" class=\"_attribution-link\">https://redis.io/commands/command-getkeysandflags/</a>\n  </p>\n</div>\n","del/index":"<h1 class=\"command-name\">DEL</h1>\n<pre>DEL</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">DEL key [key ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of keys that will be removed. When a key to remove holds a value other than a string, the individual complexity for this key is O(M) where M is the number of elements in the list, set, sorted set or hash. Removing a single key that holds a string value is O(1).</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Removes the specified keys. A key is ignored if it does not exist.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: The number of keys that were removed.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET key1 \"Hello\"\nSET key2 \"World\"\nDEL key1 key2 key3\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/del/\" class=\"_attribution-link\">https://redis.io/commands/del/</a>\n  </p>\n</div>\n","decr/index":"<h1 class=\"command-name\">DECR</h1>\n<pre>DECR</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">DECR key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@string</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Decrements the number stored at <code>key</code> by one. If the key does not exist, it is set to <code>0</code> before performing the operation. An error is returned if the key contains a value of the wrong type or contains a string that can not be represented as integer. This operation is limited to <strong>64 bit signed integers</strong>.</p> <p>See <a href=\"../incr\"><code>INCR</code></a> for extra information on increment/decrement operations.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the value of <code>key</code> after the decrement</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"10\"\nDECR mykey\nSET mykey \"234293482390480948029348230948\"\nDECR mykey\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/decr/\" class=\"_attribution-link\">https://redis.io/commands/decr/</a>\n  </p>\n</div>\n","command-getkeys/index":"<h1 class=\"command-name\">COMMAND</h1>\n<pre>COMMAND GETKEYS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">COMMAND GETKEYS command [arg [arg ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.13</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of arguments to the command</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns <a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of keys from a full Redis command.</p> <p><code>COMMAND GETKEYS</code> is a helper command to let you find the keys from a full Redis command.</p> <p><a href=\"../command\"><code>COMMAND</code></a> provides information on how to find the key names of each command (see <code>firstkey</code>, <a href=\"https://redis.io/topics/key-specs#logical-operation-flags\">key specifications</a>, and <code>movablekeys</code>), but in some cases it's not possible to find keys of certain commands and then the entire command must be parsed to discover some / all key names. You can use <code>COMMAND GETKEYS</code> or <a href=\"../command-getkeysandflags\"><code>COMMAND GETKEYSANDFLAGS</code></a> to discover key names directly from how Redis parses the commands.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list of keys from your command.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nCOMMAND GETKEYS MSET a b c d e f\nCOMMAND GETKEYS EVAL \"not consulted\" 3 key1 key2 key3 arg1 arg2 arg3 argN\nCOMMAND GETKEYS SORT mylist ALPHA STORE outlist\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/command-getkeys/\" class=\"_attribution-link\">https://redis.io/commands/command-getkeys/</a>\n  </p>\n</div>\n","decrby/index":"<h1 class=\"command-name\">DECRBY</h1>\n<pre>DECRBY</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">DECRBY key decrement</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@string</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Decrements the number stored at <code>key</code> by <code>decrement</code>. If the key does not exist, it is set to <code>0</code> before performing the operation. An error is returned if the key contains a value of the wrong type or contains a string that can not be represented as integer. This operation is limited to 64 bit signed integers.</p> <p>See <a href=\"../incr\"><code>INCR</code></a> for extra information on increment/decrement operations.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the value of <code>key</code> after the decrement</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"10\"\nDECRBY mykey 3\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/decrby/\" class=\"_attribution-link\">https://redis.io/commands/decrby/</a>\n  </p>\n</div>\n","config-resetstat/index":"<h1 class=\"command-name\">CONFIG</h1>\n<pre>CONFIG RESETSTAT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CONFIG RESETSTAT</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Resets the statistics reported by Redis using the <a href=\"../info\"><code>INFO</code></a> and <a href=\"../latency-histogram\"><code>LATENCY HISTOGRAM</code></a> commands.</p> <p>The following is a non-exhaustive list of values that are reset:</p> <ul> <li>Keyspace hits and misses</li> <li>Number of expired keys</li> <li>Command and error statistics</li> <li>Connections received, rejected and evicted</li> <li>Persistence statistics</li> <li>Active defragmentation statistics</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: always <code>OK</code>.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/config-resetstat/\" class=\"_attribution-link\">https://redis.io/commands/config-resetstat/</a>\n  </p>\n</div>\n","command-list/index":"<h1 class=\"command-name\">COMMAND</h1>\n<pre>COMMAND LIST</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">COMMAND LIST [FILTERBY&lt;MODULEmodule-name | ACLCATcategory |\n  PATTERNpattern&gt;]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the total number of Redis commands</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Return an array of the server's command names.</p> <p>You can use the optional <em>FILTERBY</em> modifier to apply one of the following filters:</p> <ul> <li>\n<strong>MODULE module-name</strong>: get the commands that belong to the module specified by <em>module-name</em>.</li> <li>\n<strong>ACLCAT category</strong>: get the commands in the <a href=\"https://redis.io/docs/management/security/acl/#command-categories\">ACL category</a> specified by <em>category</em>.</li> <li>\n<strong>PATTERN pattern</strong>: get the commands that match the given glob-like <em>pattern</em>.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a list of command names.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/command-list/\" class=\"_attribution-link\">https://redis.io/commands/command-list/</a>\n  </p>\n</div>\n","config-set/index":"<h1 class=\"command-name\">CONFIG</h1>\n<pre>CONFIG SET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CONFIG SET parameter value [parameter value ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) when N is the number of configuration parameters provided</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>CONFIG SET</code> command is used in order to reconfigure the server at run time without the need to restart Redis. You can change both trivial parameters or switch from one to another persistence option using this command.</p> <p>The list of configuration parameters supported by <code>CONFIG SET</code> can be obtained issuing a <code>CONFIG GET *</code> command, that is the symmetrical command used to obtain information about the configuration of a running Redis instance.</p> <p>All the configuration parameters set using <code>CONFIG SET</code> are immediately loaded by Redis and will take effect starting with the next command executed.</p> <p>All the supported parameters have the same meaning of the equivalent configuration parameter used in the <a href=\"http://github.com/redis/redis/raw/unstable/redis.conf\">redis.conf</a> file.</p> <p>Note that you should look at the redis.conf file relevant to the version you're working with as configuration options might change between versions. The link above is to the latest development version.</p> <p>It is possible to switch persistence from RDB snapshotting to append-only file (and the other way around) using the <code>CONFIG SET</code> command. For more information about how to do that please check the <a href=\"https://redis.io/topics/persistence\">persistence page</a>.</p> <p>In general what you should know is that setting the <code>appendonly</code> parameter to <code>yes</code> will start a background process to save the initial append-only file (obtained from the in memory data set), and will append all the subsequent commands on the append-only file, thus obtaining exactly the same effect of a Redis server that started with AOF turned on since the start.</p> <p>You can have both the AOF enabled with RDB snapshotting if you want, the two options are not mutually exclusive.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> when the configuration was set properly. Otherwise an error is returned.</p> <h2>History</h2> <ul> <li>Starting with Redis version 7.0.0: Added the ability to set multiple parameters in one call.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/config-set/\" class=\"_attribution-link\">https://redis.io/commands/config-set/</a>\n  </p>\n</div>\n","cluster-setslot/index":"<h1 class=\"command-name\">CLUSTER</h1>\n<pre>CLUSTER SETSLOT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CLUSTER SETSLOT slot &lt;IMPORTINGnode-id | MIGRATINGnode-id |\n  NODEnode-id | STABLE&gt;</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><code>CLUSTER SETSLOT</code> is responsible of changing the state of a hash slot in the receiving node in different ways. It can, depending on the subcommand used:</p> <ol> <li>\n<code>MIGRATING</code> subcommand: Set a hash slot in <em>migrating</em> state.</li> <li>\n<code>IMPORTING</code> subcommand: Set a hash slot in <em>importing</em> state.</li> <li>\n<code>STABLE</code> subcommand: Clear any importing / migrating state from hash slot.</li> <li>\n<code>NODE</code> subcommand: Bind the hash slot to a different node.</li> </ol> <p>The command with its set of subcommands is useful in order to start and end cluster live resharding operations, which are accomplished by setting a hash slot in migrating state in the source node, and importing state in the destination node.</p> <p>Each subcommand is documented below. At the end you'll find a description of how live resharding is performed using this command and other related commands.</p> <h2 id=\"cluster-setslot-slot-migrating-destination-node-id\">CLUSTER SETSLOT <code>&lt;slot&gt;</code> MIGRATING <code>&lt;destination-node-id&gt;</code>\n</h2> <p>This subcommand sets a slot to <em>migrating</em> state. In order to set a slot in this state, the node receiving the command must be the hash slot owner, otherwise an error is returned.</p> <p>When a slot is set in migrating state, the node changes behavior in the following way:</p> <ol> <li>If a command is received about an existing key, the command is processed as usually.</li> <li>If a command is received about a key that does not exists, an <code>ASK</code> redirection is emitted by the node, asking the client to retry only that specific query into <code>destination-node</code>. In this case the client should not update its hash slot to node mapping.</li> <li>If the command contains multiple keys, in case none exist, the behavior is the same as point 2, if all exist, it is the same as point 1, however if only a partial number of keys exist, the command emits a <code>TRYAGAIN</code> error in order for the keys interested to finish being migrated to the target node, so that the multi keys command can be executed.</li> </ol> <h2 id=\"cluster-setslot-slot-importing-source-node-id\">CLUSTER SETSLOT <code>&lt;slot&gt;</code> IMPORTING <code>&lt;source-node-id&gt;</code>\n</h2> <p>This subcommand is the reverse of <code>MIGRATING</code>, and prepares the destination node to import keys from the specified source node. The command only works if the node is not already owner of the specified hash slot.</p> <p>When a slot is set in importing state, the node changes behavior in the following way:</p> <ol> <li>Commands about this hash slot are refused and a <code>MOVED</code> redirection is generated as usually, but in the case the command follows an <a href=\"../asking\"><code>ASKING</code></a> command, in this case the command is executed.</li> </ol> <p>In this way when a node in migrating state generates an <code>ASK</code> redirection, the client contacts the target node, sends <a href=\"../asking\"><code>ASKING</code></a>, and immediately after sends the command. This way commands about non-existing keys in the old node or keys already migrated to the target node are executed in the target node, so that:</p> <ol> <li>New keys are always created in the target node. During a hash slot migration we'll have to move only old keys, not new ones.</li> <li>Commands about keys already migrated are correctly processed in the context of the node which is the target of the migration, the new hash slot owner, in order to guarantee consistency.</li> <li>Without <a href=\"../asking\"><code>ASKING</code></a> the behavior is the same as usually. This guarantees that clients with a broken hash slots mapping will not write for error in the target node, creating a new version of a key that has yet to be migrated.</li> </ol> <h2 id=\"cluster-setslot-slot-stable\">CLUSTER SETSLOT <code>&lt;slot&gt;</code> STABLE</h2> <p>This subcommand just clears migrating / importing state from the slot. It is mainly used to fix a cluster stuck in a wrong state by <code>redis-cli --cluster fix</code>. Normally the two states are cleared automatically at the end of the migration using the <code>SETSLOT ... NODE ...</code> subcommand as explained in the next section.</p> <h2 id=\"cluster-setslot-slot-node-node-id\">CLUSTER SETSLOT <code>&lt;slot&gt;</code> NODE <code>&lt;node-id&gt;</code>\n</h2> <p>The <code>NODE</code> subcommand is the one with the most complex semantics. It associates the hash slot with the specified node, however the command works only in specific situations and has different side effects depending on the slot state. The following is the set of pre-conditions and side effects of the command:</p> <ol> <li>If the current hash slot owner is the node receiving the command, but for effect of the command the slot would be assigned to a different node, the command will return an error if there are still keys for that hash slot in the node receiving the command.</li> <li>If the slot is in <em>migrating</em> state, the state gets cleared when the slot is assigned to another node.</li> <li>If the slot was in <em>importing</em> state in the node receiving the command, and the command assigns the slot to this node (which happens in the target node at the end of the resharding of a hash slot from one node to another), the command has the following side effects: A) the <em>importing</em> state is cleared. B) If the node config epoch is not already the greatest of the cluster, it generates a new one and assigns the new config epoch to itself. This way its new hash slot ownership will win over any past configuration created by previous failovers or slot migrations.</li> </ol> <p>It is important to note that step 3 is the only time when a Redis Cluster node will create a new config epoch without agreement from other nodes. This only happens when a manual configuration is operated. However it is impossible that this creates a non-transient setup where two nodes have the same config epoch, since Redis Cluster uses a config epoch collision resolution algorithm.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: All the subcommands return <code>OK</code> if the command was successful. Otherwise an error is returned.</p> <h2 id=\"redis-cluster-live-resharding-explained\">Redis Cluster live resharding explained</h2> <p>The <code>CLUSTER SETSLOT</code> command is an important piece used by Redis Cluster in order to migrate all the keys contained in one hash slot from one node to another. This is how the migration is orchestrated, with the help of other commands as well. We'll call the node that has the current ownership of the hash slot the <code>source</code> node, and the node where we want to migrate the <code>destination</code> node.</p> <ol> <li>Set the destination node slot to <em>importing</em> state using <code>CLUSTER SETSLOT &lt;slot&gt; IMPORTING &lt;source-node-id&gt;</code>.</li> <li>Set the source node slot to <em>migrating</em> state using <code>CLUSTER SETSLOT &lt;slot&gt; MIGRATING &lt;destination-node-id&gt;</code>.</li> <li>Get keys from the source node with <a href=\"../cluster-getkeysinslot\"><code>CLUSTER GETKEYSINSLOT</code></a> command and move them into the destination node using the <a href=\"../migrate\"><code>MIGRATE</code></a> command.</li> <li>Send <code>CLUSTER SETSLOT &lt;slot&gt; NODE &lt;destination-node-id&gt;</code> to the destination node.</li> <li>Send <code>CLUSTER SETSLOT &lt;slot&gt; NODE &lt;destination-node-id&gt;</code> to the source node.</li> <li>Send <code>CLUSTER SETSLOT &lt;slot&gt; NODE &lt;destination-node-id&gt;</code> to the other master nodes (optional).</li> </ol> <p>Notes:</p> <ul> <li>The order of step 1 and 2 is important. We want the destination node to be ready to accept <code>ASK</code> redirections when the source node is configured to redirect.</li> <li>The order of step 4 and 5 is important. The destination node is responsible for propagating the change to the rest of the cluster. If the source node is informed before the destination node and the destination node crashes before it is set as new slot owner, the slot is left with no owner, even after a successful failover.</li> <li>Step 6, sending <code>SETSLOT</code> to the nodes not involved in the resharding, is not technically necessary since the configuration will eventually propagate itself. However, it is a good idea to do so in order to stop nodes from pointing to the wrong node for the hash slot moved as soon as possible, resulting in less redirections to find the right node.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cluster-setslot/\" class=\"_attribution-link\">https://redis.io/commands/cluster-setslot/</a>\n  </p>\n</div>\n","config-rewrite/index":"<h1 class=\"command-name\">CONFIG</h1>\n<pre>CONFIG REWRITE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CONFIG REWRITE</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>CONFIG REWRITE</code> command rewrites the <code>redis.conf</code> file the server was started with, applying the minimal changes needed to make it reflect the configuration currently used by the server, which may be different compared to the original one because of the use of the <a href=\"../config-set\"><code>CONFIG SET</code></a> command.</p> <p>The rewrite is performed in a very conservative way:</p> <ul> <li>Comments and the overall structure of the original redis.conf are preserved as much as possible.</li> <li>If an option already exists in the old redis.conf file, it will be rewritten at the same position (line number).</li> <li>If an option was not already present, but it is set to its default value, it is not added by the rewrite process.</li> <li>If an option was not already present, but it is set to a non-default value, it is appended at the end of the file.</li> <li>Non used lines are blanked. For instance if you used to have multiple <code>save</code> directives, but the current configuration has fewer or none as you disabled RDB persistence, all the lines will be blanked.</li> </ul> <p>CONFIG REWRITE is also able to rewrite the configuration file from scratch if the original one no longer exists for some reason. However if the server was started without a configuration file at all, the CONFIG REWRITE will just return an error.</p> <h2 id=\"atomic-rewrite-process\">Atomic rewrite process</h2> <p>In order to make sure the redis.conf file is always consistent, that is, on errors or crashes you always end with the old file, or the new one, the rewrite is performed with a single <code>write(2)</code> call that has enough content to be at least as big as the old file. Sometimes additional padding in the form of comments is added in order to make sure the resulting file is big enough, and later the file gets truncated to remove the padding at the end.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> when the configuration was rewritten properly. Otherwise an error is returned.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/config-rewrite/\" class=\"_attribution-link\">https://redis.io/commands/config-rewrite/</a>\n  </p>\n</div>\n","copy/index":"<h1 class=\"command-name\">COPY</h1>\n<pre>COPY</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">COPY source destination [DBdestination-db] [REPLACE]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) worst case for collections, where N is the number of nested items. O(1) for string values.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command copies the value stored at the <code>source</code> key to the <code>destination</code> key.</p> <p>By default, the <code>destination</code> key is created in the logical database used by the connection. The <code>DB</code> option allows specifying an alternative logical database index for the destination key.</p> <p>The command returns an error when the <code>destination</code> key already exists. The <code>REPLACE</code> option removes the <code>destination</code> key before copying the value to it.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, specifically:</p> <ul> <li>\n<code>1</code> if <code>source</code> was copied.</li> <li>\n<code>0</code> if <code>source</code> was not copied.</li> </ul> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">SET dolly \"sheep\"\nCOPY dolly clone\nGET clone\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/copy/\" class=\"_attribution-link\">https://redis.io/commands/copy/</a>\n  </p>\n</div>\n","discard/index":"<h1 class=\"command-name\">DISCARD</h1>\n<pre>DISCARD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">DISCARD</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N), when N is the number of queued commands</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> <code>@transaction</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Flushes all previously queued commands in a <a href=\"https://redis.io/topics/transactions\">transaction</a> and restores the connection state to normal.</p> <p>If <a href=\"../watch\"><code>WATCH</code></a> was used, <code>DISCARD</code> unwatches all keys watched by the connection.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: always <code>OK</code>.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/discard/\" class=\"_attribution-link\">https://redis.io/commands/discard/</a>\n  </p>\n</div>\n","cms.initbydim/index":"<h1 class=\"command-name\">CMS.INITBYDIM</h1>\n<pre>CMS.INITBYDIM</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">CMS.INITBYDIM key width depth</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Initializes a Count-Min Sketch to dimensions specified by user.</p> <h3 id=\"parameters\">Parameters:</h3> <ul> <li>\n<strong>key</strong>: The name of the sketch.</li> <li>\n<strong>width</strong>: Number of counters in each array. Reduces the error size.</li> <li>\n<strong>depth</strong>: Number of counter-arrays. Reduces the probability for an error of a certain size (percentage of total count).</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> - <code>OK</code> if executed correctly, or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> otherwise.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; CMS.INITBYDIM test 2000 5\nOK\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/cms.initbydim/\" class=\"_attribution-link\">https://redis.io/commands/cms.initbydim/</a>\n  </p>\n</div>\n","exec/index":"<h1 class=\"command-name\">EXEC</h1>\n<pre>EXEC</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">EXEC</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>Depends on commands in the transaction</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@transaction</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Executes all previously queued commands in a <a href=\"https://redis.io/topics/transactions\">transaction</a> and restores the connection state to normal.</p> <p>When using <a href=\"../watch\"><code>WATCH</code></a>, <code>EXEC</code> will execute commands only if the watched keys were not modified, allowing for a <a href=\"https://redis.io/topics/transactions#cas\">check-and-set mechanism</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: each element being the reply to each of the commands in the atomic transaction.</p> <p>When using <a href=\"../watch\"><code>WATCH</code></a>, <code>EXEC</code> can return a <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Null reply</a> if the execution was aborted.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/exec/\" class=\"_attribution-link\">https://redis.io/commands/exec/</a>\n  </p>\n</div>\n","eval/index":"<h1 class=\"command-name\">EVAL</h1>\n<pre>EVAL</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">EVAL script numkeys [key [key ...]] [arg [arg ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.6.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>Depends on the script that is executed.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@scripting</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Invoke the execution of a server-side Lua script.</p> <p>The first argument is the script's source code. Scripts are written in <a href=\"https://lua.org\">Lua</a> and executed by the embedded <a href=\"https://redis.io/topics/lua-api\">Lua 5.1</a> interpreter in Redis.</p> <p>The second argument is the number of input key name arguments, followed by all the keys accessed by the script. These names of input keys are available to the script as the <a href=\"https://redis.io/topics/lua-api#the-keys-global-variable\"><em>KEYS</em> global runtime variable</a> Any additional input arguments <strong>should not</strong> represent names of keys.</p> <p><strong>Important:</strong> to ensure the correct execution of scripts, both in standalone and clustered deployments, all names of keys that a script accesses must be explicitly provided as input key arguments. The script <strong>should only</strong> access keys whose names are given as input arguments. Scripts <strong>should never</strong> access keys with programmatically-generated names or based on the contents of data structures stored in the database.</p> <p>Please refer to the <a href=\"https://redis.io/topics/programmability\">Redis Programmability</a> and <a href=\"https://redis.io/topics/eval-intro\">Introduction to Eval Scripts</a> for more information about Lua scripts.</p> <h2 id=\"examples\">Examples</h2> <p>The following example will run a script that returns the first argument that it gets.</p> <pre tabindex=\"0\">&gt; EVAL \"return ARGV[1]\" 0 hello\n\"hello\"\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/eval/\" class=\"_attribution-link\">https://redis.io/commands/eval/</a>\n  </p>\n</div>\n","evalsha_ro/index":"<h1 class=\"command-name\">EVALSHA_RO</h1>\n<pre>EVALSHA_RO</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">EVALSHA_RO sha1 numkeys [key [key ...]] [arg [arg ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>Depends on the script that is executed.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@scripting</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This is a read-only variant of the <a href=\"../evalsha\"><code>EVALSHA</code></a> command that cannot execute commands that modify data.</p> <p>For more information about when to use this command vs <a href=\"../evalsha\"><code>EVALSHA</code></a>, please refer to <a href=\"https://redis.io/docs/manual/programmability/#read-only_scripts\">Read-only scripts</a>.</p> <p>For more information about <a href=\"../evalsha\"><code>EVALSHA</code></a> scripts please refer to <a href=\"https://redis.io/topics/eval-intro\">Introduction to Eval Scripts</a>.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/evalsha_ro/\" class=\"_attribution-link\">https://redis.io/commands/evalsha_ro/</a>\n  </p>\n</div>\n","echo/index":"<h1 class=\"command-name\">ECHO</h1>\n<pre>ECHO</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ECHO message</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns <code>message</code>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a></p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nECHO \"Hello World!\"\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/echo/\" class=\"_attribution-link\">https://redis.io/commands/echo/</a>\n  </p>\n</div>\n","exists/index":"<h1 class=\"command-name\">EXISTS</h1>\n<pre>EXISTS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">EXISTS key [key ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of keys to check.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns if <code>key</code> exists.</p> <p>The user should be aware that if the same existing key is mentioned in the arguments multiple times, it will be counted multiple times. So if <code>somekey</code> exists, <code>EXISTS somekey somekey</code> will return 2.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, specifically the number of keys that exist from those specified as arguments.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET key1 \"Hello\"\nEXISTS key1\nEXISTS nosuchkey\nSET key2 \"World\"\nEXISTS key1 key2 nosuchkey\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 3.0.3: Accepts multiple <code>key</code> arguments.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/exists/\" class=\"_attribution-link\">https://redis.io/commands/exists/</a>\n  </p>\n</div>\n","expire/index":"<h1 class=\"command-name\">EXPIRE</h1>\n<pre>EXPIRE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">EXPIRE key seconds [NX | XX | GT | LT]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Set a timeout on <code>key</code>. After the timeout has expired, the key will automatically be deleted. A key with an associated timeout is often said to be <em>volatile</em> in Redis terminology.</p> <p>The timeout will only be cleared by commands that delete or overwrite the contents of the key, including <a href=\"../del\"><code>DEL</code></a>, <a href=\"../set\"><code>SET</code></a>, <a href=\"../getset\"><code>GETSET</code></a> and all the <code>*STORE</code> commands. This means that all the operations that conceptually <em>alter</em> the value stored at the key without replacing it with a new one will leave the timeout untouched. For instance, incrementing the value of a key with <a href=\"../incr\"><code>INCR</code></a>, pushing a new value into a list with <a href=\"../lpush\"><code>LPUSH</code></a>, or altering the field value of a hash with <a href=\"../hset\"><code>HSET</code></a> are all operations that will leave the timeout untouched.</p> <p>The timeout can also be cleared, turning the key back into a persistent key, using the <a href=\"../persist\"><code>PERSIST</code></a> command.</p> <p>If a key is renamed with <a href=\"../rename\"><code>RENAME</code></a>, the associated time to live is transferred to the new key name.</p> <p>If a key is overwritten by <a href=\"../rename\"><code>RENAME</code></a>, like in the case of an existing key <code>Key_A</code> that is overwritten by a call like <code>RENAME Key_B Key_A</code>, it does not matter if the original <code>Key_A</code> had a timeout associated or not, the new key <code>Key_A</code> will inherit all the characteristics of <code>Key_B</code>.</p> <p>Note that calling <code>EXPIRE</code>/<a href=\"../pexpire\"><code>PEXPIRE</code></a> with a non-positive timeout or <a href=\"../expireat\"><code>EXPIREAT</code></a>/<a href=\"../pexpireat\"><code>PEXPIREAT</code></a> with a time in the past will result in the key being <a href=\"../del\">deleted</a> rather than expired (accordingly, the emitted <a href=\"https://redis.io/topics/notifications\">key event</a> will be <code>del</code>, not <code>expired</code>).</p> <h2 id=\"options\">Options</h2> <p>The <code>EXPIRE</code> command supports a set of options:</p> <ul> <li>\n<code>NX</code> -- Set expiry only when the key has no expiry</li> <li>\n<code>XX</code> -- Set expiry only when the key has an existing expiry</li> <li>\n<code>GT</code> -- Set expiry only when the new expiry is greater than current one</li> <li>\n<code>LT</code> -- Set expiry only when the new expiry is less than current one</li> </ul> <p>A non-volatile key is treated as an infinite TTL for the purpose of <code>GT</code> and <code>LT</code>. The <code>GT</code>, <code>LT</code> and <code>NX</code> options are mutually exclusive.</p> <h2 id=\"refreshing-expires\">Refreshing expires</h2> <p>It is possible to call <code>EXPIRE</code> using as argument a key that already has an existing expire set. In this case the time to live of a key is <em>updated</em> to the new value. There are many useful applications for this, an example is documented in the <em>Navigation session</em> pattern section below.</p> <h2 id=\"differences-in-redis-prior-213\">Differences in Redis prior 2.1.3</h2> <p>In Redis versions prior <strong>2.1.3</strong> altering a key with an expire set using a command altering its value had the effect of removing the key entirely. This semantics was needed because of limitations in the replication layer that are now fixed.</p> <p><code>EXPIRE</code> would return 0 and not alter the timeout for a key with a timeout set.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, specifically:</p> <ul> <li>\n<code>1</code> if the timeout was set.</li> <li>\n<code>0</code> if the timeout was not set. e.g. key doesn't exist, or operation skipped due to the provided arguments.</li> </ul> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"Hello\"\nEXPIRE mykey 10\nTTL mykey\nSET mykey \"Hello World\"\nTTL mykey\nEXPIRE mykey 10 XX\nTTL mykey\nEXPIRE mykey 10 NX\nTTL mykey\n</pre> <h2 id=\"pattern-navigation-session\">Pattern: Navigation session</h2> <p>Imagine you have a web service and you are interested in the latest N pages <em>recently</em> visited by your users, such that each adjacent page view was not performed more than 60 seconds after the previous. Conceptually you may consider this set of page views as a <em>Navigation session</em> of your user, that may contain interesting information about what kind of products he or she is looking for currently, so that you can recommend related products.</p> <p>You can easily model this pattern in Redis using the following strategy: every time the user does a page view you call the following commands:</p> <pre tabindex=\"0\">MULTI\nRPUSH pagewviews.user:&lt;userid&gt; http://.....\nEXPIRE pagewviews.user:&lt;userid&gt; 60\nEXEC\n</pre>\n<p>If the user will be idle more than 60 seconds, the key will be deleted and only subsequent page views that have less than 60 seconds of difference will be recorded.</p> <p>This pattern is easily modified to use counters using <a href=\"../incr\"><code>INCR</code></a> instead of lists using <a href=\"../rpush\"><code>RPUSH</code></a>.</p> <h1 id=\"appendix-redis-expires\">Appendix: Redis expires</h1> <h2 id=\"keys-with-an-expire\">Keys with an expire</h2> <p>Normally Redis keys are created without an associated time to live. The key will simply live forever, unless it is removed by the user in an explicit way, for instance using the <a href=\"../del\"><code>DEL</code></a> command.</p> <p>The <code>EXPIRE</code> family of commands is able to associate an expire to a given key, at the cost of some additional memory used by the key. When a key has an expire set, Redis will make sure to remove the key when the specified amount of time elapsed.</p> <p>The key time to live can be updated or entirely removed using the <code>EXPIRE</code> and <a href=\"../persist\"><code>PERSIST</code></a> command (or other strictly related commands).</p> <h2 id=\"expire-accuracy\">Expire accuracy</h2> <p>In Redis 2.4 the expire might not be pin-point accurate, and it could be between zero to one seconds out.</p> <p>Since Redis 2.6 the expire error is from 0 to 1 milliseconds.</p> <h2 id=\"expires-and-persistence\">Expires and persistence</h2> <p>Keys expiring information is stored as absolute Unix timestamps (in milliseconds in case of Redis version 2.6 or greater). This means that the time is flowing even when the Redis instance is not active.</p> <p>For expires to work well, the computer time must be taken stable. If you move an RDB file from two computers with a big desync in their clocks, funny things may happen (like all the keys loaded to be expired at loading time).</p> <p>Even running instances will always check the computer clock, so for instance if you set a key with a time to live of 1000 seconds, and then set your computer time 2000 seconds in the future, the key will be expired immediately, instead of lasting for 1000 seconds.</p> <h2 id=\"how-redis-expires-keys\">How Redis expires keys</h2> <p>Redis keys are expired in two ways: a passive way, and an active way.</p> <p>A key is passively expired simply when some client tries to access it, and the key is found to be timed out.</p> <p>Of course this is not enough as there are expired keys that will never be accessed again. These keys should be expired anyway, so periodically Redis tests a few keys at random among keys with an expire set. All the keys that are already expired are deleted from the keyspace.</p> <p>Specifically this is what Redis does 10 times per second:</p> <ol> <li>Test 20 random keys from the set of keys with an associated expire.</li> <li>Delete all the keys found expired.</li> <li>If more than 25% of keys were expired, start again from step 1.</li> </ol> <p>This is a trivial probabilistic algorithm, basically the assumption is that our sample is representative of the whole key space, and we continue to expire until the percentage of keys that are likely to be expired is under 25%</p> <p>This means that at any given moment the maximum amount of keys already expired that are using memory is at max equal to max amount of write operations per second divided by 4.</p> <h2 id=\"how-expires-are-handled-in-the-replication-link-and-aof-file\">How expires are handled in the replication link and AOF file</h2> <p>In order to obtain a correct behavior without sacrificing consistency, when a key expires, a <a href=\"../del\"><code>DEL</code></a> operation is synthesized in both the AOF file and gains all the attached replicas nodes. This way the expiration process is centralized in the master instance, and there is no chance of consistency errors.</p> <p>However while the replicas connected to a master will not expire keys independently (but will wait for the <a href=\"../del\"><code>DEL</code></a> coming from the master), they'll still take the full state of the expires existing in the dataset, so when a replica is elected to master it will be able to expire the keys independently, fully acting as a master.</p> <h2>History</h2> <ul> <li>Starting with Redis version 7.0.0: Added options: <code>NX</code>, <code>XX</code>, <code>GT</code> and <code>LT</code>.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/expire/\" class=\"_attribution-link\">https://redis.io/commands/expire/</a>\n  </p>\n</div>\n","dump/index":"<h1 class=\"command-name\">DUMP</h1>\n<pre>DUMP</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">DUMP key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.6.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) to access the key and additional O(N*M) to serialize it, where N is the number of Redis objects composing the value and M their average size. For small string values the time complexity is thus O(1)+O(1*M) where M is small, so simply O(1).</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Serialize the value stored at key in a Redis-specific format and return it to the user. The returned value can be synthesized back into a Redis key using the <a href=\"../restore\"><code>RESTORE</code></a> command.</p> <p>The serialization format is opaque and non-standard, however it has a few semantic characteristics:</p> <ul> <li>It contains a 64-bit checksum that is used to make sure errors will be detected. The <a href=\"../restore\"><code>RESTORE</code></a> command makes sure to check the checksum before synthesizing a key using the serialized value.</li> <li>Values are encoded in the same format used by RDB.</li> <li>An RDB version is encoded inside the serialized value, so that different Redis versions with incompatible RDB formats will refuse to process the serialized value.</li> </ul> <p>The serialized value does NOT contain expire information. In order to capture the time to live of the current value the <a href=\"../pttl\"><code>PTTL</code></a> command should be used.</p> <p>If <code>key</code> does not exist a nil bulk reply is returned.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the serialized value.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; SET mykey 10\nOK\n&gt; DUMP mykey\n\"\\x00\\xc0\\n\\n\\x00n\\x9fWE\\x0e\\xaec\\xbb\"\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/dump/\" class=\"_attribution-link\">https://redis.io/commands/dump/</a>\n  </p>\n</div>\n","eval_ro/index":"<h1 class=\"command-name\">EVAL_RO</h1>\n<pre>EVAL_RO</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">EVAL_RO script numkeys [key [key ...]] [arg [arg ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>Depends on the script that is executed.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@scripting</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This is a read-only variant of the <a href=\"../eval\"><code>EVAL</code></a> command that cannot execute commands that modify data.</p> <p>For more information about when to use this command vs <a href=\"../eval\"><code>EVAL</code></a>, please refer to <a href=\"https://redis.io/docs/manual/programmability/#read-only_scripts\">Read-only scripts</a>.</p> <p>For more information about <a href=\"../eval\"><code>EVAL</code></a> scripts please refer to <a href=\"https://redis.io/topics/eval-intro\">Introduction to Eval Scripts</a>.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; SET mykey \"Hello\"\nOK\n\n&gt; EVAL_RO \"return redis.call('GET', KEYS[1])\" 1 mykey\n\"Hello\"\n\n&gt; EVAL_RO \"return redis.call('DEL', KEYS[1])\" 1 mykey\n(error) ERR Error running script (call to b0d697da25b13e49157b2c214a4033546aba2104): @user_script:1: @user_script: 1: Write commands are not allowed from read-only scripts.\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/eval_ro/\" class=\"_attribution-link\">https://redis.io/commands/eval_ro/</a>\n  </p>\n</div>\n","ft.aliasadd/index":"<h1 class=\"command-name\">FT.ALIASADD</h1>\n<pre>FT.ALIASADD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.ALIASADD alias index\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Add an alias to an index</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>alias index</code></summary> <p>is alias to be added to an index.</p> </details> <p>Indexes can have more than one alias, but an alias cannot refer to another alias.</p> <p>FT.ALISSADD allows administrators to transparently redirect application queries to alternative indexes.</p> <h2 id=\"return\">Return</h2> <p>FT.ALIASADD returns a simple string reply <code>OK</code> if executed correctly, or an error reply otherwise.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Add an alias to an index</b></summary> <p>Add an alias to an index.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.ALIASADD <span class=\"nb\">alias</span> idx\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Attempting to add the same alias returns a message that the alias already exists.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.ALIASADD <span class=\"nb\">alias</span> idx\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>error<span class=\"o\">)</span> Alias already exists</span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.aliasdel\"><code>FT.ALIASDEL</code></a> | <a href=\"../ft.aliasupdate\"><code>FT.ALIASUPDATE</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.aliasadd/\" class=\"_attribution-link\">https://redis.io/commands/ft.aliasadd/</a>\n  </p>\n</div>\n","evalsha/index":"<h1 class=\"command-name\">EVALSHA</h1>\n<pre>EVALSHA</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">EVALSHA sha1 numkeys [key [key ...]] [arg [arg ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.6.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>Depends on the script that is executed.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@scripting</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Evaluate a script from the server's cache by its SHA1 digest.</p> <p>The server caches scripts by using the <a href=\"../script-load\"><code>SCRIPT LOAD</code></a> command. The command is otherwise identical to <a href=\"../eval\"><code>EVAL</code></a>.</p> <p>Please refer to the <a href=\"https://redis.io/topics/programmability\">Redis Programmability</a> and <a href=\"https://redis.io/topics/eval-intro\">Introduction to Eval Scripts</a> for more information about Lua scripts.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/evalsha/\" class=\"_attribution-link\">https://redis.io/commands/evalsha/</a>\n  </p>\n</div>\n","failover/index":"<h1 class=\"command-name\">FAILOVER</h1>\n<pre>FAILOVER</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FAILOVER [TOhost port [FORCE]] [ABORT] [TIMEOUTmilliseconds]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command will start a coordinated failover between the currently-connected-to master and one of its replicas. The failover is not synchronous, instead a background task will handle coordinating the failover. It is designed to limit data loss and unavailability of the cluster during the failover. This command is analogous to the <a href=\"../cluster-failover\"><code>CLUSTER FAILOVER</code></a> command for non-clustered Redis and is similar to the failover support provided by sentinel.</p> <p>The specific details of the default failover flow are as follows:</p> <ol> <li>The master will internally start a <code>CLIENT PAUSE WRITE</code>, which will pause incoming writes and prevent the accumulation of new data in the replication stream.</li> <li>The master will monitor its replicas, waiting for a replica to indicate that it has fully consumed the replication stream. If the master has multiple replicas, it will only wait for the first replica to catch up.</li> <li>The master will then demote itself to a replica. This is done to prevent any dual master scenarios. NOTE: The master will not discard its data, so it will be able to rollback if the replica rejects the failover request in the next step.</li> <li>The previous master will send a special PSYNC request to the target replica, <code>PSYNC FAILOVER</code>, instructing the target replica to become a master.</li> <li>Once the previous master receives acknowledgement the <code>PSYNC FAILOVER</code> was accepted it will unpause its clients. If the PSYNC request is rejected, the master will abort the failover and return to normal.</li> </ol> <p>The field <code>master_failover_state</code> in <code>INFO replication</code> can be used to track the current state of the failover, which has the following values:</p> <ul> <li>\n<code>no-failover</code>: There is no ongoing coordinated failover.</li> <li>\n<code>waiting-for-sync</code>: The master is waiting for the replica to catch up to its replication offset.</li> <li>\n<code>failover-in-progress</code>: The master has demoted itself, and is attempting to hand off ownership to a target replica.</li> </ul> <p>If the previous master had additional replicas attached to it, they will continue replicating from it as chained replicas. You will need to manually execute a <a href=\"../replicaof\"><code>REPLICAOF</code></a> on these replicas to start replicating directly from the new master.</p> <h2 id=\"optional-arguments\">Optional arguments</h2> <p>The following optional arguments exist to modify the behavior of the failover flow:</p> <ul> <li> <p><code>TIMEOUT</code> <em>milliseconds</em> -- This option allows specifying a maximum time a master will wait in the <code>waiting-for-sync</code> state before aborting the failover attempt and rolling back. This is intended to set an upper bound on the write outage the Redis cluster can experience. Failovers typically happen in less than a second, but could take longer if there is a large amount of write traffic or the replica is already behind in consuming the replication stream. If this value is not specified, the timeout can be considered to be \"infinite\".</p> </li> <li> <p><code>TO</code> <em>HOST</em> <em>PORT</em> -- This option allows designating a specific replica, by its host and port, to failover to. The master will wait specifically for this replica to catch up to its replication offset, and then failover to it.</p> </li> <li> <p><code>FORCE</code> -- If both the <code>TIMEOUT</code> and <code>TO</code> options are set, the force flag can also be used to designate that that once the timeout has elapsed, the master should failover to the target replica instead of rolling back. This can be used for a best-effort attempt at a failover without data loss, but limiting write outage.</p> </li> </ul> <p>NOTE: The master will always rollback if the <code>PSYNC FAILOVER</code> request is rejected by the target replica.</p> <h2 id=\"failover-abort\">Failover abort</h2> <p>The failover command is intended to be safe from data loss and corruption, but can encounter some scenarios it can not automatically remediate from and may get stuck. For this purpose, the <code>FAILOVER ABORT</code> command exists, which will abort an ongoing failover and return the master to its normal state. The command has no side effects if issued in the <code>waiting-for-sync</code> state but can introduce multi-master scenarios in the <code>failover-in-progress</code> state. If a multi-master scenario is encountered, you will need to manually identify which master has the latest data and designate it as the master and have the other replicas.</p> <p>NOTE: <a href=\"../replicaof\"><code>REPLICAOF</code></a> is disabled while a failover is in progress, this is to prevent unintended interactions with the failover that might cause data loss.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> if the command was accepted and a coordinated failover is in progress. An error if the operation cannot be executed.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/failover/\" class=\"_attribution-link\">https://redis.io/commands/failover/</a>\n  </p>\n</div>\n","expireat/index":"<h1 class=\"command-name\">EXPIREAT</h1>\n<pre>EXPIREAT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">EXPIREAT key unix-time-seconds [NX | XX | GT | LT]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><code>EXPIREAT</code> has the same effect and semantic as <a href=\"../expire\"><code>EXPIRE</code></a>, but instead of specifying the number of seconds representing the TTL (time to live), it takes an absolute <a href=\"http://en.wikipedia.org/wiki/Unix_time\">Unix timestamp</a> (seconds since January 1, 1970). A timestamp in the past will delete the key immediately.</p> <p>Please for the specific semantics of the command refer to the documentation of <a href=\"../expire\"><code>EXPIRE</code></a>.</p> <h2 id=\"background\">Background</h2> <p><code>EXPIREAT</code> was introduced in order to convert relative timeouts to absolute timeouts for the AOF persistence mode. Of course, it can be used directly to specify that a given key should expire at a given time in the future.</p> <h2 id=\"options\">Options</h2> <p>The <code>EXPIREAT</code> command supports a set of options:</p> <ul> <li>\n<code>NX</code> -- Set expiry only when the key has no expiry</li> <li>\n<code>XX</code> -- Set expiry only when the key has an existing expiry</li> <li>\n<code>GT</code> -- Set expiry only when the new expiry is greater than current one</li> <li>\n<code>LT</code> -- Set expiry only when the new expiry is less than current one</li> </ul> <p>A non-volatile key is treated as an infinite TTL for the purpose of <code>GT</code> and <code>LT</code>. The <code>GT</code>, <code>LT</code> and <code>NX</code> options are mutually exclusive.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, specifically:</p> <ul> <li>\n<code>1</code> if the timeout was set.</li> <li>\n<code>0</code> if the timeout was not set. e.g. key doesn't exist, or operation skipped due to the provided arguments.</li> </ul> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"Hello\"\nEXISTS mykey\nEXPIREAT mykey 1293840000\nEXISTS mykey\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 7.0.0: Added options: <code>NX</code>, <code>XX</code>, <code>GT</code> and <code>LT</code>.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/expireat/\" class=\"_attribution-link\">https://redis.io/commands/expireat/</a>\n  </p>\n</div>\n","fcall_ro/index":"<h1 class=\"command-name\">FCALL_RO</h1>\n<pre>FCALL_RO</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FCALL_RO function numkeys [key [key ...]] [arg [arg ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>Depends on the function that is executed.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@scripting</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This is a read-only variant of the <a href=\"../fcall\"><code>FCALL</code></a> command that cannot execute commands that modify data.</p> <p>For more information about when to use this command vs <a href=\"../fcall\"><code>FCALL</code></a>, please refer to <a href=\"https://redis.io/docs/manual/programmability/#read-only_scripts\">Read-only scripts</a>.</p> <p>For more information please refer to <a href=\"https://redis.io/topics/functions-intro\">Introduction to Redis Functions</a>.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/fcall_ro/\" class=\"_attribution-link\">https://redis.io/commands/fcall_ro/</a>\n  </p>\n</div>\n","fcall/index":"<h1 class=\"command-name\">FCALL</h1>\n<pre>FCALL</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FCALL function numkeys [key [key ...]] [arg [arg ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>Depends on the function that is executed.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@scripting</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Invoke a function.</p> <p>Functions are loaded to the server with the <a href=\"../function-load\"><code>FUNCTION LOAD</code></a> command. The first argument is the name of a loaded function.</p> <p>The second argument is the number of input key name arguments, followed by all the keys accessed by the function. In Lua, these names of input keys are available to the function as a table that is the callback's first argument.</p> <p><strong>Important:</strong> To ensure the correct execution of functions, both in standalone and clustered deployments, all names of keys that a function accesses must be explicitly provided as input key arguments. The function <strong>should only</strong> access keys whose names are given as input arguments. Functions <strong>should never</strong> access keys with programmatically-generated names or based on the contents of data structures stored in the database.</p> <p>Any additional input argument <strong>should not</strong> represent names of keys. These are regular arguments and are passed in a Lua table as the callback's second argument.</p> <p>For more information please refer to the <a href=\"https://redis.io/topics/programmability\">Redis Programmability</a> and <a href=\"https://redis.io/topics/functions-intro\">Introduction to Redis Functions</a> pages.</p> <h2 id=\"examples\">Examples</h2> <p>The following example will create a library named <code>mylib</code> with a single function, <code>myfunc</code>, that returns the first argument it gets.</p> <pre tabindex=\"0\">redis&gt; FUNCTION LOAD \"#!lua name=mylib \\n redis.register_function('myfunc', function(keys, args) return args[1] end)\"\n\"mylib\"\nredis&gt; FCALL myfunc 0 hello\n\"hello\"\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/fcall/\" class=\"_attribution-link\">https://redis.io/commands/fcall/</a>\n  </p>\n</div>\n","ft.create/index":"<h1 class=\"command-name\">FT.CREATE</h1>\n<pre>FT.CREATE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.CREATE index \n  [ON HASH | JSON] \n  [PREFIX count prefix [prefix ...]] \n  [FILTER {filter}]\n  [LANGUAGE default_lang] \n  [LANGUAGE_FIELD lang_attribute] \n  [SCORE default_score] \n  [SCORE_FIELD score_attribute] \n  [PAYLOAD_FIELD payload_attribute] \n  [MAXTEXTFIELDS] \n  [TEMPORARY seconds] \n  [NOOFFSETS] \n  [NOHL] \n  [NOFIELDS] \n  [NOFREQS] \n  [STOPWORDS count [stopword ...]] \n  [SKIPINITIALSCAN]\n  SCHEMA field_name [AS alias] TEXT | TAG | NUMERIC | GEO | VECTOR [ SORTABLE [UNF]] \n  [NOINDEX] [ field_name [AS alias] TEXT | TAG | NUMERIC | GEO | VECTOR [ SORTABLE [UNF]] [NOINDEX] ...]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(K) at creation where K is the number of fields, O(N) if scanning the keyspace is triggered, where N is the number of keys in the keyspace</dd> </dl> <h2 id=\"description\">Description</h2> <p>Create an index with the given specification. For usage, see <a href=\"#examples\">Examples</a>.</p> <h2 id=\"required-arguments\">Required arguments</h2>  <summary><code>index</code></summary> <p>is index name to create. If it exists, the old specification is overwritten.</p>  <summary><code>SCHEMA {identifier} AS {attribute} {attribute type} {options...</code></summary> <p>after the SCHEMA keyword, declares which fields to index:</p> <ul> <li> <p><code>{identifier}</code> for hashes, is a field name within the hash. For JSON, the identifier is a JSON Path expression.</p> </li> <li> <p><code>AS {attribute}</code> defines the attribute associated to the identifier. For example, you can use this feature to alias a complex JSONPath expression with more memorable (and easier to type) name.</p> </li> </ul> <p>Field types are:</p> <ul> <li> <p><code>TEXT</code> - Allows full-text search queries against the value in this attribute.</p> </li> <li> <p><code>TAG</code> - Allows exact-match queries, such as categories or primary keys, against the value in this attribute. For more information, see <a href=\"https://redis.io/docs/stack/search/reference/tags\">Tag Fields</a>.</p> </li> <li> <p><code>NUMERIC</code> - Allows numeric range queries against the value in this attribute. See <a href=\"https://redis.io/docs/stack/search/reference/query_syntax\">query syntax docs</a> for details on how to use numeric ranges.</p> </li> <li> <p><code>GEO</code> - Allows geographic range queries against the value in this attribute. The value of the attribute must be a string containing a longitude (first) and latitude separated by a comma.</p> </li> <li> <p><code>VECTOR</code> - Allows vector similarity queries against the value in this attribute. For more information, see <a href=\"https://redis.io/docs/stack/search/reference/vectors\">Vector Fields</a>.</p> </li> </ul> <p>Field options are:</p> <ul> <li> <p><code>SORTABLE</code> - <code>NUMERIC</code>, <code>TAG</code>, <code>TEXT</code>, or <code>GEO</code> attributes can have an optional <strong>SORTABLE</strong> argument. As the user <a href=\"https://redis.io/docs/stack/search/reference/sorting\">sorts the results by the value of this attribute</a>, the results are available with very low latency. Note that his adds memory overhead, so consider not declaring it on large text attributes. You can sort an attribute without the <code>SORTABLE</code> option, but the latency is not as good as with <code>SORTABLE</code>.</p> </li> <li> <p><code>UNF</code> - By default, for hashes (not with JSON) <code>SORTABLE</code> applies a normalization to the indexed value (characters set to lowercase, removal of diacritics). When using the unnormalized form (UNF), you can disable the normalization and keep the original form of the value. With JSON, <code>UNF</code> is implicit with <code>SORTABLE</code> (normalization is disabled).</p> </li> <li> <p><code>NOSTEM</code> - Text attributes can have the NOSTEM argument that disables stemming when indexing its values. This may be ideal for things like proper names.</p> </li> <li> <p><code>NOINDEX</code> - Attributes can have the <code>NOINDEX</code> option, which means they will not be indexed. This is useful in conjunction with <code>SORTABLE</code>, to create attributes whose update using PARTIAL will not cause full reindexing of the document. If an attribute has NOINDEX and doesn't have SORTABLE, it will just be ignored by the index.</p> </li> <li> <p><code>PHONETIC {matcher}</code> - Declaring a text attribute as <code>PHONETIC</code> will perform phonetic matching on it in searches by default. The obligatory {matcher} argument specifies the phonetic algorithm and language used. The following matchers are supported:</p> <ul> <li>\n<code>dm:en</code> - Double metaphone for English</li> <li>\n<code>dm:fr</code> - Double metaphone for French</li> <li>\n<code>dm:pt</code> - Double metaphone for Portuguese</li> <li>\n<code>dm:es</code> - Double metaphone for Spanish</li> </ul> <p>For more information, see <a href=\"https://redis.io/docs/stack/search/reference/phonetic_matching\">Phonetic Matching</a>.</p> </li> <li> <p><code>WEIGHT {weight}</code> for <code>TEXT</code> attributes, declares the importance of this attribute when calculating result accuracy. This is a multiplication factor, and defaults to 1 if not specified.</p> </li> <li> <p><code>SEPARATOR {sep}</code> for <code>TAG</code> attributes, indicates how the text contained in the attribute is to be split into individual tags. The default is <code>,</code>. The value must be a single character.</p> </li> <li> <p><code>CASESENSITIVE</code> for <code>TAG</code> attributes, keeps the original letter cases of the tags. If not specified, the characters are converted to lowercase.</p> </li> <li> <p><code>WITHSUFFIXTRIE</code> for <code>TEXT</code> and <code>TAG</code> attributes, keeps a suffix trie with all terms which match the suffix. It is used to optimize <code>contains</code> (<em>foo</em>) and <code>suffix</code> (*foo) queries. Otherwise, a brute-force search on the trie is performed. If suffix trie exists for some fields, these queries will be disabled for other fields.</p> </li> </ul> <h2 id=\"optional-arguments\">Optional arguments</h2>  <summary><code>ON {data_type}</code></summary> <p>currently supports HASH (default) and JSON. To index JSON, you must have the <a href=\"https://redis.io/docs/stack/json\">RedisJSON</a> module installed.</p>  <summary><code>PREFIX {count} {prefix}</code></summary> <p>tells the index which keys it should index. You can add several prefixes to index. Because the argument is optional, the default is <code>*</code> (all keys).</p>  <summary><code>FILTER {filter}</code></summary> <p>is a filter expression with the full RediSearch aggregation expression language. It is possible to use <code>@__key</code> to access the key that was just added/changed. A field can be used to set field name by passing <code>'FILTER @indexName==\"myindexname\"'</code>.</p>  <summary><code>LANGUAGE {default_lang}</code></summary> <p>if set, indicates the default language for documents in the index. Default is English.</p>  <summary><code>LANGUAGE_FIELD {lang_attribute}</code></summary> <p>is document attribute set as the document language.</p> <p>A stemmer is used for the supplied language during indexing. If an unsupported language is sent, the command returns an error. The supported languages are Arabic, Basque, Catalan, Danish, Dutch, English, Finnish, French, German, Greek, Hungarian, Indonesian, Irish, Italian, Lithuanian, Nepali, Norwegian, Portuguese, Romanian, Russian, Spanish, Swedish, Tamil, Turkish, and Chinese.</p> <p>When adding Chinese language documents, set <code>LANGUAGE chinese</code> for the indexer to properly tokenize the terms. If you use the default language, then search terms are extracted based on punctuation characters and whitespace. The Chinese language tokenizer makes use of a segmentation algorithm (via <a href=\"https://github.com/lionsoul2014/friso\">Friso</a>), which segments text and checks it against a predefined dictionary. See <a href=\"https://redis.io/docs/stack/search/reference/stemming\">Stemming</a> for more information.</p>  <summary><code>SCORE {default_score}</code></summary> <p>is default score for documents in the index. Default score is 1.0.</p>  <summary><code>SCORE_FIELD {score_attribute}</code></summary> <p>is document attribute that you use as the document rank based on the user ranking. Ranking must be between 0.0 and 1.0. If not set, the default score is 1.</p>  <summary><code>PAYLOAD_FIELD {payload_attribute}</code></summary> <p>is document attribute that you use as a binary safe payload string to the document that can be evaluated at query time by a custom scoring function or retrieved to the client.</p>  <summary><code>MAXTEXTFIELDS</code></summary> <p>forces RediSearch to encode indexes as if there were more than 32 text attributes, which allows you to add additional attributes (beyond 32) using <a href=\"../ft.alter\"><code>FT.ALTER</code></a>. For efficiency, RediSearch encodes indexes differently if they are created with less than 32 text attributes.</p>  <summary><code>NOOFFSETS</code></summary> <p>does not store term offsets for documents. It saves memory, but does not allow exact searches or highlighting. It implies <code>NOHL</code>.</p>  <summary><code>TEMPORARY {seconds}</code></summary> <p>creates a lightweight temporary index that expires after a specified period of inactivity, in seconds. The internal idle timer is reset whenever the index is searched or added to. Because such indexes are lightweight, you can create thousands of such indexes without negative performance implications and, therefore, you should consider using <code>SKIPINITIALSCAN</code> to avoid costly scanning.</p> <div class=\"pl-4 border-l-8\"> <div class=\"font-semibold text-slate-900\">Warning</div> <p>When temporary indexes expire, they drop all the records associated with them. <a href=\"../ft.dropindex\"><code>FT.DROPINDEX</code></a> was introduced with a default of not deleting docs and a <code>DD</code> flag that enforced deletion. However, for temporary indexes, documents are deleted along with the index. Historically, RediSearch used an FT.ADD command, which made a connection between the document and the index. Then, FT.DROP, also a hystoric command, deleted documents by default. In version 2.x, RediSearch indexes hashes and JSONs, and the dependency between the index and documents no longer exists.</p> </div>  <summary><code>NOHL</code></summary> <p>conserves storage space and memory by disabling highlighting support. If set, the corresponding byte offsets for term positions are not stored. <code>NOHL</code> is also implied by <code>NOOFFSETS</code>.</p>  <summary><code>NOFIELDS</code></summary> <p>does not store attribute bits for each term. It saves memory, but it does not allow filtering by specific attributes.</p>  <summary><code>NOFREQS</code></summary> <p>avoids saving the term frequencies in the index. It saves memory, but does not allow sorting based on the frequencies of a given term within the document.</p>  <summary><code>STOPWORDS {count}</code></summary> <p>sets the index with a custom stopword list, to be ignored during indexing and search time. <code>{count}</code> is the number of stopwords, followed by a list of stopword arguments exactly the length of <code>{count}</code>.</p> <p>If not set, FT.CREATE takes the default list of stopwords. If <code>{count}</code> is set to 0, the index does not have stopwords.</p>  <summary><code>SKIPINITIALSCAN</code></summary> <p>if set, does not scan and index.</p> <p><note><b>Notes:</b></note></p> <ul> <li> <p><strong>Attribute number limits:</strong> RediSearch supports up to 1024 attributes per schema, out of which at most 128 can be TEXT attributes. On 32 bit builds, at most 64 attributes can be TEXT attributes. The more attributes you have, the larger your index, as each additional 8 attributes require one extra byte per index record to encode. You can always use the <code>NOFIELDS</code> option and not encode attribute information into the index, for saving space, if you do not need filtering by text attributes. This will still allow filtering by numeric and geo attributes.</p> </li> <li> <p><strong>Running in clustered databases:</strong> When having several indices in a clustered database, you need to make sure the documents you want to index reside on the same shard as the index. You can achieve this by having your documents tagged by the index name.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; HSET doc:1<span class=\"o\">{</span>idx<span class=\"o\">}</span> ...\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.CREATE idx ... PREFIX <span class=\"m\">1</span> doc: ...</span></span></pre></div> <p>When Running RediSearch in a clustered database, you can span the index across shards using <a href=\"https://github.com/RedisLabsModules/RSCoordinator\">RSCoordinator</a>. In this case the above does not apply.</p> </li> </ul> <h2 id=\"return\">Return</h2> <p>FT.CREATE returns a simple string reply <code>OK</code> if executed correctly, or an error reply otherwise.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Create an index</b></summary> <p>Create an index that stores the title, publication date, and categories of blog post hashes whose keys start with <code>blog:post:</code> (for example, <code>blog:post:1</code>).</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.CREATE idx ON HASH PREFIX <span class=\"m\">1</span> blog:post: SCHEMA title TEXT SORTABLE published_at NUMERIC SORTABLE category TAG SORTABLE\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Index the <code>sku</code> attribute from a hash as both a <code>TAG</code> and as <code>TEXT</code>:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.CREATE idx ON HASH PREFIX <span class=\"m\">1</span> blog:post: SCHEMA sku AS sku_text TEXT sku AS sku_tag TAG SORTABLE</span></span></pre></div> <p>Index two different hashes, one containing author data and one containing books, in the same index:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.CREATE author-books-idx ON HASH PREFIX <span class=\"m\">2</span> author:details: book:details: SCHEMA\n</span></span><span class=\"line\"><span class=\"cl\">author_id TAG SORTABLE author_ids TAG title TEXT name TEXT</span></span></pre></div> <p>In this example, keys for author data use the key pattern <code>author:details:&lt;id&gt;</code> while keys for book data use the pattern <code>book:details:&lt;id&gt;</code>.</p> </details> <details open> <summary><b>Index a JSON document using a JSON Path expression</b></summary> <p>Index authors whose names start with G.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.CREATE g-authors-idx ON HASH PREFIX <span class=\"m\">1</span> author:details FILTER <span class=\"s1\">'startswith(@name, \"G\")'</span> SCHEMA name TEXT</span></span></pre></div> <p>Index only books that have a subtitle.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.CREATE subtitled-books-idx ON HASH PREFIX <span class=\"m\">1</span> book:details FILTER <span class=\"s1\">'@subtitle != \"\"'</span> SCHEMA title TEXT</span></span></pre></div> <p>Index books that have a \"categories\" attribute where each category is separated by a <code>;</code> character.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.CREATE books-idx ON HASH PREFIX <span class=\"m\">1</span> book:details FILTER SCHEMA title TEXT categories TAG SEPARATOR <span class=\"s2\">\";\"</span></span></span></pre></div> <p>Index a JSON document using a JSON Path expression.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.CREATE idx ON JSON SCHEMA $.title AS title TEXT $.categories AS categories TAG</span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.alter\"><code>FT.ALTER</code></a> | <a href=\"../ft.dropindex\"><code>FT.DROPINDEX</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></li> <li><a href=\"https://redis.io/docs/stack/json\">RedisJSON</a></li> <li><a href=\"https://github.com/lionsoul2014/friso\">Friso</a></li> <li><a href=\"https://redis.io/docs/stack/search/reference/stemming\">Stemming</a></li> <li><a href=\"https://redis.io/docs/stack/search/reference/phonetic_matching\">Phonetic Matching</a></li> <li><a href=\"https://github.com/RedisLabsModules/RSCoordinator\">RSCoordinator</a></li> </ul> <h2>History</h2> <ul> <li>Starting with Redis version 2.0.0: Added <code>PAYLOAD_FIELD</code> argument for backward support of <code>FT.SEARCH</code> deprecated <code>WITHPAYLOADS</code> argument</li> <li>Starting with Redis version 2.0.0: Deprecated <code>PAYLOAD_FIELD</code> argument</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.create/\" class=\"_attribution-link\">https://redis.io/commands/ft.create/</a>\n  </p>\n</div>\n","expiretime/index":"<h1 class=\"command-name\">EXPIRETIME</h1>\n<pre>EXPIRETIME</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">EXPIRETIME key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the absolute Unix timestamp (since January 1, 1970) in seconds at which the given key will expire.</p> <p>See also the <a href=\"../pexpiretime\"><code>PEXPIRETIME</code></a> command which returns the same information with milliseconds resolution.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: Expiration Unix timestamp in seconds, or a negative value in order to signal an error (see the description below).</p> <ul> <li>The command returns <code>-1</code> if the key exists but has no associated expiration time.</li> <li>The command returns <code>-2</code> if the key does not exist.</li> </ul> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"Hello\"\nEXPIREAT mykey 33177117420\nEXPIRETIME mykey\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/expiretime/\" class=\"_attribution-link\">https://redis.io/commands/expiretime/</a>\n  </p>\n</div>\n","flushall/index":"<h1 class=\"command-name\">FLUSHALL</h1>\n<pre>FLUSHALL</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FLUSHALL [ASYNC | SYNC]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the total number of keys in all databases</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Delete all the keys of all the existing databases, not just the currently selected one. This command never fails.</p> <p>By default, <code>FLUSHALL</code> will synchronously flush all the databases. Starting with Redis 6.2, setting the <strong>lazyfree-lazy-user-flush</strong> configuration directive to \"yes\" changes the default flush mode to asynchronous.</p> <p>It is possible to use one of the following modifiers to dictate the flushing mode explicitly:</p> <ul> <li>\n<code>ASYNC</code>: flushes the databases asynchronously</li> <li>\n<code>SYNC</code>: flushes the databases synchronously</li> </ul> <p>Note: an asynchronous <code>FLUSHALL</code> command only deletes keys that were present at the time the command was invoked. Keys created during an asynchronous flush will be unaffected.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a></p> <h2 id=\"behavior-change-history\">Behavior change history</h2> <ul> <li>\n<code>&gt;= 6.2.0</code>: Default flush behavior now configurable by the <strong>lazyfree-lazy-user-flush</strong> configuration directive.</li> </ul> <h2>History</h2> <ul> <li>Starting with Redis version 4.0.0: Added the <code>ASYNC</code> flushing mode modifier.</li> <li>Starting with Redis version 6.2.0: Added the <code>SYNC</code> flushing mode modifier.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/flushall/\" class=\"_attribution-link\">https://redis.io/commands/flushall/</a>\n  </p>\n</div>\n","ft.aggregate/index":"<h1 class=\"command-name\">FT.AGGREGATE</h1>\n<pre>FT.AGGREGATE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.AGGREGATE index query \n  [VERBATIM] \n  [ LOAD count field [field ...]] \n  [TIMEOUT timeout] \n  [LOAD *] \n  [ GROUPBY nargs property [property ...] [ REDUCE function nargs arg [arg ...] [AS name] [ REDUCE function nargs arg [arg ...] [AS name] ...]] \n  [ GROUPBY nargs property [property ...] [ REDUCE function nargs arg [arg ...] [AS name] [ REDUCE function nargs arg [arg ...] [AS name] ...]] ...]] \n  [ SORTBY nargs [ property ASC | DESC [ property ASC | DESC ...]] [MAX num]] \n  [ APPLY expression AS name [ APPLY expression AS name ...]] \n  [ LIMIT offset num] \n  [FILTER filter] \n  [ WITHCURSOR [COUNT read_size] [MAXIDLE idle_time]] \n  [ PARAMS nargs name value [ name value ...]] \n  [DIALECT dialect]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.1.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Run a search query on an index, and perform aggregate transformations on the results, extracting statistics etc from them</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>index</code></summary> <p>is index name against which the query is executed. You must first create the index using <a href=\"../ft.create\"><code>FT.CREATE</code></a>.</p> </details> <details open> <summary><code>query</code></summary> <p>is base filtering query that retrieves the documents. It follows the exact same syntax as the search query, including filters, unions, not, optional, and so on.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open> <summary><code>VERBATIM</code></summary> <p>if set, does not try to use stemming for query expansion but searches the query terms verbatim.</p> </details> <details open> <summary><code>LOAD {nargs} {identifier} AS {property} </code></summary> <p>loads document attributes from the source document.</p> <ul> <li>\n<code>identifier</code> is either an attribute name for hashes and JSON or a JSON Path expression for JSON.</li> <li>\n<code>property</code> is the optional name used in the result. If it is not provided, the <code>identifier</code> is used. This should be avoided.</li> <li>If <code>*</code> is used as <code>nargs</code>, all attributes in a document are loaded.</li> </ul> <p>Attributes needed for aggregations should be stored as <code>SORTABLE</code>, where they are available to the aggregation pipeline with very low latency. <code>LOAD</code> hurts the performance of aggregate queries considerably because every processed record needs to execute the equivalent of <a href=\"../hmget\"><code>HMGET</code></a> against a Redis key, which when executed over millions of keys, amounts to high processing times.</p> <details open> <summary><code>GROUPBY {nargs} {property}</code></summary> <p>groups the results in the pipeline based on one or more properties. Each group should have at least one <em>reducer</em>, a function that handles the group entries, either counting them, or performing multiple aggregate operations (see below).</p> <details open> <summary><code>REDUCE {func} {nargs} {arg}  [AS {name}]</code></summary> <p>reduces the matching results in each group into a single record, using a reduction function. For example, <code>COUNT</code> counts the number of records in the group. The reducers can have their own property names using the <code>AS {name}</code> optional argument. If a name is not given, the resulting name will be the name of the reduce function and the group properties. For example, if a name is not given to <code>COUNT_DISTINCT</code> by property <code>@foo</code>, the resulting name will be <code>count_distinct(@foo)</code>.</p> <p>See <a href=\"https://redis.io/docs/stack/search/reference/aggregations/#supported-groupby-reducers\">Supported GROUPBY reducers</a> for more details.</p> </details> <details open> <summary><code>SORTBY {nargs} {property} {ASC|DESC} [MAX {num}]</code></summary> <p>sorts the pipeline up until the point of <code>SORTBY</code>, using a list of properties.</p> <ul> <li>By default, sorting is ascending, but <code>ASC</code> or <code>DESC </code> can be added for each property.</li> <li>\n<code>nargs</code> is the number of sorting parameters, including <code>ASC</code> and <code>DESC</code>, for example, <code>SORTBY 4 @foo ASC @bar DESC</code>.</li> <li>\n<code>MAX</code> is used to optimized sorting, by sorting only for the n-largest elements. Although it is not connected to <code>LIMIT</code>, you usually need just <code>SORTBY  MAX</code> for common queries.</li> </ul> <p>Attributes needed for <code>SORTBY</code> should be stored as <code>SORTABLE</code> to be available with very low latency.</p> <details open> <summary><code>APPLY {expr} AS {name}</code></summary> <p>applies a 1-to-1 transformation on one or more properties and either stores the result as a new property down the pipeline or replaces any property using this transformation.</p> <p><code>expr</code> is an expression that can be used to perform arithmetic operations on numeric properties, or functions that can be applied on properties depending on their types (see below), or any combination thereof. For example, <code>APPLY \"sqrt(@foo)/log(@bar) + 5\" AS baz</code> evaluates this expression dynamically for each record in the pipeline and store the result as a new property called <code>baz</code>, which can be referenced by further <code>APPLY</code>/<code>SORTBY</code>/<code>GROUPBY</code>/<code>REDUCE</code> operations down the pipeline.</p> </details> <details open> <summary><code>LIMIT {offset} {num}</code></summary> <p>limits the number of results to return just <code>num</code> results starting at index <code>offset</code> (zero-based). It is much more efficient to use <code>SORTBY  MAX</code> if you are interested in just limiting the output of a sort operation. If a key expires during the query, an attempt to <code>load</code> the key's value will return a null array.</p> <p>However, limit can be used to limit results without sorting, or for paging the n-largest results as determined by <code>SORTBY MAX</code>. For example, getting results 50-100 of the top 100 results is most efficiently expressed as <code>SORTBY 1 @foo MAX 100 LIMIT 50 50</code>. Removing the <code>MAX</code> from <code>SORTBY</code> results in the pipeline sorting <em>all</em> the records and then paging over results 50-100.</p> </details> <details open> <summary><code>FILTER {expr}</code></summary> <p>filters the results using predicate expressions relating to values in each result. They are applied post query and relate to the current state of the pipeline.</p> </details> <details open> <summary><code>WITHCURSOR {COUNT} {read_size} [MAXIDLE {idle_time}]</code></summary> <p>Scan part of the results with a quicker alternative than <code>LIMIT</code>. See <a href=\"https://redis.io/docs/stack/search/reference/aggregations/#cursor-api\">Cursor API</a> for more details.</p> </details> <details open> <summary><code>TIMEOUT {milliseconds}</code></summary> <p>if set, overrides the timeout parameter of the module.</p> </details> <details open> <summary><code>PARAMS {nargs} {name} {value}</code></summary> <p>defines one or more value parameters. Each parameter has a name and a value.</p> <p>You can reference parameters in the <code>query</code> by a <code>$</code>, followed by the parameter name, for example, <code>$user</code>. Each such reference in the search query to a parameter name is substituted by the corresponding parameter value. For example, with parameter definition <code>PARAMS 4 lon 29.69465 lat 34.95126</code>, the expression <code>@loc:[$lon $lat 10 km]</code> is evaluated to <code>@loc:[29.69465 34.95126 10 km]</code>. You cannot reference parameters in the query string where concrete values are not allowed, such as in field names, for example, <code>@loc</code>. To use <code>PARAMS</code>, set <code>DIALECT</code> to <code>2</code> or greater than <code>2</code>.</p> </details> <details open> <summary><code>DIALECT {dialect_version}</code></summary> <p>selects the dialect version under which to execute the query. If not specified, the query will execute under the default dialect version set during module initial loading or via <a href=\"../ft.config-set\"><code>FT.CONFIG SET</code></a> command.</p> </details> <h2 id=\"return\">Return</h2> <p>FT.AGGREGATE returns an array reply where each row is an array reply and represents a single aggregate result. The <a href=\"https://redis.io/docs/reference/protocol-spec/#resp-integers\">integer reply</a> at position <code>1</code> does not represent a valid value.</p> <h3 id=\"return-multiple-values\">Return multiple values</h3> <p>See <a href=\"../ft.search#return-multiple-values\">Return multiple values</a> in <a href=\"../ft.search\"><code>FT.SEARCH</code></a> The <code>DIALECT</code> can be specified as a parameter in the FT.AGGREGATE command. If it is not specified, the <code>DEFAULT_DIALECT</code> is used, which can be set using <a href=\"../ft.config-set\"><code>FT.CONFIG SET</code></a> or by passing it as an argument to the <code>redisearch</code> module when it is loaded. For example, with the following document and index:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET doc:1 $ <span class=\"s1\">'[{\"arr\": [1, 2, 3]}, {\"val\": \"hello\"}, {\"val\": \"world\"}]'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.CREATE idx ON JSON PREFIX <span class=\"m\">1</span> doc: SCHEMA $..arr AS arr NUMERIC $..val AS val TEXT\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span></pre></div>\n<p>Notice the different replies, with and without <code>DIALECT 3</code>:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.AGGREGATE idx * LOAD <span class=\"m\">2</span> arr val \n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"arr\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"s2\">\"[1,2,3]\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> <span class=\"s2\">\"val\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   4<span class=\"o\">)</span> <span class=\"s2\">\"hello\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.AGGREGATE idx * LOAD <span class=\"m\">2</span> arr val DIALECT <span class=\"m\">3</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"arr\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"s2\">\"[[1,2,3]]\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> <span class=\"s2\">\"val\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   4<span class=\"o\">)</span> <span class=\"s2\">\"[\\\"hello\\\",\\\"world\\\"]\"</span>\n</span></span></pre></div>\n<h2 id=\"complexity\">Complexity</h2> <p>Non-deterministic. Depends on the query and aggregations performed, but it is usually linear to the number of results returned.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Sort page visits by day</b></summary> <p>Find visits to the page <code>about.html</code>, group them by the day of the visit, count the number of visits, and sort them by day.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">FT.AGGREGATE idx <span class=\"s2\">\"@url:\\\"about.html\\\"\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    APPLY <span class=\"s2\">\"day(@timestamp)\"</span> AS day\n</span></span><span class=\"line\"><span class=\"cl\">    GROUPBY <span class=\"m\">2</span> @day @country\n</span></span><span class=\"line\"><span class=\"cl\">      REDUCE count <span class=\"m\">0</span> AS num_visits\n</span></span><span class=\"line\"><span class=\"cl\">    SORTBY <span class=\"m\">4</span> @day</span></span></pre></div> </details> <details open> <summary><b>Find most books ever published</b></summary> <p>Find most books ever published in a single year.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">FT.AGGREGATE books-idx *\n</span></span><span class=\"line\"><span class=\"cl\">    GROUPBY <span class=\"m\">1</span> @published_year\n</span></span><span class=\"line\"><span class=\"cl\">      REDUCE COUNT <span class=\"m\">0</span> AS num_published\n</span></span><span class=\"line\"><span class=\"cl\">    GROUPBY <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\">      REDUCE MAX <span class=\"m\">1</span> @num_published AS max_books_published_per_year</span></span></pre></div> </details> <details open> <summary><b>Reduce all results</b></summary> <p>The last example used <code>GROUPBY 0</code>. Use <code>GROUPBY 0</code> to apply a <code>REDUCE</code> function over all results from the last step of an aggregation pipeline -- this works on both the initial query and subsequent <code>GROUPBY</code> operations.</p> <p>Search for libraries within 10 kilometers of the longitude -73.982254 and latitude 40.753181 then annotate them with the distance between their location and those coordinates.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\"> FT.AGGREGATE libraries-idx <span class=\"s2\">\"@location:[-73.982254 40.753181 10 km]\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    LOAD <span class=\"m\">1</span> @location\n</span></span><span class=\"line\"><span class=\"cl\">    APPLY <span class=\"s2\">\"geodistance(@location, -73.982254, 40.753181)\"</span></span></span></pre></div> <p>Here, we needed to use <code>LOAD</code> to pre-load the <code>@location</code> attribute because it is a GEO attribute.</p> <p>Next, count GitHub events by user (actor), to produce the most active users.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.AGGREGATE gh <span class=\"s2\">\"*\"</span> GROUPBY <span class=\"m\">1</span> @actor REDUCE COUNT <span class=\"m\">0</span> AS num SORTBY <span class=\"m\">2</span> @num DESC MAX <span class=\"m\">10</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">284784</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"actor\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"s2\">\"lombiqbot\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    3<span class=\"o\">)</span> <span class=\"s2\">\"num\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    4<span class=\"o\">)</span> <span class=\"s2\">\"22197\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"actor\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"s2\">\"codepipeline-test\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    3<span class=\"o\">)</span> <span class=\"s2\">\"num\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    4<span class=\"o\">)</span> <span class=\"s2\">\"17746\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 4<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"actor\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"s2\">\"direwolf-github\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    3<span class=\"o\">)</span> <span class=\"s2\">\"num\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    4<span class=\"o\">)</span> <span class=\"s2\">\"10683\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 5<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"actor\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"s2\">\"ogate\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    3<span class=\"o\">)</span> <span class=\"s2\">\"num\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    4<span class=\"o\">)</span> <span class=\"s2\">\"6449\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 6<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"actor\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"s2\">\"openlocalizationtest\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    3<span class=\"o\">)</span> <span class=\"s2\">\"num\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    4<span class=\"o\">)</span> <span class=\"s2\">\"4759\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 7<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"actor\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"s2\">\"digimatic\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    3<span class=\"o\">)</span> <span class=\"s2\">\"num\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    4<span class=\"o\">)</span> <span class=\"s2\">\"3809\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 8<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"actor\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"s2\">\"gugod\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    3<span class=\"o\">)</span> <span class=\"s2\">\"num\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    4<span class=\"o\">)</span> <span class=\"s2\">\"3512\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 9<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"actor\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"s2\">\"xdzou\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    3<span class=\"o\">)</span> <span class=\"s2\">\"num\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    4<span class=\"o\">)</span> <span class=\"s2\">\"3216\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">[</span>10<span class=\"o\">](</span>10<span class=\"o\">))</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"actor\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"s2\">\"opstest\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    3<span class=\"o\">)</span> <span class=\"s2\">\"num\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    4<span class=\"o\">)</span> <span class=\"s2\">\"2863\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">11<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"actor\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"s2\">\"jikker\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    3<span class=\"o\">)</span> <span class=\"s2\">\"num\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    4<span class=\"o\">)</span> <span class=\"s2\">\"2794\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>0.59s<span class=\"o\">)</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.config-set\"><code>FT.CONFIG SET</code></a> | <a href=\"../ft.search\"><code>FT.SEARCH</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/search/reference/aggregations\">Aggregations</a></li> <li><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></li> </ul>  </details></details></details><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.aggregate/\" class=\"_attribution-link\">https://redis.io/commands/ft.aggregate/</a>\n  </p>\n</div>\n","ft._list/index":"<h1 class=\"command-name\">FT._LIST</h1>\n<pre>FT._LIST</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT._LIST</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 2.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Returns a list of all existing indexes.</p> <div class=\"pl-4 border-l-8\"> <div class=\"font-semibold text-slate-900\">Temporary command</div> <p>The prefix <code>_</code> in the command indicates, this is a temporary command.</p> <p>In the future, a <a href=\"../scan\"><code>SCAN</code></a> type of command will be added, for use when a database contains a large number of indices.</p> </div> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> with index names.</p> <h2 id=\"examples\">Examples</h2> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\"><span class=\"n\">FT</span><span class=\"p\">.</span><span class=\"n\">_LIST</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"mi\">1</span><span class=\"p\">)</span><span class=\"s2\">\"idx\"</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"mi\">2</span><span class=\"p\">)</span><span class=\"s2\">\"movies\"</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"mi\">3</span><span class=\"p\">)</span><span class=\"s2\">\"imdb\"</span></span></span></pre></div><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft._list/\" class=\"_attribution-link\">https://redis.io/commands/ft._list/</a>\n  </p>\n</div>\n","ft.alter/index":"<h1 class=\"command-name\">FT.ALTER</h1>\n<pre>FT.ALTER</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.ALTER {index} [SKIPINITIALSCAN] SCHEMA ADD {attribute} {options} ...\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of keys in the keyspace</dd> </dl> <p>Add a new attribute to the index. Adding an attribute to the index causes any future document updates to use the new attribute when indexing and reindexing existing documents.</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>index</code></summary> <p>is index name to create.</p> </details> <details open> <summary><code>SKIPINITIALSCAN</code></summary> <p>if set, does not scan and index.</p> </details> <details open> <summary><code>SCHEMA ADD {attribute} {options} ...</code></summary> <p>after the SCHEMA keyword, declares which fields to add:</p> <ul> <li>\n<code>attribute</code> is attribute to add.</li> <li>\n<code>options</code> are attribute options. Refer to <a href=\"../ft.create\"><code>FT.CREATE</code></a> for more information.</li> </ul> <p><note><b>Note:</b></note></p> <p>Depending on how the index was created, you may be limited by the number of additional text attributes which can be added to an existing index. If the current index contains fewer than 32 text attributes, then <code>SCHEMA ADD</code> will only be able to add attributes up to 32 total attributes (meaning that the index will only ever be able to contain 32 total text attributes). If you wish for the index to contain more than 32 attributes, create it with the <code>MAXTEXTFIELDS</code> option. </p> </details> <h2 id=\"return\">Return</h2> <p>FT.CREATE returns a simple string reply <code>OK</code> if executed correctly, or an error reply otherwise.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Alter an index</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.ALTER idx SCHEMA ADD id2 NUMERIC SORTABLE\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.create\"><code>FT.CREATE</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.alter/\" class=\"_attribution-link\">https://redis.io/commands/ft.alter/</a>\n  </p>\n</div>\n","ft.config-get/index":"<h1 class=\"command-name\">FT.CONFIG</h1>\n<pre>FT.CONFIG GET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.CONFIG GET option\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Retrieve configuration options</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>option</code></summary> <p>is name of the configuration option, or '*' for all.</p> </details> <h2 id=\"return\">Return</h2> <p>FT.CONFIG GET returns an array reply of the configuration name and value.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Retrieve configuration options</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.CONFIG GET TIMEOUT\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> TIMEOUT\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">42</span></span></span></pre></div> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.CONFIG GET *\n</span></span><span class=\"line\"><span class=\"cl\"> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> EXTLOAD\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"o\">(</span>nil<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 2<span class=\"o\">)</span> 1<span class=\"o\">)</span> SAFEMODE\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"nb\">true</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 3<span class=\"o\">)</span> 1<span class=\"o\">)</span> CONCURRENT_WRITE_MODE\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"nb\">false</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 4<span class=\"o\">)</span> 1<span class=\"o\">)</span> NOGC\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"nb\">false</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 5<span class=\"o\">)</span> 1<span class=\"o\">)</span> MINPREFIX\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"m\">2</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 6<span class=\"o\">)</span> 1<span class=\"o\">)</span> FORKGC_SLEEP_BEFORE_EXIT\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 7<span class=\"o\">)</span> 1<span class=\"o\">)</span> MAXDOCTABLESIZE\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"m\">1000000</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 8<span class=\"o\">)</span> 1<span class=\"o\">)</span> MAXSEARCHRESULTS\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"m\">1000000</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 9<span class=\"o\">)</span> 1<span class=\"o\">)</span> MAXAGGREGATERESULTS\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> unlimited\n</span></span><span class=\"line\"><span class=\"cl\">10<span class=\"o\">)</span> 1<span class=\"o\">)</span> MAXEXPANSIONS\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"m\">200</span>\n</span></span><span class=\"line\"><span class=\"cl\">11<span class=\"o\">)</span> 1<span class=\"o\">)</span> MAXPREFIXEXPANSIONS\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"m\">200</span>\n</span></span><span class=\"line\"><span class=\"cl\">12<span class=\"o\">)</span> 1<span class=\"o\">)</span> TIMEOUT\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"m\">42</span>\n</span></span><span class=\"line\"><span class=\"cl\">13<span class=\"o\">)</span> 1<span class=\"o\">)</span> INDEX_THREADS\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"m\">8</span>\n</span></span><span class=\"line\"><span class=\"cl\">14<span class=\"o\">)</span> 1<span class=\"o\">)</span> SEARCH_THREADS\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"m\">20</span>\n</span></span><span class=\"line\"><span class=\"cl\">15<span class=\"o\">)</span> 1<span class=\"o\">)</span> FRISOINI\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"o\">(</span>nil<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">16<span class=\"o\">)</span> 1<span class=\"o\">)</span> ON_TIMEOUT\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"k\">return</span>\n</span></span><span class=\"line\"><span class=\"cl\">17<span class=\"o\">)</span> 1<span class=\"o\">)</span> GCSCANSIZE\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"m\">100</span>\n</span></span><span class=\"line\"><span class=\"cl\">18<span class=\"o\">)</span> 1<span class=\"o\">)</span> MIN_PHONETIC_TERM_LEN\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"m\">3</span>\n</span></span><span class=\"line\"><span class=\"cl\">19<span class=\"o\">)</span> 1<span class=\"o\">)</span> GC_POLICY\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> fork\n</span></span><span class=\"line\"><span class=\"cl\">20<span class=\"o\">)</span> 1<span class=\"o\">)</span> FORK_GC_RUN_INTERVAL\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"m\">30</span>\n</span></span><span class=\"line\"><span class=\"cl\">21<span class=\"o\">)</span> 1<span class=\"o\">)</span> FORK_GC_CLEAN_THRESHOLD\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"m\">100</span>\n</span></span><span class=\"line\"><span class=\"cl\">22<span class=\"o\">)</span> 1<span class=\"o\">)</span> FORK_GC_RETRY_INTERVAL\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"m\">5</span>\n</span></span><span class=\"line\"><span class=\"cl\">23<span class=\"o\">)</span> 1<span class=\"o\">)</span> FORK_GC_CLEAN_NUMERIC_EMPTY_NODES\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"nb\">true</span>\n</span></span><span class=\"line\"><span class=\"cl\">24<span class=\"o\">)</span> 1<span class=\"o\">)</span> _FORK_GC_CLEAN_NUMERIC_EMPTY_NODES\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"nb\">true</span>\n</span></span><span class=\"line\"><span class=\"cl\">25<span class=\"o\">)</span> 1<span class=\"o\">)</span> _MAX_RESULTS_TO_UNSORTED_MODE\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">26<span class=\"o\">)</span> 1<span class=\"o\">)</span> UNION_ITERATOR_HEAP\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"m\">20</span>\n</span></span><span class=\"line\"><span class=\"cl\">27<span class=\"o\">)</span> 1<span class=\"o\">)</span> CURSOR_MAX_IDLE\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"m\">300000</span>\n</span></span><span class=\"line\"><span class=\"cl\">28<span class=\"o\">)</span> 1<span class=\"o\">)</span> NO_MEM_POOLS\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"nb\">false</span>\n</span></span><span class=\"line\"><span class=\"cl\">29<span class=\"o\">)</span> 1<span class=\"o\">)</span> PARTIAL_INDEXED_DOCS\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"nb\">false</span>\n</span></span><span class=\"line\"><span class=\"cl\">30<span class=\"o\">)</span> 1<span class=\"o\">)</span> UPGRADE_INDEX\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> Upgrade config <span class=\"k\">for</span> upgrading\n</span></span><span class=\"line\"><span class=\"cl\">31<span class=\"o\">)</span> 1<span class=\"o\">)</span> _NUMERIC_COMPRESS\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"nb\">false</span>\n</span></span><span class=\"line\"><span class=\"cl\">32<span class=\"o\">)</span> 1<span class=\"o\">)</span> _FREE_RESOURCE_ON_THREAD\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"nb\">true</span>\n</span></span><span class=\"line\"><span class=\"cl\">33<span class=\"o\">)</span> 1<span class=\"o\">)</span> _PRINT_PROFILE_CLOCK\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"nb\">true</span>\n</span></span><span class=\"line\"><span class=\"cl\">34<span class=\"o\">)</span> 1<span class=\"o\">)</span> RAW_DOCID_ENCODING\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"nb\">false</span>\n</span></span><span class=\"line\"><span class=\"cl\">35<span class=\"o\">)</span> 1<span class=\"o\">)</span> _NUMERIC_RANGES_PARENTS\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"m\">0</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.config-set\"><code>FT.CONFIG SET</code></a> | <a href=\"../ft.config-help\"><code>FT.CONFIG HELP</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.config-get/\" class=\"_attribution-link\">https://redis.io/commands/ft.config-get/</a>\n  </p>\n</div>\n","ft.aliasupdate/index":"<h1 class=\"command-name\">FT.ALIASUPDATE</h1>\n<pre>FT.ALIASUPDATE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.ALIASUPDATE alias index\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Add an alias to an index. If the alias is already associated with another index, FT.ALIASUPDATE removes the alias association with the previous index.</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>alias index</code></summary> <p>is alias to be added to an index.</p> </details> <h2 id=\"return\">Return</h2> <p>FT.ALIASUPDATE returns a simple string reply <code>OK</code> if executed correctly, or an error reply otherwise.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Update an index alias</b></summary> <p>Update the alias of an index.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.ALIASUPDATE <span class=\"nb\">alias</span> idx\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.aliasadd\"><code>FT.ALIASADD</code></a> | <a href=\"../ft.aliasdel\"><code>FT.ALIASDEL</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></p>  </details><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.aliasupdate/\" class=\"_attribution-link\">https://redis.io/commands/ft.aliasupdate/</a>\n  </p>\n</div>\n","ft.dictdel/index":"<h1 class=\"command-name\">FT.DICTDEL</h1>\n<pre>FT.DICTDEL</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.DICTDEL dict term [term ...]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.4.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Delete terms from a dictionary</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>dict</code></summary> <p>is dictionary name.</p> </details> <details open> <summary><code>term</code></summary> <p>term to delete from the dictionary.</p> </details> <h2 id=\"return\">Return</h2> <p>FT.DICTDEL returns an integer reply, the number of new terms that were deleted.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Delete terms from a dictionary</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.DICTDEL dict foo bar <span class=\"s2\">\"hello world\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.dictadd\"><code>FT.DICTADD</code></a> | <a href=\"../ft.dictdump\"><code>FT.DICTDUMP</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.dictdel/\" class=\"_attribution-link\">https://redis.io/commands/ft.dictdel/</a>\n  </p>\n</div>\n","ft.config-set/index":"<h1 class=\"command-name\">FT.CONFIG</h1>\n<pre>FT.CONFIG SET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.CONFIG SET option value\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Set the value of a RediSearch configuration parameter.</p> <p>Values set using <code>FT.CONFIG SET</code> are not persisted after server restart.</p> <p>RediSearch configuration parameters are detailed in <a href=\"https://redis.io/docs/stack/search/configuring\">Configuration parameters</a>.</p> <div class=\"pl-4 border-l-8\"> <div class=\"font-semibold text-slate-900\">Note</div> <p>As detailed in the link above, not all RediSearch configuration parameters can be set at runtime.</p> </div> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>option</code></summary> <p>is name of the configuration option, or '*' for all.</p> </details> <details open> <summary><code>value</code></summary> <p>is value of the configuration option.</p> </details> <h2 id=\"return\">Return</h2> <p>FT.CONFIG SET returns a simple string reply <code>OK</code> if executed correctly, or an error reply otherwise.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Set runtime configuration options</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.CONFIG SET TIMEOUT <span class=\"m\">42</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.config-get\"><code>FT.CONFIG GET</code></a> | <a href=\"../ft.config-help\"><code>FT.CONFIG HELP</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.config-set/\" class=\"_attribution-link\">https://redis.io/commands/ft.config-set/</a>\n  </p>\n</div>\n","ft.cursor-read/index":"<h1 class=\"command-name\">FT.CURSOR</h1>\n<pre>FT.CURSOR READ</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.CURSOR READ index cursor_id [COUNT read_size]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.1.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Read next results from an existing cursor</p> <p><a href=\"#examples\">Examples</a></p> <p>See <a href=\"https://redis.io/docs/stack/search/reference/aggregations/#cursor-api\">Cursor API</a> for more details.</p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>index</code></summary> <p>is index name.</p> </details> <details open> <summary><code>cursor_id</code></summary> <p>is id of the cursor.</p> </details> <details open> <summary><code>[COUNT read_size]</code></summary> <p>is number of results to read. This parameter overrides <code>COUNT</code> specified in <a href=\"../ft.aggregate\"><code>FT.AGGREGATE</code></a>.</p> </details> <h2 id=\"return\">Return</h2> <p>FT.CURSOR DEL returns an array reply where each row is an array reply and represents a single aggregate result.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Read next results from a cursor</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.CURSOR READ idx <span class=\"m\">342459320</span> COUNT <span class=\"m\">50</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.cursor-del\"><code>FT.CURSOR DEL</code></a> | <a href=\"../ft.aggregate\"><code>FT.AGGREGATE</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.cursor-read/\" class=\"_attribution-link\">https://redis.io/commands/ft.cursor-read/</a>\n  </p>\n</div>\n","ft.cursor-del/index":"<h1 class=\"command-name\">FT.CURSOR</h1>\n<pre>FT.CURSOR DEL</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.CURSOR DEL index cursor_id\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.1.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Delete a cursor</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>index</code></summary> <p>is index name.</p> </details> <details open> <summary><code>cursor_id</code></summary> <p>is id of the cursor.</p> </details> <h2 id=\"returns\">Returns</h2> <p>FT.CURSOR DEL returns a simple string reply <code>OK</code> if executed correctly, or an error reply otherwise.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Delete a cursor</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">redis&gt; FT.CURSOR DEL idx <span class=\"m\">342459320</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Check that the cursor is deleted.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.CURSOR DEL idx <span class=\"m\">342459320</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>error<span class=\"o\">)</span> Cursor does not exist</span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.cursor-read\"><code>FT.CURSOR READ</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.cursor-del/\" class=\"_attribution-link\">https://redis.io/commands/ft.cursor-del/</a>\n  </p>\n</div>\n","ft.search/index":"<h1 class=\"command-name\">FT.SEARCH</h1>\n<pre>FT.SEARCH</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.SEARCH index query \n  [NOCONTENT] \n  [VERBATIM] [NOSTOPWORDS] \n  [WITHSCORES] \n  [WITHPAYLOADS] \n  [WITHSORTKEYS] \n  [FILTER numeric_field min max [ FILTER numeric_field min max ...]] \n  [GEOFILTER geo_field lon lat radius m | km | mi | ft [ GEOFILTER geo_field lon lat radius m | km | mi | ft ...]] \n  [INKEYS count key [key ...]] [ INFIELDS count field [field ...]] \n  [RETURN count identifier [AS property] [ identifier [AS property] ...]] \n  [SUMMARIZE [ FIELDS count field [field ...]] [FRAGS num] [LEN fragsize] [SEPARATOR separator]] \n  [HIGHLIGHT [ FIELDS count field [field ...]] [ TAGS open close]] \n  [SLOP slop] \n  [TIMEOUT timeout] \n  [INORDER] \n  [LANGUAGE language] \n  [EXPANDER expander] \n  [SCORER scorer] \n  [EXPLAINSCORE] \n  [PAYLOAD payload] \n  [SORTBY sortby [ ASC | DESC]] \n  [LIMIT offset num] \n  [PARAMS nargs name value [ name value ...]] \n  [DIALECT dialect]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N)</dd> </dl> <p>Search the index with a textual query, returning either documents or just ids</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>index</code></summary> <p>is index name. You must first create the index using <a href=\"../ft.create\"><code>FT.CREATE</code></a>.</p> </details> <details open> <summary><code>query</code></summary> <p>is text query to search. If it's more than a single word, put it in quotes. Refer to <a href=\"https://redis.io/docs/stack/search/reference/query_syntax\">Query syntax</a> for more details.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open> <summary><code>NOCONTENT</code></summary> <p>returns the document ids and not the content. This is useful if RediSearch is only an index on an external document collection.</p> </details> <details open> <summary><code>VERBATIM</code></summary> <p>does not try to use stemming for query expansion but searches the query terms verbatim.</p> </details> <details open> <summary><code>WITHSCORES</code></summary> <p>also returns the relative internal score of each document. This can be used to merge results from multiple instances.</p> </details> <details open> <summary><code>WITHPAYLOADS</code></summary> <p>retrieves optional document payloads. See <a href=\"../ft.create\"><code>FT.CREATE</code></a>. The payloads follow the document id and, if <code>WITHSCORES</code> is set, the scores.</p> </details> <details open> <summary><code>WITHSORTKEYS</code></summary> <p>returns the value of the sorting key, right after the id and score and/or payload, if requested. This is usually not needed, and exists for distributed search coordination purposes. This option is relevant only if used in conjunction with <code>SORTBY</code>.</p> </details> <details open> <summary><code>FILTER numeric_attribute min max</code></summary> <p>limits results to those having numeric values ranging between <code>min</code> and <code>max</code>, if numeric_attribute is defined as a numeric attribute in <a href=\"../ft.create\"><code>FT.CREATE</code></a>. <code>min</code> and <code>max</code> follow <a href=\"../zrange\"><code>ZRANGE</code></a> syntax, and can be <code>-inf</code>, <code>+inf</code>, and use <code>(</code> for exclusive ranges. Multiple numeric filters for different attributes are supported in one query.</p> </details> <details open> <summary><code>GEOFILTER {geo_attribute} {lon} {lat} {radius} m|km|mi|ft</code></summary> <p>filter the results to a given <code>radius</code> from <code>lon</code> and <code>lat</code>. Radius is given as a number and units. See <a href=\"../georadius\"><code>GEORADIUS</code></a> for more details.</p> </details> <details open> <summary><code>INKEYS {num} {attribute} ...</code></summary> <p>limits the result to a given set of keys specified in the list. The first argument must be the length of the list and greater than zero. Non-existent keys are ignored, unless all the keys are non-existent.</p> </details> <details open> <summary><code>INFIELDS {num} {attribute} ...</code></summary> <p>filters the results to those appearing only in specific attributes of the document, like <code>title</code> or <code>URL</code>. You must include <code>num</code>, which is the number of attributes you're filtering by. For example, if you request <code>title</code> and <code>URL</code>, then <code>num</code> is 2.</p> </details> <details open> <summary><code>RETURN {num} {identifier} AS {property} ...</code></summary> <p>limits the attributes returned from the document. <code>num</code> is the number of attributes following the keyword. If <code>num</code> is 0, it acts like <code>NOCONTENT</code>. <code>identifier</code> is either an attribute name (for hashes and JSON) or a JSON Path expression (for JSON). <code>property</code> is an optional name used in the result. If not provided, the <code>identifier</code> is used in the result.</p> </details> <details open> <summary><code>SUMMARIZE ...</code></summary> <p>returns only the sections of the attribute that contain the matched text. See <a href=\"https://redis.io/docs/stack/search/reference/highlight\">Highlighting</a> for more information.</p> </details> <details open> <summary><code>HIGHLIGHT ...</code></summary> <p>formats occurrences of matched text. See <a href=\"https://redis.io/docs/stack/search/reference/highlight\">Highlighting</a> for more information.</p> </details> <details open> <summary><code>SLOP {slop}</code></summary> <p>is the number of intermediate terms allowed to appear between the terms of the query. Suppose you're searching for a phrase <em>hello world</em>. If some terms appear in-between <em>hello</em> and <em>world</em>, a <code>SLOP</code> greater than <code>0</code> allows for these text attributes to match. By default, there is no <code>SLOP</code> constraint.</p> </details> <details open> <summary><code>INORDER</code></summary> <p>requires the terms in the document to have the same order as the terms in the query, regardless of the offsets between them. Typically used in conjunction with <code>SLOP</code>. Default is <code>false</code>.</p> </details> <details open> <summary><code>LANGUAGE {language}</code></summary> <p>use a stemmer for the supplied language during search for query expansion. If querying documents in Chinese, set to <code>chinese</code> to properly tokenize the query terms. Defaults to English. If an unsupported language is sent, the command returns an error. See <a href=\"../ft.create\"><code>FT.CREATE</code></a> for the list of languages.</p> </details> <details open> <summary><code>EXPANDER {expander}</code></summary> <p>uses a custom query expander instead of the stemmer. See <a href=\"https://redis.io/docs/stack/search/reference/extensions\">Extensions</a>.</p> </details> <details open> <summary><code>SCORER {scorer}</code></summary> <p>uses a custom scoring function you define. See <a href=\"https://redis.io/docs/stack/search/reference/extensions\">Extensions</a>.</p> </details> <details open> <summary><code>EXPLAINSCORE</code></summary> <p>returns a textual description of how the scores were calculated. Using this option requires <code>WITHSCORES</code>.</p> </details> <details open> <summary><code>PAYLOAD {payload}</code></summary> <p>adds an arbitrary, binary safe payload that is exposed to custom scoring functions. See <a href=\"https://redis.io/docs/stack/search/reference/extensions\">Extensions</a>.</p> </details> <details open> <summary><code>SORTBY {attribute} [ASC|DESC]</code></summary> <p>orders the results by the value of this attribute. This applies to both text and numeric attributes. Attributes needed for <code>SORTBY</code> should be declared as <code>SORTABLE</code> in the index, in order to be available with very low latency. Note that this adds memory overhead.</p> </details> <details open> <summary><code>LIMIT first num</code></summary> <p>limits the results to the offset and number of results given. Note that the offset is zero-indexed. The default is 0 10, which returns 10 items starting from the first result. You can use <code>LIMIT 0 0</code> to count the number of documents in the result set without actually returning them.</p> </details> <details open> <summary><code>TIMEOUT {milliseconds}</code></summary> <p>overrides the timeout parameter of the module.</p> </details> <details open> <summary><code>PARAMS {nargs} {name} {value}</code></summary> <p>defines one or more value parameters. Each parameter has a name and a value.</p> <p>You can reference parameters in the <code>query</code> by a <code>$</code>, followed by the parameter name, for example, <code>$user</code>. Each such reference in the search query to a parameter name is substituted by the corresponding parameter value. For example, with parameter definition <code>PARAMS 4 lon 29.69465 lat 34.95126</code>, the expression <code>@loc:[$lon $lat 10 km]</code> is evaluated to <code>@loc:[29.69465 34.95126 10 km]</code>. You cannot reference parameters in the query string where concrete values are not allowed, such as in field names, for example, <code>@loc</code>. To use <code>PARAMS</code>, set <code>DIALECT</code> to <code>2</code> or greater than <code>2</code>.</p> </details> <details open> <summary><code>DIALECT {dialect_version}</code></summary> <p>selects the dialect version under which to execute the query. If not specified, the query will execute under the default dialect version set during module initial loading or via <a href=\"../ft.config-set\"><code>FT.CONFIG SET</code></a> command.</p> </details> <h2 id=\"return\">Return</h2> <p>FT.SEARCH returns an array reply, where the first element is an integer reply of the total number of results, and then array reply pairs of document ids, and array replies of attribute/value pairs.</p> <div class=\"pl-4 border-l-8\"> <div class=\"font-semibold text-slate-900\">Notes</div> <ul> <li>If <code>NOCONTENT</code> is given, an array is returned where the first element is the total number of results, and the rest of the members are document ids.</li> <li>If a hash expires after the query process starts, the hash is counted in the total number of results, but the key name and content return as null.</li> </ul> </div> <h3 id=\"return-multiple-values\">Return multiple values</h3> <p>When the index is defined <code>ON JSON</code>, a reply for a single attribute or a single JSONPath may return multiple values when the JSONPath matches multiple values, or when the JSONPath matches an array.</p> <p>Prior to RediSearch v2.6, only the first of the matched values was returned. Starting with RediSearch v2.6, all values are returned, wrapped with a top-level array.</p> <p>In order to maintain backward compatibility, the default behavior with RediSearch v2.6 is to return only the first value.</p> <p>To return all the values, use <code>DIALECT</code> 3 (or greater, when available).</p> <p>The <code>DIALECT</code> can be specified as a parameter in the FT.SEARCH command. If it is not specified, the <code>DEFAULT_DIALECT</code> is used, which can be set using <a href=\"../ft.config-set\"><code>FT.CONFIG SET</code></a> or by passing it as an argument to the <code>redisearch</code> module when it is loaded.</p> <p>For example, with the following document and index:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET doc:1 $ <span class=\"s1\">'[{\"arr\": [1, 2, 3]}, {\"val\": \"hello\"}, {\"val\": \"world\"}]'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.CREATE idx ON JSON PREFIX <span class=\"m\">1</span> doc: SCHEMA $..arr AS arr NUMERIC $..val AS val TEXT\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span></pre></div>\n<p>Notice the different replies, with and without <code>DIALECT 3</code>:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SEARCH idx * RETURN <span class=\"m\">2</span> arr val\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"s2\">\"doc:1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"arr\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"s2\">\"[1,2,3]\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> <span class=\"s2\">\"val\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   4<span class=\"o\">)</span> <span class=\"s2\">\"hello\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SEARCH idx * RETURN <span class=\"m\">2</span> arr val DIALECT <span class=\"m\">3</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"s2\">\"doc:1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"arr\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"s2\">\"[[1,2,3]]\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> <span class=\"s2\">\"val\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   4<span class=\"o\">)</span> <span class=\"s2\">\"[\\\"hello\\\",\\\"world\\\"]\"</span>\n</span></span></pre></div>\n<h2 id=\"complexity\">Complexity</h2> <p>FT.SEARCH complexity is O(n) for single word queries. <code>n</code> is the number of the results in the result set. Finding all the documents that have a specific term is O(1), however, a scan on all those documents is needed to load the documents data from redis hashes and return them.</p> <p>The time complexity for more complex queries varies, but in general it's proportional to the number of words, the number of intersection points between them and the number of results in the result set.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Search for a term in every text attribute</b></summary> <p>Search for the term \"wizard\" in every TEXT attribute of an index containing book data.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SEARCH books-idx <span class=\"s2\">\"wizard\"</span></span></span></pre></div> </details> <details open> <summary><b>Search for a term in title attribute</b></summary> <p>Search for the term <em>dogs</em> in the <code>title</code> attribute.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SEARCH books-idx <span class=\"s2\">\"@title:dogs\"</span></span></span></pre></div> </details> <details open> <summary><b>Search for books from specific years</b></summary> <p>Search for books published in 2020 or 2021.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SEARCH books-idx <span class=\"s2\">\"@published_at:[2020 2021]\"</span></span></span></pre></div> </details> <details open> <summary><b>Search for a restaurant by distance from longitude/latitude</b></summary> <p>Search for Chinese restaurants within 5 kilometers of longitude -122.41, latitude 37.77 (San Francisco).</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SEARCH restaurants-idx <span class=\"s2\">\"chinese @location:[-122.41 37.77 5 km]\"</span></span></span></pre></div> </details> <details open> <summary><b>Search for a book by terms but boost specific term</b></summary> <p>Search for the term <em>dogs</em> or <em>cats</em> in the <code>title</code> attribute, but give matches of <em>dogs</em> a higher relevance score (also known as <em>boosting</em>).</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SEARCH books-idx <span class=\"s2\">\"(@title:dogs | @title:cats) | (@title:dogs) =&gt; { </span><span class=\"nv\">$weight</span><span class=\"s2\">: 5.0; }\"</span></span></span></pre></div> </details> <details open> <summary><b>Search for a book by a term and EXPLAINSCORE</b></summary> <p>Search for books with <em>dogs</em> in any TEXT attribute in the index and request an explanation of scoring for each result.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SEARCH books-idx <span class=\"s2\">\"dogs\"</span> WITHSCORES EXPLAINSCORE</span></span></pre></div> </details> <details open> <summary><b>Search for a book by a term and TAG</b></summary> <p>Search for books with <em>space</em> in the title that have <code>science</code> in the TAG attribute <code>categories</code>.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SEARCH books-idx <span class=\"s2\">\"@title:space @categories:{science}\"</span></span></span></pre></div> </details> <details open> <summary><b>Search for a book by a term but limit the number</b></summary> <p>Search for books with <em>Python</em> in any <code>TEXT</code> attribute, returning 10 results starting with the 11th result in the entire result set (the offset parameter is zero-based), and return only the <code>title</code> attribute for each result.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SEARCH books-idx <span class=\"s2\">\"python\"</span> LIMIT <span class=\"m\">10</span> <span class=\"m\">10</span> RETURN <span class=\"m\">1</span> title</span></span></pre></div> </details> <details open> <summary><b>Search for a book by a term and price</b></summary> <p>Search for books with <em>Python</em> in any <code>TEXT</code> attribute, returning the price stored in the original JSON document.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SEARCH books-idx <span class=\"s2\">\"python\"</span> RETURN <span class=\"m\">3</span> $.book.price AS price</span></span></pre></div> </details> <details open> <summary><b>Search for a book by title and distance</b></summary> <p>Search for books with semantically similar title to <em>Planet Earth</em>. Return top 10 results sorted by distance.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SEARCH books-idx <span class=\"s2\">\"*=&gt;[KNN 10 @title_embedding </span><span class=\"nv\">$query_vec</span><span class=\"s2\"> AS title_score]\"</span> PARAMS <span class=\"m\">2</span> query_vec &lt;<span class=\"s2\">\"Planet Earth\"</span> embedding BLOB&gt; SORTBY title_score DIALECT <span class=\"m\">2</span></span></span></pre></div> </details> <details open> <summary><b>Search for a phrase using SLOP</b></summary> <p>Search for a phrase <em>hello world</em>. First, create an index.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.CREATE memes SCHEMA phrase TEXT\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Add variations of the phrase <em>hello world</em>.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; HSET s1 phrase <span class=\"s2\">\"hello world\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; HSET s2 phrase <span class=\"s2\">\"hello simple world\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; HSET s3 phrase <span class=\"s2\">\"hello somewhat less simple world\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; HSET s4 phrase <span class=\"s2\">\"hello complicated yet encouraging problem solving world\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; HSET s5 phrase <span class=\"s2\">\"hello complicated yet amazingly encouraging problem solving world\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span></span></span></pre></div> <p>Then, search for the phrase <em>hello world</em>. The result returns all documents that contain the phrase.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SEARCH memes <span class=\"s1\">'@phrase:(hello world)'</span> NOCONTENT \n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">5</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"s2\">\"s1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"s2\">\"s2\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> <span class=\"s2\">\"s3\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">5<span class=\"o\">)</span> <span class=\"s2\">\"s4\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">6<span class=\"o\">)</span> <span class=\"s2\">\"s5\"</span></span></span></pre></div> <p>Now, return all documents that have one of fewer words between <em>hello</em> and <em>world</em>.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SEARCH memes <span class=\"s1\">'@phrase:(hello world)'</span> NOCONTENT SLOP <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"s2\">\"s1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"s2\">\"s2\"</span></span></span></pre></div> <p>Now, return all documents with three or fewer words between <em>hello</em> and <em>world</em>.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SEARCH memes <span class=\"s1\">'@phrase:(hello world)'</span> NOCONTENT SLOP <span class=\"m\">3</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"s2\">\"s1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"s2\">\"s2\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> <span class=\"s2\">\"s3\"</span></span></span></pre></div> <p><code>s5</code> needs a higher <code>SLOP</code> to match, <code>SLOP 6</code> or higher, to be exact. See what happens when you set <code>SLOP</code> to <code>5</code>.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SEARCH memes <span class=\"s1\">'@phrase:(hello world)'</span> NOCONTENT SLOP <span class=\"m\">5</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">4</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"s2\">\"s1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"s2\">\"s2\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> <span class=\"s2\">\"s3\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">5<span class=\"o\">)</span> <span class=\"s2\">\"s4\"</span></span></span></pre></div> <p>If you add additional terms (and stemming), you get these results.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SEARCH memes <span class=\"s1\">'@phrase:(hello amazing world)'</span> NOCONTENT \n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"s2\">\"s5\"</span></span></span></pre></div> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SEARCH memes <span class=\"s1\">'@phrase:(hello encouraged world)'</span> NOCONTENT SLOP <span class=\"m\">5</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"s2\">\"s4\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"s2\">\"s5\"</span></span></span></pre></div> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SEARCH memes <span class=\"s1\">'@phrase:(hello encouraged world)'</span> NOCONTENT SLOP <span class=\"m\">4</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"s2\">\"s4\"</span></span></span></pre></div> <p>If you swap the terms, you can still retrieve the correct phrase.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SEARCH memes <span class=\"s1\">'@phrase:(amazing hello world)'</span> NOCONTENT\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"s2\">\"s5\"</span></span></span></pre></div> <p>But, if you use <code>INORDER</code>, you get zero results.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SEARCH memes <span class=\"s1\">'@phrase:(amazing hello world)'</span> NOCONTENT INORDER\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span></span></span></pre></div> <p>Likewise, if you use a query attribute <code>$inorder</code> set to <code>true</code>, <code>s5</code> is not retrieved.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SEARCH memes <span class=\"s1\">'@phrase:(amazing hello world)=&gt;{$inorder: true;}'</span> NOCONTENT\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span></span></span></pre></div> <p>To sum up, the <code>INORDER</code> argument or <code>$inorder</code> query attribute require the query terms to match terms with similar ordering.</p> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.create\"><code>FT.CREATE</code></a> | <a href=\"../ft.aggregate\"><code>FT.AGGREGATE</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/search/reference/extensions\">Extensions</a></li> <li><a href=\"https://redis.io/docs/stack/search/reference/highlight\">Highlighting</a></li> <li><a href=\"https://redis.io/docs/stack/search/reference/query_syntax\">Query syntax</a></li> <li><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></li> </ul> <h2>History</h2> <ul> <li>Starting with Redis version 2.0.0: Deprecated <code>WITHPAYLOADS</code> and <code>PAYLOAD</code> arguments</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.search/\" class=\"_attribution-link\">https://redis.io/commands/ft.search/</a>\n  </p>\n</div>\n","ft.dictadd/index":"<h1 class=\"command-name\">FT.DICTADD</h1>\n<pre>FT.DICTADD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.DICTADD dict term [term ...]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.4.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Add terms to a dictionary</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>dict</code></summary> <p>is dictionary name.</p> </details> <details open> <summary><code>term</code></summary> <p>term to add to the dictionary.</p> </details> <h2 id=\"return\">Return</h2> <p>FT.DICTADD returns an integer reply, the number of new terms that were added.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Add terms to a dictionary</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.DICTADD dict foo bar <span class=\"s2\">\"hello world\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.dictdel\"><code>FT.DICTDEL</code></a> | <a href=\"../ft.dictdump\"><code>FT.DICTDUMP</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.dictadd/\" class=\"_attribution-link\">https://redis.io/commands/ft.dictadd/</a>\n  </p>\n</div>\n","ft.dictdump/index":"<h1 class=\"command-name\">FT.DICTDUMP</h1>\n<pre>FT.DICTDUMP</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.DICTDUMP dict\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.4.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N), where N is the size of the dictionary</dd> </dl> <p>Dump all terms in the given dictionary</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-argumemts\">Required argumemts</h2> <details open> <summary><code>dict</code></summary> <p>is dictionary name.</p> </details> <h2 id=\"return\">Return</h2> <p>FT.DICTDUMP returns an array, where each element is term (string).</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Dump all terms in the dictionary</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.DICTDUMP dict\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"s2\">\"foo\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"s2\">\"bar\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"s2\">\"hello world\"</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.dictadd\"><code>FT.DICTADD</code></a> | <a href=\"../ft.dictdel\"><code>FT.DICTDEL</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.dictdump/\" class=\"_attribution-link\">https://redis.io/commands/ft.dictdump/</a>\n  </p>\n</div>\n","ft.explain/index":"<h1 class=\"command-name\">FT.EXPLAIN</h1>\n<pre>FT.EXPLAIN</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.EXPLAIN index query \n  [DIALECT dialect]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Return the execution plan for a complex query</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>index</code></summary> <p>is index name. You must first create the index using <a href=\"../ft.create\"><code>FT.CREATE</code></a>.</p> </details> <details open> <summary><code>query</code></summary> <p>is query string, as if sent to FT.SEARCH`.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open> <summary><code>DIALECT {dialect_version}</code></summary> <p>is dialect version under which to execute the query. If not specified, the query executes under the default dialect version set during module initial loading or via <a href=\"../ft.config-set\"><code>FT.CONFIG SET</code></a> command.</p> </details> <div class=\"pl-4 border-l-8\"> <div class=\"font-semibold text-slate-900\">Notes</div> <ul> <li>In the returned response, a <code>+</code> on a term is an indication of stemming.</li> <li>Use <code>redis-cli --raw</code> to properly read line-breaks in the returned response.</li> </ul> </div> <h2 id=\"return\">Return</h2> <p>FT.EXPLAIN returns a string representing the execution plan.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Return the execution plan for a complex query</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">$ redis-cli --raw\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.EXPLAIN rd <span class=\"s2\">\"(foo bar)|(hello world) @date:[100 200]|@date:[500 +inf]\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">INTERSECT <span class=\"o\">{</span>\n</span></span><span class=\"line\"><span class=\"cl\">  UNION <span class=\"o\">{</span>\n</span></span><span class=\"line\"><span class=\"cl\">    INTERSECT <span class=\"o\">{</span>\n</span></span><span class=\"line\"><span class=\"cl\">      foo\n</span></span><span class=\"line\"><span class=\"cl\">      bar\n</span></span><span class=\"line\"><span class=\"cl\">    <span class=\"o\">}</span>\n</span></span><span class=\"line\"><span class=\"cl\">    INTERSECT <span class=\"o\">{</span>\n</span></span><span class=\"line\"><span class=\"cl\">      hello\n</span></span><span class=\"line\"><span class=\"cl\">      world\n</span></span><span class=\"line\"><span class=\"cl\">    <span class=\"o\">}</span>\n</span></span><span class=\"line\"><span class=\"cl\">  <span class=\"o\">}</span>\n</span></span><span class=\"line\"><span class=\"cl\">  UNION <span class=\"o\">{</span>\n</span></span><span class=\"line\"><span class=\"cl\">    NUMERIC <span class=\"o\">{</span>100.000000 &lt;<span class=\"o\">=</span> x &lt;<span class=\"o\">=</span> 200.000000<span class=\"o\">}</span>\n</span></span><span class=\"line\"><span class=\"cl\">    NUMERIC <span class=\"o\">{</span>500.000000 &lt;<span class=\"o\">=</span> x &lt;<span class=\"o\">=</span> inf<span class=\"o\">}</span>\n</span></span><span class=\"line\"><span class=\"cl\">  <span class=\"o\">}</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">}</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.create\"><code>FT.CREATE</code></a> | <a href=\"../ft.search\"><code>FT.SEARCH</code></a> | <a href=\"../ft.config-set\"><code>FT.CONFIG SET</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.explain/\" class=\"_attribution-link\">https://redis.io/commands/ft.explain/</a>\n  </p>\n</div>\n","ft.info/index":"<h1 class=\"command-name\">FT.INFO</h1>\n<pre>FT.INFO</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.INFO index\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Return information and statistics on the index</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>index</code></summary> <p>is full-text index name. You must first create the index using <a href=\"../ft.create\"><code>FT.CREATE</code></a>.</p> </details> <h2 id=\"return\">Return</h2> <p>FT.INFO returns an array reply with pairs of keys and values.</p> <p>Returned values include:</p> <ul> <li>\n<code>index_definition</code>: reflection of <a href=\"../ft.create\"><code>FT.CREATE</code></a> command parameters.</li> <li>\n<code>fields</code>: index schema - field names, types, and attributes.</li> <li>Number of documents.</li> <li>Number of distinct terms.</li> <li>Average bytes per record.</li> <li>Size and capacity of the index buffers.</li> <li>Indexing state and percentage as well as failures: <ul> <li>\n<code>indexing</code>: whether of not the index is being scanned in the background.</li> <li>\n<code>percent_indexed</code>: progress of background indexing (1 if complete).</li> <li>\n<code>hash_indexing_failures</code>: number of failures due to operations not compatible with index schema.</li> </ul> </li> </ul> <p>Optional statistics include:</p> <ul> <li>\n<code>garbage collector</code> for all options other than NOGC.</li> <li>\n<code>cursors</code> if a cursor exists for the index.</li> <li>\n<code>stopword lists</code> if a custom stopword list is used.</li> </ul> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Return statistics about an index</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.INFO idx\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> index_name\n</span></span><span class=\"line\"><span class=\"cl\"> 2<span class=\"o\">)</span> wikipedia\n</span></span><span class=\"line\"><span class=\"cl\"> 3<span class=\"o\">)</span> index_options\n</span></span><span class=\"line\"><span class=\"cl\"> 4<span class=\"o\">)</span> <span class=\"o\">(</span>empty array<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">    11<span class=\"o\">)</span> score_field\n</span></span><span class=\"line\"><span class=\"cl\">    12<span class=\"o\">)</span> __score\n</span></span><span class=\"line\"><span class=\"cl\">    13<span class=\"o\">)</span> payload_field\n</span></span><span class=\"line\"><span class=\"cl\">    14<span class=\"o\">)</span> __payload\n</span></span><span class=\"line\"><span class=\"cl\"> 7<span class=\"o\">)</span> fields\n</span></span><span class=\"line\"><span class=\"cl\"> 8<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> title\n</span></span><span class=\"line\"><span class=\"cl\">       2<span class=\"o\">)</span> <span class=\"nb\">type</span>\n</span></span><span class=\"line\"><span class=\"cl\">       3<span class=\"o\">)</span> TEXT\n</span></span><span class=\"line\"><span class=\"cl\">       4<span class=\"o\">)</span> WEIGHT\n</span></span><span class=\"line\"><span class=\"cl\">       5<span class=\"o\">)</span> <span class=\"s2\">\"1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">       6<span class=\"o\">)</span> SORTABLE\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> 1<span class=\"o\">)</span> body\n</span></span><span class=\"line\"><span class=\"cl\">       2<span class=\"o\">)</span> <span class=\"nb\">type</span>\n</span></span><span class=\"line\"><span class=\"cl\">       3<span class=\"o\">)</span> TEXT\n</span></span><span class=\"line\"><span class=\"cl\">       4<span class=\"o\">)</span> WEIGHT\n</span></span><span class=\"line\"><span class=\"cl\">       5<span class=\"o\">)</span> <span class=\"s2\">\"1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    3<span class=\"o\">)</span> 1<span class=\"o\">)</span> id\n</span></span><span class=\"line\"><span class=\"cl\">       2<span class=\"o\">)</span> <span class=\"nb\">type</span>\n</span></span><span class=\"line\"><span class=\"cl\">       3<span class=\"o\">)</span> NUMERIC\n</span></span><span class=\"line\"><span class=\"cl\">    4<span class=\"o\">)</span> 1<span class=\"o\">)</span> subject location\n</span></span><span class=\"line\"><span class=\"cl\">       2<span class=\"o\">)</span> <span class=\"nb\">type</span>\n</span></span><span class=\"line\"><span class=\"cl\">       3<span class=\"o\">)</span> GEO\n</span></span><span class=\"line\"><span class=\"cl\"> 9<span class=\"o\">)</span> num_docs\n</span></span><span class=\"line\"><span class=\"cl\">10<span class=\"o\">)</span> <span class=\"s2\">\"0\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">11<span class=\"o\">)</span> max_doc_id\n</span></span><span class=\"line\"><span class=\"cl\">12<span class=\"o\">)</span> <span class=\"s2\">\"345678\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">13<span class=\"o\">)</span> num_terms\n</span></span><span class=\"line\"><span class=\"cl\">14<span class=\"o\">)</span> <span class=\"s2\">\"691356\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">15<span class=\"o\">)</span> num_records\n</span></span><span class=\"line\"><span class=\"cl\">16<span class=\"o\">)</span> <span class=\"s2\">\"0\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">17<span class=\"o\">)</span> inverted_sz_mb\n</span></span><span class=\"line\"><span class=\"cl\">18<span class=\"o\">)</span> <span class=\"s2\">\"0\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">19<span class=\"o\">)</span> vector_index_sz_mb\n</span></span><span class=\"line\"><span class=\"cl\">20<span class=\"o\">)</span> <span class=\"s2\">\"0\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">21<span class=\"o\">)</span> total_inverted_index_blocks\n</span></span><span class=\"line\"><span class=\"cl\">22<span class=\"o\">)</span> <span class=\"s2\">\"933290\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">23<span class=\"o\">)</span> offset_vectors_sz_mb\n</span></span><span class=\"line\"><span class=\"cl\">24<span class=\"o\">)</span> <span class=\"s2\">\"0.65932846069335938\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">25<span class=\"o\">)</span> doc_table_size_mb\n</span></span><span class=\"line\"><span class=\"cl\">26<span class=\"o\">)</span> <span class=\"s2\">\"29.893482208251953\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">27<span class=\"o\">)</span> sortable_values_size_mb\n</span></span><span class=\"line\"><span class=\"cl\">28<span class=\"o\">)</span> <span class=\"s2\">\"11.432285308837891\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">29<span class=\"o\">)</span> key_table_size_mb\n</span></span><span class=\"line\"><span class=\"cl\">30<span class=\"o\">)</span> <span class=\"s2\">\"1.239776611328125e-05\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">31<span class=\"o\">)</span> records_per_doc_avg\n</span></span><span class=\"line\"><span class=\"cl\">32<span class=\"o\">)</span> <span class=\"s2\">\"-nan\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">33<span class=\"o\">)</span> bytes_per_record_avg\n</span></span><span class=\"line\"><span class=\"cl\">34<span class=\"o\">)</span> <span class=\"s2\">\"-nan\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">35<span class=\"o\">)</span> offsets_per_term_avg\n</span></span><span class=\"line\"><span class=\"cl\">36<span class=\"o\">)</span> <span class=\"s2\">\"inf\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">37<span class=\"o\">)</span> offset_bits_per_record_avg\n</span></span><span class=\"line\"><span class=\"cl\">38<span class=\"o\">)</span> <span class=\"s2\">\"8\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">39<span class=\"o\">)</span> hash_indexing_failures\n</span></span><span class=\"line\"><span class=\"cl\">40<span class=\"o\">)</span> <span class=\"s2\">\"0\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">41<span class=\"o\">)</span> indexing\n</span></span><span class=\"line\"><span class=\"cl\">42<span class=\"o\">)</span> <span class=\"s2\">\"0\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">43<span class=\"o\">)</span> percent_indexed\n</span></span><span class=\"line\"><span class=\"cl\">44<span class=\"o\">)</span> <span class=\"s2\">\"1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">45<span class=\"o\">)</span> number_of_uses\n</span></span><span class=\"line\"><span class=\"cl\">46<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">47<span class=\"o\">)</span> gc_stats\n</span></span><span class=\"line\"><span class=\"cl\">48<span class=\"o\">)</span>  1<span class=\"o\">)</span> bytes_collected\n</span></span><span class=\"line\"><span class=\"cl\">     2<span class=\"o\">)</span> <span class=\"s2\">\"4148136\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">     3<span class=\"o\">)</span> total_ms_run\n</span></span><span class=\"line\"><span class=\"cl\">     4<span class=\"o\">)</span> <span class=\"s2\">\"14796\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">     5<span class=\"o\">)</span> total_cycles\n</span></span><span class=\"line\"><span class=\"cl\">     6<span class=\"o\">)</span> <span class=\"s2\">\"1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">     7<span class=\"o\">)</span> average_cycle_time_ms\n</span></span><span class=\"line\"><span class=\"cl\">     8<span class=\"o\">)</span> <span class=\"s2\">\"14796\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">     9<span class=\"o\">)</span> last_run_time_ms\n</span></span><span class=\"line\"><span class=\"cl\">    10<span class=\"o\">)</span> <span class=\"s2\">\"14796\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    11<span class=\"o\">)</span> gc_numeric_trees_missed\n</span></span><span class=\"line\"><span class=\"cl\">    12<span class=\"o\">)</span> <span class=\"s2\">\"0\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    13<span class=\"o\">)</span> gc_blocks_denied\n</span></span><span class=\"line\"><span class=\"cl\">    14<span class=\"o\">)</span> <span class=\"s2\">\"0\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">49<span class=\"o\">)</span> cursor_stats\n</span></span><span class=\"line\"><span class=\"cl\">50<span class=\"o\">)</span> 1<span class=\"o\">)</span> global_idle\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\">    3<span class=\"o\">)</span> global_total\n</span></span><span class=\"line\"><span class=\"cl\">    4<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\">    5<span class=\"o\">)</span> index_capacity\n</span></span><span class=\"line\"><span class=\"cl\">    6<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">128</span>\n</span></span><span class=\"line\"><span class=\"cl\">    7<span class=\"o\">)</span> index_total\n</span></span><span class=\"line\"><span class=\"cl\">    8<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\">51<span class=\"o\">)</span> stopwords_list\n</span></span><span class=\"line\"><span class=\"cl\">52<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"tlv\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"s2\">\"summer\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    3<span class=\"o\">)</span> <span class=\"s2\">\"2020\"</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.create\"><code>FT.CREATE</code></a> | <a href=\"../ft.search\"><code>FT.SEARCH</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.info/\" class=\"_attribution-link\">https://redis.io/commands/ft.info/</a>\n  </p>\n</div>\n","ft.sugadd/index":"<h1 class=\"command-name\">FT.SUGADD</h1>\n<pre>FT.SUGADD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.SUGADD key string score \n  [INCR] \n  [PAYLOAD payload]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Add a suggestion string to an auto-complete suggestion dictionary</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>key</code></summary> <p>is suggestion dictionary key.</p> </details> <details open> <summary><code>string</code></summary> <p>is suggestion string to index.</p> </details> <details open> <summary><code>score</code></summary> <p>is floating point number of the suggestion string's weight.</p> </details> <p>The auto-complete suggestion dictionary is disconnected from the index definitions and leaves creating and updating suggestions dictionaries to the user.</p> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open> <summary><code>INCR</code></summary> <p>increments the existing entry of the suggestion by the given score, instead of replacing the score. This is useful for updating the dictionary based on user queries in real time.</p> </details> <details open> <summary><code>PAYLOAD {payload}</code></summary> <p>saves an extra payload with the suggestion, that can be fetched by adding the <code>WITHPAYLOADS</code> argument to <a href=\"../ft.sugget\"><code>FT.SUGGET</code></a>.</p> </details> <h2 id=\"return\">Return</h2> <p>FT.SUGADD returns an integer reply, which is the current size of the suggestion dictionary.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Add a suggestion string to an auto-complete suggestion dictionary</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SUGADD sug <span class=\"s2\">\"hello world\"</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.sugget\"><code>FT.SUGGET</code></a> | <a href=\"../ft.sugdel\"><code>FT.SUGDEL</code></a> | <a href=\"../ft.suglen\"><code>FT.SUGLEN</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></p> <h2>History</h2> <ul> <li>Starting with Redis version 2.0.0: Deprecated <code>PAYLOAD</code> argument</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.sugadd/\" class=\"_attribution-link\">https://redis.io/commands/ft.sugadd/</a>\n  </p>\n</div>\n","ft.aliasdel/index":"<h1 class=\"command-name\">FT.ALIASDEL</h1>\n<pre>FT.ALIASDEL</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.ALIASDEL alias\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Remove an alias from an index</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>alias</code></summary> <p>is index alias to be removed.</p> </details> <h2 id=\"return\">Return</h2> <p>FT.ALIASDEL returns a simple string reply <code>OK</code> if executed correctly, or an error reply otherwise.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Remove an alias from an index</b></summary> <p>Remove an alias from an index.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.ALIASDEL <span class=\"nb\">alias</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.aliasadd\"><code>FT.ALIASADD</code></a> | <a href=\"../ft.aliasupdate\"><code>FT.ALIASUPDATE</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.aliasdel/\" class=\"_attribution-link\">https://redis.io/commands/ft.aliasdel/</a>\n  </p>\n</div>\n","ft.dropindex/index":"<h1 class=\"command-name\">FT.DROPINDEX</h1>\n<pre>FT.DROPINDEX</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.DROPINDEX index \n  [DD]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 2.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) or O(N) if documents are deleted, where N is the number of keys in the keyspace</dd> </dl> <p>Delete an index</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>index</code></summary> <p>is full-text index name. You must first create the index using <a href=\"../ft.create\"><code>FT.CREATE</code></a>.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open> <summary><code>DD</code></summary> <p>drop operation that, if set, deletes the actual document hashes.</p> <p>By default, FT.DROPINDEX does not delete the documents associated with the index. Adding the <code>DD</code> option deletes the documents as well. If an index creation is still running (<a href=\"../ft.create\"><code>FT.CREATE</code></a> is running asynchronously), only the document hashes that have already been indexed are deleted. The document hashes left to be indexed remain in the database. To check the completion of the indexing, use <a href=\"../ft.info\"><code>FT.INFO</code></a>.</p> </details> <h2 id=\"return\">Return</h2> <p>FT.DROPINDEX returns a simple string reply <code>OK</code> if executed correctly, or an error reply otherwise.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Delete an index</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.DROPINDEX idx DD\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.create\"><code>FT.CREATE</code></a> | <a href=\"../ft.info\"><code>FT.INFO</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.dropindex/\" class=\"_attribution-link\">https://redis.io/commands/ft.dropindex/</a>\n  </p>\n</div>\n","flushdb/index":"<h1 class=\"command-name\">FLUSHDB</h1>\n<pre>FLUSHDB</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FLUSHDB [ASYNC | SYNC]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of keys in the selected database</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Delete all the keys of the currently selected DB. This command never fails.</p> <p>By default, <code>FLUSHDB</code> will synchronously flush all keys from the database. Starting with Redis 6.2, setting the <strong>lazyfree-lazy-user-flush</strong> configuration directive to \"yes\" changes the default flush mode to asynchronous.</p> <p>It is possible to use one of the following modifiers to dictate the flushing mode explicitly:</p> <ul> <li>\n<code>ASYNC</code>: flushes the database asynchronously</li> <li>\n<code>SYNC</code>: flushes the database synchronously</li> </ul> <p>Note: an asynchronous <code>FLUSHDB</code> command only deletes keys that were present at the time the command was invoked. Keys created during an asynchronous flush will be unaffected.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a></p> <h2 id=\"behavior-change-history\">Behavior change history</h2> <ul> <li>\n<code>&gt;= 6.2.0</code>: Default flush behavior now configurable by the <strong>lazyfree-lazy-user-flush</strong> configuration directive.</li> </ul> <h2>History</h2> <ul> <li>Starting with Redis version 4.0.0: Added the <code>ASYNC</code> flushing mode modifier.</li> <li>Starting with Redis version 6.2.0: Added the <code>SYNC</code> flushing mode modifier.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/flushdb/\" class=\"_attribution-link\">https://redis.io/commands/flushdb/</a>\n  </p>\n</div>\n","ft.profile/index":"<h1 class=\"command-name\">FT.PROFILE</h1>\n<pre>FT.PROFILE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.PROFILE index SEARCH | AGGREGATE [LIMITED] QUERY query\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 2.2.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N)</dd> </dl> <p>Apply <a href=\"../ft.search\"><code>FT.SEARCH</code></a> or <a href=\"../ft.aggregate\"><code>FT.AGGREGATE</code></a> command to collect performance details</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>index</code></summary> <p>is index name, created using <a href=\"../ft.create\"><code>FT.CREATE</code></a>.</p> </details> <details open> <summary><code>SEARCH | AGGREGATE</code></summary> <p>is difference between <a href=\"../ft.search\"><code>FT.SEARCH</code></a> and <a href=\"../ft.aggregate\"><code>FT.AGGREGATE</code></a>.</p> </details> <details open> <summary><code>LIMITED</code></summary> <p>removes details of <code>reader</code> iterator.</p> </details> <details open> <summary><code>QUERY {query}</code></summary> <p>is query string, sent to <a href=\"../ft.search\"><code>FT.SEARCH</code></a>.</p> </details> <p><note><b>Note:</b> To reduce the size of the output, use <code>NOCONTENT</code> or <code>LIMIT 0 0</code> to reduce the reply results or <code>LIMITED</code> to not reply with details of <code>reader iterators</code> inside built-in unions such as <code>fuzzy</code> or <code>prefix</code>.</note></p> <h2 id=\"return\">Return</h2> <p><code>FT.PROFILE</code> returns an array reply, with the first array reply identical to the reply of <a href=\"../ft.search\"><code>FT.SEARCH</code></a> and <a href=\"../ft.aggregate\"><code>FT.AGGREGATE</code></a> and a second array reply with information of time in milliseconds (ms) used to create the query and time and count of calls of iterators and result-processors.</p> <p>Return value has an array with two elements:</p> <ul> <li>Results - The normal reply from RediSearch, similar to a cursor.</li> <li>Profile - The details in the profile are: <ul> <li>Total profile time - The total runtime of the query, in ms.</li> <li>Parsing time - Parsing time of the query and parameters into an execution plan, in ms.</li> <li>Pipeline creation time - Creation time of execution plan including iterators, result processors, and reducers creation, in ms.</li> <li>Iterators profile - Index iterators information including their type, term, count, and time data. Inverted-index iterators have in addition the number of elements they contain. Hybrid vector iterators returning the top results from the vector index in batches, include the number of batches.</li> <li>Result processors profile - Result processors chain with type, count, and time data.</li> </ul> </li> </ul> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Collect performance information about an index</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.PROFILE idx SEARCH QUERY <span class=\"s2\">\"hello world\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"s2\">\"doc1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"t\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> <span class=\"s2\">\"hello world\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> Total profile <span class=\"nb\">time</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> <span class=\"s2\">\"0.47199999999999998\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> Parsing <span class=\"nb\">time</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> <span class=\"s2\">\"0.218\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> Pipeline creation <span class=\"nb\">time</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> <span class=\"s2\">\"0.032000000000000001\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   4<span class=\"o\">)</span> 1<span class=\"o\">)</span> Iterators profile\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> Type\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> INTERSECT\n</span></span><span class=\"line\"><span class=\"cl\">         3<span class=\"o\">)</span> Time\n</span></span><span class=\"line\"><span class=\"cl\">         4<span class=\"o\">)</span> <span class=\"s2\">\"0.025000000000000001\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         5<span class=\"o\">)</span> Counter\n</span></span><span class=\"line\"><span class=\"cl\">         6<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">         7<span class=\"o\">)</span> Child iterators\n</span></span><span class=\"line\"><span class=\"cl\">         8<span class=\"o\">)</span>  1<span class=\"o\">)</span> Type\n</span></span><span class=\"line\"><span class=\"cl\">             2<span class=\"o\">)</span> TEXT\n</span></span><span class=\"line\"><span class=\"cl\">             3<span class=\"o\">)</span> Term\n</span></span><span class=\"line\"><span class=\"cl\">             4<span class=\"o\">)</span> hello\n</span></span><span class=\"line\"><span class=\"cl\">             5<span class=\"o\">)</span> Time\n</span></span><span class=\"line\"><span class=\"cl\">             6<span class=\"o\">)</span> <span class=\"s2\">\"0.0070000000000000001\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">             7<span class=\"o\">)</span> Counter\n</span></span><span class=\"line\"><span class=\"cl\">             8<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">             9<span class=\"o\">)</span> Size\n</span></span><span class=\"line\"><span class=\"cl\">            10<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">         9<span class=\"o\">)</span>  1<span class=\"o\">)</span> Type\n</span></span><span class=\"line\"><span class=\"cl\">             2<span class=\"o\">)</span> TEXT\n</span></span><span class=\"line\"><span class=\"cl\">             3<span class=\"o\">)</span> Term\n</span></span><span class=\"line\"><span class=\"cl\">             4<span class=\"o\">)</span> world\n</span></span><span class=\"line\"><span class=\"cl\">             5<span class=\"o\">)</span> Time\n</span></span><span class=\"line\"><span class=\"cl\">             6<span class=\"o\">)</span> <span class=\"s2\">\"0.0030000000000000001\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">             7<span class=\"o\">)</span> Counter\n</span></span><span class=\"line\"><span class=\"cl\">             8<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">             9<span class=\"o\">)</span> Size\n</span></span><span class=\"line\"><span class=\"cl\">            10<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">   5<span class=\"o\">)</span> 1<span class=\"o\">)</span> Result processors profile\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> Type\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> Index\n</span></span><span class=\"line\"><span class=\"cl\">         3<span class=\"o\">)</span> Time\n</span></span><span class=\"line\"><span class=\"cl\">         4<span class=\"o\">)</span> <span class=\"s2\">\"0.036999999999999998\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         5<span class=\"o\">)</span> Counter\n</span></span><span class=\"line\"><span class=\"cl\">         6<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">      3<span class=\"o\">)</span> 1<span class=\"o\">)</span> Type\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> Scorer\n</span></span><span class=\"line\"><span class=\"cl\">         3<span class=\"o\">)</span> Time\n</span></span><span class=\"line\"><span class=\"cl\">         4<span class=\"o\">)</span> <span class=\"s2\">\"0.025000000000000001\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         5<span class=\"o\">)</span> Counter\n</span></span><span class=\"line\"><span class=\"cl\">         6<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">      4<span class=\"o\">)</span> 1<span class=\"o\">)</span> Type\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> Sorter\n</span></span><span class=\"line\"><span class=\"cl\">         3<span class=\"o\">)</span> Time\n</span></span><span class=\"line\"><span class=\"cl\">         4<span class=\"o\">)</span> <span class=\"s2\">\"0.013999999999999999\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         5<span class=\"o\">)</span> Counter\n</span></span><span class=\"line\"><span class=\"cl\">         6<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">      5<span class=\"o\">)</span> 1<span class=\"o\">)</span> Type\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> Loader\n</span></span><span class=\"line\"><span class=\"cl\">         3<span class=\"o\">)</span> Time\n</span></span><span class=\"line\"><span class=\"cl\">         4<span class=\"o\">)</span> <span class=\"s2\">\"0.10299999999999999\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         5<span class=\"o\">)</span> Counter\n</span></span><span class=\"line\"><span class=\"cl\">         6<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.search\"><code>FT.SEARCH</code></a> | <a href=\"../ft.aggregate\"><code>FT.AGGREGATE</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.profile/\" class=\"_attribution-link\">https://redis.io/commands/ft.profile/</a>\n  </p>\n</div>\n","function-delete/index":"<h1 class=\"command-name\">FUNCTION</h1>\n<pre>FUNCTION DELETE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FUNCTION DELETE library-name</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@scripting</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Delete a library and all its functions.</p> <p>This command deletes the library called <em>library-name</em> and all functions in it. If the library doesn't exist, the server returns an error.</p> <p>For more information please refer to <a href=\"https://redis.io/topics/functions-intro\">Introduction to Redis Functions</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a></p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; FUNCTION LOAD Lua mylib \"redis.register_function('myfunc', function(keys, args) return 'hello' end)\"\nOK\nredis&gt; FCALL myfunc 0\n\"hello\"\nredis&gt; FUNCTION DELETE mylib\nOK\nredis&gt; FCALL myfunc 0\n(error) ERR Function not found\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/function-delete/\" class=\"_attribution-link\">https://redis.io/commands/function-delete/</a>\n  </p>\n</div>\n","ft.explaincli/index":"<h1 class=\"command-name\">FT.EXPLAINCLI</h1>\n<pre>FT.EXPLAINCLI</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.EXPLAINCLI index query \n  [DIALECT dialect]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Return the execution plan for a complex query but formatted for easier reading without using <code>redis-cli --raw</code></p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>index</code></summary> <p>is index name. You must first create the index using <a href=\"../ft.create\"><code>FT.CREATE</code></a>.</p> </details> <details open> <summary><code>query</code></summary> <p>is query string, as if sent to FT.SEARCH`.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open> <summary><code>DIALECT {dialect_version}</code></summary> <p>is dialect version under which to execute the query. If not specified, the query executes under the default dialect version set during module initial loading or via <a href=\"../ft.config-set\"><code>FT.CONFIG SET</code></a> command.</p> <div class=\"pl-4 border-l-8\"> <div class=\"font-semibold text-slate-900\">Note</div> <p>In the returned response, a <code>+</code> on a term is an indication of stemming.</p> </div> </details> <h2 id=\"return\">Return</h2> <p>FT.EXPLAINCLI returns an array reply with a string representing the execution plan.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Return the execution plan for a complex query</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">$ redis-cli\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.EXPLAINCLI rd <span class=\"s2\">\"(foo bar)|(hello world) @date:[100 200]|@date:[500 +inf]\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 1<span class=\"o\">)</span> INTERSECT <span class=\"o\">{</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 2<span class=\"o\">)</span>   UNION <span class=\"o\">{</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 3<span class=\"o\">)</span>     INTERSECT <span class=\"o\">{</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 4<span class=\"o\">)</span>       UNION <span class=\"o\">{</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 5<span class=\"o\">)</span>         foo\n</span></span><span class=\"line\"><span class=\"cl\"> 6<span class=\"o\">)</span>         +foo<span class=\"o\">(</span>expanded<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 7<span class=\"o\">)</span>       <span class=\"o\">}</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 8<span class=\"o\">)</span>       UNION <span class=\"o\">{</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 9<span class=\"o\">)</span>         bar\n</span></span><span class=\"line\"><span class=\"cl\">10<span class=\"o\">)</span>         +bar<span class=\"o\">(</span>expanded<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">11<span class=\"o\">)</span>       <span class=\"o\">}</span>\n</span></span><span class=\"line\"><span class=\"cl\">12<span class=\"o\">)</span>     <span class=\"o\">}</span>\n</span></span><span class=\"line\"><span class=\"cl\">13<span class=\"o\">)</span>     INTERSECT <span class=\"o\">{</span>\n</span></span><span class=\"line\"><span class=\"cl\">14<span class=\"o\">)</span>       UNION <span class=\"o\">{</span>\n</span></span><span class=\"line\"><span class=\"cl\">15<span class=\"o\">)</span>         hello\n</span></span><span class=\"line\"><span class=\"cl\">16<span class=\"o\">)</span>         +hello<span class=\"o\">(</span>expanded<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">17<span class=\"o\">)</span>       <span class=\"o\">}</span>\n</span></span><span class=\"line\"><span class=\"cl\">18<span class=\"o\">)</span>       UNION <span class=\"o\">{</span>\n</span></span><span class=\"line\"><span class=\"cl\">19<span class=\"o\">)</span>         world\n</span></span><span class=\"line\"><span class=\"cl\">20<span class=\"o\">)</span>         +world<span class=\"o\">(</span>expanded<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">21<span class=\"o\">)</span>       <span class=\"o\">}</span>\n</span></span><span class=\"line\"><span class=\"cl\">22<span class=\"o\">)</span>     <span class=\"o\">}</span>\n</span></span><span class=\"line\"><span class=\"cl\">23<span class=\"o\">)</span>   <span class=\"o\">}</span>\n</span></span><span class=\"line\"><span class=\"cl\">24<span class=\"o\">)</span>   UNION <span class=\"o\">{</span>\n</span></span><span class=\"line\"><span class=\"cl\">25<span class=\"o\">)</span>     NUMERIC <span class=\"o\">{</span>100.000000 &lt;<span class=\"o\">=</span> @date &lt;<span class=\"o\">=</span> 200.000000<span class=\"o\">}</span>\n</span></span><span class=\"line\"><span class=\"cl\">26<span class=\"o\">)</span>     NUMERIC <span class=\"o\">{</span>500.000000 &lt;<span class=\"o\">=</span> @date &lt;<span class=\"o\">=</span> inf<span class=\"o\">}</span>\n</span></span><span class=\"line\"><span class=\"cl\">27<span class=\"o\">)</span>   <span class=\"o\">}</span>\n</span></span><span class=\"line\"><span class=\"cl\">28<span class=\"o\">)</span> <span class=\"o\">}</span>\n</span></span><span class=\"line\"><span class=\"cl\">29<span class=\"o\">)</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.create\"><code>FT.CREATE</code></a> | <a href=\"../ft.search\"><code>FT.SEARCH</code></a> | <a href=\"../ft.config-set\"><code>FT.CONFIG SET</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.explaincli/\" class=\"_attribution-link\">https://redis.io/commands/ft.explaincli/</a>\n  </p>\n</div>\n","ft.spellcheck/index":"<h1 class=\"command-name\">FT.SPELLCHECK</h1>\n<pre>FT.SPELLCHECK</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.SPELLCHECK index query \n  [DISTANCE distance] \n  [TERMS INCLUDE | EXCLUDE dictionary [terms [terms ...]]] \n  [DIALECT dialect]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.4.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Perform spelling correction on a query, returning suggestions for misspelled terms</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>index</code></summary> <p>is index with the indexed terms.</p> </details> <details open> <summary><code>query</code></summary> <p>is search query.</p> </details> <p>See <a href=\"https://redis.io/docs/stack/search/reference/spellcheck\">Spellchecking</a> for more details.</p> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open> <summary><code>TERMS</code></summary> <p>specifies an inclusion (<code>INCLUDE</code>) or exclusion (<code>EXCLUDE</code>) of a custom dictionary named <code>{dict}</code>. Refer to <a href=\"../ft.dictadd\"><code>FT.DICTADD</code></a>, <a href=\"../ft.dictdel\"><code>FT.DICTDEL</code></a> and <a href=\"../ft.dictdump\"><code>FT.DICTDUMP</code></a> about managing custom dictionaries.</p> </details> <details open> <summary><code>DISTANCE</code></summary> <p>is maximum Levenshtein distance for spelling suggestions (default: 1, max: 4).</p> </details> <details open> <summary><code>DIALECT {dialect_version}</code></summary> <p>selects the dialect version under which to execute the query. If not specified, the query will execute under the default dialect version set during module initial loading or via <a href=\"../ft.config-set\"><code>FT.CONFIG SET</code></a> command.</p> </details> <h2 id=\"return\">Return</h2> <p>FT.SPELLCHECK returns an array reply, in which each element represents a misspelled term from the query. The misspelled terms are ordered by their order of appearance in the query. Each misspelled term, in turn, is a 3-element array consisting of the constant string <code>TERM</code>, the term itself and an array of suggestions for spelling corrections. Each element in the spelling corrections array consists of the score of the suggestion and the suggestion itself. The suggestions array, per misspelled term, is ordered in descending order by score. The score is calculated by dividing the number of documents in which the suggested term exists by the total number of documents in the index. Results can be normalized by dividing scores by the highest score.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Perform spelling correction on a query</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SPELLCHECK idx held DISTANCE <span class=\"m\">2</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"TERM\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"s2\">\"held\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"0.66666666666666663\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"hello\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"0.33333333333333331\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"help\"</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.config-set\"><code>FT.CONFIG SET</code></a> | <a href=\"../ft.dictadd\"><code>FT.DICTADD</code></a> | <a href=\"../ft.dictdel\"><code>FT.DICTDEL</code></a> | <a href=\"../ft.dictdump\"><code>FT.DICTDUMP</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/search/reference/spellcheck\">Spellchecking</a></li> <li><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.spellcheck/\" class=\"_attribution-link\">https://redis.io/commands/ft.spellcheck/</a>\n  </p>\n</div>\n","ft.sugget/index":"<h1 class=\"command-name\">FT.SUGGET</h1>\n<pre>FT.SUGGET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.SUGGET key prefix \n  [FUZZY] \n  [WITHSCORES] \n  [WITHPAYLOADS] \n  [MAX max]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Get completion suggestions for a prefix</p> <h2 id=\"syntax\">Syntax</h2>  <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>key</code></summary> <p>is suggestion dictionary key.</p> </details> <details open> <summary><code>prefix</code></summary> <p>is prefix to complete on.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open> <summary><code>FUZZY</code></summary> <p>performs a fuzzy prefix search, including prefixes at Levenshtein distance of 1 from the prefix sent.</p> </details> <details open> <summary><code>MAX num</code></summary> <p>limits the results to a maximum of <code>num</code> (default: 5).</p> </details> <details open> <summary><code>WITHSCORES</code></summary> <p>also returns the score of each suggestion. This can be used to merge results from multiple instances.</p> </details> <details open> <summary><code>WITHPAYLOADS</code></summary> <p>returns optional payloads saved along with the suggestions. If no payload is present for an entry, it returns a null reply.</p> </details> <h2 id=\"return\">Return</h2> <p>FT.SUGGET returns an array reply, which is a list of the top suggestions matching the prefix, optionally with score after each entry.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Get completion suggestions for a prefix</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SUGGET sug hell FUZZY MAX <span class=\"m\">3</span> WITHSCORES\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"s2\">\"hell\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"s2\">\"2147483648\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"s2\">\"hello\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> <span class=\"s2\">\"0.70710676908493042\"</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.sugadd\"><code>FT.SUGADD</code></a> | <a href=\"../ft.sugdel\"><code>FT.SUGDEL</code></a> | <a href=\"../ft.suglen\"><code>FT.SUGLEN</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></p> <h2>History</h2> <ul> <li>Starting with Redis version 2.0.0: Deprecated <code>WITHPAYLOADS</code> argument</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.sugget/\" class=\"_attribution-link\">https://redis.io/commands/ft.sugget/</a>\n  </p>\n</div>\n","ft.syndump/index":"<h1 class=\"command-name\">FT.SYNDUMP</h1>\n<pre>FT.SYNDUMP</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.SYNDUMP index\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.2.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Dump the contents of a synonym group</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>index</code></summary> <p>is index name.</p> </details> <p>Use FT.SYNDUMP to dump the synonyms data structure. This command returns a list of synonym terms and their synonym group ids.</p> <h2 id=\"return\">Return</h2> <p>FT.SYNDUMP returns an array reply, with a pair of <code>term</code> and an array of synonym groups.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Return the contents of a synonym group</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SYNDUMP idx\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"s2\">\"shalom\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"synonym1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"s2\">\"synonym2\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"s2\">\"hi\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"synonym1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">5<span class=\"o\">)</span> <span class=\"s2\">\"hello\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">6<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"synonym1\"</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.synupdate\"><code>FT.SYNUPDATE</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.syndump/\" class=\"_attribution-link\">https://redis.io/commands/ft.syndump/</a>\n  </p>\n</div>\n","ft.synupdate/index":"<h1 class=\"command-name\">FT.SYNUPDATE</h1>\n<pre>FT.SYNUPDATE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.SYNUPDATE index synonym_group_id \n  [SKIPINITIALSCAN] term [term ...]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.2.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Update a synonym group</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>index</code></summary> <p>is index name.</p> </details> <details open> <summary><code>synonym_group_id</code></summary> <p>is synonym group to return.</p> </details> <p>Use FT.SYNUPDATE to create or update a synonym group with additional terms. The command triggers a scan of all documents.</p> <h2 id=\"optional-parameters\">Optional parameters</h2> <details open> <summary><code>SKIPINITIALSCAN</code></summary> <p>does not scan and index, and only documents that are indexed after the update are affected.</p> </details> <h2 id=\"return\">Return</h2> <p>FT.SYNUPDATE returns a simple string reply <code>OK</code> if executed correctly, or an error reply otherwise.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Update a synonym group</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SYNUPDATE idx synonym hello hi shalom\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SYNUPDATE idx synonym SKIPINITIALSCAN hello hi shalom\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.syndump\"><code>FT.SYNDUMP</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.synupdate/\" class=\"_attribution-link\">https://redis.io/commands/ft.synupdate/</a>\n  </p>\n</div>\n","ft.suglen/index":"<h1 class=\"command-name\">FT.SUGLEN</h1>\n<pre>FT.SUGLEN</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.SUGLEN key\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Get the size of an auto-complete suggestion dictionary</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>key</code></summary> <p>is suggestion dictionary key.</p> </details> <h2 id=\"return\">Return</h2> <p>FT.SUGLEN returns an integer reply, which is the current size of the suggestion dictionary.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Get the size of an auto-complete suggestion dictionary</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SUGLEN sug\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.sugadd\"><code>FT.SUGADD</code></a> | <a href=\"../ft.sugdel\"><code>FT.SUGDEL</code></a> | <a href=\"../ft.sugget\"><code>FT.SUGGET</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.suglen/\" class=\"_attribution-link\">https://redis.io/commands/ft.suglen/</a>\n  </p>\n</div>\n","ft.tagvals/index":"<h1 class=\"command-name\">FT.TAGVALS</h1>\n<pre>FT.TAGVALS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.TAGVALS index field_name\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N)</dd> </dl> <p>Return a distinct set of values indexed in a Tag field</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>index</code></summary> <p>is full-text index name. You must first create the index using <a href=\"../ft.create\"><code>FT.CREATE</code></a>.</p> </details> <details open> <summary><code>field_name</code></summary> <p>is name of a Tag file defined in the schema.</p> </details> <p>Use FT.TAGVALS if your tag indexes things like cities, categories, and so on.</p> <h2 id=\"limitations\">Limitations</h2> <p>FT.TAGVALS provides no paging or sorting, and the tags are not alphabetically sorted. FT.TAGVALS only operates on <a href=\"https://redis.io/docs/stack/search/reference/tags\">tag fields</a>. The returned strings are lowercase with whitespaces removed, but otherwise unchanged.</p> <h2 id=\"return\">Return</h2> <p>FT.TAGVALS returns an array reply of all distinct tags in the tag index.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Return a set of values indexed in a Tag field</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.TAGVALS idx myTag\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"s2\">\"Hello\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"s2\">\"World\"</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.create\"><code>FT.CREATE</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/search/reference/tags\">Tag fields</a></li> <li><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.tagvals/\" class=\"_attribution-link\">https://redis.io/commands/ft.tagvals/</a>\n  </p>\n</div>\n","ft.sugdel/index":"<h1 class=\"command-name\">FT.SUGDEL</h1>\n<pre>FT.SUGDEL</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FT.SUGDEL key string\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/search\">Search 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Delete a string from a suggestion index</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>key</code></summary> <p>is suggestion dictionary key.</p> </details> <details open> <summary><code>string</code></summary> <p>is suggestion string to index.</p> </details> <h2 id=\"return\">Return</h2> <p>FT.SUGDEL returns an integer reply, 1 if the string was found and deleted, 0 otherwise.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Delete a string from a suggestion index</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SUGDEL sug <span class=\"s2\">\"hello\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; FT.SUGDEL sug <span class=\"s2\">\"hello\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ft.sugget\"><code>FT.SUGGET</code></a> | <a href=\"../ft.sugadd\"><code>FT.SUGADD</code></a> | <a href=\"../ft.suglen\"><code>FT.SUGLEN</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/search\">RediSearch</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ft.sugdel/\" class=\"_attribution-link\">https://redis.io/commands/ft.sugdel/</a>\n  </p>\n</div>\n","function-dump/index":"<h1 class=\"command-name\">FUNCTION</h1>\n<pre>FUNCTION DUMP</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FUNCTION DUMP</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of functions</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@scripting</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Return the serialized payload of loaded libraries. You can restore the serialized payload later with the <a href=\"../function-restore\"><code>FUNCTION RESTORE</code></a> command.</p> <p>For more information please refer to <a href=\"https://redis.io/topics/functions-intro\">Introduction to Redis Functions</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the serialized payload</p> <h2 id=\"examples\">Examples</h2> <p>The following example shows how to dump loaded libraries using <code>FUNCTION DUMP</code> and then it calls <a href=\"../function-flush\"><code>FUNCTION FLUSH</code></a> deletes all the libraries. Then, it restores the original libraries from the serialized payload with <a href=\"../function-restore\"><code>FUNCTION RESTORE</code></a>.</p> <pre tabindex=\"0\">redis&gt; FUNCTION DUMP\n\"\\xf6\\x05mylib\\x03LUA\\x00\\xc3@D@J\\x1aredis.register_function('my@\\x0b\\x02', @\\x06`\\x12\\x11keys, args) return`\\x0c\\a[1] end)\\n\\x00@\\n)\\x11\\xc8|\\x9b\\xe4\"\nredis&gt; FUNCTION FLUSH\nOK\nredis&gt; FUNCTION RESTORE \"\\xf6\\x05mylib\\x03LUA\\x00\\xc3@D@J\\x1aredis.register_function('my@\\x0b\\x02', @\\x06`\\x12\\x11keys, args) return`\\x0c\\a[1] end)\\n\\x00@\\n)\\x11\\xc8|\\x9b\\xe4\"\nOK\nredis&gt; FUNCTION LIST\n1) 1) \"library_name\"\n   2) \"mylib\"\n   3) \"engine\"\n   4) \"LUA\"\n   5) \"description\"\n   6) (nil)\n   7) \"functions\"\n   8) 1) 1) \"name\"\n         2) \"myfunc\"\n         3) \"description\"\n         4) (nil)\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/function-dump/\" class=\"_attribution-link\">https://redis.io/commands/function-dump/</a>\n  </p>\n</div>\n","function-flush/index":"<h1 class=\"command-name\">FUNCTION</h1>\n<pre>FUNCTION FLUSH</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FUNCTION FLUSH [ASYNC | SYNC]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of functions deleted</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@scripting</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Deletes all the libraries.</p> <p>Unless called with the optional mode argument, the <code>lazyfree-lazy-user-flush</code> configuration directive sets the effective behavior. Valid modes are:</p> <ul> <li>\n<code>ASYNC</code>: Asynchronously flush the libraries.</li> <li>\n<code>SYNC</code>: Synchronously flush the libraries.</li> </ul> <p>For more information please refer to <a href=\"https://redis.io/topics/functions-intro\">Introduction to Redis Functions</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/function-flush/\" class=\"_attribution-link\">https://redis.io/commands/function-flush/</a>\n  </p>\n</div>\n","function-load/index":"<h1 class=\"command-name\">FUNCTION</h1>\n<pre>FUNCTION LOAD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FUNCTION LOAD [REPLACE] function-code</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) (considering compilation time is redundant)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@scripting</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Load a library to Redis.</p> <p>The command's gets a single mandatory parameter which is the source code that implements the library. The library payload must start with Shebang statement that provides a metadata about the library (like the engine to use and the library name). Shebang format: <code>#!&lt;engine name&gt; name=&lt;library name&gt;</code>. Currently engine name must be <code>lua</code>.</p> <p>For the Lua engine, the implementation should declare one or more entry points to the library with the <a href=\"https://redis.io/topics/lua-api#redis.register_function\"><code>redis.register_function()</code> API</a>. Once loaded, you can call the functions in the library with the <a href=\"../fcall\"><code>FCALL</code></a> (or <a href=\"../fcall_ro\"><code>FCALL_RO</code></a> when applicable) command.</p> <p>When attempting to load a library with a name that already exists, the Redis server returns an error. The <code>REPLACE</code> modifier changes this behavior and overwrites the existing library with the new contents.</p> <p>The command will return an error in the following circumstances:</p> <ul> <li>An invalid <em>engine-name</em> was provided.</li> <li>The library's name already exists without the <code>REPLACE</code> modifier.</li> <li>A function in the library is created with a name that already exists in another library (even when <code>REPLACE</code> is specified).</li> <li>The engine failed in creating the library's functions (due to a compilation error, for example).</li> <li>No functions were declared by the library.</li> </ul> <p>For more information please refer to <a href=\"https://redis.io/topics/functions-intro\">Introduction to Redis Functions</a>.</p> <h2 id=\"return\">Return</h2> <p>@string - the library name that was loaded</p> <h2 id=\"examples\">Examples</h2> <p>The following example will create a library named <code>mylib</code> with a single function, <code>myfunc</code>, that returns the first argument it gets.</p> <pre tabindex=\"0\">redis&gt; FUNCTION LOAD \"#!lua name=mylib \\n redis.register_function('myfunc', function(keys, args) return args[1] end)\"\nmylib\nredis&gt; FCALL myfunc 0 hello\n\"hello\"\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/function-load/\" class=\"_attribution-link\">https://redis.io/commands/function-load/</a>\n  </p>\n</div>\n","geohash/index":"<h1 class=\"command-name\">GEOHASH</h1>\n<pre>GEOHASH</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GEOHASH key [member [member ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N)) for each member requested, where N is the number of elements in the sorted set.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@geo</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Return valid <a href=\"https://en.wikipedia.org/wiki/Geohash\">Geohash</a> strings representing the position of one or more elements in a sorted set value representing a geospatial index (where elements were added using <a href=\"../geoadd\"><code>GEOADD</code></a>).</p> <p>Normally Redis represents positions of elements using a variation of the Geohash technique where positions are encoded using 52 bit integers. The encoding is also different compared to the standard because the initial min and max coordinates used during the encoding and decoding process are different. This command however <strong>returns a standard Geohash</strong> in the form of a string as described in the <a href=\"https://en.wikipedia.org/wiki/Geohash\">Wikipedia article</a> and compatible with the <a href=\"http://geohash.org\">geohash.org</a> web site.</p> <h2 id=\"geohash-string-properties\">Geohash string properties</h2> <p>The command returns 11 characters Geohash strings, so no precision is lost compared to the Redis internal 52 bit representation. The returned Geohashes have the following properties:</p> <ol> <li>They can be shortened removing characters from the right. It will lose precision but will still point to the same area.</li> <li>It is possible to use them in <code>geohash.org</code> URLs such as <code>http://geohash.org/&lt;geohash-string&gt;</code>. This is an <a href=\"http://geohash.org/sqdtr74hyu0\">example of such URL</a>.</li> <li>Strings with a similar prefix are nearby, but the contrary is not true, it is possible that strings with different prefixes are nearby too.</li> </ol> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>, specifically:</p> <p>The command returns an array where each element is the Geohash corresponding to each member name passed as argument to the command.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nGEOADD Sicily 13.361389 38.115556 \"Palermo\" 15.087269 37.502669 \"Catania\"\nGEOHASH Sicily Palermo Catania\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/geohash/\" class=\"_attribution-link\">https://redis.io/commands/geohash/</a>\n  </p>\n</div>\n","georadius/index":"<h1 class=\"command-name\">GEORADIUS</h1>\n<pre>GEORADIUS (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 6.2.0, this command is regarded as deprecated.</p> <p>It can be replaced by <a href=\"../geosearch\"><code>GEOSEARCH</code></a> and <a href=\"../geosearchstore\"><code>GEOSEARCHSTORE</code></a> with the <code>BYRADIUS</code> argument when migrating or writing new code.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GEORADIUS key longitude latitude radius &lt;M | KM | FT | MI&gt;\n  [WITHCOORD] [WITHDIST] [WITHHASH] [COUNTcount [ANY]] [ASC | DESC]\n  [STOREkey] [STOREDISTkey]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N+log(M)) where N is the number of elements inside the bounding box of the circular area delimited by center and radius and M is the number of items inside the index.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@geo</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Return the members of a sorted set populated with geospatial information using <a href=\"../geoadd\"><code>GEOADD</code></a>, which are within the borders of the area specified with the center location and the maximum distance from the center (the radius).</p> <p>This manual page also covers the <a href=\"../georadius_ro\"><code>GEORADIUS_RO</code></a> and <a href=\"../georadiusbymember_ro\"><code>GEORADIUSBYMEMBER_RO</code></a> variants (see the section below for more information).</p> <p>The common use case for this command is to retrieve geospatial items near a specified point not farther than a given amount of meters (or other units). This allows, for example, to suggest mobile users of an application nearby places.</p> <p>The radius is specified in one of the following units:</p> <ul> <li>\n<strong>m</strong> for meters.</li> <li>\n<strong>km</strong> for kilometers.</li> <li>\n<strong>mi</strong> for miles.</li> <li>\n<strong>ft</strong> for feet.</li> </ul> <p>The command optionally returns additional information using the following options:</p> <ul> <li>\n<code>WITHDIST</code>: Also return the distance of the returned items from the specified center. The distance is returned in the same unit as the unit specified as the radius argument of the command.</li> <li>\n<code>WITHCOORD</code>: Also return the longitude,latitude coordinates of the matching items.</li> <li>\n<code>WITHHASH</code>: Also return the raw geohash-encoded sorted set score of the item, in the form of a 52 bit unsigned integer. This is only useful for low level hacks or debugging and is otherwise of little interest for the general user.</li> </ul> <p>The command default is to return unsorted items. Two different sorting methods can be invoked using the following two options:</p> <ul> <li>\n<code>ASC</code>: Sort returned items from the nearest to the farthest, relative to the center.</li> <li>\n<code>DESC</code>: Sort returned items from the farthest to the nearest, relative to the center.</li> </ul> <p>By default all the matching items are returned. It is possible to limit the results to the first N matching items by using the <strong>COUNT <code>&lt;count&gt;</code></strong> option. When <code>ANY</code> is provided the command will return as soon as enough matches are found, so the results may not be the ones closest to the specified point, but on the other hand, the effort invested by the server is significantly lower. When <code>ANY</code> is not provided, the command will perform an effort that is proportional to the number of items matching the specified area and sort them, so to query very large areas with a very small <code>COUNT</code> option may be slow even if just a few results are returned.</p> <p>By default the command returns the items to the client. It is possible to store the results with one of these options:</p> <ul> <li>\n<code>STORE</code>: Store the items in a sorted set populated with their geospatial information.</li> <li>\n<code>STOREDIST</code>: Store the items in a sorted set populated with their distance from the center as a floating point number, in the same unit specified in the radius.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>, specifically:</p> <ul> <li>Without any <code>WITH</code> option specified, the command just returns a linear array like [\"New York\",\"Milan\",\"Paris\"].</li> <li>If <code>WITHCOORD</code>, <code>WITHDIST</code> or <code>WITHHASH</code> options are specified, the command returns an array of arrays, where each sub-array represents a single item.</li> </ul> <p>When additional information is returned as an array of arrays for each item, the first item in the sub-array is always the name of the returned item. The other information is returned in the following order as successive elements of the sub-array.</p> <ol> <li>The distance from the center as a floating point number, in the same unit specified in the radius.</li> <li>The geohash integer.</li> <li>The coordinates as a two items x,y array (longitude,latitude).</li> </ol> <p>So for example the command <code>GEORADIUS Sicily 15 37 200 km WITHCOORD WITHDIST</code> will return each item in the following way:</p> <pre>[\"Palermo\",\"190.4424\",[\"13.361389338970184\",\"38.115556395496299\"]]\n</pre> <h2 id=\"read-only-variants\">Read-only variants</h2> <p>Since <code>GEORADIUS</code> and <a href=\"../georadiusbymember\"><code>GEORADIUSBYMEMBER</code></a> have a <code>STORE</code> and <code>STOREDIST</code> option they are technically flagged as writing commands in the Redis command table. For this reason read-only replicas will flag them, and Redis Cluster replicas will redirect them to the master instance even if the connection is in read-only mode (see the <a href=\"../readonly\"><code>READONLY</code></a> command of Redis Cluster).</p> <p>Breaking the compatibility with the past was considered but rejected, at least for Redis 4.0, so instead two read-only variants of the commands were added. They are exactly like the original commands but refuse the <code>STORE</code> and <code>STOREDIST</code> options. The two variants are called <a href=\"../georadius_ro\"><code>GEORADIUS_RO</code></a> and <a href=\"../georadiusbymember_ro\"><code>GEORADIUSBYMEMBER_RO</code></a>, and can safely be used in replicas.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nGEOADD Sicily 13.361389 38.115556 \"Palermo\" 15.087269 37.502669 \"Catania\"\nGEORADIUS Sicily 15 37 200 km WITHDIST\nGEORADIUS Sicily 15 37 200 km WITHCOORD\nGEORADIUS Sicily 15 37 200 km WITHDIST WITHCOORD\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 6.2.0: Added the <code>ANY</code> option for <code>COUNT</code>.</li> <li>Starting with Redis version 7.0.0: Added support for uppercase unit names.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/georadius/\" class=\"_attribution-link\">https://redis.io/commands/georadius/</a>\n  </p>\n</div>\n","function-restore/index":"<h1 class=\"command-name\">FUNCTION</h1>\n<pre>FUNCTION RESTORE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FUNCTION RESTORE serialized-value [FLUSH | APPEND | REPLACE]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of functions on the payload</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@scripting</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Restore libraries from the serialized payload.</p> <p>You can use the optional <em>policy</em> argument to provide a policy for handling existing libraries. The following policies are allowed:</p> <ul> <li>\n<strong>APPEND:</strong> appends the restored libraries to the existing libraries and aborts on collision. This is the default policy.</li> <li>\n<strong>FLUSH:</strong> deletes all existing libraries before restoring the payload.</li> <li>\n<strong>REPLACE:</strong> appends the restored libraries to the existing libraries, replacing any existing ones in case of name collisions. Note that this policy doesn't prevent function name collisions, only libraries.</li> </ul> <p>For more information please refer to <a href=\"https://redis.io/topics/functions-intro\">Introduction to Redis Functions</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/function-restore/\" class=\"_attribution-link\">https://redis.io/commands/function-restore/</a>\n  </p>\n</div>\n","function-list/index":"<h1 class=\"command-name\">FUNCTION</h1>\n<pre>FUNCTION LIST</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FUNCTION LIST [LIBRARYNAMElibrary-name-pattern] [WITHCODE]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of functions</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@scripting</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Return information about the functions and libraries.</p> <p>You can use the optional <code>LIBRARYNAME</code> argument to specify a pattern for matching library names. The optional <code>WITHCODE</code> modifier will cause the server to include the libraries source implementation in the reply.</p> <p>The following information is provided for each of the libraries in the response:</p> <ul> <li>\n<strong>library_name:</strong> the name of the library.</li> <li>\n<strong>engine:</strong> the engine of the library.</li> <li>\n<strong>functions:</strong> the list of functions in the library. Each function has the following fields: <ul> <li>\n<strong>name:</strong> the name of the function.</li> <li>\n<strong>description:</strong> the function's description.</li> <li>\n<strong>flags:</strong> an array of <a href=\"https://redis.io/docs/manual/programmability/functions-intro/#function-flags\">function flags</a>.</li> </ul> </li> <li>\n<strong>library_code:</strong> the library's source code (when given the <code>WITHCODE</code> modifier).</li> </ul> <p>For more information please refer to <a href=\"https://redis.io/topics/functions-intro\">Introduction to Redis Functions</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/function-list/\" class=\"_attribution-link\">https://redis.io/commands/function-list/</a>\n  </p>\n</div>\n","function-stats/index":"<h1 class=\"command-name\">FUNCTION</h1>\n<pre>FUNCTION STATS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FUNCTION STATS</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@scripting</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Return information about the function that's currently running and information about the available execution engines.</p> <p>The reply is map with two keys:</p> <ol> <li>\n<code>running_script</code>: information about the running script. If there's no in-flight function, the server replies with a <em>nil</em>. Otherwise, this is a map with the following keys:</li> </ol> <ul> <li>\n<strong>name:</strong> the name of the function.</li> <li>\n<strong>command:</strong> the command and arguments used for invoking the function.</li> <li>\n<strong>duration_ms:</strong> the function's runtime duration in milliseconds.</li> </ul> <ol start=\"2\"> <li>\n<code>engines</code>: this is a map of maps. Each entry in the map represent a single engine. Engine map contains statistics about the engine like number of functions and number of libraries.</li> </ol> <p>You can use this command to inspect the invocation of a long-running function and decide whether kill it with the <a href=\"../function-kill\"><code>FUNCTION KILL</code></a> command.</p> <p>For more information please refer to <a href=\"https://redis.io/topics/functions-intro\">Introduction to Redis Functions</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/function-stats/\" class=\"_attribution-link\">https://redis.io/commands/function-stats/</a>\n  </p>\n</div>\n","georadius_ro/index":"<h1 class=\"command-name\">GEORADIUS_RO</h1>\n<pre>GEORADIUS_RO (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 6.2.0, this command is regarded as deprecated.</p> <p>It can be replaced by <a href=\"../geosearch\"><code>GEOSEARCH</code></a> with the <code>BYRADIUS</code> argument when migrating or writing new code.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GEORADIUS_RO key longitude latitude radius &lt;M | KM | FT | MI&gt;\n  [WITHCOORD] [WITHDIST] [WITHHASH] [COUNTcount [ANY]] [ASC | DESC]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.2.10</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N+log(M)) where N is the number of elements inside the bounding box of the circular area delimited by center and radius and M is the number of items inside the index.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@geo</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Read-only variant of the <a href=\"../georadius\"><code>GEORADIUS</code></a> command.</p> <p>This command is identical to the <a href=\"../georadius\"><code>GEORADIUS</code></a> command, except that it doesn't support the optional <code>STORE</code> and <code>STOREDIST</code> parameters.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: An array with each entry being the corresponding result of the subcommand given at the same position.</p> <h2>History</h2> <ul> <li>Starting with Redis version 6.2.0: Added the <code>ANY</code> option for <code>COUNT</code>.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/georadius_ro/\" class=\"_attribution-link\">https://redis.io/commands/georadius_ro/</a>\n  </p>\n</div>\n","geopos/index":"<h1 class=\"command-name\">GEOPOS</h1>\n<pre>GEOPOS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GEOPOS key [member [member ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of members requested.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@geo</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Return the positions (longitude,latitude) of all the specified members of the geospatial index represented by the sorted set at <em>key</em>.</p> <p>Given a sorted set representing a geospatial index, populated using the <a href=\"../geoadd\"><code>GEOADD</code></a> command, it is often useful to obtain back the coordinates of specified members. When the geospatial index is populated via <a href=\"../geoadd\"><code>GEOADD</code></a> the coordinates are converted into a 52 bit geohash, so the coordinates returned may not be exactly the ones used in order to add the elements, but small errors may be introduced.</p> <p>The command can accept a variable number of arguments so it always returns an array of positions even when a single element is specified.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>, specifically:</p> <p>The command returns an array where each element is a two elements array representing longitude and latitude (x,y) of each member name passed as argument to the command.</p> <p>Non existing elements are reported as NULL elements of the array.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nGEOADD Sicily 13.361389 38.115556 \"Palermo\" 15.087269 37.502669 \"Catania\"\nGEOPOS Sicily Palermo Catania NonExisting\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/geopos/\" class=\"_attribution-link\">https://redis.io/commands/geopos/</a>\n  </p>\n</div>\n","geosearchstore/index":"<h1 class=\"command-name\">GEOSEARCHSTORE</h1>\n<pre>GEOSEARCHSTORE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GEOSEARCHSTORE destination source &lt;FROMMEMBERmember |\n  FROMLONLATlongitude latitude&gt; &lt;BYRADIUSradius &lt;M | KM | FT | MI&gt;\n  | BYBOXwidth height &lt;M | KM | FT | MI&gt;&gt; [ASC | DESC] [COUNTcount\n  [ANY]] [STOREDIST]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N+log(M)) where N is the number of elements in the grid-aligned bounding box area around the shape provided as the filter and M is the number of items inside the shape</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@geo</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command is like <a href=\"../geosearch\"><code>GEOSEARCH</code></a>, but stores the result in destination key.</p> <p>This command replaces the now deprecated <a href=\"../georadius\"><code>GEORADIUS</code></a> and <a href=\"../georadiusbymember\"><code>GEORADIUSBYMEMBER</code></a>.</p> <p>By default, it stores the results in the <code>destination</code> sorted set with their geospatial information.</p> <p>When using the <code>STOREDIST</code> option, the command stores the items in a sorted set populated with their distance from the center of the circle or box, as a floating-point number, in the same unit specified for that shape.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of elements in the resulting set.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nGEOADD Sicily 13.361389 38.115556 \"Palermo\" 15.087269 37.502669 \"Catania\"\nGEOADD Sicily 12.758489 38.788135 \"edge1\"   17.241510 38.788135 \"edge2\" \nGEOSEARCHSTORE key1 Sicily FROMLONLAT 15 37 BYBOX 400 400 km ASC COUNT 3\nGEOSEARCH key1 FROMLONLAT 15 37 BYBOX 400 400 km ASC WITHCOORD WITHDIST WITHHASH\nGEOSEARCHSTORE key2 Sicily FROMLONLAT 15 37 BYBOX 400 400 km ASC COUNT 3 STOREDIST\nZRANGE key2 0 -1 WITHSCORES\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 7.0.0: Added support for uppercase unit names.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/geosearchstore/\" class=\"_attribution-link\">https://redis.io/commands/geosearchstore/</a>\n  </p>\n</div>\n","getrange/index":"<h1 class=\"command-name\">GETRANGE</h1>\n<pre>GETRANGE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GETRANGE key start end</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.4.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the length of the returned string. The complexity is ultimately determined by the returned length, but because creating a substring from an existing string is very cheap, it can be considered O(1) for small strings.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@string</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the substring of the string value stored at <code>key</code>, determined by the offsets <code>start</code> and <code>end</code> (both are inclusive). Negative offsets can be used in order to provide an offset starting from the end of the string. So -1 means the last character, -2 the penultimate and so forth.</p> <p>The function handles out of range requests by limiting the resulting range to the actual length of the string.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a></p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"This is a string\"\nGETRANGE mykey 0 3\nGETRANGE mykey -3 -1\nGETRANGE mykey 0 -1\nGETRANGE mykey 10 100\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/getrange/\" class=\"_attribution-link\">https://redis.io/commands/getrange/</a>\n  </p>\n</div>\n","get/index":"<h1 class=\"command-name\">GET</h1>\n<pre>GET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GET key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@string</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Get the value of <code>key</code>. If the key does not exist the special value <code>nil</code> is returned. An error is returned if the value stored at <code>key</code> is not a string, because <code>GET</code> only handles string values.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the value of <code>key</code>, or <code>nil</code> when <code>key</code> does not exist.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nGET nonexisting\nSET mykey \"Hello\"\nGET mykey\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/get/\" class=\"_attribution-link\">https://redis.io/commands/get/</a>\n  </p>\n</div>\n","function-kill/index":"<h1 class=\"command-name\">FUNCTION</h1>\n<pre>FUNCTION KILL</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">FUNCTION KILL</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@scripting</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Kill a function that is currently executing.</p> <p>The <code>FUNCTION KILL</code> command can be used only on functions that did not modify the dataset during their execution (since stopping a read-only function does not violate the scripting engine's guaranteed atomicity).</p> <p>For more information please refer to <a href=\"https://redis.io/topics/functions-intro\">Introduction to Redis Functions</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/function-kill/\" class=\"_attribution-link\">https://redis.io/commands/function-kill/</a>\n  </p>\n</div>\n","georadiusbymember/index":"<h1 class=\"command-name\">GEORADIUSBYMEMBER</h1>\n<pre>GEORADIUSBYMEMBER (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 6.2.0, this command is regarded as deprecated.</p> <p>It can be replaced by <a href=\"../geosearch\"><code>GEOSEARCH</code></a> and <a href=\"../geosearchstore\"><code>GEOSEARCHSTORE</code></a> with the <code>BYRADIUS</code> and <code>FROMMEMBER</code> arguments when migrating or writing new code.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GEORADIUSBYMEMBER key member radius &lt;M | KM | FT | MI&gt; [WITHCOORD]\n  [WITHDIST] [WITHHASH] [COUNTcount [ANY]] [ASC | DESC] [STOREkey]\n  [STOREDISTkey]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N+log(M)) where N is the number of elements inside the bounding box of the circular area delimited by center and radius and M is the number of items inside the index.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@geo</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command is exactly like <a href=\"../georadius\"><code>GEORADIUS</code></a> with the sole difference that instead of taking, as the center of the area to query, a longitude and latitude value, it takes the name of a member already existing inside the geospatial index represented by the sorted set.</p> <p>The position of the specified member is used as the center of the query.</p> <p>Please check the example below and the <a href=\"../georadius\"><code>GEORADIUS</code></a> documentation for more information about the command and its options.</p> <p>Note that <a href=\"../georadiusbymember_ro\"><code>GEORADIUSBYMEMBER_RO</code></a> is also available since Redis 3.2.10 and Redis 4.0.0 in order to provide a read-only command that can be used in replicas. See the <a href=\"../georadius\"><code>GEORADIUS</code></a> page for more information.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nGEOADD Sicily 13.583333 37.316667 \"Agrigento\"\nGEOADD Sicily 13.361389 38.115556 \"Palermo\" 15.087269 37.502669 \"Catania\"\nGEORADIUSBYMEMBER Sicily Agrigento 100 km\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 7.0.0: Added support for uppercase unit names.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/georadiusbymember/\" class=\"_attribution-link\">https://redis.io/commands/georadiusbymember/</a>\n  </p>\n</div>\n","georadiusbymember_ro/index":"<h1 class=\"command-name\">GEORADIUSBYMEMBER_RO</h1>\n<pre>GEORADIUSBYMEMBER_RO (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 6.2.0, this command is regarded as deprecated.</p> <p>It can be replaced by <a href=\"../geosearch\"><code>GEOSEARCH</code></a> with the <code>BYRADIUS</code> and <code>FROMMEMBER</code> arguments when migrating or writing new code.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GEORADIUSBYMEMBER_RO key member radius &lt;M | KM | FT | MI&gt;\n  [WITHCOORD] [WITHDIST] [WITHHASH] [COUNTcount [ANY]] [ASC | DESC]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.2.10</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N+log(M)) where N is the number of elements inside the bounding box of the circular area delimited by center and radius and M is the number of items inside the index.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@geo</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Read-only variant of the <a href=\"../georadiusbymember\"><code>GEORADIUSBYMEMBER</code></a> command.</p> <p>This command is identical to the <a href=\"../georadiusbymember\"><code>GEORADIUSBYMEMBER</code></a> command, except that it doesn't support the optional <code>STORE</code> and <code>STOREDIST</code> parameters.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/georadiusbymember_ro/\" class=\"_attribution-link\">https://redis.io/commands/georadiusbymember_ro/</a>\n  </p>\n</div>\n","geosearch/index":"<h1 class=\"command-name\">GEOSEARCH</h1>\n<pre>GEOSEARCH</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GEOSEARCH key &lt;FROMMEMBERmember | FROMLONLATlongitude latitude&gt;\n  &lt;BYRADIUSradius &lt;M | KM | FT | MI&gt; | BYBOXwidth height &lt;M | KM |\n  FT | MI&gt;&gt; [ASC | DESC] [COUNTcount [ANY]] [WITHCOORD] [WITHDIST]\n  [WITHHASH]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N+log(M)) where N is the number of elements in the grid-aligned bounding box area around the shape provided as the filter and M is the number of items inside the shape</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@geo</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Return the members of a sorted set populated with geospatial information using <a href=\"../geoadd\"><code>GEOADD</code></a>, which are within the borders of the area specified by a given shape. This command extends the <a href=\"../georadius\"><code>GEORADIUS</code></a> command, so in addition to searching within circular areas, it supports searching within rectangular areas.</p> <p>This command should be used in place of the deprecated <a href=\"../georadius\"><code>GEORADIUS</code></a> and <a href=\"../georadiusbymember\"><code>GEORADIUSBYMEMBER</code></a> commands.</p> <p>The query's center point is provided by one of these mandatory options:</p> <ul> <li>\n<code>FROMMEMBER</code>: Use the position of the given existing <code>&lt;member&gt;</code> in the sorted set.</li> <li>\n<code>FROMLONLAT</code>: Use the given <code>&lt;longitude&gt;</code> and <code>&lt;latitude&gt;</code> position.</li> </ul> <p>The query's shape is provided by one of these mandatory options:</p> <ul> <li>\n<code>BYRADIUS</code>: Similar to <a href=\"../georadius\"><code>GEORADIUS</code></a>, search inside circular area according to given <code>&lt;radius&gt;</code>.</li> <li>\n<code>BYBOX</code>: Search inside an axis-aligned rectangle, determined by <code>&lt;height&gt;</code> and <code>&lt;width&gt;</code>.</li> </ul> <p>The command optionally returns additional information using the following options:</p> <ul> <li>\n<code>WITHDIST</code>: Also return the distance of the returned items from the specified center point. The distance is returned in the same unit as specified for the radius or height and width arguments.</li> <li>\n<code>WITHCOORD</code>: Also return the longitude and latitude of the matching items.</li> <li>\n<code>WITHHASH</code>: Also return the raw geohash-encoded sorted set score of the item, in the form of a 52 bit unsigned integer. This is only useful for low level hacks or debugging and is otherwise of little interest for the general user.</li> </ul> <p>Matching items are returned unsorted by default. To sort them, use one of the following two options:</p> <ul> <li>\n<code>ASC</code>: Sort returned items from the nearest to the farthest, relative to the center point.</li> <li>\n<code>DESC</code>: Sort returned items from the farthest to the nearest, relative to the center point.</li> </ul> <p>All matching items are returned by default. To limit the results to the first N matching items, use the <strong>COUNT <code>&lt;count&gt;</code></strong> option. When the <code>ANY</code> option is used, the command returns as soon as enough matches are found. This means that the results returned may not be the ones closest to the specified point, but the effort invested by the server to generate them is significantly less. When <code>ANY</code> is not provided, the command will perform an effort that is proportional to the number of items matching the specified area and sort them, so to query very large areas with a very small <code>COUNT</code> option may be slow even if just a few results are returned.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>, specifically:</p> <ul> <li>Without any <code>WITH</code> option specified, the command just returns a linear array like [\"New York\",\"Milan\",\"Paris\"].</li> <li>If <code>WITHCOORD</code>, <code>WITHDIST</code> or <code>WITHHASH</code> options are specified, the command returns an array of arrays, where each sub-array represents a single item.</li> </ul> <p>When additional information is returned as an array of arrays for each item, the first item in the sub-array is always the name of the returned item. The other information is returned in the following order as successive elements of the sub-array.</p> <ol> <li>The distance from the center as a floating point number, in the same unit specified in the shape.</li> <li>The geohash integer.</li> <li>The coordinates as a two items x,y array (longitude,latitude).</li> </ol> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nGEOADD Sicily 13.361389 38.115556 \"Palermo\" 15.087269 37.502669 \"Catania\"\nGEOADD Sicily 12.758489 38.788135 \"edge1\"   17.241510 38.788135 \"edge2\" \nGEOSEARCH Sicily FROMLONLAT 15 37 BYRADIUS 200 km ASC\nGEOSEARCH Sicily FROMLONLAT 15 37 BYBOX 400 400 km ASC WITHCOORD WITHDIST\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 7.0.0: Added support for uppercase unit names.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/geosearch/\" class=\"_attribution-link\">https://redis.io/commands/geosearch/</a>\n  </p>\n</div>\n","getex/index":"<h1 class=\"command-name\">GETEX</h1>\n<pre>GETEX</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GETEX key [EXseconds | PXmilliseconds | EXATunix-time-seconds |\n  PXATunix-time-milliseconds | PERSIST]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@string</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Get the value of <code>key</code> and optionally set its expiration. <code>GETEX</code> is similar to <a href=\"../get\"><code>GET</code></a>, but is a write command with additional options.</p> <h2 id=\"options\">Options</h2> <p>The <code>GETEX</code> command supports a set of options that modify its behavior:</p> <ul> <li>\n<code>EX</code> <em>seconds</em> -- Set the specified expire time, in seconds.</li> <li>\n<code>PX</code> <em>milliseconds</em> -- Set the specified expire time, in milliseconds.</li> <li>\n<code>EXAT</code> <em>timestamp-seconds</em> -- Set the specified Unix time at which the key will expire, in seconds.</li> <li>\n<code>PXAT</code> <em>timestamp-milliseconds</em> -- Set the specified Unix time at which the key will expire, in milliseconds.</li> <li>\n<a href=\"../persist\"><code>PERSIST</code></a> -- Remove the time to live associated with the key.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the value of <code>key</code>, or <code>nil</code> when <code>key</code> does not exist.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"Hello\"\nGETEX mykey\nTTL mykey\nGETEX mykey EX 60\nTTL mykey\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/getex/\" class=\"_attribution-link\">https://redis.io/commands/getex/</a>\n  </p>\n</div>\n","getdel/index":"<h1 class=\"command-name\">GETDEL</h1>\n<pre>GETDEL</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GETDEL key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@string</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Get the value of <code>key</code> and delete the key. This command is similar to <a href=\"../get\"><code>GET</code></a>, except for the fact that it also deletes the key on success (if and only if the key's value type is a string).</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the value of <code>key</code>, <code>nil</code> when <code>key</code> does not exist, or an error if the key's value type isn't a string.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"Hello\"\nGETDEL mykey\nGET mykey\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/getdel/\" class=\"_attribution-link\">https://redis.io/commands/getdel/</a>\n  </p>\n</div>\n","getset/index":"<h1 class=\"command-name\">GETSET</h1>\n<pre>GETSET (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 6.2.0, this command is regarded as deprecated.</p> <p>It can be replaced by <a href=\"../set\"><code>SET</code></a> with the <code>GET</code> argument when migrating or writing new code.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GETSET key value</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@string</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Atomically sets <code>key</code> to <code>value</code> and returns the old value stored at <code>key</code>. Returns an error when <code>key</code> exists but does not hold a string value. Any previous time to live associated with the key is discarded on successful <a href=\"../set\"><code>SET</code></a> operation.</p> <h2 id=\"design-pattern\">Design pattern</h2> <p><code>GETSET</code> can be used together with <a href=\"../incr\"><code>INCR</code></a> for counting with atomic reset. For example: a process may call <a href=\"../incr\"><code>INCR</code></a> against the key <code>mycounter</code> every time some event occurs, but from time to time we need to get the value of the counter and reset it to zero atomically. This can be done using <code>GETSET mycounter \"0\"</code>:</p>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nINCR mycounter\nGETSET mycounter \"0\"\nGET mycounter\n</pre> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the old value stored at <code>key</code>, or <code>nil</code> when <code>key</code> did not exist.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"Hello\"\nGETSET mykey \"World\"\nGET mykey\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/getset/\" class=\"_attribution-link\">https://redis.io/commands/getset/</a>\n  </p>\n</div>\n","getbit/index":"<h1 class=\"command-name\">GETBIT</h1>\n<pre>GETBIT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GETBIT key offset</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@bitmap</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the bit value at <em>offset</em> in the string value stored at <em>key</em>.</p> <p>When <em>offset</em> is beyond the string length, the string is assumed to be a contiguous space with 0 bits. When <em>key</em> does not exist it is assumed to be an empty string, so <em>offset</em> is always out of range and the value is also assumed to be a contiguous space with 0 bits.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the bit value stored at <em>offset</em>.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSETBIT mykey 7 1\nGETBIT mykey 0\nGETBIT mykey 7\nGETBIT mykey 100\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/getbit/\" class=\"_attribution-link\">https://redis.io/commands/getbit/</a>\n  </p>\n</div>\n","geoadd/index":"<h1 class=\"command-name\">GEOADD</h1>\n<pre>GEOADD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GEOADD key [NX | XX] [CH] longitude latitude member [longitude\n  latitude member ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N)) for each item added, where N is the number of elements in the sorted set.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@geo</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Adds the specified geospatial items (longitude, latitude, name) to the specified key. Data is stored into the key as a sorted set, in a way that makes it possible to query the items with the <a href=\"../geosearch\"><code>GEOSEARCH</code></a> command.</p> <p>The command takes arguments in the standard format x,y so the longitude must be specified before the latitude. There are limits to the coordinates that can be indexed: areas very near to the poles are not indexable.</p> <p>The exact limits, as specified by EPSG:900913 / EPSG:3785 / OSGEO:41001 are the following:</p> <ul> <li>Valid longitudes are from -180 to 180 degrees.</li> <li>Valid latitudes are from -85.05112878 to 85.05112878 degrees.</li> </ul> <p>The command will report an error when the user attempts to index coordinates outside the specified ranges.</p> <p><strong>Note:</strong> there is no <strong>GEODEL</strong> command because you can use <a href=\"../zrem\"><code>ZREM</code></a> to remove elements. The Geo index structure is just a sorted set.</p> <h2 id=\"geoadd-options\">GEOADD options</h2> <p><code>GEOADD</code> also provides the following options:</p> <ul> <li>\n<strong>XX</strong>: Only update elements that already exist. Never add elements.</li> <li>\n<strong>NX</strong>: Don't update already existing elements. Always add new elements.</li> <li>\n<strong>CH</strong>: Modify the return value from the number of new elements added, to the total number of elements changed (CH is an abbreviation of <em>changed</em>). Changed elements are <strong>new elements added</strong> and elements already existing for which <strong>the coordinates was updated</strong>. So elements specified in the command line having the same score as they had in the past are not counted. Note: normally, the return value of <code>GEOADD</code> only counts the number of new elements added.</li> </ul> <p>Note: The <strong>XX</strong> and <strong>NX</strong> options are mutually exclusive.</p> <h2 id=\"how-does-it-work\">How does it work?</h2> <p>The way the sorted set is populated is using a technique called <a href=\"https://en.wikipedia.org/wiki/Geohash\">Geohash</a>. Latitude and Longitude bits are interleaved to form a unique 52-bit integer. We know that a sorted set double score can represent a 52-bit integer without losing precision.</p> <p>This format allows for bounding box and radius querying by checking the 1+8 areas needed to cover the whole shape and discarding elements outside it. The areas are checked by calculating the range of the box covered, removing enough bits from the less significant part of the sorted set score, and computing the score range to query in the sorted set for each area.</p> <h2 id=\"what-earth-model-does-it-use\">What Earth model does it use?</h2> <p>The model assumes that the Earth is a sphere since it uses the Haversine formula to calculate distance. This formula is only an approximation when applied to the Earth, which is not a perfect sphere. The introduced errors are not an issue when used, for example, by social networks and similar applications requiring this type of querying. However, in the worst case, the error may be up to 0.5%, so you may want to consider other systems for error-critical applications.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, specifically:</p> <ul> <li>When used without optional arguments, the number of elements added to the sorted set (excluding score updates).</li> <li>If the <code>CH</code> option is specified, the number of elements that were changed (added or updated).</li> </ul> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nGEOADD Sicily 13.361389 38.115556 \"Palermo\" 15.087269 37.502669 \"Catania\"\nGEODIST Sicily Palermo Catania\nGEORADIUS Sicily 15 37 100 km\nGEORADIUS Sicily 15 37 200 km\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 6.2.0: Added the <code>CH</code>, <code>NX</code> and <code>XX</code> options.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/geoadd/\" class=\"_attribution-link\">https://redis.io/commands/geoadd/</a>\n  </p>\n</div>\n","graph.config-get/index":"<h1 class=\"command-name\">GRAPH.CONFIG</h1>\n<pre>GRAPH.CONFIG GET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GRAPH.CONFIG GET name</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/graph\">Graph 2.2.11</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt>  </dl> <p>Retrieves the current value of a RedisGraph configuration parameter.</p> <p>RedisGraph configuration parameters are detailed <a href=\"https://redis.io/docs/stack/graph/configuration\">here</a>.</p> <p><code>*</code> can be used to retrieve the value of all RedisGraph configuration parameters.</p> <pre tabindex=\"0\">127.0.0.1:6379&gt; graph.config get *\n 1) 1) \"TIMEOUT\"\n    2) (integer) 0\n 2) 1) \"CACHE_SIZE\"\n    2) (integer) 25\n 3) 1) \"ASYNC_DELETE\"\n    2) (integer) 1\n 4) 1) \"OMP_THREAD_COUNT\"\n    2) (integer) 8\n 5) 1) \"THREAD_COUNT\"\n    2) (integer) 8\n 6) 1) \"RESULTSET_SIZE\"\n    2) (integer) -1\n 7) 1) \"VKEY_MAX_ENTITY_COUNT\"\n    2) (integer) 100000\n 8) 1) \"MAX_QUEUED_QUERIES\"\n    2) (integer) 4294967295\n 9) 1) \"QUERY_MEM_CAPACITY\"\n    2) (integer) 0\n10) 1) \"DELTA_MAX_PENDING_CHANGES\"\n    2) (integer) 10000\n11) 1) \"NODE_CREATION_BUFFER\"\n    2) (integer) 16384\n</pre>\n<pre tabindex=\"0\">127.0.0.1:6379&gt; graph.config get TIMEOUT\n1) \"TIMEOUT\"\n2) (integer) 0\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/graph.config-get/\" class=\"_attribution-link\">https://redis.io/commands/graph.config-get/</a>\n  </p>\n</div>\n","geodist/index":"<h1 class=\"command-name\">GEODIST</h1>\n<pre>GEODIST</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GEODIST key member1 member2 [M | KM | FT | MI]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N))</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@geo</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Return the distance between two members in the geospatial index represented by the sorted set.</p> <p>Given a sorted set representing a geospatial index, populated using the <a href=\"../geoadd\"><code>GEOADD</code></a> command, the command returns the distance between the two specified members in the specified unit.</p> <p>If one or both the members are missing, the command returns NULL.</p> <p>The unit must be one of the following, and defaults to meters:</p> <ul> <li>\n<strong>m</strong> for meters.</li> <li>\n<strong>km</strong> for kilometers.</li> <li>\n<strong>mi</strong> for miles.</li> <li>\n<strong>ft</strong> for feet.</li> </ul> <p>The distance is computed assuming that the Earth is a perfect sphere, so errors up to 0.5% are possible in edge cases.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>, specifically:</p> <p>The command returns the distance as a double (represented as a string) in the specified unit, or NULL if one or both the elements are missing.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nGEOADD Sicily 13.361389 38.115556 \"Palermo\" 15.087269 37.502669 \"Catania\"\nGEODIST Sicily Palermo Catania\nGEODIST Sicily Palermo Catania km\nGEODIST Sicily Palermo Catania mi\nGEODIST Sicily Foo Bar\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/geodist/\" class=\"_attribution-link\">https://redis.io/commands/geodist/</a>\n  </p>\n</div>\n","graph.explain/index":"<h1 class=\"command-name\">GRAPH.EXPLAIN</h1>\n<pre>GRAPH.EXPLAIN</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GRAPH.EXPLAIN graph query</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/graph\">Graph 2.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt>  </dl> <p>Constructs a query execution plan but does not run it. Inspect this execution plan to better understand how your query will get executed.</p> <p>Arguments: <code>Graph name, Query</code></p> <p>Returns: <code>String representation of a query execution plan</code></p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.EXPLAIN us_government <span class=\"s2\">\"MATCH (p:President)-[:BORN]-&gt;(h:State {name:'Hawaii'}) RETURN p\"</span>\n</span></span></pre></div><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/graph.explain/\" class=\"_attribution-link\">https://redis.io/commands/graph.explain/</a>\n  </p>\n</div>\n","graph.config-set/index":"<h1 class=\"command-name\">GRAPH.CONFIG</h1>\n<pre>GRAPH.CONFIG SET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GRAPH.CONFIG SET name value</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/graph\">Graph 2.2.11</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt>  </dl> <p>Set the value of a RedisGraph configuration parameter.</p> <p>Values set using <code>GRAPH.CONFIG SET</code> are not persisted after server restart.</p> <p>RedisGraph configuration parameters are detailed <a href=\"https://redis.io/docs/stack/graph/configuration\">here</a>.</p> <p>Note: As detailed in the link above, not all RedisGraph configuration parameters can be set at run-time.</p> <pre tabindex=\"0\">127.0.0.1:6379&gt; graph.config get TIMEOUT\n1) \"TIMEOUT\"\n2) (integer) 0\n127.0.0.1:6379&gt; graph.config set TIMEOUT 10000\nOK\n127.0.0.1:6379&gt; graph.config get TIMEOUT\n1) \"TIMEOUT\"\n2) (integer) 10000\n</pre>\n<pre tabindex=\"0\">127.0.0.1:6379&gt; graph.config set THREAD_COUNT 10\n(error) This configuration parameter cannot be set at run-time\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/graph.config-set/\" class=\"_attribution-link\">https://redis.io/commands/graph.config-set/</a>\n  </p>\n</div>\n","graph.ro_query/index":"<h1 class=\"command-name\">GRAPH.RO_QUERY</h1>\n<pre>GRAPH.RO_QUERY</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GRAPH.RO_QUERY graph query [TIMEOUTtimeout]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/graph\">Graph 2.2.8</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt>  </dl> <p>Executes a given read only query against a specified graph.</p> <p>Arguments: <code>Graph name, Query, Timeout [optional]</code></p> <p>Returns: <a href=\"https://redis.io/docs/stack/graph/design/result_structure\">Result set</a> for a read only query or an error if a write query was given.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.RO_QUERY us_government <span class=\"s2\">\"MATCH (p:president)-[:born]-&gt;(:state {name:'Hawaii'}) RETURN p\"</span>\n</span></span></pre></div>\n<p>Query-level timeouts can be set as described in <a href=\"https://redis.io/docs/stack/graph/configuration#timeout\">the configuration section</a>.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/graph.ro_query/\" class=\"_attribution-link\">https://redis.io/commands/graph.ro_query/</a>\n  </p>\n</div>\n","graph.delete/index":"<h1 class=\"command-name\">GRAPH.DELETE</h1>\n<pre>GRAPH.DELETE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GRAPH.DELETE graph</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/graph\">Graph 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt>  </dl> <p>Completely removes the graph and all of its entities.</p> <p>Arguments: <code>Graph name</code></p> <p>Returns: <code>String indicating if operation succeeded or failed.</code></p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.DELETE us_government\n</span></span></pre></div>\n<p>Note: To delete a node from the graph (not the entire graph), execute a <code>MATCH</code> query and pass the alias to the <code>DELETE</code> clause:</p> <pre tabindex=\"0\">GRAPH.QUERY DEMO_GRAPH \"MATCH (x:Y {propname: propvalue}) DELETE x\"\n</pre>\n<p>WARNING: When you delete a node, all of the node's incoming/outgoing relationships are also removed.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/graph.delete/\" class=\"_attribution-link\">https://redis.io/commands/graph.delete/</a>\n  </p>\n</div>\n","hexists/index":"<h1 class=\"command-name\">HEXISTS</h1>\n<pre>HEXISTS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">HEXISTS key field</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@hash</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns if <code>field</code> is an existing field in the hash stored at <code>key</code>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, specifically:</p> <ul> <li>\n<code>1</code> if the hash contains <code>field</code>.</li> <li>\n<code>0</code> if the hash does not contain <code>field</code>, or <code>key</code> does not exist.</li> </ul> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nHSET myhash field1 \"foo\"\nHEXISTS myhash field1\nHEXISTS myhash field2\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/hexists/\" class=\"_attribution-link\">https://redis.io/commands/hexists/</a>\n  </p>\n</div>\n","hello/index":"<h1 class=\"command-name\">HELLO</h1>\n<pre>HELLO</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">HELLO [protover [AUTHusername password] [SETNAMEclientname]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Switch to a different protocol, optionally authenticating and setting the connection's name, or provide a contextual client report.</p> <p>Redis version 6 and above supports two protocols: the old protocol, RESP2, and a new one introduced with Redis 6, RESP3. RESP3 has certain advantages since when the connection is in this mode, Redis is able to reply with more semantical replies: for instance, <a href=\"../hgetall\"><code>HGETALL</code></a> will return a <em>map type</em>, so a client library implementation no longer requires to know in advance to translate the array into a hash before returning it to the caller. For a full coverage of RESP3, please check the <a href=\"https://github.com/redis/redis-specifications/blob/master/protocol/RESP3.md\">RESP3 specification</a>.</p> <p>In Redis 6 connections start in RESP2 mode, so clients implementing RESP2 do not need to updated or changed. There are no short term plans to drop support for RESP2, although future version may default to RESP3.</p> <p><code>HELLO</code> always replies with a list of current server and connection properties, such as: versions, modules loaded, client ID, replication role and so forth. When called without any arguments in Redis 6.2 and its default use of RESP2 protocol, the reply looks like this:</p> <pre>&gt; HELLO\n 1) \"server\"\n 2) \"redis\"\n 3) \"version\"\n 4) \"255.255.255\"\n 5) \"proto\"\n 6) (integer) 2\n 7) \"id\"\n 8) (integer) 5\n 9) \"mode\"\n10) \"standalone\"\n11) \"role\"\n12) \"master\"\n13) \"modules\"\n14) (empty array)\n</pre> <p>Clients that want to handshake using the RESP3 mode need to call the <code>HELLO</code> command and specify the value \"3\" as the <code>protover</code> argument, like so:</p> <pre>&gt; HELLO 3\n1# \"server\" =&gt; \"redis\"\n2# \"version\" =&gt; \"6.0.0\"\n3# \"proto\" =&gt; (integer) 3\n4# \"id\" =&gt; (integer) 10\n5# \"mode\" =&gt; \"standalone\"\n6# \"role\" =&gt; \"master\"\n7# \"modules\" =&gt; (empty array)\n</pre> <p>Because <code>HELLO</code> replies with useful information, and given that <code>protover</code> is optional or can be set to \"2\", client library authors may consider using this command instead of the canonical <a href=\"../ping\"><code>PING</code></a> when setting up the connection.</p> <p>When called with the optional <code>protover</code> argument, this command switches the protocol to the specified version and also accepts the following options:</p> <ul> <li>\n<code>AUTH &lt;username&gt; &lt;password&gt;</code>: directly authenticate the connection in addition to switching to the specified protocol version. This makes calling <a href=\"../auth\"><code>AUTH</code></a> before <code>HELLO</code> unnecessary when setting up a new connection. Note that the <code>username</code> can be set to \"default\" to authenticate against a server that does not use ACLs, but rather the simpler <code>requirepass</code> mechanism of Redis prior to version 6.</li> <li>\n<code>SETNAME &lt;clientname&gt;</code>: this is the equivalent of calling <a href=\"../client-setname\"><code>CLIENT SETNAME</code></a>.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a list of server properties. The reply is a map instead of an array when RESP3 is selected. The command returns an error if the <code>protover</code> requested does not exist.</p> <h2>History</h2> <ul> <li>Starting with Redis version 6.2.0: <code>protover</code> made optional; when called without arguments the command reports the current connection's context.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/hello/\" class=\"_attribution-link\">https://redis.io/commands/hello/</a>\n  </p>\n</div>\n","graph.profile/index":"<h1 class=\"command-name\">GRAPH.PROFILE</h1>\n<pre>GRAPH.PROFILE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GRAPH.PROFILE graph query [TIMEOUTtimeout]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/graph\">Graph 2.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt>  </dl> <p>Executes a query and produces an execution plan augmented with metrics for each operation's execution.</p> <p>Arguments: <code>Graph name, Query</code></p> <p>Returns: <code>String representation of a query execution plan, with details on results produced by and time spent in each operation.</code></p> <p><code>GRAPH.PROFILE</code> is a parallel entrypoint to <a href=\"../graph.query\"><code>GRAPH.QUERY</code></a>. It accepts and executes the same queries, but it will not emit results, instead returning the operation tree structure alongside the number of records produced and total runtime of each operation.</p> <p>It is important to note that this blends elements of <a href=\"../graph.query\">GRAPH.QUERY</a> and <a href=\"../graph.explain\">GRAPH.EXPLAIN</a>. It is not a dry run and will perform all graph modifications expected of the query, but will not output results produced by a <code>RETURN</code> clause or query statistics.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.PROFILE imdb\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MATCH (actor_a:Actor)-[:ACT]-&gt;(:Movie)&lt;-[:ACT]-(actor_b:Actor)\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">WHERE actor_a &lt;&gt; actor_b\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">CREATE (actor_a)-[:COSTARRED_WITH]-&gt;(actor_b)\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"s2\">\"Create | Records produced: 11208, Execution time: 168.208661 ms\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"s2\">\"    Filter | Records produced: 11208, Execution time: 1.250565 ms\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"s2\">\"        Conditional Traverse | Records produced: 12506, Execution time: 7.705860 ms\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> <span class=\"s2\">\"            Node By Label Scan | (actor_a:Actor) | Records produced: 1317, Execution time: 0.104346 ms\"</span>\n</span></span></pre></div><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/graph.profile/\" class=\"_attribution-link\">https://redis.io/commands/graph.profile/</a>\n  </p>\n</div>\n","graph.query/index":"<h1 class=\"command-name\">GRAPH.QUERY</h1>\n<pre>GRAPH.QUERY</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GRAPH.QUERY graph query [TIMEOUTtimeout]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/graph\">Graph 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt>  </dl> <p>Executes the given query against a specified graph.</p> <p>Arguments: <code>Graph name, Query, Timeout [optional]</code></p> <p>Returns: <a href=\"https://redis.io/docs/stack/graph/design/result_structure\">Result set</a></p> <h3 id=\"queries-and-parameterized-queries\">Queries and Parameterized Queries</h3> <p>The execution plans of queries, both regular and parameterized, are cached (up to <a href=\"https://redis.io/docs/stack/graph/configuration/#cache_size\">CACHE_SIZE</a> unique queries are cached). Therefore, it is recommended to use parametrized queries when executing many queries with the same pattern but different constants.</p> <p>Query-level timeouts can be set as described in <a href=\"https://redis.io/docs/stack/graph/configuration#timeout\">the configuration section</a>.</p> <h4 id=\"query-structure\">Query structure:</h4> <p><code>GRAPH.QUERY graph_name \"query\"</code></p> <p>example:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY us_government <span class=\"s2\">\"MATCH (p:president)-[:born]-&gt;(:state {name:'Hawaii'}) RETURN p\"</span>\n</span></span></pre></div>\n<h4 id=\"parametrized-query-structure\">Parametrized query structure:</h4> <p><code>GRAPH.QUERY graph_name \"CYPHER param=val [param=val ...] query\"</code></p> <p>example:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY us_government <span class=\"s2\">\"CYPHER state_name='Hawaii' MATCH (p:president)-[:born]-&gt;(:state {name:</span><span class=\"nv\">$state_name</span><span class=\"s2\">}) RETURN p\"</span>\n</span></span></pre></div>\n<h3 id=\"query-language\">Query language</h3> <p>The syntax is based on <a href=\"http://www.opencypher.org/\">Cypher</a>. <a href=\"https://redis.io/docs/stack/graph/cypher_support/\">Most</a> of the language is supported. RedisGraph-specific extensions are also described below.</p> <ol> <li><a href=\"#query-structure\">Clauses</a></li> <li><a href=\"#functions\">Functions</a></li> </ol> <h3 id=\"query-structure-1\">Query structure</h3> <ul> <li><a href=\"#match\">MATCH</a></li> <li><a href=\"#optional-match\">OPTIONAL MATCH</a></li> <li><a href=\"#where\">WHERE</a></li> <li><a href=\"#return\">RETURN</a></li> <li><a href=\"#order-by\">ORDER BY</a></li> <li><a href=\"#skip\">SKIP</a></li> <li><a href=\"#limit\">LIMIT</a></li> <li><a href=\"#create\">CREATE</a></li> <li><a href=\"#merge\">MERGE</a></li> <li><a href=\"#delete\">DELETE</a></li> <li><a href=\"#set\">SET</a></li> <li><a href=\"#with\">WITH</a></li> <li><a href=\"#union\">UNION</a></li> <li><a href=\"#unwind\">UNWIND</a></li> <li><a href=\"#foreach\">FOREACH</a></li> </ul> <h4 id=\"match\">MATCH</h4> <p>Match describes the relationship between queried entities, using ascii art to represent pattern(s) to match against.</p> <p>Nodes are represented by parentheses <code>()</code>, and Relationships are represented by brackets <code>[]</code>.</p> <p>Each graph entity node/relationship can contain an alias and a label/relationship type, but both can be left empty if necessary.</p> <p>Entity structure: <code>alias:label {filters}</code>.</p> <p>Alias, label/relationship type, and filters are all optional.</p> <p>Example:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>a:Actor<span class=\"o\">)</span>-<span class=\"o\">[</span>:ACT<span class=\"o\">]</span>-&gt;<span class=\"o\">(</span>m:Movie <span class=\"o\">{</span>title:<span class=\"s2\">\"straight outta compton\"</span><span class=\"o\">})</span>\n</span></span></pre></div>\n<p><code>a</code> is an alias for the source node, which we'll be able to refer to at different places within our query.</p> <p><code>Actor</code> is the label under which this node is marked.</p> <p><code>ACT</code> is the relationship type.</p> <p><code>m</code> is an alias for the destination node.</p> <p><code>Movie</code> destination node is of \"type\" movie.</p> <p><code>{title:\"straight outta compton\"}</code> requires the node's title attribute to equal \"straight outta compton\".</p> <p>In this example, we're interested in actor entities which have the relation \"act\" with <strong>the</strong> entity representing the \"straight outta compton\" movie.</p> <p>It is possible to describe broader relationships by composing a multi-hop query such as:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>me <span class=\"o\">{</span>name:<span class=\"s1\">'swilly'</span><span class=\"o\">})</span>-<span class=\"o\">[</span>:FRIENDS_WITH<span class=\"o\">]</span>-&gt;<span class=\"o\">()</span>-<span class=\"o\">[</span>:FRIENDS_WITH<span class=\"o\">]</span>-&gt;<span class=\"o\">(</span>foaf<span class=\"o\">)</span>\n</span></span></pre></div>\n<p>Here we're interested in finding out who my friends' friends are.</p> <p>Nodes can have more than one relationship coming in or out of them, for instance:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>me <span class=\"o\">{</span>name:<span class=\"s1\">'swilly'</span><span class=\"o\">})</span>-<span class=\"o\">[</span>:VISITED<span class=\"o\">]</span>-&gt;<span class=\"o\">(</span>c:Country<span class=\"o\">)</span>&lt;-<span class=\"o\">[</span>:VISITED<span class=\"o\">]</span>-<span class=\"o\">(</span>friend<span class=\"o\">)</span>&lt;-<span class=\"o\">[</span>:FRIENDS_WITH<span class=\"o\">]</span>-<span class=\"o\">(</span>me<span class=\"o\">)</span>\n</span></span></pre></div>\n<p>Here we're interested in knowing which of my friends have visited at least one country I've been to.</p> <h5 id=\"variable-length-relationships\">Variable length relationships</h5> <p>Nodes that are a variable number of relationshipnode hops away can be found using the following syntax:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">-<span class=\"o\">[</span>:TYPE*minHops..maxHops<span class=\"o\">]</span>-&gt;\n</span></span></pre></div>\n<p><a href=\"../type\"><code>TYPE</code></a>, <code>minHops</code> and <code>maxHops</code> are all optional and default to type agnostic, 1 and infinity, respectively.</p> <p>When no bounds are given the dots may be omitted. The dots may also be omitted when setting only one bound and this implies a fixed length pattern.</p> <p>Example:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MATCH (charlie:Actor { name: 'Charlie Sheen' })-[:PLAYED_WITH*1..3]-&gt;(colleague:Actor)\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">RETURN colleague\"</span>\n</span></span></pre></div>\n<p>Returns all actors related to 'Charlie Sheen' by 1 to 3 hops.</p> <h5 id=\"bidirectional-path-traversal\">Bidirectional path traversal</h5> <p>If a relationship pattern does not specify a direction, it will match regardless of which node is the source and which is the destination:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">-<span class=\"o\">[</span>:TYPE<span class=\"o\">]</span>-\n</span></span></pre></div>\n<p>Example:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MATCH (person_a:Person)-[:KNOWS]-(person_b:Person)\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">RETURN person_a, person_b\"</span>\n</span></span></pre></div>\n<p>Returns all pairs of people connected by a <code>KNOWS</code> relationship. Note that each pair will be returned twice, once with each node in the <code>person_a</code> field and once in the <code>person_b</code> field.</p> <p>The syntactic sugar <code>(person_a)&lt;-[:KNOWS]-&gt;(person_b)</code> will return the same results.</p> <p>The bracketed edge description can be omitted if all relations should be considered: <code>(person_a)--(person_b)</code>.</p> <h5 id=\"named-paths\">Named paths</h5> <p>Named path variables are created by assigning a path in a MATCH clause to a single alias with the syntax: <code>MATCH named_path = (path)-[to]-&gt;(capture)</code></p> <p>The named path includes all entities in the path, regardless of whether they have been explicitly aliased. Named paths can be accessed using <a href=\"#path-functions\">designated built-in functions</a> or returned directly if using a language-specific client.</p> <p>Example:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MATCH p=(charlie:Actor { name: 'Charlie Sheen' })-[:PLAYED_WITH*1..3]-&gt;(:Actor)\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">RETURN nodes(p) as actors\"</span>\n</span></span></pre></div>\n<p>This query will produce all the paths matching the pattern contained in the named path <code>p</code>. All of these paths will share the same starting point, the actor node representing Charlie Sheen, but will otherwise vary in length and contents. Though the variable-length traversal and <code>(:Actor)</code> endpoint are not explicitly aliased, all nodes and edges traversed along the path will be included in <code>p</code>. In this case, we are only interested in the nodes of each path, which we'll collect using the built-in function <code>nodes()</code>. The returned value will contain, in order, Charlie Sheen, between 0 and 2 intermediate nodes, and the unaliased endpoint.</p> <h5 id=\"all-shortest-paths\">All shortest paths</h5> <p>The <code>allShortestPaths</code> function returns all the shortest paths between a pair of entities.</p> <p><code>allShortestPaths()</code> is a MATCH mode in which only the shortest paths matching all criteria are captured. Both the source and the target nodes must be bound in an earlier WITH-demarcated scope to invoke <code>allShortestPaths()</code>.</p> <p>A minimal length (must be 1) and maximal length (must be at least 1) for the search may be specified. Zero or more relationship types may be specified (e.g. [:R|Q*1..3]). No property filters may be introduced in the pattern.</p> <p><code>allShortestPaths()</code> can have any number of hops for its minimum and maximum, including zero. This number represents how many edges can be traversed in fulfilling the pattern, with a value of 0 entailing that the source node will be included in the returned path.</p> <p>Filters on properties are supported, and any number of labels may be specified.</p> <p>Example:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MATCH (charlie:Actor {name: 'Charlie Sheen'}), (kevin:Actor {name: 'Kevin Bacon'})\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">WITH charlie, kevin\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">MATCH p=allShortestPaths((charlie)-[:PLAYED_WITH*]-&gt;(kevin))\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">RETURN nodes(p) as actors\"</span>\n</span></span></pre></div>\n<p>This query will produce all paths of the minimum length connecting the actor node representing Charlie Sheen to the one representing Kevin Bacon. There are several 2-hop paths between the two actors, and all of these will be returned. The computation of paths then terminates, as we are not interested in any paths of length greater than 2.</p> <h5 id=\"single-pair-minimal-weight-bounded-cost-bounded-length-paths\">Single-Pair minimal-weight bounded-cost bounded-length paths</h5> <p>(Since RedisGraph v2.10)</p> <p>The <code>algo.SPpaths</code> procedure returns one, <em>n</em>, or all minimal-weight, [optionally] bounded-cost, [optionally] bounded-length distinct paths between a pair of entities. Each path is a sequence of distinct nodes connected by distinct edges.</p> <p><code>algo.SPpaths()</code> is a MATCH mode in which only the paths matching all criteria are captured. Both the source and the target nodes must be bound in an earlier WITH-demarcated scope to invoke <code>algo.SPpaths()</code>.</p> <p>Input arguments:</p> <ul> <li>A map containing: <ul> <li> <p><code>sourceNode</code>: Mandatory. Must be of type node</p> </li> <li> <p><code>targetNode</code>: Mandatory. Must be of type node</p> </li> <li> <p><code>relTypes</code>: Optional. Array of zero or more relationship types. A relationship must have one of these types to be part of the path. If not specified or empty: the path may contain any relationship.</p> </li> <li> <p><code>relDirection</code>: Optional. string. one of <code>'incoming'</code>, <code>'outgoing'</code>, <code>'both'</code>. If not specified: <code>'outgoing'</code>.</p> </li> <li> <p><code>pathCount</code>: Optional. Number of minimal-weight paths to retrieve. Non-negative integer. If not specified: 1</p> <ul> <li> <p><code>0</code>: retrieve all minimal-weight paths (all reported paths have the same weight)</p> <p>Order: 1st : minimal cost, 2nd: minimal length.</p> </li> <li> <p><code>1</code>: retrieve a single minimal-weight path</p> <p>When multiple equal-weight paths exist: (preferences: 1st : minimal cost, 2nd: minimal length)</p> </li> <li> <p><em>n</em> &gt; 1: retrieve up to <em>n</em> minimal-weight paths (reported paths may have different weights)</p> <p>When multiple equal-weight paths exist: (preferences: 1st : minimal cost, 2nd: minimal length)</p> </li> </ul> </li> <li> <p><code>weightProp</code>: Optional. If not specified: use the default weight: 1 for each relationship.</p> <p>The name of the property that represents the weight of each relationship (integer / float)</p> <p>If such property doesnt exist, of if its value is not a positive numeric - use the default weight: 1</p> <p>Note: when all weights are equal: minimal-weight  shortest-path.</p> </li> <li> <p><code>costProp</code>: Optional. If not specified: use the default cost: 1 for each relationship.</p> <p>The name of the property that represents the cost of each relationship (integer / float)</p> <p>If such property doesn't exist, or if its value is not a positive numeric - use the default cost: 1</p> </li> <li> <p><code>maxLen</code>: Optional. Maximal path length (number of relationships along the path). Positive integer.</p> <p>If not specified: no maximal length constraint.</p> </li> <li> <p><code>maxCost</code>: Optional. Positive numeric. If not specified: no maximal cost constraint.</p> <p>The maximal cumulative cost for the relationships along the path.</p> </li> </ul> </li> </ul> <p>Result:</p> <ul> <li> <p>Paths conforming to the input arguments. For each reported path:</p> <ul> <li> <p><code>path</code> - the path</p> </li> <li> <p><code>pathWeight</code> - the paths weight</p> </li> <li> <p><code>pathCost</code> - the paths cost</p> </li> </ul> <p>To retrieve additional information:</p> <ul> <li> <p>The paths length can be retrieved with <code>length(path)</code></p> </li> <li> <p>An array of the nodes along the path can be retrieved with <code>nodes(path)</code></p> </li> <li> <p>The paths first node can be retrieved with <code>nodes(path)[0]</code></p> </li> <li> <p>The paths last node can be retrieved with <code>nodes(path)[-1]</code></p> </li> <li> <p>An array of the relationship's costs along the path can be retrieved with <code>[r in relationships(path) | r.cost]</code> where cost is the name of the cost property</p> </li> <li> <p>An array of the relationship's weights along the path can be retrieved with <code>[r in relationships(path) | r.weight]</code> where weight is the name of the weight property</p> </li> </ul> </li> </ul> <p>Behavior in presence on multiple-edges:</p> <ul> <li> <p>multi-edges are two or more edges connecting the same pair of vertices (possibly with different weights and costs).</p> </li> <li> <p>All matching edges are considered. Paths with identical vertices and different edges are different paths. The following are 3 different paths ('n1', 'n2', and 'n3' are nodes; 'e1', 'e2', 'e3', and 'e4' are edges): (n1)-[e1]-(n2)-[e2]-(n3), (n1)-[e1]-(n2)-[e3]-(n3), (n1)-[e4]-(n2)-[e3]-(n3)</p> </li> </ul> <p>Example:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH \n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MATCH (s:Actor {name: 'Charlie Sheen'}), (t:Actor {name: 'Kevin Bacon'}) \n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">CALL algo.SPpaths( {sourceNode: s, targetNode: t, relTypes: ['r1', 'r2', 'r3'], relDirection: 'outgoing', pathCount: 1, weightProp: 'weight', costProp: 'cost', maxLen: 3, maxCost: 100} ) \n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">YIELD path, pathCost, pathWeight\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">RETURN path ORDER BY pathCost\"</span>\n</span></span></pre></div>\n<h5 id=\"single-source-minimal-weight-bounded-cost-bounded-length-paths\">Single-Source minimal-weight bounded-cost bounded-length paths</h5> <p>(Since RedisGraph v2.10)</p> <p>The <code>algo.SSpaths</code> procedure returns one, <em>n</em>, or all minimal-weight, [optionally] bounded-cost, [optionally] bounded-length distinct paths from a given entity. Each path is a sequence of distinct nodes connected by distinct edges.</p> <p><code>algo.SSpaths()</code> is a MATCH mode in which only the paths matching all criteria are captured. The source node must be bound in an earlier WITH-demarcated scope to invoke <code>algo.SSpaths()</code>.</p> <p>Input arguments:</p> <ul> <li>A map containing: <ul> <li> <p><code>sourceNode</code>: Mandatory. Must be of type node</p> </li> <li> <p><code>relTypes</code>: Optional. Array of zero or more relationship types. A relationship must have one of these types to be part of the path. If not specified or empty: the path may contain any relationship.</p> </li> <li> <p><code>relDirection</code>: Optional. string. one of <code>'incoming'</code>, <code>'outgoing'</code>, <code>'both'</code>. If not specified: <code>'outgoing'</code>.</p> </li> <li> <p><code>pathCount</code>: Optional. Number of minimal-weight paths to retrieve. Non-negative integer. If not specified: 1</p> <p>This number is global (not per source-target pair); all returned paths may be with the same target.</p> <ul> <li> <p><code>0</code>: retrieve all minimal-weight paths (all reported paths have the same weight)</p> <p>Order: 1st : minimal cost, 2nd: minimal length.</p> </li> <li> <p><code>1</code>: retrieve a single minimal-weight path</p> <p>When multiple equal-weight paths exist: (preferences: 1st : minimal cost, 2nd: minimal length)</p> </li> <li> <p><em>n</em> &gt; 1: retrieve up to <em>n</em> minimal-weight paths (reported paths may have different weights)</p> <p>When multiple equal-weight paths exist: (preferences: 1st : minimal cost, 2nd: minimal length)</p> </li> </ul> </li> <li> <p><code>weightProp</code>: Optional. If not specified: use the default weight: 1 for each relationship.</p> <p>The name of the property that represents the weight of each relationship (integer / float)</p> <p>If such property doesnt exist, of if its value is not a positive numeric - use the default weight: 1</p> <p>Note: when all weights are equal: minimal-weight  shortest-path.</p> </li> <li> <p><code>costProp</code>: Optional. If not specified: use the default cost: 1 for each relationship.</p> <p>The name of the property that represents the cost of each relationship (integer / float)</p> <p>If such property doesn't exist, or if its value is not a positive numeric - use the default cost: 1</p> </li> <li> <p><code>maxLen</code>: Optional. Maximal path length (number of relationships along the path). Positive integer.</p> <p>If not specified: no maximal length constraint.</p> </li> <li> <p><code>maxCost</code>: Optional. Positive numeric. If not specified: no maximal cost constraint.</p> <p>The maximal cumulative cost for the relationships along the path.</p> </li> </ul> </li> </ul> <p>Result:</p> <ul> <li> <p>Paths conforming to the input arguments. For each reported path:</p> <ul> <li> <p><code>path</code> - the path</p> </li> <li> <p><code>pathWeight</code> - the paths weight</p> </li> <li> <p><code>pathCost</code> - the paths cost</p> </li> </ul> <p>To retrieve additional information:</p> <ul> <li> <p>The paths length can be retrieved with <code>length(path)</code></p> </li> <li> <p>An array of the nodes along the path can be retrieved with <code>nodes(path)</code></p> </li> <li> <p>The paths first node can be retrieved with <code>nodes(path)[0]</code></p> </li> <li> <p>The paths last node can be retrieved with <code>nodes(path)[-1]</code></p> </li> <li> <p>An array of the relationship's costs along the path can be retrieved with <code>[r in relationships(path) | r.cost]</code> where cost is the name of the cost property</p> </li> <li> <p>An array of the relationship's weights along the path can be retrieved with <code>[r in relationships(path) | r.weight]</code> where weight is the name of the weight property</p> </li> </ul> </li> </ul> <p>Behavior in presence on multiple-edges:</p> <ul> <li> <p>multi-edges are two or more edges connecting the same pair of vertices (possibly with different weights and costs).</p> </li> <li> <p>All matching edges are considered. Paths with identical vertices and different edges are different paths. The following are 3 different paths ('n1', 'n2', and 'n3' are nodes; 'e1', 'e2', 'e3', and 'e4' are edges): (n1)-[e1]-(n2)-[e2]-(n3), (n1)-[e1]-(n2)-[e3]-(n3), (n1)-[e4]-(n2)-[e3]-(n3)</p> </li> </ul> <p>Example:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH \n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MATCH (s:Actor {name: 'Charlie Sheen'})\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">CALL algo.SSpaths( {sourceNode: s, relTypes: ['r1', 'r2', 'r3'], relDirection: 'outgoing', pathCount: 1, weightProp: 'weight', costProp: 'cost', maxLen: 3, maxCost: 100} ) \n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">YIELD path, pathCost, pathWeight\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">RETURN path ORDER BY pathCost\"</span>\n</span></span></pre></div>\n<h4 id=\"optional-match\">OPTIONAL MATCH</h4> <p>The OPTIONAL MATCH clause is a MATCH variant that produces null values for elements that do not match successfully, rather than the all-or-nothing logic for patterns in MATCH clauses.</p> <p>It can be considered to fill the same role as LEFT/RIGHT JOIN does in SQL, as MATCH entities must be resolved but nodes and edges introduced in OPTIONAL MATCH will be returned as nulls if they cannot be found.</p> <p>OPTIONAL MATCH clauses accept the same patterns as standard MATCH clauses, and may similarly be modified by WHERE clauses.</p> <p>Multiple MATCH and OPTIONAL MATCH clauses can be chained together, though a mandatory MATCH cannot follow an optional one.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MATCH (p:Person) OPTIONAL MATCH (p)-[w:WORKS_AT]-&gt;(c:Company)\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">WHERE w.start_date &gt; 2016\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">RETURN p, w, c\"</span>\n</span></span></pre></div>\n<p>All <code>Person</code> nodes are returned, as well as any <code>WORKS_AT</code> relations and <code>Company</code> nodes that can be resolved and satisfy the <code>start_date</code> constraint. For each <code>Person</code> that does not resolve the optional pattern, the person will be returned as normal and the non-matching elements will be returned as null.</p> <p>Cypher is lenient in its handling of null values, so actions like property accesses and function calls on null values will return null values rather than emit errors.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MATCH (p:Person) OPTIONAL MATCH (p)-[w:WORKS_AT]-&gt;(c:Company)\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">RETURN p, w.department, ID(c) as ID\"</span>\n</span></span></pre></div>\n<p>In this case, <code>w.department</code> and <code>ID</code> will be returned if the OPTIONAL MATCH was successful, and will be null otherwise.</p> <p>Clauses like SET, CREATE, MERGE, and DELETE will ignore null inputs and perform the expected updates on real inputs. One exception to this is that attempting to create a relation with a null endpoint will cause an error:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MATCH (p:Person) OPTIONAL MATCH (p)-[w:WORKS_AT]-&gt;(c:Company)\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">CREATE (c)-[:NEW_RELATION]-&gt;(:NEW_NODE)\"</span>\n</span></span></pre></div>\n<p>If <code>c</code> is null for any record, this query will emit an error. In this case, no changes to the graph are committed, even if some values for <code>c</code> were resolved.</p> <h4 id=\"where\">WHERE</h4> <p>This clause is not mandatory, but if you want to filter results, you can specify your predicates here.</p> <p>Supported operations:</p> <ul> <li><code>=</code></li> <li><code>&lt;&gt;</code></li> <li><code>&lt;</code></li> <li><code>&lt;=</code></li> <li><code>&gt;</code></li> <li><code>&gt;=</code></li> <li><code>CONTAINS</code></li> <li><code>ENDS WITH</code></li> <li><code>IN</code></li> <li><code>STARTS WITH</code></li> </ul> <p>Predicates can be combined using AND / OR / NOT.</p> <p>Be sure to wrap predicates within parentheses to control precedence.</p> <p>Examples:</p> <pre tabindex=\"0\">WHERE (actor.name = \"john doe\" OR movie.rating &gt; 8.8) AND movie.votes &lt;= 250)\n</pre>\n<pre tabindex=\"0\">WHERE actor.age &gt;= director.age AND actor.age &gt; 32\n</pre>\n<p>It is also possible to specify equality predicates within nodes using the curly braces as such:</p> <pre tabindex=\"0\">(:President {name:\"Jed Bartlett\"})-[:WON]-&gt;(:State)\n</pre>\n<p>Here we've required that the president node's name will have the value \"Jed Bartlett\".</p> <p>There's no difference between inline predicates and predicates specified within the WHERE clause.</p> <p>It is also possible to filter on graph patterns. The following queries, which return all presidents and the states they won in, produce the same results:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">MATCH <span class=\"o\">(</span>p:President<span class=\"o\">)</span>, <span class=\"o\">(</span>s:State<span class=\"o\">)</span> WHERE <span class=\"o\">(</span>p<span class=\"o\">)</span>-<span class=\"o\">[</span>:WON<span class=\"o\">]</span>-&gt;<span class=\"o\">(</span>s<span class=\"o\">)</span> RETURN p, s\n</span></span></pre></div>\n<p>and</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">MATCH <span class=\"o\">(</span>p:President<span class=\"o\">)</span>-<span class=\"o\">[</span>:WON<span class=\"o\">]</span>-&gt;<span class=\"o\">(</span>s:State<span class=\"o\">)</span> RETURN p, s\n</span></span></pre></div>\n<p>Pattern predicates can be also negated and combined with the logical operators AND, OR, and NOT. The following query returns all the presidents that did not win in the states where they were governors:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">MATCH <span class=\"o\">(</span>p:President<span class=\"o\">)</span>, <span class=\"o\">(</span>s:State<span class=\"o\">)</span> WHERE NOT <span class=\"o\">(</span>p<span class=\"o\">)</span>-<span class=\"o\">[</span>:WON<span class=\"o\">]</span>-&gt;<span class=\"o\">(</span>s<span class=\"o\">)</span> AND <span class=\"o\">(</span>p<span class=\"o\">)</span>-&gt;<span class=\"o\">[</span>:governor<span class=\"o\">]</span>-&gt;<span class=\"o\">(</span>s<span class=\"o\">)</span> RETURN p, s\n</span></span></pre></div>\n<p>Nodes can also be filtered by label:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">MATCH <span class=\"o\">(</span>n<span class=\"o\">)</span>-<span class=\"o\">[</span>:R<span class=\"o\">]</span>-&gt;<span class=\"o\">()</span> WHERE n:L1 OR n:L2 RETURN n \n</span></span></pre></div>\n<p>When possible, it is preferable to specify the label in the node pattern of the MATCH clause.</p> <h4 id=\"return\">RETURN</h4> <p>In its simple form, Return defines which properties the returned result-set will contain.</p> <p>Its structure is a list of <code>alias.property</code> separated by commas.</p> <p>For convenience, it's possible to specify the alias only when you're interested in every attribute an entity possesses, and don't want to specify each attribute individually. For example:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">RETURN movie.title, actor\n</span></span></pre></div>\n<p>Use the DISTINCT keyword to remove duplications within the result-set:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">RETURN DISTINCT friend_of_friend.name\n</span></span></pre></div>\n<p>In the above example, suppose we have two friends, Joe and Miesha, and both know Dominick.</p> <p>DISTINCT will make sure Dominick will only appear once in the final result set.</p> <p>Return can also be used to aggregate data, similar to group by in SQL.</p> <p>Once an aggregation function is added to the return list, all other \"none\" aggregated values are considered as group keys, for example:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">RETURN movie.title, MAX<span class=\"o\">(</span>actor.age<span class=\"o\">)</span>, MIN<span class=\"o\">(</span>actor.age<span class=\"o\">)</span>\n</span></span></pre></div>\n<p>Here we group data by movie title and for each movie, and we find its youngest and oldest actor age.</p> <h4 id=\"aggregations\">Aggregations</h4> <p>Supported aggregation functions include:</p> <ul> <li><code>avg</code></li> <li><code>collect</code></li> <li><code>count</code></li> <li><code>max</code></li> <li><code>min</code></li> <li><code>percentileCont</code></li> <li><code>percentileDisc</code></li> <li><code>stDev</code></li> <li><code>sum</code></li> </ul> <h4 id=\"order-by\">ORDER BY</h4> <p>Order by specifies that the output be sorted and how.</p> <p>You can order by multiple properties by stating each variable in the ORDER BY clause.</p> <p>Each property may specify its sort order with <code>ASC</code>/<code>ASCENDING</code> or <code>DESC</code>/<code>DESCENDING</code>. If no order is specified, it defaults to ascending.</p> <p>The result will be sorted by the first variable listed.</p> <p>For equal values, it will go to the next property in the ORDER BY clause, and so on.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">ORDER BY &lt;alias.property <span class=\"o\">[</span>ASC/DESC<span class=\"o\">]</span> list&gt;\n</span></span></pre></div>\n<p>Below we sort our friends by height. For equal heights, weight is used to break ties.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">ORDER BY friend.height, friend.weight DESC\n</span></span></pre></div>\n<h4 id=\"skip\">SKIP</h4> <p>The optional skip clause allows a specified number of records to be omitted from the result set.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">SKIP &lt;number of records to skip&gt;\n</span></span></pre></div>\n<p>This can be useful when processing results in batches. A query that would examine the second 100-element batch of nodes with the label <code>Person</code>, for example, would be:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH <span class=\"s2\">\"MATCH (p:Person) RETURN p ORDER BY p.name SKIP 100 LIMIT 100\"</span>\n</span></span></pre></div>\n<h4 id=\"limit\">LIMIT</h4> <p>Although not mandatory, you can use the limit clause to limit the number of records returned by a query:</p> <pre tabindex=\"0\">LIMIT &lt;max records to return&gt;\n</pre>\n<p>If not specified, there's no limit to the number of records returned by a query.</p> <h4 id=\"create\">CREATE</h4> <p>CREATE is used to introduce new nodes and relationships.</p> <p>The simplest example of CREATE would be a single node creation:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">CREATE <span class=\"o\">(</span>n<span class=\"o\">)</span>\n</span></span></pre></div>\n<p>It's possible to create multiple entities by separating them with a comma.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">CREATE <span class=\"o\">(</span>n<span class=\"o\">)</span>,<span class=\"o\">(</span>m<span class=\"o\">)</span>\n</span></span></pre></div>\n<div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">CREATE <span class=\"o\">(</span>:Person <span class=\"o\">{</span>name: <span class=\"s1\">'Kurt'</span>, age: 27<span class=\"o\">})</span>\n</span></span></pre></div>\n<p>To add relations between nodes, in the following example we first find an existing source node. After it's found, we create a new relationship and destination node.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MATCH (a:Person)\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">WHERE a.name = 'Kurt'\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">CREATE (a)-[:MEMBER]-&gt;(:Band {name:'Nirvana'})\"</span>\n</span></span></pre></div>\n<p>Here the source node is a bounded node, while the destination node is unbounded.</p> <p>As a result, a new node is created representing the band Nirvana and a new relation connects Kurt to the band.</p> <p>Lastly we create a complete pattern.</p> <p>All entities within the pattern which are not bounded will be created.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"CREATE (jim:Person{name:'Jim', age:29})-[:FRIENDS]-&gt;(pam:Person {name:'Pam', age:27})-[:WORKS]-&gt;(:Employer {name:'Dunder Mifflin'})\"</span>\n</span></span></pre></div>\n<p>This query will create three nodes and two relationships.</p> <h4 id=\"delete\">DELETE</h4> <p>DELETE is used to remove both nodes and relationships.</p> <p>Note that deleting a node also deletes all of its incoming and outgoing relationships.</p> <p>To delete a node and all of its relationships:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH <span class=\"s2\">\"MATCH (p:Person {name:'Jim'}) DELETE p\"</span>\n</span></span></pre></div>\n<p>To delete relationship:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH <span class=\"s2\">\"MATCH (:Person {name:'Jim'})-[r:FRIENDS]-&gt;() DELETE r\"</span>\n</span></span></pre></div>\n<p>This query will delete all <code>friend</code> outgoing relationships from the node with the name 'Jim'.</p> <h4 id=\"set\">SET</h4> <p>SET is used to create or update properties on nodes and relationships.</p> <p>To set a property on a node, use <a href=\"../set\"><code>SET</code></a>.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH <span class=\"s2\">\"MATCH (n { name: 'Jim' }) SET n.name = 'Bob'\"</span>\n</span></span></pre></div>\n<p>If you want to set multiple properties in one go, simply separate them with a comma to set multiple properties using a single SET clause.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MATCH (n { name: 'Jim', age:32 })\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">SET n.age = 33, n.name = 'Bob'\"</span>\n</span></span></pre></div>\n<p>The same can be accomplished by setting the graph entity variable to a map:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MATCH (n { name: 'Jim', age:32 })\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">SET n = {age: 33, name: 'Bob'}\"</span>\n</span></span></pre></div>\n<p>Using <code>=</code> in this way replaces all of the entity's previous properties, while <code>+=</code> will only set the properties it explicitly mentions.</p> <p>In the same way, the full property set of a graph entity can be assigned or merged:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MATCH (jim {name: 'Jim'}), (pam {name: 'Pam'})\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">SET jim = pam\"</span>\n</span></span></pre></div>\n<p>After executing this query, the <code>jim</code> node will have the same property set as the <code>pam</code> node.</p> <p>To remove a node's property, simply set property value to NULL.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH <span class=\"s2\">\"MATCH (n { name: 'Jim' }) SET n.name = NULL\"</span>\n</span></span></pre></div>\n<h4 id=\"merge\">MERGE</h4> <p>The MERGE clause ensures that a path exists in the graph (either the path already exists, or it needs to be created).</p> <p>MERGE either matches existing nodes and binds them, or it creates new data and binds that.</p> <p>Its like a combination of MATCH and CREATE that also allows you to specify what happens if the data was matched or created.</p> <p>For example, you can specify that the graph must contain a node for a user with a certain name.</p> <p>If there isnt a node with the correct name, a new node will be created and its name property set.</p> <p>Any aliases in the MERGE path that were introduced by earlier clauses can only be matched; MERGE will not create them.</p> <p>When the MERGE path doesn't rely on earlier clauses, the whole path will always either be matched or created.</p> <p>If all path elements are introduced by MERGE, a match failure will cause all elements to be created, even if part of the match succeeded.</p> <p>The MERGE path can be followed by ON MATCH SET and ON CREATE SET directives to conditionally set properties depending on whether or not the match succeeded.</p> <p><strong>Merging nodes</strong></p> <p>To merge a single node with a label:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH <span class=\"s2\">\"MERGE (robert:Critic)\"</span>\n</span></span></pre></div>\n<p>To merge a single node with properties:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH <span class=\"s2\">\"MERGE (charlie { name: 'Charlie Sheen', age: 10 })\"</span>\n</span></span></pre></div>\n<p>To merge a single node, specifying both label and property:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH <span class=\"s2\">\"MERGE (michael:Person { name: 'Michael Douglas' })\"</span>\n</span></span></pre></div>\n<p><strong>Merging paths</strong></p> <p>Because MERGE either matches or creates a full path, it is easy to accidentally create duplicate nodes.</p> <p>For example, if we run the following query on our sample graph:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MERGE (charlie { name: 'Charlie Sheen '})-[r:ACTED_IN]-&gt;(wallStreet:Movie { name: 'Wall Street' })\"</span>\n</span></span></pre></div>\n<p>Even though a node with the name 'Charlie Sheen' already exists, the full pattern does not match, so 1 relation and 2 nodes - including a duplicate 'Charlie Sheen' node - will be created.</p> <p>We should use multiple MERGE clauses to merge a relation and only create non-existent endpoints:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MERGE (charlie { name: 'Charlie Sheen' })\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\"> MERGE (wallStreet:Movie { name: 'Wall Street' })\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\"> MERGE (charlie)-[r:ACTED_IN]-&gt;(wallStreet)\"</span>\n</span></span></pre></div>\n<p>If we don't want to create anything if pattern elements don't exist, we can combine MATCH and MERGE clauses. The following query merges a relation only if both of its endpoints already exist:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MATCH (charlie { name: 'Charlie Sheen' })\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\"> MATCH (wallStreet:Movie { name: 'Wall Street' })\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\"> MERGE (charlie)-[r:ACTED_IN]-&gt;(wallStreet)\"</span>\n</span></span></pre></div>\n<p><strong>On Match and On Create directives</strong></p> <p>Using ON MATCH and ON CREATE, MERGE can set properties differently depending on whether a pattern is matched or created.</p> <p>In this query, we'll merge paths based on a list of properties and conditionally set a property when creating new entities:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"UNWIND ['Charlie Sheen', 'Michael Douglas', 'Tamara Tunie'] AS actor_name\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\"> MATCH (movie:Movie { name: 'Wall Street' })\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\"> MERGE (person {name: actor_name})-[:ACTED_IN]-&gt;(movie)\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\"> ON CREATE SET person.first_role = movie.name\"</span>\n</span></span></pre></div>\n<h4 id=\"with\">WITH</h4> <p>The WITH clause allows parts of queries to be independently executed and have their results handled uniquely.</p> <p>This allows for more flexible query composition as well as data manipulations that would otherwise not be possible in a single query.</p> <p>If, for example, we wanted to find all children in our graph who are above the average age of all people:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MATCH (p:Person) WITH AVG(p.age) AS average_age MATCH (:Person)-[:PARENT_OF]-&gt;(child:Person) WHERE child.age &gt; average_age return child\n</span></span></span></pre></div>\n<p>This also allows us to use modifiers like <code>DISTINCT</code>, <code>SKIP</code>, <code>LIMIT</code>, and <code>ORDER</code> that otherwise require <code>RETURN</code> clauses.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MATCH (u:User)  WITH u AS nonrecent ORDER BY u.lastVisit LIMIT 3 SET nonrecent.should_contact = true\"</span>\n</span></span></pre></div>\n<h4 id=\"unwind\">UNWIND</h4> <p>The UNWIND clause breaks down a given list into a sequence of records; each contains a single element in the list.</p> <p>The order of the records preserves the original list order.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"CREATE (p {array:[1,2,3]})\"</span>\n</span></span></pre></div>\n<div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MATCH (p) UNWIND p.array AS y RETURN y\"</span>\n</span></span></pre></div>\n<h4 id=\"foreach\">FOREACH</h4> <p>(Since RedisGraph v2.12)</p> <p>The <code>FOREACH</code> clause feeds the components of a list to a sub-query comprised of <strong>updating clauses only</strong> (<code>CREATE</code>, <code>MERGE</code>, <a href=\"../set\"><code>SET</code></a>, <code>REMOVE</code>, <code>DELETE</code> and <code>FOREACH</code>), while passing on the records it receives without change.</p> <p>The clauses within the sub-query recognize the bound variables defined prior to the <code>FOREACH</code> clause, but are local in the sense that later clauses are not aware of the variables defined inside them. In other words, <code>FOREACH</code> uses the current context, and does not affect it.</p> <p>The <code>FOREACH</code> clause can be used for numerous purposes, such as: Updating and creating graph entities in a concise manner, marking nodes\\edges that satisfy some condition or are part of a path of interest and performing conditional queries.</p> <p>We show examples of queries performing the above 3 use-cases.</p> <p>The following query will create 5 nodes, each with property <code>v</code> with the values from 0 to 4 corresponding to the appropriate index in the list.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"FOREACH(i in [1, 2, 3, 4] | CREATE (n:N {v: i}))\"</span>\n</span></span></pre></div>\n<p>The following query marks the nodes of all paths of length up to 15 km from a hotel in Toronto to a steakhouse with at least 2 Michelin stars.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MATCH p = (hotel:HOTEL {City: 'Toronto'})-[r:ROAD*..5]-&gt;(rest:RESTAURANT {type: 'Steakhouse'}) WHERE sum(r.length) &lt;= 15 AND hotel.stars &gt;= 4 AND rest.Michelin_stars &gt;= 2\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">FOREACH(n in nodes(p) | SET n.part_of_path = true)\"</span>\n</span></span></pre></div>\n<p>The following query searches for all the hotels, checks whether they buy directly from a bakery, and if not - makes sure they are marked as buying from a supplier that supplies bread, and that they do not buy directly from a bakery.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MATCH (h:HOTEL) OPTIONAL MATCH (h)-[b:BUYS_FROM]-&gt;(bakery:BAKERY)\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">FOREACH(do_perform IN CASE WHEN b = NULL THEN [1] ELSE [] END | MERGE (h)-[b2:BUYS_FROM]-&gt;(s:SUPPLIER {supplies_bread: true}) SET b2.direct = false)\"</span>\n</span></span></pre></div>\n<h4 id=\"union\">UNION</h4> <p>The UNION clause is used to combine the result of multiple queries.</p> <p>UNION combines the results of two or more queries into a single result set that includes all the rows that belong to all queries in the union.</p> <p>The number and the names of the columns must be identical in all queries combined by using UNION.</p> <p>To keep all the result rows, use UNION ALL.</p> <p>Using just UNION will combine and remove duplicates from the result set.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MATCH (n:Actor) RETURN n.name AS name\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">UNION ALL\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">MATCH (n:Movie) RETURN n.title AS name\"</span>\n</span></span></pre></div>\n<h3 id=\"functions\">Functions</h3> <p>This section contains information on all supported functions from the Cypher query language.</p> <ul> <li><a href=\"#predicate-functions\">Predicate functions</a></li> <li><a href=\"#scalar-functions\">Scalar functions</a></li> <li><a href=\"#aggregating-functions\">Aggregating functions</a></li> <li><a href=\"#list-functions\">List functions</a></li> <li><a href=\"#mathematical-operators\">Mathematical operators</a></li> <li><a href=\"#mathematical-functions\">Mathematical functions</a></li> <li><a href=\"#trigonometric-functions\">Trigonometric functions</a></li> <li><a href=\"#string-functions\">String functions</a></li> <li><a href=\"#point-functions\">Point functions</a></li> <li><a href=\"#type-conversion-functions\">Type conversion functions</a></li> <li><a href=\"#node-functions\">Node functions</a></li> <li><a href=\"#path-functions\">Path functions</a></li> </ul> <h2 id=\"predicate-functions\">Predicate functions</h2> <table> <thead> <tr> <th>Function</th> <th style=\"text-align:left\">Description</th> </tr> </thead> <tbody> <tr> <td><a href=\"#existential-comprehension-functions\">all(<em>var</em> IN <em>list</em> WHERE <em>predicate</em>)</a></td> <td style=\"text-align:left\">Returns true when <em>predicate</em> holds true for all elements in <em>list</em>\n</td> </tr> <tr> <td><a href=\"#existential-comprehension-functions\">any(<em>var</em> IN <em>list</em> WHERE <em>predicate</em>)</a></td> <td style=\"text-align:left\">Returns true when <em>predicate</em> holds true for at least one element in <em>list</em>\n</td> </tr> <tr> <td>exists(<em>pattern</em>)</td> <td style=\"text-align:left\">Returns true when at least one match for <em>pattern</em> exists</td> </tr> <tr> <td>isEmpty(<em>list</em>|<em>map</em>|<em>string</em>)</td> <td style=\"text-align:left\">Returns true if the input list or map contains no elements or if the input string contains no characters <br> Returns null when the input evaluates to null</td> </tr> <tr> <td><a href=\"#existential-comprehension-functions\">none(<em>var</em> IN <em>list</em> WHERE <em>predicate</em>)</a></td> <td style=\"text-align:left\">Returns true when <em>predicate</em> holds false for all elements in <em>list</em>\n</td> </tr> <tr> <td><a href=\"#existential-comprehension-functions\">single(<em>var</em> IN <em>list</em> WHERE <em>predicate</em>)</a></td> <td style=\"text-align:left\">Returns true when <em>predicate</em> holds true for exactly one element in <em>list</em>\n</td> </tr> </tbody> </table> <h2 id=\"scalar-functions\">Scalar functions</h2> <table> <thead> <tr> <th>Function</th> <th style=\"text-align:left\">Description</th> </tr> </thead> <tbody> <tr> <td>coalesce(<em>expr</em>[, expr...])</td> <td style=\"text-align:left\">Returns the evaluation of the first argument that evaluates to a non-null value <br> Returns null when all arguments evaluate to null</td> </tr> <tr> <td>endNode(<em>relationship</em>)</td> <td style=\"text-align:left\">Returns the destination node of a relationship <br> Returns null when <em>relationship</em> evaluates to null</td> </tr> <tr> <td>hasLabels(<em>node</em>, <em>labelsList</em>) *</td> <td style=\"text-align:left\">Returns true when <em>node</em> contains all labels in <em>labelsList</em>, otherwise false <br> Return true when <em>labelsList</em> evaluates to an empty list</td> </tr> <tr> <td>id(<em>node</em>|<em>relationship</em>)</td> <td style=\"text-align:left\">Returns the internal ID of a node or relationship (which is not immutable)</td> </tr> <tr> <td>labels(<em>node</em>)</td> <td style=\"text-align:left\">Returns a list of strings: all labels of <em>node</em> <br> Returns null when <em>node</em> evaluates to null</td> </tr> <tr> <td>properties(<em>expr</em>)</td> <td style=\"text-align:left\">When <em>expr</em> is a node or relationship: Returns a map containing all the properties of the given node or relationship <br> When <em>expr</em> evaluates to a map: Returns <em>expr</em> unchanged <br> Returns null when <em>expr</em> evaluates to null</td> </tr> <tr> <td>randomUUID()</td> <td style=\"text-align:left\">Returns a random UUID (Universal Unique IDentifier)</td> </tr> <tr> <td>startNode(<em>relationship</em>)</td> <td style=\"text-align:left\">Returns the source node of a relationship <br> Returns null when <em>relationship</em> evaluates to null</td> </tr> <tr> <td>timestamp()</td> <td style=\"text-align:left\">Returns the current system timestamp (milliseconds since epoch)</td> </tr> <tr> <td>type(<em>relationship</em>)</td> <td style=\"text-align:left\">Returns a string: the type of <em>relationship</em> <br> Returns null when <em>relationship</em> evaluates to null</td> </tr> <tr> <td>typeOf(<em>expr</em>) *</td> <td style=\"text-align:left\">(Since RedisGraph v2.12) <br> Returns a string: the type of a literal, an expression's evaluation, an alias, a node's property, or a relationship's property <br> Return value is one of <code>Map</code>, <code>String</code>, <code>Integer</code>, <code>Boolean</code>, <code>Float</code>, <code>Node</code>, <code>Edge</code>, <code>List</code>, <code>Path</code>, <code>Point</code>, or <code>Null</code>\n</td> </tr> </tbody> </table> <p>* RedisGraph-specific extensions to Cypher</p> <h2 id=\"aggregating-functions\">Aggregating functions</h2> <table> <thead> <tr> <th>Function</th> <th style=\"text-align:left\">Description</th> </tr> </thead> <tbody> <tr> <td>avg(<em>expr</em>)</td> <td style=\"text-align:left\">Returns the average of a set of numeric values. null values are ignored <br> Returns null when <em>expr</em> has no evaluations</td> </tr> <tr> <td>collect(<em>expr</em>)</td> <td style=\"text-align:left\">Returns a list containing all non-null elements which evaluated from a given expression</td> </tr> <tr> <td>count(<em>expr</em>|*)</td> <td style=\"text-align:left\">When argument is <em>expr</em>: returns the number of non-null evaluations of <em>expr</em> <br> When argument is <code>*</code>: returns the total number of evaluations (including nulls)</td> </tr> <tr> <td>max(<em>expr</em>)</td> <td style=\"text-align:left\">Returns the maximum value in a set of values (taking into account type ordering). null values are ignored <br> Returns null when <em>expr</em> has no evaluations</td> </tr> <tr> <td>min(<em>expr</em>)</td> <td style=\"text-align:left\">Returns the minimum value in a set of values (taking into account type ordering). null values are ignored <br> Returns null when <em>expr</em> has no evaluations</td> </tr> <tr> <td>percentileCont(<em>expr</em>, <em>percentile</em>)</td> <td style=\"text-align:left\">Returns a linear-interpolated percentile (between 0.0 and 1.0) over a set of numeric values. null values are ignored <br> Returns null when <em>expr</em> has no evaluations</td> </tr> <tr> <td>percentileDisc(<em>expr</em>, <em>percentile</em>)</td> <td style=\"text-align:left\">Returns a nearest-value percentile (between 0.0 and 1.0) over a set of numeric values. null values are ignored <br> Returns null when <em>expr</em> has no evaluations</td> </tr> <tr> <td>stDev(<em>expr</em>)</td> <td style=\"text-align:left\">Returns the sample standard deviation over a set of numeric values. null values are ignored <br> Returns null when <em>expr</em> has no evaluations</td> </tr> <tr> <td>stDevP(<em>expr</em>)</td> <td style=\"text-align:left\">Returns the population standard deviation over a set of numeric values. null values are ignored <br> Returns null when <em>expr</em> has no evaluations</td> </tr> <tr> <td>sum(<em>expr</em>)</td> <td style=\"text-align:left\">Returns the sum of a set of numeric values. null values are ignored <br> Returns 0 when <em>expr</em> has no evaluations</td> </tr> </tbody> </table> <h2 id=\"list-functions\">List functions</h2> <table> <thead> <tr> <th>Function</th> <th style=\"text-align:left\">Description</th> </tr> </thead> <tbody> <tr> <td>head(<em>expr</em>)</td> <td style=\"text-align:left\">Returns the first element of a list <br> Returns null when <em>expr</em> evaluates to null or an empty list</td> </tr> <tr> <td>keys(<em>expr</em>)</td> <td style=\"text-align:left\">Returns a list of strings: all key names for given map or all property names for a given node or edge <br> Returns null when <em>expr</em> evaluates to null</td> </tr> <tr> <td>last(<em>expr</em>)</td> <td style=\"text-align:left\">Returns the last element of a list <br> Returns null when <em>expr</em> evaluates to null or an empty list</td> </tr> <tr> <td>list.dedup(<em>list</em>) *</td> <td style=\"text-align:left\">(Since RedisGraph v2.12) <br> Given a list, returns a similar list after removing duplicate elements <br> Order is preserved, duplicates are removed from the end of the list <br> Returns null when <em>list</em> evaluates to null <br> Emit an error when <em>list</em> does not evaluate to a list or to null</td> </tr> <tr> <td>list.insert(<em>list</em>, <em>idx</em>, <em>val</em>[, <em>dups</em> = TRUE]) *</td> <td style=\"text-align:left\">(Since RedisGraph v2.12) <br> Given a list, returns a list after inserting a given value at a given index <br> <em>idx</em> is 0-based when non-negative, or from the end of the list when negative <br> Returns null when <em>list</em> evaluates to null <br> Returns <em>list</em> when <em>val</em> evaluates to null <br> Returns <em>list</em> when <em>idx</em> evaluates to an integer not in [-NumItems-1 .. NumItems] <br> When <em>dups</em> evaluats to FALSE: returns <em>list</em> when <em>val</em> evaluates to a value that is already an element of <em>list</em> <br> Emit an error when <em>list</em> does not evaluate to a list or to null <br> Emit an error when <em>idx</em> does not evaluate to an integer <br> Emit an error when <em>dups</em>, if specified, does not evaluate to a Boolean</td> </tr> <tr> <td>list.insertListElements(<em>list</em>, <em>list2</em>, <em>idx</em>[, <em>dups</em> = TRUE]) *</td> <td style=\"text-align:left\">(Since RedisGraph v2.12) <br> Given a list, returns a list after inserting the elements of a second list at a given index <br> <em>idx</em> is 0-based when non-negative, or from the end of the list when negative <br> Returns null when <em>list</em> evaluates to null <br> Returns <em>list</em> when <em>list2</em> evaluates to null <br> Returns <em>list</em> when <em>idx</em> evaluates to an integer not in [-NumItems-1 .. NumItems] <br> When <em>dups</em> evaluates to FALSE: If an element of <em>list2</em> evaluates to an element of <em>list</em> it would be skipped; If multiple elements of <em>list2</em> evaluate to the same value - this value would be inserted at most once to <em>list</em> <br> Emit an error when <em>list</em> does not evaluate to a list or to null <br> Emit an error when <em>list2</em> does not evaluate to a list or to null <br> Emit an error when <em>idx</em> does not evaluate to an integer <br> Emit an error when <em>dups</em>, if specified, does not evaluate to a Boolean</td> </tr> <tr> <td>list.remove(<em>list</em>, <em>idx</em>[, <em>count</em> = 1]) *</td> <td style=\"text-align:left\">(Since RedisGraph v2.12) <br> Given a list, returns a list after removing a given number of consecutive elements (or less, if the end of the list has been reached). starting at a given index. <br> <em>idx</em> is 0-based when non-negative, or from the end of the list when negative <br> Returns <em>null</em> when <em>list</em> evaluates to null <br> Returns <em>list</em> when <em>idx</em> evaluates to an integer not in [-NumItems .. NumItems-1] <br> Returns <em>list</em> when <em>count</em> evaluates to a non-positive integer <br> Emit an error when <em>list</em> does not evaluate to a list or to null <br> Emit an error when <em>idx</em> does not evaluate to an integer <br> Emit an error when <em>count</em>, if specified, does not evaluate to an integer</td> </tr> <tr> <td>list.sort(<em>list</em>[, <em>ascending</em> = TRUE]) *</td> <td style=\"text-align:left\">(Since RedisGraph v2.12) <br> Given a list, returns a list with similar elements, but sorted (inversely-sorted if <em>ascending</em> is evaluated to FALSE) <br> Returns null when <em>list</em> evaluates to null <br> Emit an error when <em>list</em> does not evaluate to a list or to null <br> Emit an error when <em>ascending</em>, if specified, does not evaluate to a Boolean</td> </tr> <tr> <td>range(<em>first</em>, <em>last</em>[, <em>step</em> = 1])</td> <td style=\"text-align:left\">Returns a list of integers in the range of [start, end]. <em>step</em>, an optional integer argument, is the increment between consequtive elements</td> </tr> <tr> <td>size(<em>expr</em>)</td> <td style=\"text-align:left\">Returns the number of elements in a list <br> Returns null with <em>expr</em> evaluates to null</td> </tr> <tr> <td>tail(<em>expr</em>)</td> <td style=\"text-align:left\">Returns a sublist of a list, which contains all its elements except the first <br> Returns an empty list when <em>expr</em> containst less than 2 elements. <br> Returns null when <em>expr</em> evaluates to null</td> </tr> <tr> <td><a href=\"#reduce\">reduce(...)</a></td> <td style=\"text-align:left\">Returns a scalar produced by evaluating an expression against each list member</td> </tr> </tbody> </table> <p>* RedisGraph-specific extensions to Cypher</p> <h2 id=\"mathematical-operators\">Mathematical operators</h2> <table> <thead> <tr> <th>Function</th> <th style=\"text-align:left\">Description</th> </tr> </thead> <tbody> <tr> <td>+</td> <td style=\"text-align:left\">Add two values</td> </tr> <tr> <td>-</td> <td style=\"text-align:left\">Subtract second value from first</td> </tr> <tr> <td>*</td> <td style=\"text-align:left\">Multiply two values</td> </tr> <tr> <td>/</td> <td style=\"text-align:left\">Divide first value by the second</td> </tr> <tr> <td>^</td> <td style=\"text-align:left\">Raise the first value to the power of the second</td> </tr> <tr> <td>%</td> <td style=\"text-align:left\">Perform modulo division of the first value by the second</td> </tr> </tbody> </table> <h2 id=\"mathematical-functions\">Mathematical functions</h2> <table> <thead> <tr> <th>Function</th> <th style=\"text-align:left\">Description</th> </tr> </thead> <tbody> <tr> <td>abs(<em>expr</em>)</td> <td style=\"text-align:left\">Returns the absolute value of a numeric value <br> Returns null when <em>expr</em> evaluates to null</td> </tr> <tr> <td>ceil(<em>expr</em>) **</td> <td style=\"text-align:left\">When <em>expr</em> evaluates to an integer: returns its evaluation <br> When <em>expr</em> evaluates to floating point: returns a floating point equals to the smallest integer greater than or equal to <em>expr</em> <br> Returns null when <em>expr</em> evaluates to null</td> </tr> <tr> <td>e()</td> <td style=\"text-align:left\">Returns the constant <em>e</em>, the base of the natural logarithm</td> </tr> <tr> <td>exp(<em>expr</em>)</td> <td style=\"text-align:left\">Returns <em>e</em>^<em>expr</em>, where <em>e</em> is the base of the natural logarithm <br> Returns null when <em>expr</em> evaluates to null</td> </tr> <tr> <td>floor(<em>expr</em>) **</td> <td style=\"text-align:left\">When <em>expr</em> evaluates to an integer: returns its evaluation <br> When <em>expr</em> evaluates to a floating point: returns a floating point equals to the greatest integer less than or equal to <em>expr</em> <br> Returns null when <em>expr</em> evaluates to null</td> </tr> <tr> <td>log(<em>expr</em>)</td> <td style=\"text-align:left\">Returns the natural logarithm of a numeric value <br> Returns nan when <em>expr</em> evaluates to a negative numeric value, -inf when <em>expr</em> evaluates to 0, and null when <em>expr</em> evaluates to null</td> </tr> <tr> <td>log10(<em>expr</em>)</td> <td style=\"text-align:left\">Returns the base-10 logarithm of a numeric value <br> Returns nan when <em>expr</em> evaluates to a negative numeric value, -inf when <em>expr</em> evaluates to 0, and null when <em>expr</em> evaluates to null</td> </tr> <tr> <td>pow(<em>base</em>, <em>exponent</em>) *</td> <td style=\"text-align:left\">Returns <em>base</em> raised to the power of <em>exponent</em> (equivalent to <em>base</em>^<em>exponent</em>) <br> Returns null when either evaluates to null</td> </tr> <tr> <td>rand()</td> <td style=\"text-align:left\">Returns a random floating point in the range [0,1]</td> </tr> <tr> <td>round(<em>expr</em>) ** ***</td> <td style=\"text-align:left\">When <em>expr</em> evaluates to an integer: returns its evaluation <br> When <em>expr</em> evaluates to a floating point: returns a floating point equals to the integer closest to <em>expr</em> <br> Returns null when <em>expr</em> evaluates to null</td> </tr> <tr> <td>sign(<em>expr</em>)</td> <td style=\"text-align:left\">Returns the signum of a numeric value: 0 when <em>expr</em> evaluates to 0, -1 when <em>expr</em> evaluates to a negative numeric value, and 1 when <em>expr</em> evaluates to a positive numeric value <br> Returns null when <em>expr</em> evaluates to null</td> </tr> <tr> <td>sqrt(<em>expr</em>)</td> <td style=\"text-align:left\">Returns the square root of a numeric value <br> Returns nan when <em>expr</em> evaluates to a negative value and null when <em>expr</em> evaluates to null</td> </tr> </tbody> </table> <p>* RedisGraph-specific extensions to Cypher</p> <p>** RedisGraph-specific behavior: to avoid possible loss of precision, when <em>expr</em> evaluates to an integer - the result is an integer as well</p> <p>*** RedisGraph-specific behavior: tie-breaking method is \"half away from zero\"</p> <h2 id=\"trigonometric-functions\">Trigonometric functions</h2> <table> <thead> <tr> <th>Function</th> <th style=\"text-align:left\">Description</th> </tr> </thead> <tbody> <tr> <td>acos(<em>expr</em>)</td> <td style=\"text-align:left\">Returns the arccosine, in radians, of a numeric value <br> Returns nan when <em>expr</em> evaluates to a numeric value not in [-1, 1] and null when <em>expr</em> evaluates to null</td> </tr> <tr> <td>asin(<em>expr</em>)</td> <td style=\"text-align:left\">Returns the arcsine, in radians, of a numeric value <br> Returns nan when <em>expr</em> evaluates to a numeric value not in [-1, 1] and null when <em>expr</em> evaluates to null</td> </tr> <tr> <td>atan(<em>expr</em>)</td> <td style=\"text-align:left\">Returns the arctangent, in radians, of a numeric value <br> Returns null when <em>expr</em> evaluates to null</td> </tr> <tr> <td>atan2(<em>expr</em>, <em>expr</em>)</td> <td style=\"text-align:left\">Returns the 2-argument arctangent, in radians, of a pair of numeric values (Cartesian coordinates) <br> Returns 0 when both expressions evaluate to 0 <br> Returns null when either expression evaluates to null</td> </tr> <tr> <td>cos(<em>expr</em>)</td> <td style=\"text-align:left\">Returns the cosine of a numeric value that represents an angle in radians <br> Returns null when <em>expr</em> evaluates to null</td> </tr> <tr> <td>cot(<em>expr</em>)</td> <td style=\"text-align:left\">Returns the cotangent of a numeric value that represents an angle in radians <br> Returns inf when <em>expr</em> evaluates to 0 and null when <em>expr</em> evaluates to null</td> </tr> <tr> <td>degrees(<em>expr</em>)</td> <td style=\"text-align:left\">Converts a numeric value from radians to degrees <br> Returns null when <em>expr</em> evaluates to null</td> </tr> <tr> <td>haversin(<em>expr</em>)</td> <td style=\"text-align:left\">Returns half the versine of a numeric value that represents an angle in radians <br> Returns null when <em>expr</em> evaluates to null</td> </tr> <tr> <td>pi()</td> <td style=\"text-align:left\">Returns the mathematical constant <em>pi</em>\n</td> </tr> <tr> <td>radians(<em>expr</em>)</td> <td style=\"text-align:left\">Converts a numeric value from degrees to radians <br> Returns null when <em>expr</em> evaluates to null</td> </tr> <tr> <td>sin(<em>expr</em>)</td> <td style=\"text-align:left\">Returns the sine of a numeric value that represents an angle in radians <br> Returns null when <em>expr</em> evaluates to null</td> </tr> <tr> <td>tan(<em>expr</em>)</td> <td style=\"text-align:left\">Returns the tangent of a numeric value that represents an angle in radians <br> Returns null when <em>expr</em> evaluates to null</td> </tr> </tbody> </table> <h2 id=\"string-functions\">String functions</h2> <table> <thead> <tr> <th>Function</th> <th style=\"text-align:left\">Description</th> </tr> </thead> <tbody> <tr> <td>left(<em>str</em>, <em>len</em>)</td> <td style=\"text-align:left\">Returns a string containing the <em>len</em> leftmost characters of <em>str</em> <br> Returns null when <em>str</em> evaluates to null, otherwise emit an error if <em>len</em> evaluates to null</td> </tr> <tr> <td>lTrim(<em>str</em>)</td> <td style=\"text-align:left\">Returns <em>str</em> with leading whitespace removed <br> Returns null when <em>str</em> evaluates to null</td> </tr> <tr> <td>replace(<em>str</em>, <em>search</em>, <em>replace</em>)</td> <td style=\"text-align:left\">Returns <em>str</em> with all occurrences of <em>search</em> replaced with <em>replace</em> <br> Returns null when any argument evaluates to null</td> </tr> <tr> <td>reverse(<em>str</em>)</td> <td style=\"text-align:left\">Returns a string in which the order of all characters in <em>str</em> are reversed <br> Returns null when <em>str</em> evaluates to null</td> </tr> <tr> <td>right(<em>str</em>, <em>len</em>)</td> <td style=\"text-align:left\">Returns a string containing the <em>len</em> rightmost characters of <em>str</em> <br> Returns null when <em>str</em> evaluates to null, otherwise emit an error if <em>len</em> evaluates to null</td> </tr> <tr> <td>rTrim(<em>str</em>)</td> <td style=\"text-align:left\">Returns <em>str</em> with trailing whitespace removed <br> Returns null when <em>str</em> evaluates to null</td> </tr> <tr> <td>split(<em>str</em>, <em>delimiter</em>)</td> <td style=\"text-align:left\">Returns a list of strings from splitting <em>str</em> by <em>delimiter</em> <br> Returns null when any argument evaluates to null</td> </tr> <tr> <td>string.join(<em>strList</em>[, <em>delimiter</em> = '']) *</td> <td style=\"text-align:left\">(Since RedisGraph v2.12) <br> Returns a concatenation of a list of strings using a given delimiter <br> Returns null when <em>strList</em> evaluates to null <br> Returns null when <em>delimiter</em>, if specified, evaluates to null <br> Emit an error when <em>strList</em> does not evaluate to a list or to null <br> Emit an error when an element of <em>strList</em> does not evaluate to a string <br> Emit an error when <em>delimiter</em>, if specified, does not evaluate to a string or to null</td> </tr> <tr> <td>string.matchRegEx(<em>str</em>, <em>regex</em>) *</td> <td style=\"text-align:left\">(Since RedisGraph v2.12) <br> Given a string and a regular expression, returns a list of all matches and matching regions <br> Returns an empty list when <em>str</em> evaluates to null <br> Returns an empty list when <em>regex</em> evaluates to null <br> Emit an error when <em>str</em> does not evaluate to a string or to null <br> Emit an error when <em>regex</em> does not evaluate to a valid regex string or to null</td> </tr> <tr> <td>string.replaceRegEx(<em>str</em>, <em>regex</em>, <em>replacement</em>) *</td> <td style=\"text-align:left\">(Since RedisGraph v2.12) <br> Given a string and a regular expression, returns a string after replacing each regex match with a given replacement <br> Returns null when <em>str</em> evaluates to null <br> Returns null when <em>regex</em> evaluates to null <br> Returns null when <em>replacement</em> evaluates to null <br> Emit an error when <em>str</em> does not evaluate to a string or to null <br> Emit an error when <em>regex</em> does not evaluate to a valid regex string or to null <br> Emit an error when <em>replacement</em> does not evaluate to a string or to null</td> </tr> <tr> <td>substring(<em>str</em>, <em>start</em>[, <em>len</em>])</td> <td style=\"text-align:left\">When <em>len</em> is specified: returns a substring of <em>str</em> beginning with a 0-based index <em>start</em> and with length <em>len</em> <br> When <em>len</em> is not specified: returns a substring of <em>str</em> beginning with a 0-based index <em>start</em> and extending to the end of <em>str</em> <br> Returns null when <em>str</em> evaluates to null <br> Emit an error when <em>start</em> or <em>len</em> evaluate to null</td> </tr> <tr> <td>toLower(<em>str</em>)</td> <td style=\"text-align:left\">Returns <em>str</em> in lowercase <br> Returns null when <em>str</em> evaluates to null</td> </tr> <tr> <td>toJSON(<em>expr</em>) *</td> <td style=\"text-align:left\">Returns a <a href=\"#json-format\">JSON representation</a> of a value <br> Returns null when <em>expr</em> evaluates to null</td> </tr> <tr> <td>toUpper(<em>str</em>)</td> <td style=\"text-align:left\">Returns <em>str</em> in uppercase <br> Returns null when <em>str</em> evaluates to null</td> </tr> <tr> <td>trim(<em>str</em>)</td> <td style=\"text-align:left\">Returns <em>str</em> with leading and trailing whitespace removed <br> Returns null when <em>str</em> evaluates to null</td> </tr> <tr> <td>size(<em>str</em>)</td> <td style=\"text-align:left\">Returns the number of characters in <em>str</em> <br> Returns null when <em>str</em> evaluates to null</td> </tr> </tbody> </table> <p>* RedisGraph-specific extensions to Cypher</p> <h2 id=\"point-functions\">Point functions</h2> <table> <thead> <tr> <th>Function</th> <th style=\"text-align:left\">Description</th> </tr> </thead> <tbody> <tr> <td><a href=\"#point\">point(<em>map</em>)</a></td> <td style=\"text-align:left\">Returns a Point representing a lat/lon coordinates</td> </tr> <tr> <td>distance(<em>point1</em>, <em>point2</em>)</td> <td style=\"text-align:left\">Returns the distance in meters between the two given points <br> Returns null when either evaluates to null</td> </tr> </tbody> </table> <h2 id=\"type-conversion-functions\">Type conversion functions</h2> <table> <thead> <tr> <th>Function</th> <th style=\"text-align:left\">Description</th> </tr> </thead> <tbody> <tr> <td>toBoolean(<em>expr</em>)</td> <td style=\"text-align:left\">Returns a Boolean when <em>expr</em> evaluates to a Boolean <br> Converts a string to Boolean (<code>\"true\"</code> (case insensitive) to true, <code>\"false\"</code> (case insensitive) to false, any other value to null) <br> Converts an integer to Boolean (0 to <code>false</code>, any other values to <code>true</code>) <br> Returns null when <em>expr</em> evaluates to null <br> Emit an error on other types</td> </tr> <tr> <td>toBooleanList(<em>exprList</em>)</td> <td style=\"text-align:left\">Converts a list to a list of Booleans. Each element in the list is converted using toBooleanOrNull()</td> </tr> <tr> <td>toBooleanOrNull(<em>expr</em>)</td> <td style=\"text-align:left\">Returns a Boolean when <em>expr</em> evaluates to a Boolean <br> Converts a string to Boolean (<code>\"true\"</code> (case insensitive) to true, <code>\"false\"</code> (case insensitive) to false, any other value to null) <br> Converts an integer to Boolean (0 to <code>false</code>, any other values to <code>true</code>) <br> Returns null when <em>expr</em> evaluates to null <br> Returns null for other types</td> </tr> <tr> <td>toFloat(<em>expr</em>)</td> <td style=\"text-align:left\">Returns a floating point when <em>expr</em> evaluates to a floating point <br> Converts an integer to a floating point <br> Converts a string to a floating point or null <br> Returns null when <em>expr</em> evaluates to null <br> Emit an error on other types</td> </tr> <tr> <td>toFloatList(<em>exprList</em>)</td> <td style=\"text-align:left\">Converts a list to a list of floating points. Each element in the list is converted using toFloatOrNull()</td> </tr> <tr> <td>toFloatOrNull(<em>expr</em>)</td> <td style=\"text-align:left\">Returns a floating point when <em>expr</em> evaluates to a floating point <br> Converts an integer to a floating point <br> Converts a string to a floating point or null <br> Returns null when <em>expr</em> evaluates to null <br> Returns null for other types</td> </tr> <tr> <td>toInteger(<em>expr</em>) *</td> <td style=\"text-align:left\">Returns an integer when <em>expr</em> evaluates to an integer <br> Converts a floating point to integer <br> Converts a string to an integer or null <br> Converts a Boolean to an integer (false to 0, true to 1) (Since RedisGraph v2.10.8) <br> Returns null when <em>expr</em> evaluates to null <br> Emit an error on other types</td> </tr> <tr> <td>toIntegerList(<em>exprList</em>) *</td> <td style=\"text-align:left\">Converts a list to a list of integer values. Each element in the list is converted using toIntegerOrNull()</td> </tr> <tr> <td>toIntegerOrNull(<em>expr</em>) *</td> <td style=\"text-align:left\">Returns an integer when <em>expr</em> evaluates to an integer <br> Converts a floating point to integer <br> Converts a string to an integer or null <br> Converts a Boolean to an integer (false to 0, true to 1) (Since RedisGraph v2.10.8) <br> Returns null when <em>expr</em> evaluates to null <br> Returns null for other types</td> </tr> <tr> <td>toString(<em>expr</em>)</td> <td style=\"text-align:left\">Returns a string when <em>expr</em> evaluates to a string <br> Converts an integer, float, Boolean, string, or point to a string representation <br> Returns null when <em>expr</em> evaluates to null <br> Emit an error on other types</td> </tr> <tr> <td>toStringList(<em>exprList</em>)</td> <td style=\"text-align:left\">Converts a list to a list of strings. Each element in the list is converted using toStringOrNull()</td> </tr> <tr> <td>toStringOrNull(<em>expr</em>)</td> <td style=\"text-align:left\">Returns a string when <em>expr</em> evaluates to a string <br> Converts an integer, float, Boolean, string, or point to a string representation <br> Returns null when <em>expr</em> evaluates to null <br> Returns null for other types</td> </tr> </tbody> </table> <p>* RedisGraph-specific behavior: rounding method when converting a floating point to an integer is \"toward negative infinity (floor)\"</p> <h2 id=\"node-functions\">Node functions</h2> <table> <thead> <tr> <th>Function</th> <th style=\"text-align:left\">Description</th> </tr> </thead> <tbody> <tr> <td>indegree(<em>node</em> [, <em>reltype</em> ...]) * <br> indegree(<em>node</em> [, <em>reltypeList</em>]) *</td> <td style=\"text-align:left\">When no relationship types are specified: Returns the number of <em>node</em>'s incoming edges <br> When one or more relationship types are specified: Returns the number of <em>node's</em> incoming edges with one of the given relationship types <br> Return null when <em>node</em> evaluates to null <br> the <em>reltypeList</em> syntax is supported since RedisGraph v2.10.8</td> </tr> <tr> <td>outdegree(<em>node</em> [, <em>reltype</em> ...]) * <br> outdegree(<em>node</em> [, <em>reltypeList</em>]) *</td> <td style=\"text-align:left\">When no relationship types are specified: Returns the number of <em>node</em>'s outgoing edges <br> When one or more relationship types are specified: Returns the number of <em>node's</em> outgoing edges with one of the given relationship types <br> Return null when <em>node</em> evaluates to null <br> the <em>reltypeList</em> syntax is supported since RedisGraph v2.10.8</td> </tr> </tbody> </table> <p>* RedisGraph-specific extensions to Cypher</p> <h2 id=\"path-functions\">Path functions</h2> <table> <thead> <tr> <th>Function</th> <th style=\"text-align:left\">Description</th> </tr> </thead> <tbody> <tr> <td>nodes(<em>path</em>)</td> <td style=\"text-align:left\">Returns a list containing all the nodes in <em>path</em> <br> Returns null if <em>path</em> evaluates to null</td> </tr> <tr> <td>relationships(<em>path</em>)</td> <td style=\"text-align:left\">Returns a list containing all the relationships in <em>path</em> <br> Returns null if <em>path</em> evaluates to null</td> </tr> <tr> <td>length(<em>path</em>)</td> <td style=\"text-align:left\">Return the length (number of edges) of <em>path</em> <br> Returns null if <em>path</em> evaluates to null</td> </tr> <tr> <td>\n<a href=\"#shortestPath\">shortestPath(...)</a> *</td> <td style=\"text-align:left\">Return the shortest path that resolves the given pattern</td> </tr> </tbody> </table> <p>* RedisGraph-specific extensions to Cypher</p> <h3 id=\"list-comprehensions\">List comprehensions</h3> <p>List comprehensions are a syntactical construct that accepts an array and produces another based on the provided map and filter directives.</p> <p>They are a common construct in functional languages and modern high-level languages. In Cypher, they use the syntax:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\"><span class=\"o\">[</span>element IN array WHERE condition <span class=\"p\">|</span> output elem<span class=\"o\">]</span>\n</span></span></pre></div>\n<ul> <li>\n<code>array</code> can be any expression that produces an array: a literal, a property reference, or a function call.</li> <li>\n<code>WHERE condition</code> is an optional argument to only project elements that pass a certain criteria. If omitted, all elements in the array will be represented in the output.</li> <li>\n<code>| output elem</code> is an optional argument that allows elements to be transformed in the output array. If omitted, the output elements will be the same as their corresponding inputs.</li> </ul> <p>The following query collects all paths of any length, then for each produces an array containing the <code>name</code> property of every node with a <code>rank</code> property greater than 10:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">MATCH <span class=\"nv\">p</span><span class=\"o\">=()</span>-<span class=\"o\">[</span>*<span class=\"o\">]</span>-&gt;<span class=\"o\">()</span> RETURN <span class=\"o\">[</span>node IN nodes<span class=\"o\">(</span>p<span class=\"o\">)</span> WHERE node.rank &gt; <span class=\"m\">10</span> <span class=\"p\">|</span> node.name<span class=\"o\">]</span>\n</span></span></pre></div>\n<h4 id=\"existential-comprehension-functions\">Existential comprehension functions</h4> <p>The functions <code>any()</code>, <code>all()</code>, <code>single()</code> and <code>none()</code> use a simplified form of the list comprehension syntax and return a boolean value.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">any<span class=\"o\">(</span>element IN array WHERE condition<span class=\"o\">)</span>\n</span></span></pre></div>\n<p>They can operate on any form of input array, but are particularly useful for path filtering. The following query collects all paths of any length in which all traversed edges have a weight less than 3:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">MATCH <span class=\"nv\">p</span><span class=\"o\">=()</span>-<span class=\"o\">[</span>*<span class=\"o\">]</span>-&gt;<span class=\"o\">()</span> WHERE all<span class=\"o\">(</span>edge IN relationships<span class=\"o\">(</span>p<span class=\"o\">)</span> WHERE edge.weight &lt; 3<span class=\"o\">)</span> RETURN p\n</span></span></pre></div>\n<h3 id=\"pattern-comprehensions\">Pattern comprehensions</h3> <p>Pattern comprehensions are a method of producing a list composed of values found by performing the traversal of a given graph pattern.</p> <p>The following query returns the name of a <code>Person</code> node and a list of all their friends' ages:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">MATCH <span class=\"o\">(</span>n:Person<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">RETURN\n</span></span><span class=\"line\"><span class=\"cl\">n.name,\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">[(</span>n<span class=\"o\">)</span>-<span class=\"o\">[</span>:FRIEND_OF<span class=\"o\">]</span>-&gt;<span class=\"o\">(</span>f:Person<span class=\"o\">)</span> <span class=\"p\">|</span> f.age<span class=\"o\">]</span>\n</span></span></pre></div>\n<p>Optionally, a <code>WHERE</code> clause may be embedded in the pattern comprehension to filter results. In this query, all friends' ages will be gathered for friendships that started before 2010:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">MATCH <span class=\"o\">(</span>n:Person<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">RETURN\n</span></span><span class=\"line\"><span class=\"cl\">n.name,\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">[(</span>n<span class=\"o\">)</span>-<span class=\"o\">[</span>e:FRIEND_OF<span class=\"o\">]</span>-&gt;<span class=\"o\">(</span>f:Person<span class=\"o\">)</span> WHERE e.since &lt; <span class=\"m\">2010</span> <span class=\"p\">|</span> f.age<span class=\"o\">]</span>\n</span></span></pre></div>\n<h3 id=\"case-when\">CASE WHEN</h3> <p>The case statement comes in two variants. Both accept an input argument and evaluates it against one or more expressions. The first <code>WHEN</code> argument that specifies a value matching the result will be accepted, and the value specified by the corresponding <code>THEN</code> keyword will be returned.</p> <p>Optionally, an <code>ELSE</code> argument may also be specified to indicate what to do if none of the <code>WHEN</code> arguments match successfully.</p> <p>In its simple form, there is only one expression to evaluate and it immediately follows the <code>CASE</code> keyword:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">MATCH <span class=\"o\">(</span>n<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">RETURN\n</span></span><span class=\"line\"><span class=\"cl\">CASE n.title\n</span></span><span class=\"line\"><span class=\"cl\">WHEN <span class=\"s1\">'Engineer'</span> THEN <span class=\"m\">100</span>\n</span></span><span class=\"line\"><span class=\"cl\">WHEN <span class=\"s1\">'Scientist'</span> THEN <span class=\"m\">80</span>\n</span></span><span class=\"line\"><span class=\"cl\">ELSE n.privileges\n</span></span><span class=\"line\"><span class=\"cl\">END\n</span></span></pre></div>\n<p>In its generic form, no expression follows the <code>CASE</code> keyword. Instead, each <code>WHEN</code> statement specifies its own expression:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">MATCH <span class=\"o\">(</span>n<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">RETURN\n</span></span><span class=\"line\"><span class=\"cl\">CASE\n</span></span><span class=\"line\"><span class=\"cl\">WHEN n.age &lt; <span class=\"m\">18</span> THEN <span class=\"s1\">'0-18'</span>\n</span></span><span class=\"line\"><span class=\"cl\">WHEN n.age &lt; <span class=\"m\">30</span> THEN <span class=\"s1\">'18-30'</span>\n</span></span><span class=\"line\"><span class=\"cl\">ELSE <span class=\"s1\">'30+'</span>\n</span></span><span class=\"line\"><span class=\"cl\">END\n</span></span></pre></div>\n<h4 id=\"reduce\">Reduce</h4> <p>The <code>reduce()</code> function accepts a starting value and updates it by evaluating an expression against each element of the list:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">RETURN reduce<span class=\"o\">(</span><span class=\"nv\">sum</span> <span class=\"o\">=</span> 0, n IN <span class=\"o\">[</span>1,2,3<span class=\"o\">]</span> <span class=\"p\">|</span> sum + n<span class=\"o\">)</span>\n</span></span></pre></div>\n<p><code>sum</code> will successively have the values 0, 1, 3, and 6, with 6 being the output of the function call.</p> <h3 id=\"point\">Point</h3> <p>The <code>point()</code> function expects one map argument of the form:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">RETURN point<span class=\"o\">({</span>latitude: lat_value, longitude: lon_val<span class=\"o\">})</span>\n</span></span></pre></div>\n<p>The key names <code>latitude</code> and <code>longitude</code> are case-sensitive.</p> <p>The point constructed by this function can be saved as a node/relationship property or used within the query, such as in a <code>distance</code> function call.</p> <h3 id=\"shortestpath\">shortestPath</h3> <p>The <code>shortestPath()</code> function is invoked with the form:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">MATCH <span class=\"o\">(</span>a <span class=\"o\">{</span>v: 1<span class=\"o\">})</span>, <span class=\"o\">(</span>b <span class=\"o\">{</span>v: 4<span class=\"o\">})</span> RETURN shortestPath<span class=\"o\">((</span>a<span class=\"o\">)</span>-<span class=\"o\">[</span>:L*<span class=\"o\">]</span>-&gt;<span class=\"o\">(</span>b<span class=\"o\">))</span>\n</span></span></pre></div>\n<p>The sole <code>shortestPath</code> argument is a traversal pattern. This pattern's endpoints must be resolved prior to the function call, and no property filters may be introduced in the pattern. The relationship pattern may specify any number of relationship types (including zero) to be considered. If a minimum number of edges to traverse is specified, it may only be 0 or 1, while any number may be used for the maximum. If 0 is specified as the minimum, the source node will be included in the returned path. If no shortest path can be found, NULL is returned.</p> <h3 id=\"json-format\">JSON format</h3> <p><code>toJSON()</code> returns the input value in JSON formatting. For primitive data types and arrays, this conversion is conventional. Maps and map projections (<code>toJSON(node { .prop} )</code>) are converted to JSON objects, as are nodes and relationships.</p> <p>The format for a node object in JSON is:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\"><span class=\"o\">{</span>\n</span></span><span class=\"line\"><span class=\"cl\">  <span class=\"s2\">\"type\"</span>: <span class=\"s2\">\"node\"</span>,\n</span></span><span class=\"line\"><span class=\"cl\">  <span class=\"s2\">\"id\"</span>: id<span class=\"o\">(</span>int<span class=\"o\">)</span>,\n</span></span><span class=\"line\"><span class=\"cl\">  <span class=\"s2\">\"labels\"</span>: <span class=\"o\">[</span>label<span class=\"o\">(</span>string<span class=\"o\">)</span> X N<span class=\"o\">]</span>,\n</span></span><span class=\"line\"><span class=\"cl\">  <span class=\"s2\">\"properties\"</span>: <span class=\"o\">{</span>\n</span></span><span class=\"line\"><span class=\"cl\">    property_key<span class=\"o\">(</span>string<span class=\"o\">)</span>: property_value X N\n</span></span><span class=\"line\"><span class=\"cl\">  <span class=\"o\">}</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">}</span>\n</span></span></pre></div>\n<p>The format for a relationship object in JSON is:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\"><span class=\"o\">{</span>\n</span></span><span class=\"line\"><span class=\"cl\">  <span class=\"s2\">\"type\"</span>: <span class=\"s2\">\"relationship\"</span>,\n</span></span><span class=\"line\"><span class=\"cl\">  <span class=\"s2\">\"id\"</span>: id<span class=\"o\">(</span>int<span class=\"o\">)</span>,\n</span></span><span class=\"line\"><span class=\"cl\">  <span class=\"s2\">\"relationship\"</span>: type<span class=\"o\">(</span>string<span class=\"o\">)</span>,\n</span></span><span class=\"line\"><span class=\"cl\">  <span class=\"s2\">\"properties\"</span>: <span class=\"o\">{</span>\n</span></span><span class=\"line\"><span class=\"cl\">    property_key<span class=\"o\">(</span>string<span class=\"o\">)</span>: property_value X N\n</span></span><span class=\"line\"><span class=\"cl\">  <span class=\"o\">}</span>\n</span></span><span class=\"line\"><span class=\"cl\">  <span class=\"s2\">\"start\"</span>: src_node<span class=\"o\">(</span>node<span class=\"o\">)</span>,\n</span></span><span class=\"line\"><span class=\"cl\">  <span class=\"s2\">\"end\"</span>: dest_node<span class=\"o\">(</span>node<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">}</span>\n</span></span></pre></div>\n<h2 id=\"procedures\">Procedures</h2> <p>Procedures are invoked using the syntax:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY social <span class=\"s2\">\"CALL db.labels()\"</span>\n</span></span></pre></div>\n<p>Or the variant:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY social <span class=\"s2\">\"CALL db.labels() YIELD label\"</span>\n</span></span></pre></div>\n<p>YIELD modifiers are only required if explicitly specified; by default the value in the 'Yields' column will be emitted automatically.</p> <table> <thead> <tr> <th>Procedure</th> <th style=\"text-align:left\">Arguments</th> <th style=\"text-align:left\">Yields</th> <th style=\"text-align:left\">Description</th> </tr> </thead> <tbody> <tr> <td>db.labels</td> <td style=\"text-align:left\">none</td> <td style=\"text-align:left\"><code>label</code></td> <td style=\"text-align:left\">Yields all node labels in the graph.</td> </tr> <tr> <td>db.relationshipTypes</td> <td style=\"text-align:left\">none</td> <td style=\"text-align:left\"><code>relationshipType</code></td> <td style=\"text-align:left\">Yields all relationship types in the graph.</td> </tr> <tr> <td>db.propertyKeys</td> <td style=\"text-align:left\">none</td> <td style=\"text-align:left\"><code>propertyKey</code></td> <td style=\"text-align:left\">Yields all property keys in the graph.</td> </tr> <tr> <td>db.indexes</td> <td style=\"text-align:left\">none</td> <td style=\"text-align:left\">\n<code>type</code>, <code>label</code>, <code>properties</code>, <code>language</code>, <code>stopwords</code>, <code>entitytype</code>, <code>info</code>\n</td> <td style=\"text-align:left\">Yield all indexes in the graph, denoting whether they are exact-match or full-text and which label and properties each covers and whether they are indexing node or relationship attributes.</td> </tr> <tr> <td>db.constraints</td> <td style=\"text-align:left\">none</td> <td style=\"text-align:left\">\n<code>type</code>, <code>label</code>, <code>properties</code>, <code>entitytype</code>, <code>status</code>\n</td> <td style=\"text-align:left\">Yield all constraints in the graph, denoting constraint type (UNIQIE/MANDATORY), which label/relationship-type and properties each enforces.</td> </tr> <tr> <td>db.idx.fulltext.createNodeIndex</td> <td style=\"text-align:left\">\n<code>label</code>, <code>property</code> [, <code>property</code> ...]</td> <td style=\"text-align:left\">none</td> <td style=\"text-align:left\">Builds a full-text searchable index on a label and the 1 or more specified properties.</td> </tr> <tr> <td>db.idx.fulltext.drop</td> <td style=\"text-align:left\"><code>label</code></td> <td style=\"text-align:left\">none</td> <td style=\"text-align:left\">Deletes the full-text index associated with the given label.</td> </tr> <tr> <td>db.idx.fulltext.queryNodes</td> <td style=\"text-align:left\">\n<code>label</code>, <code>string</code>\n</td> <td style=\"text-align:left\">\n<code>node</code>, <code>score</code>\n</td> <td style=\"text-align:left\">Retrieve all nodes that contain the specified string in the full-text indexes on the given label.</td> </tr> <tr> <td>algo.pageRank</td> <td style=\"text-align:left\">\n<code>label</code>, <code>relationship-type</code>\n</td> <td style=\"text-align:left\">\n<code>node</code>, <code>score</code>\n</td> <td style=\"text-align:left\">Runs the pagerank algorithm over nodes of given label, considering only edges of given relationship type.</td> </tr> <tr> <td><a href=\"#BFS\">algo.BFS</a></td> <td style=\"text-align:left\">\n<code>source-node</code>, <code>max-level</code>, <code>relationship-type</code>\n</td> <td style=\"text-align:left\">\n<code>nodes</code>, <code>edges</code>\n</td> <td style=\"text-align:left\">Performs BFS to find all nodes connected to the source. A <code>max level</code> of 0 indicates unlimited and a non-NULL <code>relationship-type</code> defines the relationship type that may be traversed.</td> </tr> <tr> <td>dbms.procedures()</td> <td style=\"text-align:left\">none</td> <td style=\"text-align:left\">\n<code>name</code>, <code>mode</code>\n</td> <td style=\"text-align:left\">List all procedures in the DBMS, yields for every procedure its name and mode (read/write).</td> </tr> </tbody> </table> <h3 id=\"algorithms\">Algorithms</h3> <h4 id=\"bfs\">BFS</h4> <p>The breadth-first-search algorithm accepts 4 arguments:</p> <p><code>source-node (node)</code> - The root of the search.</p> <p><code>max-level (integer)</code> - If greater than zero, this argument indicates how many levels should be traversed by BFS. 1 would retrieve only the source's neighbors, 2 would retrieve all nodes within 2 hops, and so on.</p> <p><code>relationship-type (string)</code> - If this argument is NULL, all relationship types will be traversed. Otherwise, it specifies a single relationship type to perform BFS over.</p> <p>It can yield two outputs:</p> <p><code>nodes</code> - An array of all nodes connected to the source without violating the input constraints.</p> <p><code>edges</code> - An array of all edges traversed during the search. This does not necessarily contain all edges connecting nodes in the tree, as cycles or multiple edges connecting the same source and destination do not have a bearing on the reachability this algorithm tests for. These can be used to construct the directed acyclic graph that represents the BFS tree. Emitting edges incurs a small performance penalty.</p> <h2 id=\"indexing\">Indexing</h2> <p>RedisGraph supports single-property indexes for node labels and for relationship type. String, numeric, and geospatial data types can be indexed.</p> <h3 id=\"creating-an-index-for-a-node-label\">Creating an index for a node label</h3> <p>For a node label, the index creation syntax is:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH <span class=\"s2\">\"CREATE INDEX FOR (p:Person) ON (p.age)\"</span>\n</span></span></pre></div>\n<p>An old syntax is also supported:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH <span class=\"s2\">\"CREATE INDEX ON :Person(age)\"</span>\n</span></span></pre></div>\n<p>After an index is explicitly created, it will automatically be used by queries that reference that label and any indexed property in a filter.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.EXPLAIN DEMO_GRAPH <span class=\"s2\">\"MATCH (p:Person) WHERE p.age &gt; 80 RETURN p\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"s2\">\"Results\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"s2\">\"    Project\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"s2\">\"        Index Scan | (p:Person)\"</span>\n</span></span></pre></div>\n<p>This can significantly improve the runtime of queries with very specific filters. An index on <code>:employer(name)</code>, for example, will dramatically benefit the query:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"MATCH (:Employer {name: 'Dunder Mifflin'})-[:EMPLOYS]-&gt;(p:Person) RETURN p\"</span>\n</span></span></pre></div>\n<p>An example of utilizing a geospatial index to find <code>Employer</code> nodes within 5 kilometers of Scranton is:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"WITH point({latitude:41.4045886, longitude:-75.6969532}) AS scranton MATCH (e:Employer) WHERE distance(e.location, scranton) &lt; 5000 RETURN e\"</span>\n</span></span></pre></div>\n<p>Geospatial indexes can currently only be leveraged with <code>&lt;</code> and <code>&lt;=</code> filters; matching nodes outside of the given radius is performed using conventional matching.</p> <h3 id=\"creating-an-index-for-a-relationship-type\">Creating an index for a relationship type</h3> <p>For a relationship type, the index creation syntax is:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH <span class=\"s2\">\"CREATE INDEX FOR ()-[f:FOLLOW]-() ON (f.created_at)\"</span>\n</span></span></pre></div>\n<p>Then the execution plan for using the index:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.EXPLAIN DEMO_GRAPH <span class=\"s2\">\"MATCH (p:Person {id: 0})-[f:FOLLOW]-&gt;(fp) WHERE 0 &lt; f.created_at AND f.created_at &lt; 1000 RETURN fp\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"s2\">\"Results\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"s2\">\"    Project\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"s2\">\"        Edge By Index Scan | [f:FOLLOW]\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> <span class=\"s2\">\"            Node By Index Scan | (p:Person)\"</span>\n</span></span></pre></div>\n<p>This can significantly improve the runtime of queries that traverse super nodes or when we want to start traverse from relationships.</p> <h3 id=\"deleting-an-index-for-a-node-label\">Deleting an index for a node label</h3> <p>For a node label, the index deletion syntax is:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH <span class=\"s2\">\"DROP INDEX ON :Person(age)\"</span>\n</span></span></pre></div>\n<h3 id=\"deleting-an-index-for-a-relationship-type\">Deleting an index for a relationship type</h3> <p>For a relationship type, the index deletion syntax is:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH <span class=\"s2\">\"DROP INDEX ON :FOLLOW(created_at)\"</span>\n</span></span></pre></div>\n<h2 id=\"full-text-indexing\">Full-text indexing</h2> <p>RedisGraph leverages the indexing capabilities of <a href=\"https://redis.io/docs/stack/search/index.html\">RediSearch</a> to provide full-text indices through procedure calls.</p> <h3 id=\"creating-a-full-text-index-for-a-node-label\">Creating a full-text index for a node label</h3> <p>To construct a full-text index on the <code>title</code> property of all nodes with label <code>Movie</code>, use the syntax:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH <span class=\"s2\">\"CALL db.idx.fulltext.createNodeIndex('Movie', 'title')\"</span>\n</span></span></pre></div>\n<p>More properties can be added to this index by adding their names to the above set of arguments, or using this syntax again with the additional names.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH <span class=\"s2\">\"CALL db.idx.fulltext.createNodeIndex('Person', 'firstName', 'lastName')\"</span>\n</span></span></pre></div>\n<p>RediSearch provide 2 index configuration options:</p> <ol> <li>Language - Define which language to use for stemming text which is adding the base form of a word to the index. This allows the query for \"going\" to also return results for \"go\" and \"gone\", for example.</li> <li>Stopwords - These are words that are usually so common that they do not add much information to search, but take up a lot of space and CPU time in the index.</li> </ol> <p>To construct a full-text index on the <code>title</code> property using <code>German</code> language and using custom stopwords of all nodes with label <code>Movie</code>, use the syntax:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH <span class=\"s2\">\"CALL db.idx.fulltext.createNodeIndex({ label: 'Movie', language: 'German', stopwords: ['a', 'ab'] }, 'title')\"</span>\n</span></span></pre></div>\n<p>RediSearch provide 3 additional field configuration options:</p> <ol> <li>Weight - The importance of the text in the field</li> <li>Nostem - Skip stemming when indexing text</li> <li>Phonetic - Enable phonetic search on the text</li> </ol> <p>To construct a full-text index on the <code>title</code> property with phonetic search of all nodes with label <code>Movie</code>, use the syntax:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH <span class=\"s2\">\"CALL db.idx.fulltext.createNodeIndex('Movie', {field: 'title', phonetic: 'dm:en'})\"</span>\n</span></span></pre></div>\n<h3 id=\"utilizing-a-full-text-index-for-a-node-label\">Utilizing a full-text index for a node label</h3> <p>An index can be invoked to match any whole words contained within:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"CALL db.idx.fulltext.queryNodes('Movie', 'Book') YIELD node RETURN node.title\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"node.title\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"The Jungle Book\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"The Book of Life\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"Query internal execution time: 0.927409 milliseconds\"</span>\n</span></span></pre></div>\n<p>This CALL clause can be interleaved with other Cypher clauses to perform more elaborate manipulations:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"CALL db.idx.fulltext.queryNodes('Movie', 'Book') YIELD node AS m\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">WHERE m.genre = 'Adventure'\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">RETURN m ORDER BY m.rating\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"m\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"id\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">            2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1168</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"labels\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">            2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"Movie\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"properties\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">            2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"genre\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">                  2<span class=\"o\">)</span> <span class=\"s2\">\"Adventure\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">               2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"rating\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">                  2<span class=\"o\">)</span> <span class=\"s2\">\"7.6\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">               3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"votes\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">                  2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">151342</span>\n</span></span><span class=\"line\"><span class=\"cl\">               4<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"year\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">                  2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2016</span>\n</span></span><span class=\"line\"><span class=\"cl\">               5<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"title\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">                  2<span class=\"o\">)</span> <span class=\"s2\">\"The Jungle Book\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"Query internal execution time: 0.226914 milliseconds\"</span>\n</span></span></pre></div>\n<p>In addition to yielding matching nodes, full-text index scans will return the score of each node. This is the <a href=\"https://redis.io/docs/stack/search/reference/scoring/#tfidf-default\">TF-IDF</a> score of the node, which is informed by how many times the search terms appear in the node and how closely grouped they are. This can be observed in the example:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.QUERY DEMO_GRAPH\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"CALL db.idx.fulltext.queryNodes('Node', 'hello world') YIELD node, score RETURN score, node.val\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"score\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"s2\">\"node.val\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"2\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> <span class=\"s2\">\"hello world\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> <span class=\"s2\">\"hello to a different world\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"Cached execution: 1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"s2\">\"Query internal execution time: 0.335401 milliseconds\"</span>\n</span></span></pre></div>\n<h3 id=\"deleting-a-full-text-index-for-a-node-label\">Deleting a full-text index for a node label</h3> <p>For a node label, the full-text index deletion syntax is:</p> <pre tabindex=\"0\">GRAPH.QUERY DEMO_GRAPH \"CALL db.idx.fulltext.drop('Movie')\"\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/graph.query/\" class=\"_attribution-link\">https://redis.io/commands/graph.query/</a>\n  </p>\n</div>\n","graph.list/index":"<h1 class=\"command-name\">GRAPH.LIST</h1>\n<pre>GRAPH.LIST</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GRAPH.LIST</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/graph\">Graph 2.4.3</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt>  </dl> <p>Lists all graph keys in the keyspace.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; GRAPH.LIST\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> G\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> resources\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> players\n</span></span></pre></div><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/graph.list/\" class=\"_attribution-link\">https://redis.io/commands/graph.list/</a>\n  </p>\n</div>\n","graph.slowlog/index":"<h1 class=\"command-name\">GRAPH.SLOWLOG</h1>\n<pre>GRAPH.SLOWLOG</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">GRAPH.SLOWLOG graph</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/graph\">Graph 2.0.12</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt>  </dl> <p>Returns a list containing up to 10 of the slowest queries issued against the given graph ID.</p> <p>Each item in the list has the following structure:</p> <ol> <li>A Unix timestamp at which the log entry was processed.</li> <li>The issued command.</li> <li>The issued query.</li> <li>The amount of time needed for its execution, in milliseconds.</li> </ol> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.SLOWLOG graph_id\n</span></span><span class=\"line\"><span class=\"cl\"> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"1581932396\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"s2\">\"GRAPH.QUERY\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    3<span class=\"o\">)</span> <span class=\"s2\">\"MATCH (a:Person)-[:FRIEND]-&gt;(e) RETURN e.name\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    4<span class=\"o\">)</span> <span class=\"s2\">\"0.831\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"1581932396\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"s2\">\"GRAPH.QUERY\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    3<span class=\"o\">)</span> <span class=\"s2\">\"MATCH (me:Person)-[:FRIEND]-&gt;(:Person)-[:FRIEND]-&gt;(fof:Person) RETURN fof.name\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    4<span class=\"o\">)</span> <span class=\"s2\">\"0.288\"</span>\n</span></span></pre></div>\n<p>To reset a graph's slowlog issue the following command:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">GRAPH.SLOWLOG graph_id RESET\n</span></span></pre></div>\n<p>Once cleared the information is lost forever.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/graph.slowlog/\" class=\"_attribution-link\">https://redis.io/commands/graph.slowlog/</a>\n  </p>\n</div>\n","hdel/index":"<h1 class=\"command-name\">HDEL</h1>\n<pre>HDEL</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">HDEL key field [field ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of fields to be removed.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@hash</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Removes the specified fields from the hash stored at <code>key</code>. Specified fields that do not exist within this hash are ignored. If <code>key</code> does not exist, it is treated as an empty hash and this command returns <code>0</code>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of fields that were removed from the hash, not including specified but non existing fields.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nHSET myhash field1 \"foo\"\nHDEL myhash field1\nHDEL myhash field2\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 2.4.0: Accepts multiple <code>field</code> arguments.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/hdel/\" class=\"_attribution-link\">https://redis.io/commands/hdel/</a>\n  </p>\n</div>\n","hgetall/index":"<h1 class=\"command-name\">HGETALL</h1>\n<pre>HGETALL</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">HGETALL key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the size of the hash.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@hash</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns all fields and values of the hash stored at <code>key</code>. In the returned value, every field name is followed by its value, so the length of the reply is twice the size of the hash.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list of fields and their values stored in the hash, or an empty list when <code>key</code> does not exist.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nHSET myhash field1 \"Hello\"\nHSET myhash field2 \"World\"\nHGETALL myhash\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/hgetall/\" class=\"_attribution-link\">https://redis.io/commands/hgetall/</a>\n  </p>\n</div>\n","hincrby/index":"<h1 class=\"command-name\">HINCRBY</h1>\n<pre>HINCRBY</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">HINCRBY key field increment</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@hash</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Increments the number stored at <code>field</code> in the hash stored at <code>key</code> by <code>increment</code>. If <code>key</code> does not exist, a new key holding a hash is created. If <code>field</code> does not exist the value is set to <code>0</code> before the operation is performed.</p> <p>The range of values supported by <code>HINCRBY</code> is limited to 64 bit signed integers.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the value at <code>field</code> after the increment operation.</p> <h2 id=\"examples\">Examples</h2> <p>Since the <code>increment</code> argument is signed, both increment and decrement operations can be performed:</p>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nHSET myhash field 5\nHINCRBY myhash field 1\nHINCRBY myhash field -1\nHINCRBY myhash field -10\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/hincrby/\" class=\"_attribution-link\">https://redis.io/commands/hincrby/</a>\n  </p>\n</div>\n","hlen/index":"<h1 class=\"command-name\">HLEN</h1>\n<pre>HLEN</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">HLEN key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@hash</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the number of fields contained in the hash stored at <code>key</code>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: number of fields in the hash, or <code>0</code> when <code>key</code> does not exist.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nHSET myhash field1 \"Hello\"\nHSET myhash field2 \"World\"\nHLEN myhash\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/hlen/\" class=\"_attribution-link\">https://redis.io/commands/hlen/</a>\n  </p>\n</div>\n","hget/index":"<h1 class=\"command-name\">HGET</h1>\n<pre>HGET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">HGET key field</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@hash</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the value associated with <code>field</code> in the hash stored at <code>key</code>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the value associated with <code>field</code>, or <code>nil</code> when <code>field</code> is not present in the hash or <code>key</code> does not exist.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nHSET myhash field1 \"foo\"\nHGET myhash field1\nHGET myhash field2\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/hget/\" class=\"_attribution-link\">https://redis.io/commands/hget/</a>\n  </p>\n</div>\n","hscan/index":"<h1 class=\"command-name\">HSCAN</h1>\n<pre>HSCAN</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">HSCAN key cursor [MATCHpattern] [COUNTcount]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) for every call. O(N) for a complete iteration, including enough command calls for the cursor to return back to 0. N is the number of elements inside the collection.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@hash</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>See <a href=\"../scan\"><code>SCAN</code></a> for <code>HSCAN</code> documentation.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/hscan/\" class=\"_attribution-link\">https://redis.io/commands/hscan/</a>\n  </p>\n</div>\n","hincrbyfloat/index":"<h1 class=\"command-name\">HINCRBYFLOAT</h1>\n<pre>HINCRBYFLOAT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">HINCRBYFLOAT key field increment</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.6.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@hash</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Increment the specified <code>field</code> of a hash stored at <code>key</code>, and representing a floating point number, by the specified <code>increment</code>. If the increment value is negative, the result is to have the hash field value <strong>decremented</strong> instead of incremented. If the field does not exist, it is set to <code>0</code> before performing the operation. An error is returned if one of the following conditions occur:</p> <ul> <li>The field contains a value of the wrong type (not a string).</li> <li>The current field content or the specified increment are not parsable as a double precision floating point number.</li> </ul> <p>The exact behavior of this command is identical to the one of the <a href=\"../incrbyfloat\"><code>INCRBYFLOAT</code></a> command, please refer to the documentation of <a href=\"../incrbyfloat\"><code>INCRBYFLOAT</code></a> for further information.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the value of <code>field</code> after the increment.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nHSET mykey field 10.50\nHINCRBYFLOAT mykey field 0.1\nHINCRBYFLOAT mykey field -5\nHSET mykey field 5.0e3\nHINCRBYFLOAT mykey field 2.0e2\n</pre> <h2 id=\"implementation-details\">Implementation details</h2> <p>The command is always propagated in the replication link and the Append Only File as a <a href=\"../hset\"><code>HSET</code></a> operation, so that differences in the underlying floating point math implementation will not be sources of inconsistency.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/hincrbyfloat/\" class=\"_attribution-link\">https://redis.io/commands/hincrbyfloat/</a>\n  </p>\n</div>\n","incr/index":"<h1 class=\"command-name\">INCR</h1>\n<pre>INCR</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">INCR key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@string</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Increments the number stored at <code>key</code> by one. If the key does not exist, it is set to <code>0</code> before performing the operation. An error is returned if the key contains a value of the wrong type or contains a string that can not be represented as integer. This operation is limited to 64 bit signed integers.</p> <p><strong>Note</strong>: this is a string operation because Redis does not have a dedicated integer type. The string stored at the key is interpreted as a base-10 <strong>64 bit signed integer</strong> to execute the operation.</p> <p>Redis stores integers in their integer representation, so for string values that actually hold an integer, there is no overhead for storing the string representation of the integer.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the value of <code>key</code> after the increment</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"10\"\nINCR mykey\nGET mykey\n</pre> <h2 id=\"pattern-counter\">Pattern: Counter</h2> <p>The counter pattern is the most obvious thing you can do with Redis atomic increment operations. The idea is simply send an <code>INCR</code> command to Redis every time an operation occurs. For instance in a web application we may want to know how many page views this user did every day of the year.</p> <p>To do so the web application may simply increment a key every time the user performs a page view, creating the key name concatenating the User ID and a string representing the current date.</p> <p>This simple pattern can be extended in many ways:</p> <ul> <li>It is possible to use <code>INCR</code> and <a href=\"../expire\"><code>EXPIRE</code></a> together at every page view to have a counter counting only the latest N page views separated by less than the specified amount of seconds.</li> <li>A client may use GETSET in order to atomically get the current counter value and reset it to zero.</li> <li>Using other atomic increment/decrement commands like <a href=\"../decr\"><code>DECR</code></a> or <a href=\"../incrby\"><code>INCRBY</code></a> it is possible to handle values that may get bigger or smaller depending on the operations performed by the user. Imagine for instance the score of different users in an online game.</li> </ul> <h2 id=\"pattern-rate-limiter\">Pattern: Rate limiter</h2> <p>The rate limiter pattern is a special counter that is used to limit the rate at which an operation can be performed. The classical materialization of this pattern involves limiting the number of requests that can be performed against a public API.</p> <p>We provide two implementations of this pattern using <code>INCR</code>, where we assume that the problem to solve is limiting the number of API calls to a maximum of <em>ten requests per second per IP address</em>.</p> <h2 id=\"pattern-rate-limiter-1\">Pattern: Rate limiter 1</h2> <p>The more simple and direct implementation of this pattern is the following:</p> <pre tabindex=\"0\">FUNCTION LIMIT_API_CALL(ip)\nts = CURRENT_UNIX_TIME()\nkeyname = ip+\":\"+ts\nMULTI\n    INCR(keyname)\n    EXPIRE(keyname,10)\nEXEC\ncurrent = RESPONSE_OF_INCR_WITHIN_MULTI\nIF current &gt; 10 THEN\n    ERROR \"too many requests per second\"\nELSE\n    PERFORM_API_CALL()\nEND\n</pre>\n<p>Basically we have a counter for every IP, for every different second. But this counters are always incremented setting an expire of 10 seconds so that they'll be removed by Redis automatically when the current second is a different one.</p> <p>Note the used of <a href=\"../multi\"><code>MULTI</code></a> and <a href=\"../exec\"><code>EXEC</code></a> in order to make sure that we'll both increment and set the expire at every API call.</p> <h2 id=\"pattern-rate-limiter-2\">Pattern: Rate limiter 2</h2> <p>An alternative implementation uses a single counter, but is a bit more complex to get it right without race conditions. We'll examine different variants.</p> <pre tabindex=\"0\">FUNCTION LIMIT_API_CALL(ip):\ncurrent = GET(ip)\nIF current != NULL AND current &gt; 10 THEN\n    ERROR \"too many requests per second\"\nELSE\n    value = INCR(ip)\n    IF value == 1 THEN\n        EXPIRE(ip,1)\n    END\n    PERFORM_API_CALL()\nEND\n</pre>\n<p>The counter is created in a way that it only will survive one second, starting from the first request performed in the current second. If there are more than 10 requests in the same second the counter will reach a value greater than 10, otherwise it will expire and start again from 0.</p> <p><strong>In the above code there is a race condition</strong>. If for some reason the client performs the <code>INCR</code> command but does not perform the <a href=\"../expire\"><code>EXPIRE</code></a> the key will be leaked until we'll see the same IP address again.</p> <p>This can be fixed easily turning the <code>INCR</code> with optional <a href=\"../expire\"><code>EXPIRE</code></a> into a Lua script that is send using the <a href=\"../eval\"><code>EVAL</code></a> command (only available since Redis version 2.6).</p> <pre tabindex=\"0\">local current\ncurrent = redis.call(\"incr\",KEYS[1])\nif current == 1 then\n    redis.call(\"expire\",KEYS[1],1)\nend\n</pre>\n<p>There is a different way to fix this issue without using scripting, by using Redis lists instead of counters. The implementation is more complex and uses more advanced features but has the advantage of remembering the IP addresses of the clients currently performing an API call, that may be useful or not depending on the application.</p> <pre tabindex=\"0\">FUNCTION LIMIT_API_CALL(ip)\ncurrent = LLEN(ip)\nIF current &gt; 10 THEN\n    ERROR \"too many requests per second\"\nELSE\n    IF EXISTS(ip) == FALSE\n        MULTI\n            RPUSH(ip,ip)\n            EXPIRE(ip,1)\n        EXEC\n    ELSE\n        RPUSHX(ip,ip)\n    END\n    PERFORM_API_CALL()\nEND\n</pre>\n<p>The <a href=\"../rpushx\"><code>RPUSHX</code></a> command only pushes the element if the key already exists.</p> <p>Note that we have a race here, but it is not a problem: <a href=\"../exists\"><code>EXISTS</code></a> may return false but the key may be created by another client before we create it inside the <a href=\"../multi\"><code>MULTI</code></a> / <a href=\"../exec\"><code>EXEC</code></a> block. However this race will just miss an API call under rare conditions, so the rate limiting will still work correctly.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/incr/\" class=\"_attribution-link\">https://redis.io/commands/incr/</a>\n  </p>\n</div>\n","hmset/index":"<h1 class=\"command-name\">HMSET</h1>\n<pre>HMSET (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 4.0.0, this command is regarded as deprecated.</p> <p>It can be replaced by <a href=\"../hset\"><code>HSET</code></a> with multiple field-value pairs when migrating or writing new code.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">HMSET key field value [field value ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of fields being set.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@hash</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Sets the specified fields to their respective values in the hash stored at <code>key</code>. This command overwrites any specified fields already existing in the hash. If <code>key</code> does not exist, a new key holding a hash is created.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a></p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nHMSET myhash field1 \"Hello\" field2 \"World\"\nHGET myhash field1\nHGET myhash field2\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/hmset/\" class=\"_attribution-link\">https://redis.io/commands/hmset/</a>\n  </p>\n</div>\n","hstrlen/index":"<h1 class=\"command-name\">HSTRLEN</h1>\n<pre>HSTRLEN</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">HSTRLEN key field</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@hash</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the string length of the value associated with <code>field</code> in the hash stored at <code>key</code>. If the <code>key</code> or the <code>field</code> do not exist, 0 is returned.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the string length of the value associated with <code>field</code>, or zero when <code>field</code> is not present in the hash or <code>key</code> does not exist at all.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nHMSET myhash f1 HelloWorld f2 99 f3 -256\nHSTRLEN myhash f1\nHSTRLEN myhash f2\nHSTRLEN myhash f3\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/hstrlen/\" class=\"_attribution-link\">https://redis.io/commands/hstrlen/</a>\n  </p>\n</div>\n","incrbyfloat/index":"<h1 class=\"command-name\">INCRBYFLOAT</h1>\n<pre>INCRBYFLOAT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">INCRBYFLOAT key increment</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.6.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@string</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Increment the string representing a floating point number stored at <code>key</code> by the specified <code>increment</code>. By using a negative <code>increment</code> value, the result is that the value stored at the key is decremented (by the obvious properties of addition). If the key does not exist, it is set to <code>0</code> before performing the operation. An error is returned if one of the following conditions occur:</p> <ul> <li>The key contains a value of the wrong type (not a string).</li> <li>The current key content or the specified increment are not parsable as a double precision floating point number.</li> </ul> <p>If the command is successful the new incremented value is stored as the new value of the key (replacing the old one), and returned to the caller as a string.</p> <p>Both the value already contained in the string key and the increment argument can be optionally provided in exponential notation, however the value computed after the increment is stored consistently in the same format, that is, an integer number followed (if needed) by a dot, and a variable number of digits representing the decimal part of the number. Trailing zeroes are always removed.</p> <p>The precision of the output is fixed at 17 digits after the decimal point regardless of the actual internal precision of the computation.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the value of <code>key</code> after the increment.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey 10.50\nINCRBYFLOAT mykey 0.1\nINCRBYFLOAT mykey -5\nSET mykey 5.0e3\nINCRBYFLOAT mykey 2.0e2\n</pre> <h2 id=\"implementation-details\">Implementation details</h2> <p>The command is always propagated in the replication link and the Append Only File as a <a href=\"../set\"><code>SET</code></a> operation, so that differences in the underlying floating point math implementation will not be sources of inconsistency.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/incrbyfloat/\" class=\"_attribution-link\">https://redis.io/commands/incrbyfloat/</a>\n  </p>\n</div>\n","hset/index":"<h1 class=\"command-name\">HSET</h1>\n<pre>HSET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">HSET key field value [field value ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) for each field/value pair added, so O(N) to add N field/value pairs when the command is called with multiple field/value pairs.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@hash</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Sets the specified fields to their respective values in the hash stored at <code>key</code>.</p> <p>This command overwrites the values of specified fields that exist in the hash. If <code>key</code> doesn't exist, a new key holding a hash is created.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: The number of fields that were added.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nHSET myhash field1 \"Hello\"\nHGET myhash field1\nHSET myhash field2 \"Hi\" field3 \"World\"\nHGET myhash field2\nHGET myhash field3\nHGETALL myhash\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 4.0.0: Accepts multiple <code>field</code> and <code>value</code> arguments.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/hset/\" class=\"_attribution-link\">https://redis.io/commands/hset/</a>\n  </p>\n</div>\n","hrandfield/index":"<h1 class=\"command-name\">HRANDFIELD</h1>\n<pre>HRANDFIELD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">HRANDFIELD key [count [WITHVALUES]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of fields returned</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@hash</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>When called with just the <code>key</code> argument, return a random field from the hash value stored at <code>key</code>.</p> <p>If the provided <code>count</code> argument is positive, return an array of <strong>distinct fields</strong>. The array's length is either <code>count</code> or the hash's number of fields (<a href=\"../hlen\"><code>HLEN</code></a>), whichever is lower.</p> <p>If called with a negative <code>count</code>, the behavior changes and the command is allowed to return the <strong>same field multiple times</strong>. In this case, the number of returned fields is the absolute value of the specified <code>count</code>.</p> <p>The optional <code>WITHVALUES</code> modifier changes the reply so it includes the respective values of the randomly selected hash fields.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: without the additional <code>count</code> argument, the command returns a Bulk Reply with the randomly selected field, or <code>nil</code> when <code>key</code> does not exist.</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: when the additional <code>count</code> argument is passed, the command returns an array of fields, or an empty array when <code>key</code> does not exist. If the <code>WITHVALUES</code> modifier is used, the reply is a list fields and their values from the hash.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nHMSET coin heads obverse tails reverse edge null\nHRANDFIELD coin\nHRANDFIELD coin\nHRANDFIELD coin -5 WITHVALUES\n</pre> <h2 id=\"specification-of-the-behavior-when-count-is-passed\">Specification of the behavior when count is passed</h2> <p>When the <code>count</code> argument is a positive value this command behaves as follows:</p> <ul> <li>No repeated fields are returned.</li> <li>If <code>count</code> is bigger than the number of fields in the hash, the command will only return the whole hash without additional fields.</li> <li>The order of fields in the reply is not truly random, so it is up to the client to shuffle them if needed.</li> </ul> <p>When the <code>count</code> is a negative value, the behavior changes as follows:</p> <ul> <li>Repeating fields are possible.</li> <li>Exactly <code>count</code> fields, or an empty array if the hash is empty (non-existing key), are always returned.</li> <li>The order of fields in the reply is truly random.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/hrandfield/\" class=\"_attribution-link\">https://redis.io/commands/hrandfield/</a>\n  </p>\n</div>\n","hsetnx/index":"<h1 class=\"command-name\">HSETNX</h1>\n<pre>HSETNX</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">HSETNX key field value</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@hash</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Sets <code>field</code> in the hash stored at <code>key</code> to <code>value</code>, only if <code>field</code> does not yet exist. If <code>key</code> does not exist, a new key holding a hash is created. If <code>field</code> already exists, this operation has no effect.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, specifically:</p> <ul> <li>\n<code>1</code> if <code>field</code> is a new field in the hash and <code>value</code> was set.</li> <li>\n<code>0</code> if <code>field</code> already exists in the hash and no operation was performed.</li> </ul> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nHSETNX myhash field \"Hello\"\nHSETNX myhash field \"World\"\nHGET myhash field\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/hsetnx/\" class=\"_attribution-link\">https://redis.io/commands/hsetnx/</a>\n  </p>\n</div>\n","hvals/index":"<h1 class=\"command-name\">HVALS</h1>\n<pre>HVALS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">HVALS key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the size of the hash.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@hash</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns all values in the hash stored at <code>key</code>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list of values in the hash, or an empty list when <code>key</code> does not exist.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nHSET myhash field1 \"Hello\"\nHSET myhash field2 \"World\"\nHVALS myhash\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/hvals/\" class=\"_attribution-link\">https://redis.io/commands/hvals/</a>\n  </p>\n</div>\n","hkeys/index":"<h1 class=\"command-name\">HKEYS</h1>\n<pre>HKEYS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">HKEYS key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the size of the hash.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@hash</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns all field names in the hash stored at <code>key</code>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list of fields in the hash, or an empty list when <code>key</code> does not exist.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nHSET myhash field1 \"Hello\"\nHSET myhash field2 \"World\"\nHKEYS myhash\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/hkeys/\" class=\"_attribution-link\">https://redis.io/commands/hkeys/</a>\n  </p>\n</div>\n","incrby/index":"<h1 class=\"command-name\">INCRBY</h1>\n<pre>INCRBY</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">INCRBY key increment</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@string</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Increments the number stored at <code>key</code> by <code>increment</code>. If the key does not exist, it is set to <code>0</code> before performing the operation. An error is returned if the key contains a value of the wrong type or contains a string that can not be represented as integer. This operation is limited to 64 bit signed integers.</p> <p>See <a href=\"../incr\"><code>INCR</code></a> for extra information on increment/decrement operations.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the value of <code>key</code> after the increment</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"10\"\nINCRBY mykey 5\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/incrby/\" class=\"_attribution-link\">https://redis.io/commands/incrby/</a>\n  </p>\n</div>\n","hmget/index":"<h1 class=\"command-name\">HMGET</h1>\n<pre>HMGET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">HMGET key field [field ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of fields being requested.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@hash</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the values associated with the specified <code>fields</code> in the hash stored at <code>key</code>.</p> <p>For every <code>field</code> that does not exist in the hash, a <code>nil</code> value is returned. Because non-existing keys are treated as empty hashes, running <code>HMGET</code> against a non-existing <code>key</code> will return a list of <code>nil</code> values.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list of values associated with the given fields, in the same order as they are requested.</p>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nHSET myhash field1 \"Hello\"\nHSET myhash field2 \"World\"\nHMGET myhash field1 field2 nofield\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/hmget/\" class=\"_attribution-link\">https://redis.io/commands/hmget/</a>\n  </p>\n</div>\n","json.arrappend/index":"<h1 class=\"command-name\">JSON.ARRAPPEND</h1>\n<pre>JSON.ARRAPPEND</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.ARRAPPEND key [path] value [value ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) when path is evaluated to a single value, O(N) when path is evaluated to multiple values, where N is the size of the key</dd> </dl> <p>Append the <code>json</code> values into the array at <code>path</code> after the last element in it</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key to modify.</p> </details> <details open><summary><code>value</code></summary> <p>is one or more values to append to one or more arrays.</p> <div class=\"pl-4 border-l-8\"> <div class=\"font-semibold text-slate-900\">About using strings with JSON commands</div> <p>To specify a string as an array value to append, wrap the quoted string with an additional set of single quotes. Example: <code>'\"silver\"'</code>. For more detailed use, see <a href=\"#examples\">Examples</a>.</p> </div> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>path</code></summary> <p>is JSONPath to specify. Default is root <code>$</code>.</p> </details> <h2 id=\"return-value\">Return value</h2> <p><code>JSON.ARRAPEND</code> returns an <a href=\"https://redis.io/docs/reference/protocol-spec/#resp-arrays\">array</a> of integer replies for each path, the array's new size, or <code>nil</code>, if the matching JSON value is not an array. For more information about replies, see <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a>.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Add a new color to a list of product colors</b></summary> <p>Create a document for noise-cancelling headphones in black and silver colors.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET item:1 $ <span class=\"s1\">'{\"name\":\"Noise-cancelling Bluetooth headphones\",\"description\":\"Wireless Bluetooth headphones with noise-cancelling technology\",\"connection\":{\"wireless\":true,\"type\":\"Bluetooth\"},\"price\":99.98,\"stock\":25,\"colors\":[\"black\",\"silver\"]}'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Add color <code>blue</code> to the end of the <code>colors</code> array. <code>JSON.ARRAPEND</code> returns the array's new size.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.ARRAPPEND item:1 $.colors <span class=\"s1\">'\"blue\"'</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3</span></span></span></pre></div> <p>Return the new length of the <code>colors</code> array.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.GET item:1\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"{\\\"name\\\":\\\"Noise-cancelling Bluetooth headphones\\\",\\\"description\\\":\\\"Wireless Bluetooth headphones with noise-cancelling technology\\\",\\\"connection\\\":{\\\"wireless\\\":true,\\\"type\\\":\\\"Bluetooth\\\"},\\\"price\\\":99.98,\\\"stock\\\":25,\\\"colors\\\":[\\\"black\\\",\\\"silver\\\",\\\"blue\\\"]}\"</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../json.arrindex\"><code>JSON.ARRINDEX</code></a> | <a href=\"../json.arrinsert\"><code>JSON.ARRINSERT</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/json\">RedisJSON</a></li> <li><a href=\"https://redis.io/docs/stack/search/indexing_json\">Index and search JSON documents</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.arrappend/\" class=\"_attribution-link\">https://redis.io/commands/json.arrappend/</a>\n  </p>\n</div>\n","json.clear/index":"<h1 class=\"command-name\">JSON.CLEAR</h1>\n<pre>JSON.CLEAR</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.CLEAR key [path]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 2.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) when path is evaluated to a single value where N is the size of the values, O(N) when path is evaluated to multiple values, where N is the size of the key</dd> </dl> <p>Clear container values (arrays/objects) and set numeric values to <code>0</code></p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key to parse.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>path</code></summary> <p>is JSONPath to specify. Default is root <code>$</code>. Nonexisting paths are ignored.</p> </details> <h2 id=\"return\">Return</h2> <p>JSON.CLEAR returns an integer reply specified as the number of values cleared. For more information about replies, see <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a>.</p> <div class=\"pl-4 border-l-8\"> <div class=\"font-semibold text-slate-900\">Note</div> <p>Already cleared values are ignored for empty containers and zero numbers.</p> </div> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Clear container values and set numeric values to <code>0</code></b></summary> <p>Create a JSON document.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET doc $ <span class=\"s1\">'{\"obj\":{\"a\":1, \"b\":2}, \"arr\":[1,2,3], \"str\": \"foo\", \"bool\": true, \"int\": 42, \"float\": 3.14}'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Clear all container values. This returns the number of objects with cleared values.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.CLEAR doc $.*\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">4</span></span></span></pre></div> <p>Get the updated document. Note that numeric values have been set to <code>0</code>.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.GET doc $\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[{\\\"obj\\\":{},\\\"arr\\\":[],\\\"str\\\":\\\"foo\\\",\\\"bool\\\":true,\\\"int\\\":0,\\\"float\\\":0}]\"</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../json.arrindex\"><code>JSON.ARRINDEX</code></a> | <a href=\"../json.arrinsert\"><code>JSON.ARRINSERT</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/json\">RedisJSON</a></li> <li><a href=\"https://redis.io/docs/stack/search/indexing_json\">Index and search JSON documents</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.clear/\" class=\"_attribution-link\">https://redis.io/commands/json.clear/</a>\n  </p>\n</div>\n","info/index":"<h1 class=\"command-name\">INFO</h1>\n<pre>INFO</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">INFO [section [section ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>INFO</code> command returns information and statistics about the server in a format that is simple to parse by computers and easy to read by humans.</p> <p>The optional parameter can be used to select a specific section of information:</p> <ul> <li>\n<code>server</code>: General information about the Redis server</li> <li>\n<code>clients</code>: Client connections section</li> <li>\n<code>memory</code>: Memory consumption related information</li> <li>\n<code>persistence</code>: RDB and AOF related information</li> <li>\n<code>stats</code>: General statistics</li> <li>\n<code>replication</code>: Master/replica replication information</li> <li>\n<code>cpu</code>: CPU consumption statistics</li> <li>\n<code>commandstats</code>: Redis command statistics</li> <li>\n<code>latencystats</code>: Redis command latency percentile distribution statistics</li> <li>\n<code>sentinel</code>: Redis Sentinel section (only applicable to Sentinel instances)</li> <li>\n<code>cluster</code>: Redis Cluster section</li> <li>\n<code>modules</code>: Modules section</li> <li>\n<code>keyspace</code>: Database related statistics</li> <li>\n<code>modules</code>: Module related sections</li> <li>\n<code>errorstats</code>: Redis error statistics</li> </ul> <p>It can also take the following values:</p> <ul> <li>\n<code>all</code>: Return all sections (excluding module generated ones)</li> <li>\n<code>default</code>: Return only the default set of sections</li> <li>\n<code>everything</code>: Includes <code>all</code> and <code>modules</code>\n</li> </ul> <p>When no parameter is provided, the <code>default</code> option is assumed.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: as a collection of text lines.</p> <p>Lines can contain a section name (starting with a # character) or a property. All the properties are in the form of <code>field:value</code> terminated by <code>\\r\\n</code>.</p>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nINFO\n</pre> <h2 id=\"notes\">Notes</h2> <p>Please note depending on the version of Redis some of the fields have been added or removed. A robust client application should therefore parse the result of this command by skipping unknown properties, and gracefully handle missing fields.</p> <p>Here is the description of fields for Redis &gt;= 2.4.</p> <p>Here is the meaning of all fields in the <strong>server</strong> section:</p> <ul> <li>\n<code>redis_version</code>: Version of the Redis server</li> <li>\n<code>redis_git_sha1</code>: Git SHA1</li> <li>\n<code>redis_git_dirty</code>: Git dirty flag</li> <li>\n<code>redis_build_id</code>: The build id</li> <li>\n<code>redis_mode</code>: The server's mode (\"standalone\", \"sentinel\" or \"cluster\")</li> <li>\n<code>os</code>: Operating system hosting the Redis server</li> <li>\n<code>arch_bits</code>: Architecture (32 or 64 bits)</li> <li>\n<code>multiplexing_api</code>: Event loop mechanism used by Redis</li> <li>\n<code>atomicvar_api</code>: Atomicvar API used by Redis</li> <li>\n<code>gcc_version</code>: Version of the GCC compiler used to compile the Redis server</li> <li>\n<code>process_id</code>: PID of the server process</li> <li>\n<code>process_supervised</code>: Supervised system (\"upstart\", \"systemd\", \"unknown\" or \"no\")</li> <li>\n<code>run_id</code>: Random value identifying the Redis server (to be used by Sentinel and Cluster)</li> <li>\n<code>tcp_port</code>: TCP/IP listen port</li> <li>\n<code>server_time_usec</code>: Epoch-based system time with microsecond precision</li> <li>\n<code>uptime_in_seconds</code>: Number of seconds since Redis server start</li> <li>\n<code>uptime_in_days</code>: Same value expressed in days</li> <li>\n<code>hz</code>: The server's current frequency setting</li> <li>\n<code>configured_hz</code>: The server's configured frequency setting</li> <li>\n<code>lru_clock</code>: Clock incrementing every minute, for LRU management</li> <li>\n<code>executable</code>: The path to the server's executable</li> <li>\n<code>config_file</code>: The path to the config file</li> <li>\n<code>io_threads_active</code>: Flag indicating if I/O threads are active</li> <li>\n<code>shutdown_in_milliseconds</code>: The maximum time remaining for replicas to catch up the replication before completing the shutdown sequence. This field is only present during shutdown.</li> </ul> <p>Here is the meaning of all fields in the <strong>clients</strong> section:</p> <ul> <li>\n<code>connected_clients</code>: Number of client connections (excluding connections from replicas)</li> <li>\n<code>cluster_connections</code>: An approximation of the number of sockets used by the cluster's bus</li> <li>\n<code>maxclients</code>: The value of the <code>maxclients</code> configuration directive. This is the upper limit for the sum of <code>connected_clients</code>, <code>connected_slaves</code> and <code>cluster_connections</code>.</li> <li>\n<code>client_recent_max_input_buffer</code>: Biggest input buffer among current client connections</li> <li>\n<code>client_recent_max_output_buffer</code>: Biggest output buffer among current client connections</li> <li>\n<code>blocked_clients</code>: Number of clients pending on a blocking call (<a href=\"../blpop\"><code>BLPOP</code></a>, <a href=\"../brpop\"><code>BRPOP</code></a>, <a href=\"../brpoplpush\"><code>BRPOPLPUSH</code></a>, <a href=\"../blmove\"><code>BLMOVE</code></a>, <a href=\"../bzpopmin\"><code>BZPOPMIN</code></a>, <a href=\"../bzpopmax\"><code>BZPOPMAX</code></a>)</li> <li>\n<code>tracking_clients</code>: Number of clients being tracked (<a href=\"../client-tracking\"><code>CLIENT TRACKING</code></a>)</li> <li>\n<code>clients_in_timeout_table</code>: Number of clients in the clients timeout table</li> </ul> <p>Here is the meaning of all fields in the <strong>memory</strong> section:</p> <ul> <li>\n<code>used_memory</code>: Total number of bytes allocated by Redis using its allocator (either standard <strong>libc</strong>, <strong>jemalloc</strong>, or an alternative allocator such as <a href=\"http://code.google.com/p/google-perftools/\"><strong>tcmalloc</strong></a>)</li> <li>\n<code>used_memory_human</code>: Human readable representation of previous value</li> <li>\n<code>used_memory_rss</code>: Number of bytes that Redis allocated as seen by the operating system (a.k.a resident set size). This is the number reported by tools such as <code>top(1)</code> and <code>ps(1)</code>\n</li> <li>\n<code>used_memory_rss_human</code>: Human readable representation of previous value</li> <li>\n<code>used_memory_peak</code>: Peak memory consumed by Redis (in bytes)</li> <li>\n<code>used_memory_peak_human</code>: Human readable representation of previous value</li> <li>\n<code>used_memory_peak_perc</code>: The percentage of <code>used_memory_peak</code> out of <code>used_memory</code>\n</li> <li>\n<code>used_memory_overhead</code>: The sum in bytes of all overheads that the server allocated for managing its internal data structures</li> <li>\n<code>used_memory_startup</code>: Initial amount of memory consumed by Redis at startup in bytes</li> <li>\n<code>used_memory_dataset</code>: The size in bytes of the dataset (<code>used_memory_overhead</code> subtracted from <code>used_memory</code>)</li> <li>\n<code>used_memory_dataset_perc</code>: The percentage of <code>used_memory_dataset</code> out of the net memory usage (<code>used_memory</code> minus <code>used_memory_startup</code>)</li> <li>\n<code>total_system_memory</code>: The total amount of memory that the Redis host has</li> <li>\n<code>total_system_memory_human</code>: Human readable representation of previous value</li> <li>\n<code>used_memory_lua</code>: Number of bytes used by the Lua engine</li> <li>\n<code>used_memory_lua_human</code>: Human readable representation of previous value</li> <li>\n<code>used_memory_scripts</code>: Number of bytes used by cached Lua scripts</li> <li>\n<code>used_memory_scripts_human</code>: Human readable representation of previous value</li> <li>\n<code>maxmemory</code>: The value of the <code>maxmemory</code> configuration directive</li> <li>\n<code>maxmemory_human</code>: Human readable representation of previous value</li> <li>\n<code>maxmemory_policy</code>: The value of the <code>maxmemory-policy</code> configuration directive</li> <li>\n<code>mem_fragmentation_ratio</code>: Ratio between <code>used_memory_rss</code> and <code>used_memory</code>. Note that this doesn't only includes fragmentation, but also other process overheads (see the <code>allocator_*</code> metrics), and also overheads like code, shared libraries, stack, etc.</li> <li>\n<code>mem_fragmentation_bytes</code>: Delta between <code>used_memory_rss</code> and <code>used_memory</code>. Note that when the total fragmentation bytes is low (few megabytes), a high ratio (e.g. 1.5 and above) is not an indication of an issue.</li> <li>\n<code>allocator_frag_ratio:</code>: Ratio between <code>allocator_active</code> and <code>allocator_allocated</code>. This is the true (external) fragmentation metric (not <code>mem_fragmentation_ratio</code>).</li> <li>\n<code>allocator_frag_bytes</code> Delta between <code>allocator_active</code> and <code>allocator_allocated</code>. See note about <code>mem_fragmentation_bytes</code>.</li> <li>\n<code>allocator_rss_ratio</code>: Ratio between <code>allocator_resident</code> and <code>allocator_active</code>. This usually indicates pages that the allocator can and probably will soon release back to the OS.</li> <li>\n<code>allocator_rss_bytes</code>: Delta between <code>allocator_resident</code> and <code>allocator_active</code>\n</li> <li>\n<code>rss_overhead_ratio</code>: Ratio between <code>used_memory_rss</code> (the process RSS) and <code>allocator_resident</code>. This includes RSS overheads that are not allocator or heap related.</li> <li>\n<code>rss_overhead_bytes</code>: Delta between <code>used_memory_rss</code> (the process RSS) and <code>allocator_resident</code>\n</li> <li>\n<code>allocator_allocated</code>: Total bytes allocated form the allocator, including internal-fragmentation. Normally the same as <code>used_memory</code>.</li> <li>\n<code>allocator_active</code>: Total bytes in the allocator active pages, this includes external-fragmentation.</li> <li>\n<code>allocator_resident</code>: Total bytes resident (RSS) in the allocator, this includes pages that can be released to the OS (by <a href=\"../memory-purge\"><code>MEMORY PURGE</code></a>, or just waiting).</li> <li>\n<code>mem_not_counted_for_evict</code>: Used memory that's not counted for key eviction. This is basically transient replica and AOF buffers.</li> <li>\n<code>mem_clients_slaves</code>: Memory used by replica clients - Starting Redis 7.0, replica buffers share memory with the replication backlog, so this field can show 0 when replicas don't trigger an increase of memory usage.</li> <li>\n<code>mem_clients_normal</code>: Memory used by normal clients</li> <li>\n<code>mem_cluster_links</code>: Memory used by links to peers on the cluster bus when cluster mode is enabled.</li> <li>\n<code>mem_aof_buffer</code>: Transient memory used for AOF and AOF rewrite buffers</li> <li>\n<code>mem_replication_backlog</code>: Memory used by replication backlog</li> <li>\n<code>mem_total_replication_buffers</code>: Total memory consumed for replication buffers - Added in Redis 7.0.</li> <li>\n<code>mem_allocator</code>: Memory allocator, chosen at compile time.</li> <li>\n<code>active_defrag_running</code>: When <code>activedefrag</code> is enabled, this indicates whether defragmentation is currently active, and the CPU percentage it intends to utilize.</li> <li>\n<code>lazyfree_pending_objects</code>: The number of objects waiting to be freed (as a result of calling <a href=\"../unlink\"><code>UNLINK</code></a>, or <a href=\"../flushdb\"><code>FLUSHDB</code></a> and <a href=\"../flushall\"><code>FLUSHALL</code></a> with the <strong>ASYNC</strong> option)</li> <li>\n<code>lazyfreed_objects</code>: The number of objects that have been lazy freed.</li> </ul> <p>Ideally, the <code>used_memory_rss</code> value should be only slightly higher than <code>used_memory</code>. When rss &gt;&gt; used, a large difference may mean there is (external) memory fragmentation, which can be evaluated by checking <code>allocator_frag_ratio</code>, <code>allocator_frag_bytes</code>. When used &gt;&gt; rss, it means part of Redis memory has been swapped off by the operating system: expect some significant latencies.</p> <p>Because Redis does not have control over how its allocations are mapped to memory pages, high <code>used_memory_rss</code> is often the result of a spike in memory usage.</p> <p>When Redis frees memory, the memory is given back to the allocator, and the allocator may or may not give the memory back to the system. There may be a discrepancy between the <code>used_memory</code> value and memory consumption as reported by the operating system. It may be due to the fact memory has been used and released by Redis, but not given back to the system. The <code>used_memory_peak</code> value is generally useful to check this point.</p> <p>Additional introspective information about the server's memory can be obtained by referring to the <a href=\"../memory-stats\"><code>MEMORY STATS</code></a> command and the <a href=\"../memory-doctor\"><code>MEMORY DOCTOR</code></a>.</p> <p>Here is the meaning of all fields in the <strong>persistence</strong> section:</p> <ul> <li>\n<code>loading</code>: Flag indicating if the load of a dump file is on-going</li> <li>\n<code>async_loading</code>: Currently loading replication data-set asynchronously while serving old data. This means <code>repl-diskless-load</code> is enabled and set to <code>swapdb</code>. Added in Redis 7.0.</li> <li>\n<code>current_cow_peak</code>: The peak size in bytes of copy-on-write memory while a child fork is running</li> <li>\n<code>current_cow_size</code>: The size in bytes of copy-on-write memory while a child fork is running</li> <li>\n<code>current_cow_size_age</code>: The age, in seconds, of the <code>current_cow_size</code> value.</li> <li>\n<code>current_fork_perc</code>: The percentage of progress of the current fork process. For AOF and RDB forks it is the percentage of <code>current_save_keys_processed</code> out of <code>current_save_keys_total</code>.</li> <li>\n<code>current_save_keys_processed</code>: Number of keys processed by the current save operation</li> <li>\n<code>current_save_keys_total</code>: Number of keys at the beginning of the current save operation</li> <li>\n<code>rdb_changes_since_last_save</code>: Number of changes since the last dump</li> <li>\n<code>rdb_bgsave_in_progress</code>: Flag indicating a RDB save is on-going</li> <li>\n<code>rdb_last_save_time</code>: Epoch-based timestamp of last successful RDB save</li> <li>\n<code>rdb_last_bgsave_status</code>: Status of the last RDB save operation</li> <li>\n<code>rdb_last_bgsave_time_sec</code>: Duration of the last RDB save operation in seconds</li> <li>\n<code>rdb_current_bgsave_time_sec</code>: Duration of the on-going RDB save operation if any</li> <li>\n<code>rdb_last_cow_size</code>: The size in bytes of copy-on-write memory during the last RDB save operation</li> <li>\n<code>rdb_last_load_keys_expired</code>: Number of volatile keys deleted during the last RDB loading. Added in Redis 7.0.</li> <li>\n<code>rdb_last_load_keys_loaded</code>: Number of keys loaded during the last RDB loading. Added in Redis 7.0.</li> <li>\n<code>aof_enabled</code>: Flag indicating AOF logging is activated</li> <li>\n<code>aof_rewrite_in_progress</code>: Flag indicating a AOF rewrite operation is on-going</li> <li>\n<code>aof_rewrite_scheduled</code>: Flag indicating an AOF rewrite operation will be scheduled once the on-going RDB save is complete.</li> <li>\n<code>aof_last_rewrite_time_sec</code>: Duration of the last AOF rewrite operation in seconds</li> <li>\n<code>aof_current_rewrite_time_sec</code>: Duration of the on-going AOF rewrite operation if any</li> <li>\n<code>aof_last_bgrewrite_status</code>: Status of the last AOF rewrite operation</li> <li>\n<code>aof_last_write_status</code>: Status of the last write operation to the AOF</li> <li>\n<code>aof_last_cow_size</code>: The size in bytes of copy-on-write memory during the last AOF rewrite operation</li> <li>\n<code>module_fork_in_progress</code>: Flag indicating a module fork is on-going</li> <li>\n<code>module_fork_last_cow_size</code>: The size in bytes of copy-on-write memory during the last module fork operation</li> <li>\n<code>aof_rewrites</code>: Number of AOF rewrites performed since startup</li> <li>\n<code>rdb_saves</code>: Number of RDB snapshots performed since startup</li> </ul> <p><code>rdb_changes_since_last_save</code> refers to the number of operations that produced some kind of changes in the dataset since the last time either <a href=\"../save\"><code>SAVE</code></a> or <a href=\"../bgsave\"><code>BGSAVE</code></a> was called.</p> <p>If AOF is activated, these additional fields will be added:</p> <ul> <li>\n<code>aof_current_size</code>: AOF current file size</li> <li>\n<code>aof_base_size</code>: AOF file size on latest startup or rewrite</li> <li>\n<code>aof_pending_rewrite</code>: Flag indicating an AOF rewrite operation will be scheduled once the on-going RDB save is complete.</li> <li>\n<code>aof_buffer_length</code>: Size of the AOF buffer</li> <li>\n<code>aof_rewrite_buffer_length</code>: Size of the AOF rewrite buffer. Note this field was removed in Redis 7.0</li> <li>\n<code>aof_pending_bio_fsync</code>: Number of fsync pending jobs in background I/O queue</li> <li>\n<code>aof_delayed_fsync</code>: Delayed fsync counter</li> </ul> <p>If a load operation is on-going, these additional fields will be added:</p> <ul> <li>\n<code>loading_start_time</code>: Epoch-based timestamp of the start of the load operation</li> <li>\n<code>loading_total_bytes</code>: Total file size</li> <li>\n<code>loading_rdb_used_mem</code>: The memory usage of the server that had generated the RDB file at the time of the file's creation</li> <li>\n<code>loading_loaded_bytes</code>: Number of bytes already loaded</li> <li>\n<code>loading_loaded_perc</code>: Same value expressed as a percentage</li> <li>\n<code>loading_eta_seconds</code>: ETA in seconds for the load to be complete</li> </ul> <p>Here is the meaning of all fields in the <strong>stats</strong> section:</p> <ul> <li>\n<code>total_connections_received</code>: Total number of connections accepted by the server</li> <li>\n<code>total_commands_processed</code>: Total number of commands processed by the server</li> <li>\n<code>instantaneous_ops_per_sec</code>: Number of commands processed per second</li> <li>\n<code>total_net_input_bytes</code>: The total number of bytes read from the network</li> <li>\n<code>total_net_output_bytes</code>: The total number of bytes written to the network</li> <li>\n<code>total_net_repl_input_bytes</code>: The total number of bytes read from the network for replication purposes</li> <li>\n<code>total_net_repl_output_bytes</code>: The total number of bytes written to the network for replication purposes</li> <li>\n<code>instantaneous_input_kbps</code>: The network's read rate per second in KB/sec</li> <li>\n<code>instantaneous_output_kbps</code>: The network's write rate per second in KB/sec</li> <li>\n<code>instantaneous_input_repl_kbps</code>: The network's read rate per second in KB/sec for replication purposes</li> <li>\n<code>instantaneous_output_repl_kbps</code>: The network's write rate per second in KB/sec for replication purposes</li> <li>\n<code>rejected_connections</code>: Number of connections rejected because of <code>maxclients</code> limit</li> <li>\n<code>sync_full</code>: The number of full resyncs with replicas</li> <li>\n<code>sync_partial_ok</code>: The number of accepted partial resync requests</li> <li>\n<code>sync_partial_err</code>: The number of denied partial resync requests</li> <li>\n<code>expired_keys</code>: Total number of key expiration events</li> <li>\n<code>expired_stale_perc</code>: The percentage of keys probably expired</li> <li>\n<code>expired_time_cap_reached_count</code>: The count of times that active expiry cycles have stopped early</li> <li>\n<code>expire_cycle_cpu_milliseconds</code>: The cumulative amount of time spend on active expiry cycles</li> <li>\n<code>evicted_keys</code>: Number of evicted keys due to <code>maxmemory</code> limit</li> <li>\n<code>evicted_clients</code>: Number of evicted clients due to <code>maxmemory-clients</code> limit. Added in Redis 7.0.</li> <li>\n<code>total_eviction_exceeded_time</code>: Total time <code>used_memory</code> was greater than <code>maxmemory</code> since server startup, in milliseconds</li> <li>\n<code>current_eviction_exceeded_time</code>: The time passed since <code>used_memory</code> last rose above <code>maxmemory</code>, in milliseconds</li> <li>\n<code>keyspace_hits</code>: Number of successful lookup of keys in the main dictionary</li> <li>\n<code>keyspace_misses</code>: Number of failed lookup of keys in the main dictionary</li> <li>\n<code>pubsub_channels</code>: Global number of pub/sub channels with client subscriptions</li> <li>\n<code>pubsub_patterns</code>: Global number of pub/sub pattern with client subscriptions</li> <li>\n<code>pubsubshard_channels</code>: Global number of pub/sub shard channels with client subscriptions. Added in Redis 7.0.3</li> <li>\n<code>latest_fork_usec</code>: Duration of the latest fork operation in microseconds</li> <li>\n<code>total_forks</code>: Total number of fork operations since the server start</li> <li>\n<code>migrate_cached_sockets</code>: The number of sockets open for <a href=\"../migrate\"><code>MIGRATE</code></a> purposes</li> <li>\n<code>slave_expires_tracked_keys</code>: The number of keys tracked for expiry purposes (applicable only to writable replicas)</li> <li>\n<code>active_defrag_hits</code>: Number of value reallocations performed by active the defragmentation process</li> <li>\n<code>active_defrag_misses</code>: Number of aborted value reallocations started by the active defragmentation process</li> <li>\n<code>active_defrag_key_hits</code>: Number of keys that were actively defragmented</li> <li>\n<code>active_defrag_key_misses</code>: Number of keys that were skipped by the active defragmentation process</li> <li>\n<code>total_active_defrag_time</code>: Total time memory fragmentation was over the limit, in milliseconds</li> <li>\n<code>current_active_defrag_time</code>: The time passed since memory fragmentation last was over the limit, in milliseconds</li> <li>\n<code>tracking_total_keys</code>: Number of keys being tracked by the server</li> <li>\n<code>tracking_total_items</code>: Number of items, that is the sum of clients number for each key, that are being tracked</li> <li>\n<code>tracking_total_prefixes</code>: Number of tracked prefixes in server's prefix table (only applicable for broadcast mode)</li> <li>\n<code>unexpected_error_replies</code>: Number of unexpected error replies, that are types of errors from an AOF load or replication</li> <li>\n<code>total_error_replies</code>: Total number of issued error replies, that is the sum of rejected commands (errors prior command execution) and failed commands (errors within the command execution)</li> <li>\n<code>dump_payload_sanitizations</code>: Total number of dump payload deep integrity validations (see <code>sanitize-dump-payload</code> config).</li> <li>\n<code>total_reads_processed</code>: Total number of read events processed</li> <li>\n<code>total_writes_processed</code>: Total number of write events processed</li> <li>\n<code>io_threaded_reads_processed</code>: Number of read events processed by the main and I/O threads</li> <li>\n<code>io_threaded_writes_processed</code>: Number of write events processed by the main and I/O threads</li> <li>\n<code>acl_access_denied_auth</code>: Number of authentication failures</li> <li>\n<code>acl_access_denied_cmd</code>: Number of commands rejected because of access denied to the command</li> <li>\n<code>acl_access_denied_key</code>: Number of commands rejected because of access denied to a key</li> <li>\n<code>acl_access_denied_channel</code>: Number of commands rejected because of access denied to a channel</li> </ul> <p>Here is the meaning of all fields in the <strong>replication</strong> section:</p> <ul> <li>\n<code>role</code>: Value is \"master\" if the instance is replica of no one, or \"slave\" if the instance is a replica of some master instance. Note that a replica can be master of another replica (chained replication).</li> <li>\n<code>master_failover_state</code>: The state of an ongoing failover, if any.</li> <li>\n<code>master_replid</code>: The replication ID of the Redis server.</li> <li>\n<code>master_replid2</code>: The secondary replication ID, used for PSYNC after a failover.</li> <li>\n<code>master_repl_offset</code>: The server's current replication offset</li> <li>\n<code>second_repl_offset</code>: The offset up to which replication IDs are accepted</li> <li>\n<code>repl_backlog_active</code>: Flag indicating replication backlog is active</li> <li>\n<code>repl_backlog_size</code>: Total size in bytes of the replication backlog buffer</li> <li>\n<code>repl_backlog_first_byte_offset</code>: The master offset of the replication backlog buffer</li> <li>\n<code>repl_backlog_histlen</code>: Size in bytes of the data in the replication backlog buffer</li> </ul> <p>If the instance is a replica, these additional fields are provided:</p> <ul> <li>\n<code>master_host</code>: Host or IP address of the master</li> <li>\n<code>master_port</code>: Master listening TCP port</li> <li>\n<code>master_link_status</code>: Status of the link (up/down)</li> <li>\n<code>master_last_io_seconds_ago</code>: Number of seconds since the last interaction with master</li> <li>\n<code>master_sync_in_progress</code>: Indicate the master is syncing to the replica</li> <li>\n<code>slave_read_repl_offset</code>: The read replication offset of the replica instance.</li> <li>\n<code>slave_repl_offset</code>: The replication offset of the replica instance</li> <li>\n<code>slave_priority</code>: The priority of the instance as a candidate for failover</li> <li>\n<code>slave_read_only</code>: Flag indicating if the replica is read-only</li> <li>\n<code>replica_announced</code>: Flag indicating if the replica is announced by Sentinel.</li> </ul> <p>If a SYNC operation is on-going, these additional fields are provided:</p> <ul> <li>\n<code>master_sync_total_bytes</code>: Total number of bytes that need to be transferred. this may be 0 when the size is unknown (for example, when the <code>repl-diskless-sync</code> configuration directive is used)</li> <li>\n<code>master_sync_read_bytes</code>: Number of bytes already transferred</li> <li>\n<code>master_sync_left_bytes</code>: Number of bytes left before syncing is complete (may be negative when <code>master_sync_total_bytes</code> is 0)</li> <li>\n<code>master_sync_perc</code>: The percentage <code>master_sync_read_bytes</code> from <code>master_sync_total_bytes</code>, or an approximation that uses <code>loading_rdb_used_mem</code> when <code>master_sync_total_bytes</code> is 0</li> <li>\n<code>master_sync_last_io_seconds_ago</code>: Number of seconds since last transfer I/O during a SYNC operation</li> </ul> <p>If the link between master and replica is down, an additional field is provided:</p> <ul> <li>\n<code>master_link_down_since_seconds</code>: Number of seconds since the link is down</li> </ul> <p>The following field is always provided:</p> <ul> <li>\n<code>connected_slaves</code>: Number of connected replicas</li> </ul> <p>If the server is configured with the <code>min-slaves-to-write</code> (or starting with Redis 5 with the <code>min-replicas-to-write</code>) directive, an additional field is provided:</p> <ul> <li>\n<code>min_slaves_good_slaves</code>: Number of replicas currently considered good</li> </ul> <p>For each replica, the following line is added:</p> <ul> <li>\n<code>slaveXXX</code>: id, IP address, port, state, offset, lag</li> </ul> <p>Here is the meaning of all fields in the <strong>cpu</strong> section:</p> <ul> <li>\n<code>used_cpu_sys</code>: System CPU consumed by the Redis server, which is the sum of system CPU consumed by all threads of the server process (main thread and background threads)</li> <li>\n<code>used_cpu_user</code>: User CPU consumed by the Redis server, which is the sum of user CPU consumed by all threads of the server process (main thread and background threads)</li> <li>\n<code>used_cpu_sys_children</code>: System CPU consumed by the background processes</li> <li>\n<code>used_cpu_user_children</code>: User CPU consumed by the background processes</li> <li>\n<code>used_cpu_sys_main_thread</code>: System CPU consumed by the Redis server main thread</li> <li>\n<code>used_cpu_user_main_thread</code>: User CPU consumed by the Redis server main thread</li> </ul> <p>The <strong>commandstats</strong> section provides statistics based on the command type, including the number of calls that reached command execution (not rejected), the total CPU time consumed by these commands, the average CPU consumed per command execution, the number of rejected calls (errors prior command execution), and the number of failed calls (errors within the command execution).</p> <p>For each command type, the following line is added:</p> <ul> <li>\n<code>cmdstat_XXX</code>: <code>calls=XXX,usec=XXX,usec_per_call=XXX,rejected_calls=XXX,failed_calls=XXX</code>\n</li> </ul> <p>The <strong>latencystats</strong> section provides latency percentile distribution statistics based on the command type.</p> <p>By default, the exported latency percentiles are the p50, p99, and p999. If you need to change the exported percentiles, use <code>CONFIG SET latency-tracking-info-percentiles \"50.0 99.0 99.9\"</code>.</p> <p>This section requires the extended latency monitoring feature to be enabled (by default it's enabled). If you need to enable it, use <code>CONFIG SET latency-tracking yes</code>.</p> <p>For each command type, the following line is added:</p> <ul> <li><code>latency_percentiles_usec_XXX: p&lt;percentile 1&gt;=&lt;percentile 1 value&gt;,p&lt;percentile 2&gt;=&lt;percentile 2 value&gt;,...</code></li> </ul> <p>The <strong>errorstats</strong> section enables keeping track of the different errors that occurred within Redis, based upon the reply error prefix ( The first word after the \"-\", up to the first space. Example: <code>ERR</code> ).</p> <p>For each error type, the following line is added:</p> <ul> <li>\n<code>errorstat_XXX</code>: <code>count=XXX</code>\n</li> </ul> <p>The <strong>sentinel</strong> section is only available in Redis Sentinel instances. It consists of the following fields:</p> <ul> <li>\n<code>sentinel_masters</code>: Number of Redis masters monitored by this Sentinel instance</li> <li>\n<code>sentinel_tilt</code>: A value of 1 means this sentinel is in TILT mode</li> <li>\n<code>sentinel_tilt_since_seconds</code>: Duration in seconds of current TILT, or -1 if not TILTed. Added in Redis 7.0.0</li> <li>\n<code>sentinel_running_scripts</code>: The number of scripts this Sentinel is currently executing</li> <li>\n<code>sentinel_scripts_queue_length</code>: The length of the queue of user scripts that are pending execution</li> <li>\n<code>sentinel_simulate_failure_flags</code>: Flags for the <code>SENTINEL SIMULATE-FAILURE</code> command</li> </ul> <p>The <strong>cluster</strong> section currently only contains a unique field:</p> <ul> <li>\n<code>cluster_enabled</code>: Indicate Redis cluster is enabled</li> </ul> <p>The <strong>modules</strong> section contains additional information about loaded modules if the modules provide it. The field part of properties lines in this section is always prefixed with the module's name.</p> <p>The <strong>keyspace</strong> section provides statistics on the main dictionary of each database. The statistics are the number of keys, and the number of keys with an expiration.</p> <p>For each database, the following line is added:</p> <ul> <li>\n<code>dbXXX</code>: <code>keys=XXX,expires=XXX</code>\n</li> </ul> <p><strong>A note about the word slave used in this man page</strong>: Starting with Redis 5, if not for backward compatibility, the Redis project no longer uses the word slave. Unfortunately in this command the word slave is part of the protocol, so we'll be able to remove such occurrences only when this API will be naturally deprecated.</p> <p><strong>Modules generated sections</strong>: Starting with Redis 6, modules can inject their info into the <code>INFO</code> command, these are excluded by default even when the <code>all</code> argument is provided (it will include a list of loaded modules but not their generated info fields). To get these you must use either the <code>modules</code> argument or <code>everything</code>.,</p> <h2>History</h2> <ul> <li>Starting with Redis version 7.0.0: Added support for taking multiple section arguments.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/info/\" class=\"_attribution-link\">https://redis.io/commands/info/</a>\n  </p>\n</div>\n","json.arrpop/index":"<h1 class=\"command-name\">JSON.ARRPOP</h1>\n<pre>JSON.ARRPOP</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.ARRPOP key [path [index]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) when path is evaluated to a single value where N is the size of the array and the specified index is not the last element, O(1) when path is evaluated to a single value and the specified index is the last element, or O(N) when path is evaluated to multiple values, where N is the size of the key</dd> </dl> <p>Remove and return an element from the index in the array</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key to modify.</p> </details> <details open><summary><code>index</code></summary> <p>is position in the array to start popping from. Default is <code>-1</code>, meaning the last element. Out-of-range indexes round to their respective array ends. Popping an empty array returns null.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>path</code></summary> <p>is JSONPath to specify. Default is root <code>$</code>.</p> </details> <h2 id=\"return\">Return</h2> <p><code>JSON.ARRPOP</code> returns an <a href=\"https://redis.io/docs/reference/protocol-spec/#resp-arrays\">array</a> of bulk string replies for each path, each reply is the popped JSON value, or <code>nil</code>, if the matching JSON value is not an array. For more information about replies, see <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a>.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Pop a value from an index and insert a new value</b></summary> <p>Create two headphone products with maximum sound levels.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET key $ <span class=\"s1\">'[{\"name\":\"Healthy headphones\",\"description\":\"Wireless Bluetooth headphones with noise-cancelling technology\",\"connection\":{\"wireless\":true,\"type\":\"Bluetooth\"},\"price\":99.98,\"stock\":25,\"colors\":[\"black\",\"silver\"],\"max_level\":[60,70,80]},{\"name\":\"Noisy headphones\",\"description\":\"Wireless Bluetooth headphones with noise-cancelling technology\",\"connection\":{\"wireless\":true,\"type\":\"Bluetooth\"},\"price\":99.98,\"stock\":25,\"colors\":[\"black\",\"silver\"],\"max_level\":[80,90,100,120]}]'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Get all maximum values for the second product.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.GET key $.<span class=\"o\">[</span>1<span class=\"o\">]</span>.max_level\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[[80,90,100,120]]\"</span></span></span></pre></div> <p>Update the <code>max_level</code> field of the product: remove an unavailable value and add a newly available value.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.ARRPOP key $.<span class=\"o\">[</span>1<span class=\"o\">]</span>.max_level <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"s2\">\"80\"</span></span></span></pre></div> <p>Get the updated array.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.GET key $.<span class=\"o\">[</span>1<span class=\"o\">]</span>.max_level\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[[90,100,120]]\"</span></span></span></pre></div> <p>Now insert a new lowest value.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.ARRINSERT key $.<span class=\"o\">[</span>1<span class=\"o\">]</span>.max_level <span class=\"m\">0</span> <span class=\"m\">85</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">4</span></span></span></pre></div> <p>Get the updated array.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.GET key $.<span class=\"o\">[</span>1<span class=\"o\">]</span>.max_level\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[[85,90,100,120]]\"</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../json.arrappend\"><code>JSON.ARRAPPEND</code></a> | <a href=\"../json.arrindex\"><code>JSON.ARRINDEX</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/json\">RedisJSON</a></li> <li><a href=\"https://redis.io/docs/stack/search/indexing_json\">Index and search JSON documents</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.arrpop/\" class=\"_attribution-link\">https://redis.io/commands/json.arrpop/</a>\n  </p>\n</div>\n","json.nummultby/index":"<h1 class=\"command-name\">JSON.NUMMULTBY</h1>\n<pre>JSON.NUMMULTBY (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 2.0, this command is regarded as deprecated.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.NUMMULTBY key path value</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) when path is evaluated to a single value, O(N) when path is evaluated to multiple values, where N is the size of the key</dd> </dl> <p>Multiply the number value stored at <code>path</code> by <code>number</code></p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key to modify.</p> </details> <details open><summary><code>value</code></summary> <p>is number value to multiply.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>path</code></summary> <p>is JSONPath to specify. Default is root <code>$</code>.</p> </details> <h2 id=\"return\">Return</h2> <p>JSON.NUMMULTBY returns a bulk string reply specified as a stringified new values for each path, or <code>nil</code> element if the matching JSON value is not a number. For more information about replies, see <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a>.</p> <h2 id=\"examples\">Examples</h2> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET doc . <span class=\"s1\">'{\"a\":\"b\",\"b\":[{\"a\":2}, {\"a\":5}, {\"a\":\"c\"}]}'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.NUMMULTBY doc $.a <span class=\"m\">2</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[null]\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.NUMMULTBY doc $..a <span class=\"m\">2</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[null,4,10,null]\"</span></span></span></pre></div> <h2 id=\"see-also\">See also</h2> <p><a href=\"../json.numincrby\"><code>JSON.NUMINCRBY</code></a> | <a href=\"../json.arrinsert\"><code>JSON.ARRINSERT</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/json\">RedisJSON</a></li> <li><a href=\"https://redis.io/docs/stack/search/indexing_json\">Index and search JSON documents</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.nummultby/\" class=\"_attribution-link\">https://redis.io/commands/json.nummultby/</a>\n  </p>\n</div>\n","json.arrinsert/index":"<h1 class=\"command-name\">JSON.ARRINSERT</h1>\n<pre>JSON.ARRINSERT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.ARRINSERT key path index value [value ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) when path is evaluated to a single value where N is the size of the array, O(N) when path is evaluated to multiple values, where N is the size of the key</dd> </dl> <p>Insert the <code>json</code> values into the array at <code>path</code> before the <code>index</code> (shifts to the right)</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key to modify.</p> </details> <details open><summary><code>value</code></summary> <p>is one or more values to insert in one or more arrays.</p> <div class=\"pl-4 border-l-8\"> <div class=\"font-semibold text-slate-900\">About using strings with JSON commands</div> <p>To specify a string as an array value to insert, wrap the quoted string with an additional set of single quotes. Example: <code>'\"silver\"'</code>. For more detailed use, see <a href=\"#examples\">Examples</a>.</p> </div> </details> <details open><summary><code>index</code></summary> <p>is position in the array where you want to insert a value. The index must be in the array's range. Inserting at <code>index</code> 0 prepends to the array. Negative index values start from the end of the array.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>path</code></summary> <p>is JSONPath to specify. Default is root <code>$</code>.</p> </details> <h2 id=\"return-value\">Return value</h2> <p><code>JSON.ARRINSERT</code> returns an <a href=\"https://redis.io/docs/reference/protocol-spec/#resp-arrays\">array</a> of integer replies for each path, the array's new size, or <code>nil</code>, if the matching JSON value is not an array. For more information about replies, see <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a>.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Add new colors to a specific place in a list of product colors</b></summary> <p>Create a document for noise-cancelling headphones in black and silver colors.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET item:1 $ <span class=\"s1\">'{\"name\":\"Noise-cancelling Bluetooth headphones\",\"description\":\"Wireless Bluetooth headphones with noise-cancelling technology\",\"connection\":{\"wireless\":true,\"type\":\"Bluetooth\"},\"price\":99.98,\"stock\":25,\"colors\":[\"black\",\"silver\"]}'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Add color <code>blue</code> to the end of the <code>colors</code> array. <code>JSON.ARRAPEND</code> returns the array's new size.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.ARRAPPEND item:1 $.colors <span class=\"s1\">'\"blue\"'</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3</span></span></span></pre></div> <p>Return the new length of the <code>colors</code> array.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">JSON.GET item:1\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"{\\\"name\\\":\\\"Noise-cancelling Bluetooth headphones\\\",\\\"description\\\":\\\"Wireless Bluetooth headphones with noise-cancelling technology\\\",\\\"connection\\\":{\\\"wireless\\\":true,\\\"type\\\":\\\"Bluetooth\\\"},\\\"price\\\":99.98,\\\"stock\\\":25,\\\"colors\\\":[\\\"black\\\",\\\"silver\\\",\\\"blue\\\"]}\"</span></span></span></pre></div> <p>Get the list of colors for the product.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.GET item:1 <span class=\"s1\">'$.colors[*]'</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[\\\"black\\\",\\\"silver\\\",\\\"blue\\\"]\"</span></span></span></pre></div> <p>Insert two more colors after the second color. You now have five colors.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.ARRINSERT item:1 $.colors <span class=\"m\">2</span> <span class=\"s1\">'\"yellow\"'</span> <span class=\"s1\">'\"gold\"'</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">5</span></span></span></pre></div> <p>Get the updated list of colors.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.GET item:1 $.colors\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[[\\\"black\\\",\\\"silver\\\",\\\"yellow\\\",\\\"gold\\\",\\\"blue\\\"]]\"</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../json.arrappend\"><code>JSON.ARRAPPEND</code></a> | <a href=\"../json.arrindex\"><code>JSON.ARRINDEX</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/json\">RedisJSON</a></li> <li><a href=\"https://redis.io/docs/stack/search/indexing_json\">Index and search JSON documents</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.arrinsert/\" class=\"_attribution-link\">https://redis.io/commands/json.arrinsert/</a>\n  </p>\n</div>\n","json.arrlen/index":"<h1 class=\"command-name\">JSON.ARRLEN</h1>\n<pre>JSON.ARRLEN</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.ARRLEN key [path]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) where path is evaluated to a single value, O(N) where path is evaluated to multiple values, where N is the size of the key</dd> </dl> <p>Report the length of the JSON array at <code>path</code> in <code>key</code></p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key to parse.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>path</code></summary> <p>is JSONPath to specify. Default is root <code>$</code>, if not provided. Returns null if the <code>key</code> or <code>path</code> do not exist.</p> </details> <h2 id=\"return\">Return</h2> <p><code>JSON.ARRLEN</code> returns an <a href=\"https://redis.io/docs/reference/protocol-spec/#resp-arrays\">array</a> of integer replies, an integer for each matching value, each is the array's length, or <code>nil</code>, if the matching value is not an array. For more information about replies, see <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a>.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Get lengths of JSON arrays in a document</b></summary> <p>Create a document for wireless earbuds.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET item:2 $ <span class=\"s1\">'{\"name\":\"Wireless earbuds\",\"description\":\"Wireless Bluetooth in-ear headphones\",\"connection\":{\"wireless\":true,\"type\":\"Bluetooth\"},\"price\":64.99,\"stock\":17,\"colors\":[\"black\",\"white\"], \"max_level\":[80, 100, 120]}'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Find lengths of arrays in all objects of the document.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.ARRLEN item:2 <span class=\"s1\">'$.[*]'</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>nil<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>nil<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>nil<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> <span class=\"o\">(</span>nil<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">5<span class=\"o\">)</span> <span class=\"o\">(</span>nil<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">6<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2</span>\n</span></span><span class=\"line\"><span class=\"cl\">7<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3</span></span></span></pre></div> <p>Return the length of the <code>max_level</code> array.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.ARRLEN item:2 <span class=\"s1\">'$..max_level'</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3</span></span></span></pre></div> <p>Get all the maximum level values.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.GET item:2 <span class=\"s1\">'$..max_level'</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[[80,100,120]]\"</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../json.arrindex\"><code>JSON.ARRINDEX</code></a> | <a href=\"../json.arrinsert\"><code>JSON.ARRINSERT</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/json\">RedisJSON</a></li> <li><a href=\"https://redis.io/docs/stack/search/indexing_json\">Index and search JSON documents</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.arrlen/\" class=\"_attribution-link\">https://redis.io/commands/json.arrlen/</a>\n  </p>\n</div>\n","json.arrindex/index":"<h1 class=\"command-name\">JSON.ARRINDEX</h1>\n<pre>JSON.ARRINDEX</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.ARRINDEX key path value [start [stop]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) when path is evaluated to a single value where N is the size of the array, O(N) when path is evaluated to multiple values, where N is the size of the key</dd> </dl> <p>Search for the first occurrence of a JSON value in an array</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key to parse.</p> </details> <details open><summary><code>path</code></summary> <p>is JSONPath to specify.</p> </details> <details open><summary><code>value</code></summary> <p>is value to find its index in one or more arrays.</p> <div class=\"pl-4 border-l-8\"> <div class=\"font-semibold text-slate-900\">About using strings with JSON commands</div> <p>To specify a string as an array value to index, wrap the quoted string with an additional set of single quotes. Example: <code>'\"silver\"'</code>. For more detailed use, see <a href=\"#examples\">Examples</a>.</p> </div> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>start</code></summary> <p>is inclusive start value to specify in a slice of the array to search. Default is <code>0</code>.</p> </details> <details open><summary><code>stop</code></summary> <p>is exclusive stop value to specify in a slice of the array to search, including the last element. Default is <code>0</code>. Negative values are interpreted as starting from the end.</p> </details> <div class=\"pl-4 border-l-8\"> <div class=\"font-semibold text-slate-900\">About out-of-range indexes</div> <p>Out-of-range indexes round to the array's start and end. An inverse index range (such as the range from 1 to 0) returns unfound or <code>-1</code>.</p> </div> <h2 id=\"return-value\">Return value</h2> <p><code>JSON.ARRINDEX</code> returns an <a href=\"https://redis.io/docs/reference/protocol-spec/#resp-arrays\">array</a> of integer replies for each path, the first position in the array of each JSON value that matches the path, <code>-1</code> if unfound in the array, or <code>nil</code>, if the matching JSON value is not an array. For more information about replies, see <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a>.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Find the specific place of a color in a list of product colors</b></summary> <p>Create a document for noise-cancelling headphones in black and silver colors.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET item:1 $ <span class=\"s1\">'{\"name\":\"Noise-cancelling Bluetooth headphones\",\"description\":\"Wireless Bluetooth headphones with noise-cancelling technology\",\"connection\":{\"wireless\":true,\"type\":\"Bluetooth\"},\"price\":99.98,\"stock\":25,\"colors\":[\"black\",\"silver\"]}'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Add color <code>blue</code> to the end of the <code>colors</code> array. <code>JSON.ARRAPEND</code> returns the array's new size.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.ARRAPPEND item:1 $.colors <span class=\"s1\">'\"blue\"'</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3</span></span></span></pre></div> <p>Return the new length of the <code>colors</code> array.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">JSON.GET item:1\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"{\\\"name\\\":\\\"Noise-cancelling Bluetooth headphones\\\",\\\"description\\\":\\\"Wireless Bluetooth headphones with noise-cancelling technology\\\",\\\"connection\\\":{\\\"wireless\\\":true,\\\"type\\\":\\\"Bluetooth\\\"},\\\"price\\\":99.98,\\\"stock\\\":25,\\\"colors\\\":[\\\"black\\\",\\\"silver\\\",\\\"blue\\\"]}\"</span></span></span></pre></div> <p>Get the list of colors for the product.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.GET item:1 <span class=\"s1\">'$.colors[*]'</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[\\\"black\\\",\\\"silver\\\",\\\"blue\\\"]\"</span></span></span></pre></div> <p>Insert two more colors after the second color. You now have five colors.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.ARRINSERT item:1 $.colors <span class=\"m\">2</span> <span class=\"s1\">'\"yellow\"'</span> <span class=\"s1\">'\"gold\"'</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">5</span></span></span></pre></div> <p>Get the updated list of colors.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.GET item:1 $.colors\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[[\\\"black\\\",\\\"silver\\\",\\\"yellow\\\",\\\"gold\\\",\\\"blue\\\"]]\"</span></span></span></pre></div> <p>Find the place where color <code>silver</code> is located.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.ARRINDEX item:1 $..colors <span class=\"s1\">'\"silver\"'</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../json.arrappend\"><code>JSON.ARRAPPEND</code></a> | <a href=\"../json.arrinsert\"><code>JSON.ARRINSERT</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/json\">RedisJSON</a></li> <li><a href=\"https://redis.io/docs/stack/search/indexing_json\">Index and search JSON documents</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.arrindex/\" class=\"_attribution-link\">https://redis.io/commands/json.arrindex/</a>\n  </p>\n</div>\n","json.arrtrim/index":"<h1 class=\"command-name\">JSON.ARRTRIM</h1>\n<pre>JSON.ARRTRIM</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.ARRTRIM key path start stop</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) when path is evaluated to a single value where N is the size of the array, O(N) when path is evaluated to multiple values, where N is the size of the key</dd> </dl> <p>Trim an array so that it contains only the specified inclusive range of elements</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key to modify.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>path</code></summary> <p>is JSONPath to specify. Default is root <code>$</code>.</p> </details> <details open><summary><code>start</code></summary> <p>is index of the first element to keep (previous elements are trimmed). Default is 0.</p> </details> <details open><summary><code>stop</code></summary> <p>is the index of the last element to keep (following elements are trimmed), including the last element. Default is 0. Negative values are interpreted as starting from the end.</p> </details> <div class=\"pl-4 border-l-8\"> <div class=\"font-semibold text-slate-900\">About out-of-range indexes</div> <p>JSON.ARRTRIM is extremely forgiving, and using it with out-of-range indexes does not produce an error. Note a few differences between how RedisJSON v2.0 and legacy versions handle out-of-range indexes.</p> <p>Behavior as of RedisJSON v2.0:</p> <ul> <li>If <code>start</code> is larger than the array's size or <code>start</code> &gt; <code>stop</code>, returns 0 and an empty array.</li> <li>If <code>start</code> is &lt; 0, then start from the end of the array.</li> <li>If <code>stop</code> is larger than the end of the array, it is treated like the last element.</li> </ul> </div> <h2 id=\"return\">Return</h2> <p>JSON.ARRTRIM returns an array of integer replies for each path, the array's new size, or <code>nil</code>, if the matching JSON value is not an array. For more information about replies, see <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a>.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Trim an array to a specific set of values</b></summary> <p>Create two headphone products with maximum sound levels.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.GET key $\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[[{\\\"name\\\":\\\"Healthy headphones\\\",\\\"description\\\":\\\"Wireless Bluetooth headphones with noise-cancelling technology\\\",\\\"connection\\\":{\\\"wireless\\\":true,\\\"type\\\":\\\"Bluetooth\\\"},\\\"price\\\":99.98,\\\"stock\\\":25,\\\"colors\\\":[\\\"black\\\",\\\"silver\\\"],\\\"max_level\\\":[60,70,80]},{\\\"name\\\":\\\"Noisy headphones\\\",\\\"description\\\":\\\"Wireless Bluetooth headphones with noise-cancelling technology\\\",\\\"connection\\\":{\\\"wireless\\\":true,\\\"type\\\":\\\"Bluetooth\\\"},\\\"price\\\":99.98,\\\"stock\\\":25,\\\"colors\\\":[\\\"black\\\",\\\"silver\\\"],\\\"max_level\\\":[85,90,100,120]}]]\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Add new sound level values to the second product.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.ARRAPPEND key $.<span class=\"o\">[</span>1<span class=\"o\">]</span>.max_level <span class=\"m\">140</span> <span class=\"m\">160</span> <span class=\"m\">180</span> <span class=\"m\">200</span> <span class=\"m\">220</span> <span class=\"m\">240</span> <span class=\"m\">260</span> <span class=\"m\">280</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">12</span></span></span></pre></div> <p>Get the updated array.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.GET key $.<span class=\"o\">[</span>1<span class=\"o\">]</span>.max_level\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[[85,90,100,120,140,160,180,200,220,240,260,280]]\"</span></span></span></pre></div> <p>Keep only the values between the fifth and the ninth element, inclusive of that last element.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.ARRTRIM key $.<span class=\"o\">[</span>1<span class=\"o\">]</span>.max_level <span class=\"m\">4</span> <span class=\"m\">8</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">5</span></span></span></pre></div> <p>Get the updated array.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.GET key $.<span class=\"o\">[</span>1<span class=\"o\">]</span>.max_level\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[[140,160,180,200,220]]\"</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../json.arrindex\"><code>JSON.ARRINDEX</code></a> | <a href=\"../json.arrinsert\"><code>JSON.ARRINSERT</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/json\">RedisJSON</a></li> <li><a href=\"https://redis.io/docs/stack/search/indexing_json\">Index and search JSON documents</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.arrtrim/\" class=\"_attribution-link\">https://redis.io/commands/json.arrtrim/</a>\n  </p>\n</div>\n","json.debug-memory/index":"<h1 class=\"command-name\">JSON.DEBUG</h1>\n<pre>JSON.DEBUG MEMORY</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.DEBUG MEMORY key [path]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) when path is evaluated to a single value, where N is the size of the value, O(N) when path is evaluated to multiple values, where N is the size of the key</dd> </dl> <p>Report a value's memory usage in bytes</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key to parse.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>path</code></summary> <p>is JSONPath to specify. Default is root <code>$</code>.</p> </details> <h2 id=\"return\">Return</h2> <p>JSON.DEBUG MEMORY returns an integer reply specified as the value size in bytes. For more information about replies, see <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a>.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Report a value's memory usage in bytes</b></summary> <p>Create a JSON document.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET item:2 $ <span class=\"s1\">'{\"name\":\"Wireless earbuds\",\"description\":\"Wireless Bluetooth in-ear headphones\",\"connection\":{\"wireless\":true,\"type\":\"Bluetooth\"},\"price\":64.99,\"stock\":17,\"colors\":[\"black\",\"white\"], \"max_level\":[80, 100, 120]}'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Get the values' memory usage in bytes.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.DEBUG MEMORY item:2\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">253</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../json.set\"><code>JSON.SET</code></a> | <a href=\"../json.arrlen\"><code>JSON.ARRLEN</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/json\">RedisJSON</a></li> <li><a href=\"https://redis.io/docs/stack/search/indexing_json\">Index and search JSON documents</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.debug-memory/\" class=\"_attribution-link\">https://redis.io/commands/json.debug-memory/</a>\n  </p>\n</div>\n","json.del/index":"<h1 class=\"command-name\">JSON.DEL</h1>\n<pre>JSON.DEL</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.DEL key [path]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) when path is evaluated to a single value where N is the size of the deleted value, O(N) when path is evaluated to multiple values, where N is the size of the key</dd> </dl> <p>Delete a value</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key to modify.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>path</code></summary> <p>is JSONPath to specify. Default is root <code>$</code>. Nonexisting paths are ignored.</p> <div class=\"pl-4 border-l-8\"> <div class=\"font-semibold text-slate-900\">Note</div> <p>Deleting an object's root is equivalent to deleting the key from Redis.</p> </div> </details> <h2 id=\"return\">Return</h2> <p>JSON.DEL returns an integer reply specified as the number of paths deleted (0 or more). For more information about replies, see <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a>.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Delete a value</b></summary> <p>Create a JSON document.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET doc $ <span class=\"s1\">'{\"a\": 1, \"nested\": {\"a\": 2, \"b\": 3}}'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Delete specified values.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.DEL doc $..a\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2</span></span></span></pre></div> <p>Get the updated document.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.GET doc $\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[{\\\"nested\\\":{\\\"b\\\":3}}]\"</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../json.set\"><code>JSON.SET</code></a> | <a href=\"../json.arrlen\"><code>JSON.ARRLEN</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/json\">RedisJSON</a></li> <li><a href=\"https://redis.io/docs/stack/search/indexing_json\">Index and search JSON documents</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.del/\" class=\"_attribution-link\">https://redis.io/commands/json.del/</a>\n  </p>\n</div>\n","json.get/index":"<h1 class=\"command-name\">JSON.GET</h1>\n<pre>JSON.GET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.GET key [INDENTindent] [NEWLINEnewline] [SPACEspace] [path\n  [path ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) when path is evaluated to a single value where N is the size of the value, O(N) when path is evaluated to multiple values, where N is the size of the key</dd> </dl> <p>Return the value at <code>path</code> in JSON serialized form</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key to parse.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>path</code></summary> <p>is JSONPath to specify. Default is root <code>$</code>. JSON.GET accepts multiple <code>path</code> arguments.</p> <div class=\"pl-4 border-l-8\"> <div class=\"font-semibold text-slate-900\">Note</div> <p>When using a single JSONPath, the root of the matching values is a JSON string with a top-level <strong>array</strong> of serialized JSON value. In contrast, a legacy path returns a single value.</p> <p>When using multiple JSONPath arguments, the root of the matching values is a JSON string with a top-level <strong>object</strong>, with each object value being a top-level array of serialized JSON value. In contrast, if all paths are legacy paths, each object value is a single serialized JSON value. If there are multiple paths that include both legacy path and JSONPath, the returned value conforms to the JSONPath version (an array of values).</p> </div> </details> <details open><summary><code>INDENT</code></summary> <p>sets the indentation string for nested levels.</p> </details> <details open><summary><code>NEWLINE</code></summary> <p>sets the string that's printed at the end of each line.</p> </details> <details open><summary><code>SPACE</code></summary> <p>sets the string that's put between a key and a value.</p> </details> <div class=\"pl-4 border-l-8\"> <div class=\"font-semibold text-slate-900\">Note</div> <p>Produce pretty-formatted JSON with <code>redis-cli</code> by following this example:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">~/$ redis-cli --raw\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.GET myjsonkey INDENT <span class=\"s2\">\"\\t\"</span> NEWLINE <span class=\"s2\">\"\\n\"</span> SPACE <span class=\"s2\">\" \"</span> path.to.value<span class=\"o\">[</span>1<span class=\"o\">]</span></span></span></pre></div> </div> <h2 id=\"return\">Return</h2> <p>JSON.GET returns a bulk string representing a JSON array of string replies. Each string is the JSON serialization of each JSON value that matches a path. Using multiple paths, JSON.GET returns a bulk string representing a JSON object with string values. Each string value is an array of the JSON serialization of each JSON value that matches a path. For more information about replies, see <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a>.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Return the value at <code>path</code> in JSON serialized form</b></summary> <p>Create a JSON document.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET doc $ <span class=\"s1\">'{\"a\":2, \"b\": 3, \"nested\": {\"a\": 4, \"b\": null}}'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>With a single JSONPath (JSON array bulk string):</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt;  JSON.GET doc $..b\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[3,null]\"</span></span></span></pre></div> <p>Using multiple paths with at least one JSONPath returns a JSON string with a top-level object with an array of JSON values per path:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.GET doc ..a $..b\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"{\\\"</span>$<span class=\"s2\">..b\\\":[3,null],\\\"..a\\\":[2,4]}\"</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../json.set\"><code>JSON.SET</code></a> | <a href=\"../json.mget\"><code>JSON.MGET</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/json\">RedisJSON</a></li> <li><a href=\"https://redis.io/docs/stack/search/indexing_json\">Index and search JSON documents</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.get/\" class=\"_attribution-link\">https://redis.io/commands/json.get/</a>\n  </p>\n</div>\n","json.debug/index":"<h1 class=\"command-name\">JSON.DEBUG</h1>\n<pre>JSON.DEBUG</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.DEBUG</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>N/A</dd> </dl> <p>This is a container command for debugging related tasks.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.debug/\" class=\"_attribution-link\">https://redis.io/commands/json.debug/</a>\n  </p>\n</div>\n","json.strappend/index":"<h1 class=\"command-name\">JSON.STRAPPEND</h1>\n<pre>JSON.STRAPPEND</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.STRAPPEND key [path] value</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) when path is evaluated to a single value, O(N) when path is evaluated to multiple values, where N is the size of the key</dd> </dl> <p>Append the <code>json-string</code> values to the string at <code>path</code></p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key to modify.</p> </details> <details open><summary><code>value</code></summary> <p>is value to append to one or more strings.</p> <div class=\"pl-4 border-l-8\"> <div class=\"font-semibold text-slate-900\">About using strings with JSON commands</div> <p>To specify a string as an array value to append, wrap the quoted string with an additional set of single quotes. Example: <code>'\"silver\"'</code>. For more detailed use, see <a href=\"#examples\">Examples</a>.</p> </div> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>path</code></summary> <p>is JSONPath to specify. Default is root <code>$</code>.</p> </details> <h2 id=\"return-value\">Return value</h2> <p>JSON.STRAPPEND returns an array of integer replies for each path, the string's new length, or <code>nil</code>, if the matching JSON value is not a string. For more information about replies, see <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a>.</p> <h2 id=\"examples\">Examples</h2> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET doc $ <span class=\"s1\">'{\"a\":\"foo\", \"nested\": {\"a\": \"hello\"}, \"nested2\": {\"a\": 31}}'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.STRAPPEND doc $..a <span class=\"s1\">'\"baz\"'</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">6</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">8</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>nil<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.GET doc $\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[{\\\"a\\\":\\\"foobaz\\\",\\\"nested\\\":{\\\"a\\\":\\\"hellobaz\\\"},\\\"nested2\\\":{\\\"a\\\":31}}]\"</span></span></span></pre></div> <h2 id=\"see-also\">See also</h2> <p><code>JSON.ARRAPEND</code> | <a href=\"../json.arrinsert\"><code>JSON.ARRINSERT</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/json\">RedisJSON</a></li> <li><a href=\"https://redis.io/docs/stack/search/indexing_json\">Index and search JSON documents</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.strappend/\" class=\"_attribution-link\">https://redis.io/commands/json.strappend/</a>\n  </p>\n</div>\n","json.forget/index":"<h1 class=\"command-name\">JSON.FORGET</h1>\n<pre>JSON.FORGET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.FORGET key [path]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) when path is evaluated to a single value where N is the size of the deleted value, O(N) when path is evaluated to multiple values, where N is the size of the key</dd> </dl> <p>See <a href=\"../json.del\"><code>JSON.DEL</code></a>.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.forget/\" class=\"_attribution-link\">https://redis.io/commands/json.forget/</a>\n  </p>\n</div>\n","json.numincrby/index":"<h1 class=\"command-name\">JSON.NUMINCRBY</h1>\n<pre>JSON.NUMINCRBY</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.NUMINCRBY key path value</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) when path is evaluated to a single value, O(N) when path is evaluated to multiple values, where N is the size of the key</dd> </dl> <p>Increment the number value stored at <code>path</code> by <code>number</code></p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key to modify.</p> </details> <details open><summary><code>path</code></summary> <p>is JSONPath to specify.</p> </details> <details open><summary><code>value</code></summary> <p>is number value to increment.</p> </details> <h2 id=\"return\">Return</h2> <p>JSON.NUMINCRBY returns a bulk string reply specified as a stringified new value for each path, or <code>nil</code>, if the matching JSON value is not a number. For more information about replies, see <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a>.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Increment number values</b></summary> <p>Create a document.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET doc . <span class=\"s1\">'{\"a\":\"b\",\"b\":[{\"a\":2}, {\"a\":5}, {\"a\":\"c\"}]}'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Increment a value of <code>a</code> object by 2. The command fails to find a number and returns <code>null</code>.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.NUMINCRBY doc $.a <span class=\"m\">2</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[null]\"</span></span></span></pre></div> <p>Recursively find and increment a value of all <code>a</code> objects. The command increments numbers it finds and returns <code>null</code> for nonnumber values.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.NUMINCRBY doc $..a <span class=\"m\">2</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[null,4,7,null]\"</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../json.arrindex\"><code>JSON.ARRINDEX</code></a> | <a href=\"../json.arrinsert\"><code>JSON.ARRINSERT</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/json\">RedisJSON</a></li> <li><a href=\"https://redis.io/docs/stack/search/indexing_json\">Index and search JSON documents</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.numincrby/\" class=\"_attribution-link\">https://redis.io/commands/json.numincrby/</a>\n  </p>\n</div>\n","json.objkeys/index":"<h1 class=\"command-name\">JSON.OBJKEYS</h1>\n<pre>JSON.OBJKEYS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.OBJKEYS key [path]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) when path is evaluated to a single value, where N is the number of keys in the object, O(N) when path is evaluated to multiple values, where N is the size of the key</dd> </dl> <p>Return the keys in the object that's referenced by <code>path</code></p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key to parse. Returns <code>null</code> for nonexistent keys.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>path</code></summary> <p>is JSONPath to specify. Default is root <code>$</code>. Returns <code>null</code> for nonexistant path.</p> </details> <h2 id=\"return\">Return</h2> <p>JSON.OBJKEYS returns an array of array replies for each path, an array of the key names in the object as a bulk string reply, or <code>nil</code> if the matching JSON value is not an object. For more information about replies, see <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a>.</p> <h2 id=\"examples\">Examples</h2> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET doc $ <span class=\"s1\">'{\"a\":[3], \"nested\": {\"a\": {\"b\":2, \"c\": 1}}}'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.OBJKEYS doc $..a\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>nil<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"b\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"s2\">\"c\"</span></span></span></pre></div> <h2 id=\"see-also\">See also</h2> <p><a href=\"../json.arrindex\"><code>JSON.ARRINDEX</code></a> | <a href=\"../json.arrinsert\"><code>JSON.ARRINSERT</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/json\">RedisJSON</a></li> <li><a href=\"https://redis.io/docs/stack/search/indexing_json\">Index and search JSON documents</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.objkeys/\" class=\"_attribution-link\">https://redis.io/commands/json.objkeys/</a>\n  </p>\n</div>\n","json.mget/index":"<h1 class=\"command-name\">JSON.MGET</h1>\n<pre>JSON.MGET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.MGET key [key ...] path</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(M*N) when path is evaluated to a single value where M is the number of keys and N is the size of the value, O(N1+N2+...+Nm) when path is evaluated to multiple values where m is the number of keys and Ni is the size of the i-th key</dd> </dl> <p>Return the values at <code>path</code> from multiple <code>key</code> arguments</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key to parse. Returns <code>null</code> for nonexistent keys.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>path</code></summary> <p>is JSONPath to specify. Default is root <code>$</code>. Returns <code>null</code> for nonexistent paths.</p> </details> <h2 id=\"return\">Return</h2> <p>JSON.MGET returns an array of bulk string replies specified as the JSON serialization of the value at each key's path. For more information about replies, see <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a>.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Return the values at <code>path</code> from multiple <code>key</code> arguments</b></summary> <p>Create two JSON documents.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">redis&gt; JSON.SET doc1 $ <span class=\"s1\">'{\"a\":1, \"b\": 2, \"nested\": {\"a\": 3}, \"c\": null}'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; JSON.SET doc2 $ <span class=\"s1\">'{\"a\":4, \"b\": 5, \"nested\": {\"a\": 6}, \"c\": null}'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Get values from all arguments in the documents.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">redis&gt; JSON.MGET doc1 doc2 $..a\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"s2\">\"[1,3]\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"s2\">\"[4,6]\"</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../json.set\"><code>JSON.SET</code></a> | <a href=\"../json.get\"><code>JSON.GET</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/json\">RedisJSON</a></li> <li><a href=\"https://redis.io/docs/stack/search/indexing_json\">Index and search JSON documents</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.mget/\" class=\"_attribution-link\">https://redis.io/commands/json.mget/</a>\n  </p>\n</div>\n","json.toggle/index":"<h1 class=\"command-name\">JSON.TOGGLE</h1>\n<pre>JSON.TOGGLE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.TOGGLE key path</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 2.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) when path is evaluated to a single value, O(N) when path is evaluated to multiple values, where N is the size of the key</dd> </dl> <p>Toggle a Boolean value stored at <code>path</code></p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key to modify.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>path</code></summary> <p>is JSONPath to specify. Default is root <code>$</code>.</p> </details> <h2 id=\"return\">Return</h2> <p>JSON.TOGGLE returns an array of integer replies for each path, the new value (<code>0</code> if <code>false</code> or <code>1</code> if <code>true</code>), or <code>nil</code> for JSON values matching the path that are not Boolean. For more information about replies, see <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a>.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Toogle a Boolean value stored at <code>path</code></b></summary> <p>Create a JSON document.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET doc $ <span class=\"s1\">'{\"bool\": true}'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Toggle the Boolean value.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.TOGGLE doc $.bool\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span></span></span></pre></div> <p>Get the updated document.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.GET doc $\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[{\\\"bool\\\":false}]\"</span></span></span></pre></div> <p>Toggle the Boolean value.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.TOGGLE doc $.bool\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span></span></span></pre></div> <p>Get the updated document.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.GET doc $\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[{\\\"bool\\\":true}]\"</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../json.set\"><code>JSON.SET</code></a> | <a href=\"../json.get\"><code>JSON.GET</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/json\">RedisJSON</a></li> <li><a href=\"https://redis.io/docs/stack/search/indexing_json\">Index and search JSON documents</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.toggle/\" class=\"_attribution-link\">https://redis.io/commands/json.toggle/</a>\n  </p>\n</div>\n","keys/index":"<h1 class=\"command-name\">KEYS</h1>\n<pre>KEYS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">KEYS pattern</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) with N being the number of keys in the database, under the assumption that the key names in the database and the given pattern have limited length.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns all keys matching <code>pattern</code>.</p> <p>While the time complexity for this operation is O(N), the constant times are fairly low. For example, Redis running on an entry level laptop can scan a 1 million key database in 40 milliseconds.</p> <p><strong>Warning</strong>: consider <code>KEYS</code> as a command that should only be used in production environments with extreme care. It may ruin performance when it is executed against large databases. This command is intended for debugging and special operations, such as changing your keyspace layout. Don't use <code>KEYS</code> in your regular application code. If you're looking for a way to find keys in a subset of your keyspace, consider using <a href=\"../scan\"><code>SCAN</code></a> or <a href=\"https://redis.io/topics/data-types#sets\">sets</a>.</p> <p>Supported glob-style patterns:</p> <ul> <li>\n<code>h?llo</code> matches <code>hello</code>, <code>hallo</code> and <code>hxllo</code>\n</li> <li>\n<code>h*llo</code> matches <code>hllo</code> and <code>heeeello</code>\n</li> <li>\n<code>h[ae]llo</code> matches <code>hello</code> and <code>hallo,</code> but not <code>hillo</code>\n</li> <li>\n<code>h[^e]llo</code> matches <code>hallo</code>, <code>hbllo</code>, ... but not <code>hello</code>\n</li> <li>\n<code>h[a-b]llo</code> matches <code>hallo</code> and <code>hbllo</code>\n</li> </ul> <p>Use <code>\\</code> to escape special characters if you want to match them verbatim.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list of keys matching <code>pattern</code>.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nMSET firstname Jack lastname Stuntman age 35\nKEYS *name*\nKEYS a??\nKEYS *\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/keys/\" class=\"_attribution-link\">https://redis.io/commands/keys/</a>\n  </p>\n</div>\n","json.resp/index":"<h1 class=\"command-name\">JSON.RESP</h1>\n<pre>JSON.RESP</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.RESP key [path]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) when path is evaluated to a single value, where N is the size of the value, O(N) when path is evaluated to multiple values, where N is the size of the key</dd> </dl> <p>Return the JSON in <code>key</code> in <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a> form</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key to parse.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>path</code></summary> <p>is JSONPath to specify. Default is root <code>$</code>. This command uses the following mapping from JSON to RESP:</p> <ul> <li>JSON <code>null</code> maps to the bulk string reply.</li> <li>JSON <code>false</code> and <code>true</code> values map to the simple string reply.</li> <li>JSON number maps to the integer reply or bulk string reply, depending on type.</li> <li>JSON string maps to the bulk string reply.</li> <li>JSON array is represented as an array reply in which the first element is the simple string reply <code>[</code>, followed by the array's elements.</li> <li>JSON object is represented as an array reply in which the first element is the simple string reply <code>{</code>. Each successive entry represents a key-value pair as a two-entry array reply of the bulk string reply.</li> </ul> <p>For more information about replies, see <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a>.</p> </details> <h2 id=\"return\">Return</h2> <p>JSON.RESP returns an array reply specified as the JSON's RESP form detailed in <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a>.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Return an array of RESP details about a document</b></summary> <p>Create a JSON document.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET item:2 $ <span class=\"s1\">'{\"name\":\"Wireless earbuds\",\"description\":\"Wireless Bluetooth in-ear headphones\",\"connection\":{\"wireless\":true,\"type\":\"Bluetooth\"},\"price\":64.99,\"stock\":17,\"colors\":[\"black\",\"white\"], \"max_level\":[80, 100, 120]}'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Get all RESP details about the document.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.RESP item:2\n</span></span><span class=\"line\"><span class=\"cl\"> 1<span class=\"o\">)</span> <span class=\"o\">{</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 2<span class=\"o\">)</span> <span class=\"s2\">\"name\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 3<span class=\"o\">)</span> <span class=\"s2\">\"Wireless earbuds\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 4<span class=\"o\">)</span> <span class=\"s2\">\"description\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 5<span class=\"o\">)</span> <span class=\"s2\">\"Wireless Bluetooth in-ear headphones\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 6<span class=\"o\">)</span> <span class=\"s2\">\"connection\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 7<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">{</span>\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"s2\">\"wireless\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    3<span class=\"o\">)</span> <span class=\"nb\">true</span>\n</span></span><span class=\"line\"><span class=\"cl\">    4<span class=\"o\">)</span> <span class=\"s2\">\"type\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    5<span class=\"o\">)</span> <span class=\"s2\">\"Bluetooth\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 8<span class=\"o\">)</span> <span class=\"s2\">\"price\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 9<span class=\"o\">)</span> <span class=\"s2\">\"64.989999999999995\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">10<span class=\"o\">)</span> <span class=\"s2\">\"stock\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">11<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">17</span>\n</span></span><span class=\"line\"><span class=\"cl\">12<span class=\"o\">)</span> <span class=\"s2\">\"colors\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">13<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">[</span>\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"s2\">\"black\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    3<span class=\"o\">)</span> <span class=\"s2\">\"white\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">14<span class=\"o\">)</span> <span class=\"s2\">\"max_level\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">15<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">[</span>\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">80</span>\n</span></span><span class=\"line\"><span class=\"cl\">    3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">100</span>\n</span></span><span class=\"line\"><span class=\"cl\">    4<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">120</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../json.set\"><code>JSON.SET</code></a> | <a href=\"../json.arrlen\"><code>JSON.ARRLEN</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/json\">RedisJSON</a></li> <li><a href=\"https://redis.io/docs/stack/search/indexing_json\">Index and search JSON documents</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.resp/\" class=\"_attribution-link\">https://redis.io/commands/json.resp/</a>\n  </p>\n</div>\n","latency-doctor/index":"<h1 class=\"command-name\">LATENCY</h1>\n<pre>LATENCY DOCTOR</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">LATENCY DOCTOR</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.13</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>LATENCY DOCTOR</code> command reports about different latency-related issues and advises about possible remedies.</p> <p>This command is the most powerful analysis tool in the latency monitoring framework, and is able to provide additional statistical data like the average period between latency spikes, the median deviation, and a human-readable analysis of the event. For certain events, like <code>fork</code>, additional information is provided, like the rate at which the system forks processes.</p> <p>This is the output you should post in the Redis mailing list if you are looking for help about Latency related issues.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">127.0.0.1:6379&gt; latency doctor\n\nDave, I have observed latency spikes in this Redis instance.\nYou don't mind talking about it, do you Dave?\n\n1. command: 5 latency spikes (average 300ms, mean deviation 120ms,\n    period 73.40 sec). Worst all time event 500ms.\n\nI have a few advices for you:\n\n- Your current Slow Log configuration only logs events that are\n    slower than your configured latency monitor threshold. Please\n    use 'CONFIG SET slowlog-log-slower-than 1000'.\n- Check your Slow Log to understand what are the commands you are\n    running which are too slow to execute. Please check\n    http://redis.io/commands/slowlog for more information.\n- Deleting, expiring or evicting (because of maxmemory policy)\n    large objects is a blocking operation. If you have very large\n    objects that are often deleted, expired, or evicted, try to\n    fragment those objects into multiple smaller objects.\n</pre>\n<p><strong>Note:</strong> the doctor has erratic psychological behaviors, so we recommend interacting with it carefully.</p> <p>For more information refer to the <a href=\"https://redis.io/topics/latency-monitor\">Latency Monitoring Framework page</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/latency-doctor/\" class=\"_attribution-link\">https://redis.io/commands/latency-doctor/</a>\n  </p>\n</div>\n","json.type/index":"<h1 class=\"command-name\">JSON.TYPE</h1>\n<pre>JSON.TYPE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.TYPE key [path]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) when path is evaluated to a single value, O(N) when path is evaluated to multiple values, where N is the size of the key</dd> </dl> <p>Report the type of JSON value at <code>path</code></p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key to parse.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>path</code></summary> <p>is JSONPath to specify. Default is root <code>$</code>. Returns null if the <code>key</code> or <code>path</code> do not exist.</p> </details> <h2 id=\"return\">Return</h2> <p>JSON.TYPE returns an array of string replies for each path, specified as the value's type. For more information about replies, see <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a>.</p> <h2 id=\"examples\">Examples</h2> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET doc $ <span class=\"s1\">'{\"a\":2, \"nested\": {\"a\": true}, \"foo\": \"bar\"}'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.TYPE doc $..foo\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"s2\">\"string\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.TYPE doc $..a\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"s2\">\"integer\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"s2\">\"boolean\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.TYPE doc $..dummy</span></span></pre></div> <h2 id=\"see-also\">See also</h2> <p><a href=\"../json.set\"><code>JSON.SET</code></a> | <a href=\"../json.arrlen\"><code>JSON.ARRLEN</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/json\">RedisJSON</a></li> <li><a href=\"https://redis.io/docs/stack/search/indexing_json\">Index and search JSON documents</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.type/\" class=\"_attribution-link\">https://redis.io/commands/json.type/</a>\n  </p>\n</div>\n","json.strlen/index":"<h1 class=\"command-name\">JSON.STRLEN</h1>\n<pre>JSON.STRLEN</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.STRLEN key [path]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) when path is evaluated to a single value, O(N) when path is evaluated to multiple values, where N is the size of the key</dd> </dl> <p>Report the length of the JSON String at <code>path</code> in <code>key</code></p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key to parse.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>path</code></summary> <p>is JSONPath to specify. Default is root <code>$</code>, if not provided. Returns null if the <code>key</code> or <code>path</code> do not exist.</p> </details> <h2 id=\"return\">Return</h2> <p>JSON.STRLEN returns by recursive descent an array of integer replies for each path, the array's length, or <code>nil</code>, if the matching JSON value is not a string. For more information about replies, see <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a>.</p> <h2 id=\"examples\">Examples</h2> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET doc $ <span class=\"s1\">'{\"a\":\"foo\", \"nested\": {\"a\": \"hello\"}, \"nested2\": {\"a\": 31}}'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.STRLEN doc $..a\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">5</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>nil<span class=\"o\">)</span></span></span></pre></div> <h2 id=\"see-also\">See also</h2> <p><a href=\"../json.arrlen\"><code>JSON.ARRLEN</code></a> | <a href=\"../json.arrinsert\"><code>JSON.ARRINSERT</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/json\">RedisJSON</a></li> <li><a href=\"https://redis.io/docs/stack/search/indexing_json\">Index and search JSON documents</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.strlen/\" class=\"_attribution-link\">https://redis.io/commands/json.strlen/</a>\n  </p>\n</div>\n","latency-graph/index":"<h1 class=\"command-name\">LATENCY</h1>\n<pre>LATENCY GRAPH</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">LATENCY GRAPH event</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.13</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Produces an ASCII-art style graph for the specified event.</p> <p><code>LATENCY GRAPH</code> lets you intuitively understand the latency trend of an <code>event</code> via state-of-the-art visualization. It can be used for quickly grasping the situation before resorting to means such parsing the raw data from <a href=\"../latency-history\"><code>LATENCY HISTORY</code></a> or external tooling.</p> <p>Valid values for <code>event</code> are:</p> <ul> <li><code>active-defrag-cycle</code></li> <li><code>aof-fsync-always</code></li> <li><code>aof-stat</code></li> <li><code>aof-rewrite-diff-write</code></li> <li><code>aof-rename</code></li> <li><code>aof-write</code></li> <li><code>aof-write-active-child</code></li> <li><code>aof-write-alone</code></li> <li><code>aof-write-pending-fsync</code></li> <li><code>command</code></li> <li><code>expire-cycle</code></li> <li><code>eviction-cycle</code></li> <li><code>eviction-del</code></li> <li><code>fast-command</code></li> <li><code>fork</code></li> <li><code>rdb-unlink-temp-file</code></li> </ul> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">127.0.0.1:6379&gt; latency reset command\n(integer) 0\n127.0.0.1:6379&gt; debug sleep .1\nOK\n127.0.0.1:6379&gt; debug sleep .2\nOK\n127.0.0.1:6379&gt; debug sleep .3\nOK\n127.0.0.1:6379&gt; debug sleep .5\nOK\n127.0.0.1:6379&gt; debug sleep .4\nOK\n127.0.0.1:6379&gt; latency graph command\ncommand - high 500 ms, low 101 ms (all time high 500 ms)\n--------------------------------------------------------------------------------\n   #_\n  _||\n _|||\n_||||\n\n11186\n542ss\nsss\n</pre>\n<p>The vertical labels under each graph column represent the amount of seconds, minutes, hours or days ago the event happened. For example \"15s\" means that the first graphed event happened 15 seconds ago.</p> <p>The graph is normalized in the min-max scale so that the zero (the underscore in the lower row) is the minimum, and a # in the higher row is the maximum.</p> <p>For more information refer to the <a href=\"https://redis.io/topics/latency-monitor\">Latency Monitoring Framework page</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/latency-graph/\" class=\"_attribution-link\">https://redis.io/commands/latency-graph/</a>\n  </p>\n</div>\n","latency-histogram/index":"<h1 class=\"command-name\">LATENCY</h1>\n<pre>LATENCY HISTOGRAM</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">LATENCY HISTOGRAM [command [command ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of commands with latency information being retrieved.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><code>LATENCY HISTOGRAM</code> returns a cumulative distribution of commands' latencies in histogram format.</p> <p>By default, all available latency histograms are returned. You can filter the reply by providing specific command names.</p> <p>Each histogram consists of the following fields:</p> <ul> <li>Command name</li> <li>The total calls for that command</li> <li>A map of time buckets: <ul> <li>Each bucket represents a latency range</li> <li>Each bucket covers twice the previous bucket's range</li> <li>Empty buckets are excluded from the reply</li> <li>The tracked latencies are between 1 microsecond and roughly 1 second</li> <li>Everything above 1 second is considered +Inf</li> <li>At max, there will be log2(1,000,000,000)=30 buckets</li> </ul> </li> </ul> <p>This command requires the extended latency monitoring feature to be enabled, which is the default. If you need to enable it, call <code>CONFIG SET latency-tracking yes</code>.</p> <p>To delete the latency histograms' data use the <a href=\"../config-resetstat\"><code>CONFIG RESETSTAT</code></a> command.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">127.0.0.1:6379&gt; LATENCY HISTOGRAM set\n1# \"set\" =&gt;\n   1# \"calls\" =&gt; (integer) 100000\n   2# \"histogram_usec\" =&gt;\n      1# (integer) 1 =&gt; (integer) 99583\n      2# (integer) 2 =&gt; (integer) 99852\n      3# (integer) 4 =&gt; (integer) 99914\n      4# (integer) 8 =&gt; (integer) 99940\n      5# (integer) 16 =&gt; (integer) 99968\n      6# (integer) 33 =&gt; (integer) 100000\n</pre>\n<h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: specifically:</p> <p>The command returns a map where each key is a command name. The value is a map with a key for the total calls, and a map of the histogram time buckets.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/latency-histogram/\" class=\"_attribution-link\">https://redis.io/commands/latency-histogram/</a>\n  </p>\n</div>\n","linsert/index":"<h1 class=\"command-name\">LINSERT</h1>\n<pre>LINSERT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">LINSERT key &lt;BEFORE | AFTER&gt; pivot element</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of elements to traverse before seeing the value pivot. This means that inserting somewhere on the left end on the list (head) can be considered O(1) and inserting somewhere on the right end (tail) is O(N).</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Inserts <code>element</code> in the list stored at <code>key</code> either before or after the reference value <code>pivot</code>.</p> <p>When <code>key</code> does not exist, it is considered an empty list and no operation is performed.</p> <p>An error is returned when <code>key</code> exists but does not hold a list value.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the list length after a successful insert operation, <code>0</code> if the <code>key</code> doesn't exist, and <code>-1</code> when the <code>pivot</code> wasn't found.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nRPUSH mylist \"Hello\"\nRPUSH mylist \"World\"\nLINSERT mylist BEFORE \"World\" \"There\"\nLRANGE mylist 0 -1\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/linsert/\" class=\"_attribution-link\">https://redis.io/commands/linsert/</a>\n  </p>\n</div>\n","lastsave/index":"<h1 class=\"command-name\">LASTSAVE</h1>\n<pre>LASTSAVE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">LASTSAVE</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Return the UNIX TIME of the last DB save executed with success. A client may check if a <a href=\"../bgsave\"><code>BGSAVE</code></a> command succeeded reading the <code>LASTSAVE</code> value, then issuing a <a href=\"../bgsave\"><code>BGSAVE</code></a> command and checking at regular intervals every N seconds if <code>LASTSAVE</code> changed. Redis considers the database saved successfully at startup.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: an UNIX time stamp.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/lastsave/\" class=\"_attribution-link\">https://redis.io/commands/lastsave/</a>\n  </p>\n</div>\n","lmove/index":"<h1 class=\"command-name\">LMOVE</h1>\n<pre>LMOVE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">LMOVE source destination &lt;LEFT | RIGHT&gt; &lt;LEFT | RIGHT&gt;</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Atomically returns and removes the first/last element (head/tail depending on the <code>wherefrom</code> argument) of the list stored at <code>source</code>, and pushes the element at the first/last element (head/tail depending on the <code>whereto</code> argument) of the list stored at <code>destination</code>.</p> <p>For example: consider <code>source</code> holding the list <code>a,b,c</code>, and <code>destination</code> holding the list <code>x,y,z</code>. Executing <code>LMOVE source destination RIGHT LEFT</code> results in <code>source</code> holding <code>a,b</code> and <code>destination</code> holding <code>c,x,y,z</code>.</p> <p>If <code>source</code> does not exist, the value <code>nil</code> is returned and no operation is performed. If <code>source</code> and <code>destination</code> are the same, the operation is equivalent to removing the first/last element from the list and pushing it as first/last element of the list, so it can be considered as a list rotation command (or a no-op if <code>wherefrom</code> is the same as <code>whereto</code>).</p> <p>This command comes in place of the now deprecated <a href=\"../rpoplpush\"><code>RPOPLPUSH</code></a>. Doing <code>LMOVE RIGHT LEFT</code> is equivalent.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the element being popped and pushed.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nRPUSH mylist \"one\"\nRPUSH mylist \"two\"\nRPUSH mylist \"three\"\nLMOVE mylist myotherlist RIGHT LEFT\nLMOVE mylist myotherlist LEFT RIGHT\nLRANGE mylist 0 -1\nLRANGE myotherlist 0 -1\n</pre> <h2 id=\"pattern-reliable-queue\">Pattern: Reliable queue</h2> <p>Redis is often used as a messaging server to implement processing of background jobs or other kinds of messaging tasks. A simple form of queue is often obtained pushing values into a list in the producer side, and waiting for this values in the consumer side using <a href=\"../rpop\"><code>RPOP</code></a> (using polling), or <a href=\"../brpop\"><code>BRPOP</code></a> if the client is better served by a blocking operation.</p> <p>However in this context the obtained queue is not <em>reliable</em> as messages can be lost, for example in the case there is a network problem or if the consumer crashes just after the message is received but it is still to process.</p> <p><code>LMOVE</code> (or <a href=\"../blmove\"><code>BLMOVE</code></a> for the blocking variant) offers a way to avoid this problem: the consumer fetches the message and at the same time pushes it into a <em>processing</em> list. It will use the <a href=\"../lrem\"><code>LREM</code></a> command in order to remove the message from the <em>processing</em> list once the message has been processed.</p> <p>An additional client may monitor the <em>processing</em> list for items that remain there for too much time, and will push those timed out items into the queue again if needed.</p> <h2 id=\"pattern-circular-list\">Pattern: Circular list</h2> <p>Using <code>LMOVE</code> with the same source and destination key, a client can visit all the elements of an N-elements list, one after the other, in O(N) without transferring the full list from the server to the client using a single <a href=\"../lrange\"><code>LRANGE</code></a> operation.</p> <p>The above pattern works even in the following conditions:</p> <ul> <li>There are multiple clients rotating the list: they'll fetch different elements, until all the elements of the list are visited, and the process restarts.</li> <li>Even if other clients are actively pushing new items at the end of the list.</li> </ul> <p>The above makes it very simple to implement a system where a set of items must be processed by N workers continuously as fast as possible. An example is a monitoring system that must check that a set of web sites are reachable, with the smallest delay possible, using a number of parallel workers.</p> <p>Note that this implementation of workers is trivially scalable and reliable, because even if a message is lost the item is still in the queue and will be processed at the next iteration.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/lmove/\" class=\"_attribution-link\">https://redis.io/commands/lmove/</a>\n  </p>\n</div>\n","llen/index":"<h1 class=\"command-name\">LLEN</h1>\n<pre>LLEN</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">LLEN key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the length of the list stored at <code>key</code>. If <code>key</code> does not exist, it is interpreted as an empty list and <code>0</code> is returned. An error is returned when the value stored at <code>key</code> is not a list.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the length of the list at <code>key</code>.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nLPUSH mylist \"World\"\nLPUSH mylist \"Hello\"\nLLEN mylist\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/llen/\" class=\"_attribution-link\">https://redis.io/commands/llen/</a>\n  </p>\n</div>\n","lindex/index":"<h1 class=\"command-name\">LINDEX</h1>\n<pre>LINDEX</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">LINDEX key index</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of elements to traverse to get to the element at index. This makes asking for the first or the last element of the list O(1).</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the element at index <code>index</code> in the list stored at <code>key</code>. The index is zero-based, so <code>0</code> means the first element, <code>1</code> the second element and so on. Negative indices can be used to designate elements starting at the tail of the list. Here, <code>-1</code> means the last element, <code>-2</code> means the penultimate and so forth.</p> <p>When the value at <code>key</code> is not a list, an error is returned.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the requested element, or <code>nil</code> when <code>index</code> is out of range.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nLPUSH mylist \"World\"\nLPUSH mylist \"Hello\"\nLINDEX mylist 0\nLINDEX mylist -1\nLINDEX mylist 3\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/lindex/\" class=\"_attribution-link\">https://redis.io/commands/lindex/</a>\n  </p>\n</div>\n","latency-latest/index":"<h1 class=\"command-name\">LATENCY</h1>\n<pre>LATENCY LATEST</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">LATENCY LATEST</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.13</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>LATENCY LATEST</code> command reports the latest latency events logged.</p> <p>Each reported event has the following fields:</p> <ul> <li>Event name.</li> <li>Unix timestamp of the latest latency spike for the event.</li> <li>Latest event latency in millisecond.</li> <li>All-time maximum latency for this event.</li> </ul> <p>\"All-time\" means the maximum latency since the Redis instance was started, or the time that events were reset <a href=\"../latency-reset\"><code>LATENCY RESET</code></a>.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">127.0.0.1:6379&gt; debug sleep 1\nOK\n(1.00s)\n127.0.0.1:6379&gt; debug sleep .25\nOK\n127.0.0.1:6379&gt; latency latest\n1) 1) \"command\"\n   2) (integer) 1405067976\n   3) (integer) 251\n   4) (integer) 1001\n</pre>\n<p>For more information refer to the <a href=\"https://redis.io/topics/latency-monitor\">Latency Monitoring Framework page</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: specifically:</p> <p>The command returns an array where each element is a four elements array representing the event's name, timestamp, latest and all-time latency measurements.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/latency-latest/\" class=\"_attribution-link\">https://redis.io/commands/latency-latest/</a>\n  </p>\n</div>\n","json.set/index":"<h1 class=\"command-name\">JSON.SET</h1>\n<pre>JSON.SET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.SET key path value [NX | XX]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(M+N) when path is evaluated to a single value where M is the size of the original value (if it exists) and N is the size of the new value, O(M+N) when path is evaluated to multiple values where M is the size of the key and N is the size of the new value</dd> </dl> <p>Set the JSON value at <code>path</code> in <code>key</code></p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key to modify.</p> </details> <details open><summary><code>value</code></summary> <p>is value to set at the specified path</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>path</code></summary> <p>is JSONPath to specify. Default is root <code>$</code>. For new Redis keys the <code>path</code> must be the root. For existing keys, when the entire <code>path</code> exists, the value that it contains is replaced with the <code>json</code> value. For existing keys, when the <code>path</code> exists, except for the last element, a new child is added with the <code>json</code> value.</p> <p>Adds a key (with its respective value) to a JSON Object (in a RedisJSON data type key) only if it is the last child in the <code>path</code>, or it is the parent of a new child being added in the <code>path</code>. Optional arguments <code>NX</code> and <code>XX</code> modify this behavior for both new RedisJSON data type keys as well as the JSON Object keys in them.</p> </details> <details open><summary><code>NX</code></summary> <p>sets the key only if it does not already exist.</p> </details> <details open><summary><code>XX</code></summary> <p>sets the key only if it already exists.</p> </details> <h2 id=\"return-value\">Return value</h2> <p>JSET.SET returns a simple string reply: <code>OK</code> if executed correctly or <code>nil</code> if the specified <code>NX</code> or <code>XX</code> conditions were not met. For more information about replies, see <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a>.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Replace an existing value</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET doc $ <span class=\"s1\">'{\"a\":2}'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET doc $.a <span class=\"s1\">'3'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.GET doc $\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[{\\\"a\\\":3}]\"</span></span></span></pre></div> </details> <details open> <summary><b>Add a new value</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET doc $ <span class=\"s1\">'{\"a\":2}'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET doc $.b <span class=\"s1\">'8'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.GET doc $\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"[{\\\"a\\\":2,\\\"b\\\":8}]\"</span></span></span></pre></div> </details> <details open> <summary><b>Update multi-paths</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET doc $ <span class=\"s1\">'{\"f1\": {\"a\":1}, \"f2\":{\"a\":2}}'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET doc $..a <span class=\"m\">3</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.GET doc\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"{\\\"f1\\\":{\\\"a\\\":3},\\\"f2\\\":{\\\"a\\\":3}}\"</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../json.get\"><code>JSON.GET</code></a> | <a href=\"../json.mget\"><code>JSON.MGET</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/json\">RedisJSON</a></li> <li><a href=\"https://redis.io/docs/stack/search/indexing_json\">Index and search JSON documents</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.set/\" class=\"_attribution-link\">https://redis.io/commands/json.set/</a>\n  </p>\n</div>\n","latency-reset/index":"<h1 class=\"command-name\">LATENCY</h1>\n<pre>LATENCY RESET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">LATENCY RESET [event [event ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.13</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>LATENCY RESET</code> command resets the latency spikes time series of all, or only some, events.</p> <p>When the command is called without arguments, it resets all the events, discarding the currently logged latency spike events, and resetting the maximum event time register.</p> <p>It is possible to reset only specific events by providing the <code>event</code> names as arguments.</p> <p>Valid values for <code>event</code> are:</p> <ul> <li><code>active-defrag-cycle</code></li> <li><code>aof-fsync-always</code></li> <li><code>aof-stat</code></li> <li><code>aof-rewrite-diff-write</code></li> <li><code>aof-rename</code></li> <li><code>aof-write</code></li> <li><code>aof-write-active-child</code></li> <li><code>aof-write-alone</code></li> <li><code>aof-write-pending-fsync</code></li> <li><code>command</code></li> <li><code>expire-cycle</code></li> <li><code>eviction-cycle</code></li> <li><code>eviction-del</code></li> <li><code>fast-command</code></li> <li><code>fork</code></li> <li><code>rdb-unlink-temp-file</code></li> </ul> <p>For more information refer to the <a href=\"https://redis.io/topics/latency-monitor\">Latency Monitoring Framework page</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of event time series that were reset.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/latency-reset/\" class=\"_attribution-link\">https://redis.io/commands/latency-reset/</a>\n  </p>\n</div>\n","lrem/index":"<h1 class=\"command-name\">LREM</h1>\n<pre>LREM</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">LREM key count element</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N+M) where N is the length of the list and M is the number of elements removed.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Removes the first <code>count</code> occurrences of elements equal to <code>element</code> from the list stored at <code>key</code>. The <code>count</code> argument influences the operation in the following ways:</p> <ul> <li>\n<code>count &gt; 0</code>: Remove elements equal to <code>element</code> moving from head to tail.</li> <li>\n<code>count &lt; 0</code>: Remove elements equal to <code>element</code> moving from tail to head.</li> <li>\n<code>count = 0</code>: Remove all elements equal to <code>element</code>.</li> </ul> <p>For example, <code>LREM list -2 \"hello\"</code> will remove the last two occurrences of <code>\"hello\"</code> in the list stored at <code>list</code>.</p> <p>Note that non-existing keys are treated like empty lists, so when <code>key</code> does not exist, the command will always return <code>0</code>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of removed elements.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nRPUSH mylist \"hello\"\nRPUSH mylist \"hello\"\nRPUSH mylist \"foo\"\nRPUSH mylist \"hello\"\nLREM mylist -2 \"hello\"\nLRANGE mylist 0 -1\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/lrem/\" class=\"_attribution-link\">https://redis.io/commands/lrem/</a>\n  </p>\n</div>\n","lcs/index":"<h1 class=\"command-name\">LCS</h1>\n<pre>LCS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">LCS key1 key2 [LEN] [IDX] [MINMATCHLENmin-match-len] [WITHMATCHLEN]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N*M) where N and M are the lengths of s1 and s2, respectively</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@string</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The LCS command implements the longest common subsequence algorithm. Note that this is different than the longest common string algorithm, since matching characters in the string does not need to be contiguous.</p> <p>For instance the LCS between \"foo\" and \"fao\" is \"fo\", since scanning the two strings from left to right, the longest common set of characters is composed of the first \"f\" and then the \"o\".</p> <p>LCS is very useful in order to evaluate how similar two strings are. Strings can represent many things. For instance if two strings are DNA sequences, the LCS will provide a measure of similarity between the two DNA sequences. If the strings represent some text edited by some user, the LCS could represent how different the new text is compared to the old one, and so forth.</p> <p>Note that this algorithm runs in <code>O(N*M)</code> time, where N is the length of the first string and M is the length of the second string. So either spin a different Redis instance in order to run this algorithm, or make sure to run it against very small strings.</p> <pre tabindex=\"0\">&gt; MSET key1 ohmytext key2 mynewtext\nOK\n&gt; LCS key1 key2\n\"mytext\"\n</pre>\n<p>Sometimes we need just the length of the match:</p> <pre tabindex=\"0\">&gt; LCS key1 key2 LEN\n(integer) 6\n</pre>\n<p>However what is often very useful, is to know the match position in each strings:</p> <pre tabindex=\"0\">&gt; LCS key1 key2 IDX\n1) \"matches\"\n2) 1) 1) 1) (integer) 4\n         2) (integer) 7\n      2) 1) (integer) 5\n         2) (integer) 8\n   2) 1) 1) (integer) 2\n         2) (integer) 3\n      2) 1) (integer) 0\n         2) (integer) 1\n3) \"len\"\n4) (integer) 6\n</pre>\n<p>Matches are produced from the last one to the first one, since this is how the algorithm works, and it more efficient to emit things in the same order. The above array means that the first match (second element of the array) is between positions 2-3 of the first string and 0-1 of the second. Then there is another match between 4-7 and 5-8.</p> <p>To restrict the list of matches to the ones of a given minimal length:</p> <pre tabindex=\"0\">&gt; LCS key1 key2 IDX MINMATCHLEN 4\n1) \"matches\"\n2) 1) 1) 1) (integer) 4\n         2) (integer) 7\n      2) 1) (integer) 5\n         2) (integer) 8\n3) \"len\"\n4) (integer) 6\n</pre>\n<p>Finally to also have the match len:</p> <pre tabindex=\"0\">&gt; LCS key1 key2 IDX MINMATCHLEN 4 WITHMATCHLEN\n1) \"matches\"\n2) 1) 1) 1) (integer) 4\n         2) (integer) 7\n      2) 1) (integer) 5\n         2) (integer) 8\n      3) (integer) 4\n3) \"len\"\n4) (integer) 6\n</pre>\n<h2 id=\"return\">Return</h2> <ul> <li>Without modifiers the string representing the longest common substring is returned.</li> <li>When <code>LEN</code> is given the command returns the length of the longest common substring.</li> <li>When <code>IDX</code> is given the command returns an array with the LCS length and all the ranges in both the strings, start and end offset for each string, where there are matches. When <code>WITHMATCHLEN</code> is given each array representing a match will also have the length of the match (see examples).</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/lcs/\" class=\"_attribution-link\">https://redis.io/commands/lcs/</a>\n  </p>\n</div>\n","lpush/index":"<h1 class=\"command-name\">LPUSH</h1>\n<pre>LPUSH</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">LPUSH key element [element ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) for each element added, so O(N) to add N elements when the command is called with multiple arguments.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Insert all the specified values at the head of the list stored at <code>key</code>. If <code>key</code> does not exist, it is created as empty list before performing the push operations. When <code>key</code> holds a value that is not a list, an error is returned.</p> <p>It is possible to push multiple elements using a single command call just specifying multiple arguments at the end of the command. Elements are inserted one after the other to the head of the list, from the leftmost element to the rightmost element. So for instance the command <code>LPUSH mylist a b c</code> will result into a list containing <code>c</code> as first element, <code>b</code> as second element and <code>a</code> as third element.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the length of the list after the push operations.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nLPUSH mylist \"world\"\nLPUSH mylist \"hello\"\nLRANGE mylist 0 -1\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 2.4.0: Accepts multiple <code>element</code> arguments.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/lpush/\" class=\"_attribution-link\">https://redis.io/commands/lpush/</a>\n  </p>\n</div>\n","latency-history/index":"<h1 class=\"command-name\">LATENCY</h1>\n<pre>LATENCY HISTORY</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">LATENCY HISTORY event</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.13</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>LATENCY HISTORY</code> command returns the raw data of the <code>event</code>'s latency spikes time series.</p> <p>This is useful to an application that wants to fetch raw data in order to perform monitoring, display graphs, and so forth.</p> <p>The command will return up to 160 timestamp-latency pairs for the <code>event</code>.</p> <p>Valid values for <code>event</code> are:</p> <ul> <li><code>active-defrag-cycle</code></li> <li><code>aof-fsync-always</code></li> <li><code>aof-stat</code></li> <li><code>aof-rewrite-diff-write</code></li> <li><code>aof-rename</code></li> <li><code>aof-write</code></li> <li><code>aof-write-active-child</code></li> <li><code>aof-write-alone</code></li> <li><code>aof-write-pending-fsync</code></li> <li><code>command</code></li> <li><code>expire-cycle</code></li> <li><code>eviction-cycle</code></li> <li><code>eviction-del</code></li> <li><code>fast-command</code></li> <li><code>fork</code></li> <li><code>rdb-unlink-temp-file</code></li> </ul> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">127.0.0.1:6379&gt; latency history command\n1) 1) (integer) 1405067822\n   2) (integer) 251\n2) 1) (integer) 1405067941\n   2) (integer) 1001\n</pre>\n<p>For more information refer to the <a href=\"https://redis.io/topics/latency-monitor\">Latency Monitoring Framework page</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: specifically:</p> <p>The command returns an array where each element is a two elements array representing the timestamp and the latency of the event.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/latency-history/\" class=\"_attribution-link\">https://redis.io/commands/latency-history/</a>\n  </p>\n</div>\n","lset/index":"<h1 class=\"command-name\">LSET</h1>\n<pre>LSET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">LSET key index element</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the length of the list. Setting either the first or the last element of the list is O(1).</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Sets the list element at <code>index</code> to <code>element</code>. For more information on the <code>index</code> argument, see <a href=\"../lindex\"><code>LINDEX</code></a>.</p> <p>An error is returned for out of range indexes.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a></p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nRPUSH mylist \"one\"\nRPUSH mylist \"two\"\nRPUSH mylist \"three\"\nLSET mylist 0 \"four\"\nLSET mylist -2 \"five\"\nLRANGE mylist 0 -1\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/lset/\" class=\"_attribution-link\">https://redis.io/commands/lset/</a>\n  </p>\n</div>\n","json.objlen/index":"<h1 class=\"command-name\">JSON.OBJLEN</h1>\n<pre>JSON.OBJLEN</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">JSON.OBJLEN key [path]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/json\">JSON 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) when path is evaluated to a single value, O(N) when path is evaluated to multiple values, where N is the size of the key</dd> </dl> <p>Report the number of keys in the JSON object at <code>path</code> in <code>key</code></p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key to parse. Returns <code>null</code> for nonexistent keys.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>path</code></summary> <p>is JSONPath to specify. Default is root <code>$</code>. Returns <code>null</code> for nonexistant path.</p> </details> <h2 id=\"return\">Return</h2> <p>JSON.OBJLEN returns an array of integer replies for each path specified as the number of keys in the object or <code>nil</code>, if the matching JSON value is not an object. For more information about replies, see <a href=\"https://redis.io/docs/reference/protocol-spec\">Redis serialization protocol specification</a>.</p> <h2 id=\"examples\">Examples</h2> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.SET doc $ <span class=\"s1\">'{\"a\":[3], \"nested\": {\"a\": {\"b\":2, \"c\": 1}}}'</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; JSON.OBJLEN doc $..a\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>nil<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2</span></span></span></pre></div> <h2 id=\"see-also\">See also</h2> <p><a href=\"../json.arrindex\"><code>JSON.ARRINDEX</code></a> | <a href=\"../json.arrinsert\"><code>JSON.ARRINSERT</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/json\">RedisJSON</a></li> <li><a href=\"https://redis.io/docs/stack/search/indexing_json\">Index and search JSON documents</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/json.objlen/\" class=\"_attribution-link\">https://redis.io/commands/json.objlen/</a>\n  </p>\n</div>\n","lmpop/index":"<h1 class=\"command-name\">LMPOP</h1>\n<pre>LMPOP</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">LMPOP numkeys key [key ...] &lt;LEFT | RIGHT&gt; [COUNTcount]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N+M) where N is the number of provided keys and M is the number of elements returned.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Pops one or more elements from the first non-empty list key from the list of provided key names.</p> <p><code>LMPOP</code> and <a href=\"../blmpop\"><code>BLMPOP</code></a> are similar to the following, more limited, commands:</p> <ul> <li>\n<a href=\"../lpop\"><code>LPOP</code></a> or <a href=\"../rpop\"><code>RPOP</code></a> which take only one key, and can return multiple elements.</li> <li>\n<a href=\"../blpop\"><code>BLPOP</code></a> or <a href=\"../brpop\"><code>BRPOP</code></a> which take multiple keys, but return only one element from just one key.</li> </ul> <p>See <a href=\"../blmpop\"><code>BLMPOP</code></a> for the blocking variant of this command.</p> <p>Elements are popped from either the left or right of the first non-empty list based on the passed argument. The number of returned elements is limited to the lower between the non-empty list's length, and the count argument (which defaults to 1).</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: specifically:</p> <ul> <li>A <code>nil</code> when no element could be popped.</li> <li>A two-element array with the first element being the name of the key from which elements were popped, and the second element is an array of elements.</li> </ul> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nLMPOP 2 non1 non2 LEFT COUNT 10\nLPUSH mylist \"one\" \"two\" \"three\" \"four\" \"five\"\nLMPOP 1 mylist LEFT\nLRANGE mylist 0 -1\nLMPOP 1 mylist RIGHT COUNT 10\nLPUSH mylist \"one\" \"two\" \"three\" \"four\" \"five\"\nLPUSH mylist2 \"a\" \"b\" \"c\" \"d\" \"e\"\nLMPOP 2 mylist mylist2 right count 3\nLRANGE mylist 0 -1\nLMPOP 2 mylist mylist2 right count 5\nLMPOP 2 mylist mylist2 right count 10\nEXISTS mylist mylist2\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/lmpop/\" class=\"_attribution-link\">https://redis.io/commands/lmpop/</a>\n  </p>\n</div>\n","lrange/index":"<h1 class=\"command-name\">LRANGE</h1>\n<pre>LRANGE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">LRANGE key start stop</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(S+N) where S is the distance of start offset from HEAD for small lists, from nearest end (HEAD or TAIL) for large lists; and N is the number of elements in the specified range.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the specified elements of the list stored at <code>key</code>. The offsets <code>start</code> and <code>stop</code> are zero-based indexes, with <code>0</code> being the first element of the list (the head of the list), <code>1</code> being the next element and so on.</p> <p>These offsets can also be negative numbers indicating offsets starting at the end of the list. For example, <code>-1</code> is the last element of the list, <code>-2</code> the penultimate, and so on.</p> <h2 id=\"consistency-with-range-functions-in-various-programming-languages\">Consistency with range functions in various programming languages</h2> <p>Note that if you have a list of numbers from 0 to 100, <code>LRANGE list 0 10</code> will return 11 elements, that is, the rightmost item is included. This <strong>may or may not</strong> be consistent with behavior of range-related functions in your programming language of choice (think Ruby's <code>Range.new</code>, <code>Array#slice</code> or Python's <code>range()</code> function).</p> <h2 id=\"out-of-range-indexes\">Out-of-range indexes</h2> <p>Out of range indexes will not produce an error. If <code>start</code> is larger than the end of the list, an empty list is returned. If <code>stop</code> is larger than the actual end of the list, Redis will treat it like the last element of the list.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list of elements in the specified range.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nRPUSH mylist \"one\"\nRPUSH mylist \"two\"\nRPUSH mylist \"three\"\nLRANGE mylist 0 0\nLRANGE mylist -3 2\nLRANGE mylist -100 100\nLRANGE mylist 5 10\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/lrange/\" class=\"_attribution-link\">https://redis.io/commands/lrange/</a>\n  </p>\n</div>\n","lpop/index":"<h1 class=\"command-name\">LPOP</h1>\n<pre>LPOP</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">LPOP key [count]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of elements returned</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Removes and returns the first elements of the list stored at <code>key</code>.</p> <p>By default, the command pops a single element from the beginning of the list. When provided with the optional <code>count</code> argument, the reply will consist of up to <code>count</code> elements, depending on the list's length.</p> <h2 id=\"return\">Return</h2> <p>When called without the <code>count</code> argument:</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the value of the first element, or <code>nil</code> when <code>key</code> does not exist.</p> <p>When called with the <code>count</code> argument:</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list of popped elements, or <code>nil</code> when <code>key</code> does not exist.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nRPUSH mylist \"one\" \"two\" \"three\" \"four\" \"five\"\nLPOP mylist\nLPOP mylist 2\nLRANGE mylist 0 -1\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 6.2.0: Added the <code>count</code> argument.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/lpop/\" class=\"_attribution-link\">https://redis.io/commands/lpop/</a>\n  </p>\n</div>\n","lolwut/index":"<h1 class=\"command-name\">LOLWUT</h1>\n<pre>LOLWUT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">LOLWUT [VERSIONversion]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt>  <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The LOLWUT command displays the Redis version: however as a side effect of doing so, it also creates a piece of generative computer art that is different with each version of Redis. The command was introduced in Redis 5 and announced with this <a href=\"http://antirez.com/news/123\">blog post</a>.</p> <p>By default the <code>LOLWUT</code> command will display the piece corresponding to the current Redis version, however it is possible to display a specific version using the following form:</p> <pre>LOLWUT VERSION 5 ... other optional arguments ...\n</pre> <p>Of course the \"5\" above is an example. Each LOLWUT version takes a different set of arguments in order to change the output. The user is encouraged to play with it to discover how the output changes adding more numerical arguments.</p> <p>LOLWUT wants to be a reminder that there is more in programming than just putting some code together in order to create something useful. Every LOLWUT version should have the following properties:</p> <ol> <li>It should display some computer art. There are no limits as long as the output works well in a normal terminal display. However the output should not be limited to graphics (like LOLWUT 5 and 6 actually do), but can be generative poetry and other non graphical things.</li> <li>LOLWUT output should be completely useless. Displaying some useful Redis internal metrics does not count as a valid LOLWUT.</li> <li>LOLWUT output should be fast to generate so that the command can be called in production instances without issues. It should remain fast even when the user experiments with odd parameters.</li> <li>LOLWUT implementations should be safe and carefully checked for security, and resist to untrusted inputs if they take arguments.</li> <li>LOLWUT must always display the Redis version at the end.</li> </ol> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a> (or verbatim reply when using the RESP3 protocol): the string containing the generative computer art, and a text with the Redis version.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/lolwut/\" class=\"_attribution-link\">https://redis.io/commands/lolwut/</a>\n  </p>\n</div>\n","lpos/index":"<h1 class=\"command-name\">LPOS</h1>\n<pre>LPOS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">LPOS key element [RANKrank] [COUNTnum-matches] [MAXLENlen]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.0.6</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of elements in the list, for the average case. When searching for elements near the head or the tail of the list, or when the MAXLEN option is provided, the command may run in constant time.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The command returns the index of matching elements inside a Redis list. By default, when no options are given, it will scan the list from head to tail, looking for the first match of \"element\". If the element is found, its index (the zero-based position in the list) is returned. Otherwise, if no match is found, <code>nil</code> is returned.</p> <pre tabindex=\"0\">&gt; RPUSH mylist a b c 1 2 3 c c\n&gt; LPOS mylist c\n2\n</pre>\n<p>The optional arguments and options can modify the command's behavior. The <code>RANK</code> option specifies the \"rank\" of the first element to return, in case there are multiple matches. A rank of 1 means to return the first match, 2 to return the second match, and so forth.</p> <p>For instance, in the above example the element \"c\" is present multiple times, if I want the index of the second match, I'll write:</p> <pre tabindex=\"0\">&gt; LPOS mylist c RANK 2\n6\n</pre>\n<p>That is, the second occurrence of \"c\" is at position 6. A negative \"rank\" as the <code>RANK</code> argument tells <code>LPOS</code> to invert the search direction, starting from the tail to the head.</p> <p>So, we want to say, give me the first element starting from the tail of the list:</p> <pre tabindex=\"0\">&gt; LPOS mylist c RANK -1\n7\n</pre>\n<p>Note that the indexes are still reported in the \"natural\" way, that is, considering the first element starting from the head of the list at index 0, the next element at index 1, and so forth. This basically means that the returned indexes are stable whatever the rank is positive or negative.</p> <p>Sometimes we want to return not just the Nth matching element, but the position of all the first N matching elements. This can be achieved using the <code>COUNT</code> option.</p> <pre tabindex=\"0\">&gt; LPOS mylist c COUNT 2\n[2,6]\n</pre>\n<p>We can combine <code>COUNT</code> and <code>RANK</code>, so that <code>COUNT</code> will try to return up to the specified number of matches, but starting from the Nth match, as specified by the <code>RANK</code> option.</p> <pre tabindex=\"0\">&gt; LPOS mylist c RANK -1 COUNT 2\n[7,6]\n</pre>\n<p>When <code>COUNT</code> is used, it is possible to specify 0 as the number of matches, as a way to tell the command we want all the matches found returned as an array of indexes. This is better than giving a very large <code>COUNT</code> option because it is more general.</p> <pre tabindex=\"0\">&gt; LPOS mylist c COUNT 0\n[2,6,7]\n</pre>\n<p>When <code>COUNT</code> is used and no match is found, an empty array is returned. However when <code>COUNT</code> is not used and there are no matches, the command returns <code>nil</code>.</p> <p>Finally, the <code>MAXLEN</code> option tells the command to compare the provided element only with a given maximum number of list items. So for instance specifying <code>MAXLEN 1000</code> will make sure that the command performs only 1000 comparisons, effectively running the algorithm on a subset of the list (the first part or the last part depending on the fact we use a positive or negative rank). This is useful to limit the maximum complexity of the command. It is also useful when we expect the match to be found very early, but want to be sure that in case this is not true, the command does not take too much time to run.</p> <p>When <code>MAXLEN</code> is used, it is possible to specify 0 as the maximum number of comparisons, as a way to tell the command we want unlimited comparisons. This is better than giving a very large <code>MAXLEN</code> option because it is more general.</p> <h2 id=\"return\">Return</h2> <p>The command returns the integer representing the matching element, or <code>nil</code> if there is no match. However, if the <code>COUNT</code> option is given the command returns an array (empty if there are no matches).</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nRPUSH mylist a b c d 1 2 3 4 3 3 3\nLPOS mylist 3\nLPOS mylist 3 COUNT 0 RANK 2\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/lpos/\" class=\"_attribution-link\">https://redis.io/commands/lpos/</a>\n  </p>\n</div>\n","monitor/index":"<h1 class=\"command-name\">MONITOR</h1>\n<pre>MONITOR</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">MONITOR</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt>  <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><code>MONITOR</code> is a debugging command that streams back every command processed by the Redis server. It can help in understanding what is happening to the database. This command can both be used via <code>redis-cli</code> and via <code>telnet</code>.</p> <p>The ability to see all the requests processed by the server is useful in order to spot bugs in an application both when using Redis as a database and as a distributed caching system.</p> <pre tabindex=\"0\">$ redis-cli monitor\n1339518083.107412 [0 127.0.0.1:60866] \"keys\" \"*\"\n1339518087.877697 [0 127.0.0.1:60866] \"dbsize\"\n1339518090.420270 [0 127.0.0.1:60866] \"set\" \"x\" \"6\"\n1339518096.506257 [0 127.0.0.1:60866] \"get\" \"x\"\n1339518099.363765 [0 127.0.0.1:60866] \"eval\" \"return redis.call('set','x','7')\" \"0\"\n1339518100.363799 [0 lua] \"set\" \"x\" \"7\"\n1339518100.544926 [0 127.0.0.1:60866] \"del\" \"x\"\n</pre>\n<p>Use <code>SIGINT</code> (Ctrl-C) to stop a <code>MONITOR</code> stream running via <code>redis-cli</code>.</p> <pre tabindex=\"0\">$ telnet localhost 6379\nTrying 127.0.0.1...\nConnected to localhost.\nEscape character is '^]'.\nMONITOR\n+OK\n+1339518083.107412 [0 127.0.0.1:60866] \"keys\" \"*\"\n+1339518087.877697 [0 127.0.0.1:60866] \"dbsize\"\n+1339518090.420270 [0 127.0.0.1:60866] \"set\" \"x\" \"6\"\n+1339518096.506257 [0 127.0.0.1:60866] \"get\" \"x\"\n+1339518099.363765 [0 127.0.0.1:60866] \"del\" \"x\"\n+1339518100.544926 [0 127.0.0.1:60866] \"get\" \"x\"\nQUIT\n+OK\nConnection closed by foreign host.\n</pre>\n<p>Manually issue the <a href=\"../quit\"><code>QUIT</code></a> or <a href=\"../reset\"><code>RESET</code></a> commands to stop a <code>MONITOR</code> stream running via <code>telnet</code>.</p> <h2 id=\"commands-not-logged-by-monitor\">Commands not logged by MONITOR</h2> <p>Because of security concerns, no administrative commands are logged by <code>MONITOR</code>'s output and sensitive data is redacted in the command <a href=\"../auth\"><code>AUTH</code></a>.</p> <p>Furthermore, the command <a href=\"../quit\"><code>QUIT</code></a> is also not logged.</p> <h2 id=\"cost-of-running-monitor\">Cost of running MONITOR</h2> <p>Because <code>MONITOR</code> streams back <strong>all</strong> commands, its use comes at a cost. The following (totally unscientific) benchmark numbers illustrate what the cost of running <code>MONITOR</code> can be.</p> <p>Benchmark result <strong>without</strong> <code>MONITOR</code> running:</p> <pre tabindex=\"0\">$ src/redis-benchmark -c 10 -n 100000 -q\nPING_INLINE: 101936.80 requests per second\nPING_BULK: 102880.66 requests per second\nSET: 95419.85 requests per second\nGET: 104275.29 requests per second\nINCR: 93283.58 requests per second\n</pre>\n<p>Benchmark result <strong>with</strong> <code>MONITOR</code> running (<code>redis-cli monitor &gt; /dev/null</code>):</p> <pre tabindex=\"0\">$ src/redis-benchmark -c 10 -n 100000 -q\nPING_INLINE: 58479.53 requests per second\nPING_BULK: 59136.61 requests per second\nSET: 41823.50 requests per second\nGET: 45330.91 requests per second\nINCR: 41771.09 requests per second\n</pre>\n<p>In this particular case, running a single <code>MONITOR</code> client can reduce the throughput by more than 50%. Running more <code>MONITOR</code> clients will reduce throughput even more.</p> <h2 id=\"return\">Return</h2> <p><strong>Non standard return value</strong>, just dumps the received commands in an infinite flow.</p> <h2 id=\"behavior-change-history\">Behavior change history</h2> <ul> <li>\n<code>&gt;= 6.0.0</code>: <a href=\"../auth\"><code>AUTH</code></a> excluded from the command's output.</li> <li>\n<code>&gt;= 6.2.0</code>: \"<a href=\"../reset\"><code>RESET</code></a> can be called to exit monitor mode.</li> <li>\n<code>&gt;= 6.2.4</code>: \"<a href=\"../auth\"><code>AUTH</code></a>, <a href=\"../hello\"><code>HELLO</code></a>, <a href=\"../eval\"><code>EVAL</code></a>, <a href=\"../eval_ro\"><code>EVAL_RO</code></a>, <a href=\"../evalsha\"><code>EVALSHA</code></a> and <a href=\"../evalsha_ro\"><code>EVALSHA_RO</code></a> included in the command's output.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/monitor/\" class=\"_attribution-link\">https://redis.io/commands/monitor/</a>\n  </p>\n</div>\n","ltrim/index":"<h1 class=\"command-name\">LTRIM</h1>\n<pre>LTRIM</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">LTRIM key start stop</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of elements to be removed by the operation.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Trim an existing list so that it will contain only the specified range of elements specified. Both <code>start</code> and <code>stop</code> are zero-based indexes, where <code>0</code> is the first element of the list (the head), <code>1</code> the next element and so on.</p> <p>For example: <code>LTRIM foobar 0 2</code> will modify the list stored at <code>foobar</code> so that only the first three elements of the list will remain.</p> <p><code>start</code> and <code>end</code> can also be negative numbers indicating offsets from the end of the list, where <code>-1</code> is the last element of the list, <code>-2</code> the penultimate element and so on.</p> <p>Out of range indexes will not produce an error: if <code>start</code> is larger than the end of the list, or <code>start &gt; end</code>, the result will be an empty list (which causes <code>key</code> to be removed). If <code>end</code> is larger than the end of the list, Redis will treat it like the last element of the list.</p> <p>A common use of <code>LTRIM</code> is together with <a href=\"../lpush\"><code>LPUSH</code></a> / <a href=\"../rpush\"><code>RPUSH</code></a>. For example:</p> <pre tabindex=\"0\">LPUSH mylist someelement\nLTRIM mylist 0 99\n</pre>\n<p>This pair of commands will push a new element on the list, while making sure that the list will not grow larger than 100 elements. This is very useful when using Redis to store logs for example. It is important to note that when used in this way <code>LTRIM</code> is an O(1) operation because in the average case just one element is removed from the tail of the list.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a></p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nRPUSH mylist \"one\"\nRPUSH mylist \"two\"\nRPUSH mylist \"three\"\nLTRIM mylist 1 -1\nLRANGE mylist 0 -1\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ltrim/\" class=\"_attribution-link\">https://redis.io/commands/ltrim/</a>\n  </p>\n</div>\n","lpushx/index":"<h1 class=\"command-name\">LPUSHX</h1>\n<pre>LPUSHX</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">LPUSHX key element [element ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) for each element added, so O(N) to add N elements when the command is called with multiple arguments.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Inserts specified values at the head of the list stored at <code>key</code>, only if <code>key</code> already exists and holds a list. In contrary to <a href=\"../lpush\"><code>LPUSH</code></a>, no operation will be performed when <code>key</code> does not yet exist.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the length of the list after the push operation.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nLPUSH mylist \"World\"\nLPUSHX mylist \"Hello\"\nLPUSHX myotherlist \"Hello\"\nLRANGE mylist 0 -1\nLRANGE myotherlist 0 -1\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 4.0.0: Accepts multiple <code>element</code> arguments.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/lpushx/\" class=\"_attribution-link\">https://redis.io/commands/lpushx/</a>\n  </p>\n</div>\n","module-load/index":"<h1 class=\"command-name\">MODULE</h1>\n<pre>MODULE LOAD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">MODULE LOAD path [arg [arg ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>4.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Loads a module from a dynamic library at runtime.</p> <p>This command loads and initializes the Redis module from the dynamic library specified by the <code>path</code> argument. The <code>path</code> should be the absolute path of the library, including the full filename. Any additional arguments are passed unmodified to the module.</p> <p><strong>Note</strong>: modules can also be loaded at server startup with <code>loadmodule</code> configuration directive in <code>redis.conf</code>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> if module was loaded.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/module-load/\" class=\"_attribution-link\">https://redis.io/commands/module-load/</a>\n  </p>\n</div>\n","memory-malloc-stats/index":"<h1 class=\"command-name\">MEMORY</h1>\n<pre>MEMORY MALLOC-STATS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">MEMORY MALLOC-STATS</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>4.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>Depends on how much memory is allocated, could be slow</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>MEMORY MALLOC-STATS</code> command provides an internal statistics report from the memory allocator.</p> <p>This command is currently implemented only when using <strong>jemalloc</strong> as an allocator, and evaluates to a benign NOOP for all others.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the memory allocator's internal statistics report</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/memory-malloc-stats/\" class=\"_attribution-link\">https://redis.io/commands/memory-malloc-stats/</a>\n  </p>\n</div>\n","memory-stats/index":"<h1 class=\"command-name\">MEMORY</h1>\n<pre>MEMORY STATS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">MEMORY STATS</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>4.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>MEMORY STATS</code> command returns an <a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> about the memory usage of the server.</p> <p>The information about memory usage is provided as metrics and their respective values. The following metrics are reported:</p> <ul> <li>\n<code>peak.allocated</code>: Peak memory consumed by Redis in bytes (see <a href=\"../info\"><code>INFO</code></a>'s <code>used_memory_peak</code>)</li> <li>\n<code>total.allocated</code>: Total number of bytes allocated by Redis using its allocator (see <a href=\"../info\"><code>INFO</code></a>'s <code>used_memory</code>)</li> <li>\n<code>startup.allocated</code>: Initial amount of memory consumed by Redis at startup in bytes (see <a href=\"../info\"><code>INFO</code></a>'s <code>used_memory_startup</code>)</li> <li>\n<code>replication.backlog</code>: Size in bytes of the replication backlog (see <a href=\"../info\"><code>INFO</code></a>'s <code>repl_backlog_active</code>)</li> <li>\n<code>clients.slaves</code>: The total size in bytes of all replicas overheads (output and query buffers, connection contexts)</li> <li>\n<code>clients.normal</code>: The total size in bytes of all clients overheads (output and query buffers, connection contexts)</li> <li>\n<code>cluster.links</code>: Memory usage by cluster links (Added in Redis 7.0, see <a href=\"../info\"><code>INFO</code></a>'s <code>mem_cluster_links</code>).</li> <li>\n<code>aof.buffer</code>: The summed size in bytes of AOF related buffers.</li> <li>\n<code>lua.caches</code>: the summed size in bytes of the overheads of the Lua scripts' caches</li> <li>\n<code>dbXXX</code>: For each of the server's databases, the overheads of the main and expiry dictionaries (<code>overhead.hashtable.main</code> and <code>overhead.hashtable.expires</code>, respectively) are reported in bytes</li> <li>\n<code>overhead.total</code>: The sum of all overheads, i.e. <code>startup.allocated</code>, <code>replication.backlog</code>, <code>clients.slaves</code>, <code>clients.normal</code>, <code>aof.buffer</code> and those of the internal data structures that are used in managing the Redis keyspace (see <a href=\"../info\"><code>INFO</code></a>'s <code>used_memory_overhead</code>)</li> <li>\n<code>keys.count</code>: The total number of keys stored across all databases in the server</li> <li>\n<code>keys.bytes-per-key</code>: The ratio between <strong>net memory usage</strong> (<code>total.allocated</code> minus <code>startup.allocated</code>) and <code>keys.count</code>\n</li> <li>\n<code>dataset.bytes</code>: The size in bytes of the dataset, i.e. <code>overhead.total</code> subtracted from <code>total.allocated</code> (see <a href=\"../info\"><code>INFO</code></a>'s <code>used_memory_dataset</code>)</li> <li>\n<code>dataset.percentage</code>: The percentage of <code>dataset.bytes</code> out of the net memory usage</li> <li>\n<code>peak.percentage</code>: The percentage of <code>peak.allocated</code> out of <code>total.allocated</code>\n</li> <li>\n<code>fragmentation</code>: See <a href=\"../info\"><code>INFO</code></a>'s <code>mem_fragmentation_ratio</code>\n</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: nested list of memory usage metrics and their values</p> <p><strong>A note about the word slave used in this man page</strong>: Starting with Redis 5, if not for backward compatibility, the Redis project no longer uses the word slave. Unfortunately in this command the word slave is part of the protocol, so we'll be able to remove such occurrences only when this API will be naturally deprecated.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/memory-stats/\" class=\"_attribution-link\">https://redis.io/commands/memory-stats/</a>\n  </p>\n</div>\n","module-loadex/index":"<h1 class=\"command-name\">MODULE</h1>\n<pre>MODULE LOADEX</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">MODULE LOADEX path [CONFIGname value [CONFIG name value ...]]\n  [ARGSargs [args ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Loads a module from a dynamic library at runtime with configuration directives.</p> <p>This is an extended version of the <a href=\"../module-load\"><code>MODULE LOAD</code></a> command.</p> <p>It loads and initializes the Redis module from the dynamic library specified by the <code>path</code> argument. The <code>path</code> should be the absolute path of the library, including the full filename.</p> <p>You can use the optional <code>CONFIG</code> argument to provide the module with configuration directives. Any additional arguments that follow the <code>ARGS</code> keyword are passed unmodified to the module.</p> <p><strong>Note</strong>: modules can also be loaded at server startup with <code>loadmodule</code> configuration directive in <code>redis.conf</code>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> if module was loaded.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/module-loadex/\" class=\"_attribution-link\">https://redis.io/commands/module-loadex/</a>\n  </p>\n</div>\n","memory-purge/index":"<h1 class=\"command-name\">MEMORY</h1>\n<pre>MEMORY PURGE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">MEMORY PURGE</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>4.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>Depends on how much memory is allocated, could be slow</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>MEMORY PURGE</code> command attempts to purge dirty pages so these can be reclaimed by the allocator.</p> <p>This command is currently implemented only when using <strong>jemalloc</strong> as an allocator, and evaluates to a benign NOOP for all others.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/memory-purge/\" class=\"_attribution-link\">https://redis.io/commands/memory-purge/</a>\n  </p>\n</div>\n","msetnx/index":"<h1 class=\"command-name\">MSETNX</h1>\n<pre>MSETNX</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">MSETNX key value [key value ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.1</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of keys to set.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@string</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Sets the given keys to their respective values. <code>MSETNX</code> will not perform any operation at all even if just a single key already exists.</p> <p>Because of this semantic <code>MSETNX</code> can be used in order to set different keys representing different fields of a unique logic object in a way that ensures that either all the fields or none at all are set.</p> <p><code>MSETNX</code> is atomic, so all given keys are set at once. It is not possible for clients to see that some of the keys were updated while others are unchanged.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, specifically:</p> <ul> <li>\n<code>1</code> if the all the keys were set.</li> <li>\n<code>0</code> if no key was set (at least one key already existed).</li> </ul> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nMSETNX key1 \"Hello\" key2 \"there\"\nMSETNX key2 \"new\" key3 \"world\"\nMGET key1 key2 key3\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/msetnx/\" class=\"_attribution-link\">https://redis.io/commands/msetnx/</a>\n  </p>\n</div>\n","memory-doctor/index":"<h1 class=\"command-name\">MEMORY</h1>\n<pre>MEMORY DOCTOR</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">MEMORY DOCTOR</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>4.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>MEMORY DOCTOR</code> command reports about different memory-related issues that the Redis server experiences, and advises about possible remedies.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/memory-doctor/\" class=\"_attribution-link\">https://redis.io/commands/memory-doctor/</a>\n  </p>\n</div>\n","memory-usage/index":"<h1 class=\"command-name\">MEMORY</h1>\n<pre>MEMORY USAGE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">MEMORY USAGE key [SAMPLEScount]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>4.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of samples.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>MEMORY USAGE</code> command reports the number of bytes that a key and its value require to be stored in RAM.</p> <p>The reported usage is the total of memory allocations for data and administrative overheads that a key its value require.</p> <p>For nested data types, the optional <code>SAMPLES</code> option can be provided, where <code>count</code> is the number of sampled nested values. The samples are averaged to estimate the total size. By default, this option is set to <code>5</code>. To sample the all of the nested values, use <code>SAMPLES 0</code>.</p> <h2 id=\"examples\">Examples</h2> <p>With Redis v4.0.1 64-bit and <strong>jemalloc</strong>, the empty string measures as follows:</p> <pre tabindex=\"0\">&gt; SET \"\" \"\"\nOK\n&gt; MEMORY USAGE \"\"\n(integer) 51\n</pre>\n<p>These bytes are pure overhead at the moment as no actual data is stored, and are used for maintaining the internal data structures of the server. Longer keys and values show asymptotically linear usage.</p> <pre tabindex=\"0\">&gt; SET foo bar\nOK\n&gt; MEMORY USAGE foo\n(integer) 54\n&gt; SET cento 01234567890123456789012345678901234567890123\n45678901234567890123456789012345678901234567890123456789\nOK\n127.0.0.1:6379&gt; MEMORY USAGE cento\n(integer) 153\n</pre>\n<h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the memory usage in bytes, or <code>nil</code> when the key does not exist.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/memory-usage/\" class=\"_attribution-link\">https://redis.io/commands/memory-usage/</a>\n  </p>\n</div>\n","migrate/index":"<h1 class=\"command-name\">MIGRATE</h1>\n<pre>MIGRATE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">MIGRATE host port &lt;key | \"\"&gt; destination-db timeout [COPY] [REPLACE]\n  [AUTHpassword | AUTH2username password] [KEYSkey [key ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.6.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>This command actually executes a DUMP+DEL in the source instance, and a RESTORE in the target instance. See the pages of these commands for time complexity. Also an O(N) data transfer between the two instances is performed.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Atomically transfer a key from a source Redis instance to a destination Redis instance. On success the key is deleted from the original instance and is guaranteed to exist in the target instance.</p> <p>The command is atomic and blocks the two instances for the time required to transfer the key, at any given time the key will appear to exist in a given instance or in the other instance, unless a timeout error occurs. In 3.2 and above, multiple keys can be pipelined in a single call to <code>MIGRATE</code> by passing the empty string (\"\") as key and adding the <code>KEYS</code> clause.</p> <p>The command internally uses <a href=\"../dump\"><code>DUMP</code></a> to generate the serialized version of the key value, and <a href=\"../restore\"><code>RESTORE</code></a> in order to synthesize the key in the target instance. The source instance acts as a client for the target instance. If the target instance returns OK to the <a href=\"../restore\"><code>RESTORE</code></a> command, the source instance deletes the key using <a href=\"../del\"><code>DEL</code></a>.</p> <p>The timeout specifies the maximum idle time in any moment of the communication with the destination instance in milliseconds. This means that the operation does not need to be completed within the specified amount of milliseconds, but that the transfer should make progresses without blocking for more than the specified amount of milliseconds.</p> <p><code>MIGRATE</code> needs to perform I/O operations and to honor the specified timeout. When there is an I/O error during the transfer or if the timeout is reached the operation is aborted and the special error - <code>IOERR</code> returned. When this happens the following two cases are possible:</p> <ul> <li>The key may be on both the instances.</li> <li>The key may be only in the source instance.</li> </ul> <p>It is not possible for the key to get lost in the event of a timeout, but the client calling <code>MIGRATE</code>, in the event of a timeout error, should check if the key is <em>also</em> present in the target instance and act accordingly.</p> <p>When any other error is returned (starting with <code>ERR</code>) <code>MIGRATE</code> guarantees that the key is still only present in the originating instance (unless a key with the same name was also <em>already</em> present on the target instance).</p> <p>If there are no keys to migrate in the source instance <code>NOKEY</code> is returned. Because missing keys are possible in normal conditions, from expiry for example, <code>NOKEY</code> isn't an error.</p> <h2 id=\"migrating-multiple-keys-with-a-single-command-call\">Migrating multiple keys with a single command call</h2> <p>Starting with Redis 3.0.6 <code>MIGRATE</code> supports a new bulk-migration mode that uses pipelining in order to migrate multiple keys between instances without incurring in the round trip time latency and other overheads that there are when moving each key with a single <code>MIGRATE</code> call.</p> <p>In order to enable this form, the <code>KEYS</code> option is used, and the normal <em>key</em> argument is set to an empty string. The actual key names will be provided after the <code>KEYS</code> argument itself, like in the following example:</p> <pre>MIGRATE 192.168.1.34 6379 \"\" 0 5000 KEYS key1 key2 key3\n</pre> <p>When this form is used the <code>NOKEY</code> status code is only returned when none of the keys is present in the instance, otherwise the command is executed, even if just a single key exists.</p> <h2 id=\"options\">Options</h2> <ul> <li>\n<code>COPY</code> -- Do not remove the key from the local instance.</li> <li>\n<code>REPLACE</code> -- Replace existing key on the remote instance.</li> <li>\n<code>KEYS</code> -- If the key argument is an empty string, the command will instead migrate all the keys that follow the <code>KEYS</code> option (see the above section for more info).</li> <li>\n<code>AUTH</code> -- Authenticate with the given password to the remote instance.</li> <li>\n<code>AUTH2</code> -- Authenticate with the given username and password pair (Redis 6 or greater ACL auth style).</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: The command returns OK on success, or <code>NOKEY</code> if no keys were found in the source instance.</p> <h2>History</h2> <ul> <li>Starting with Redis version 3.0.0: Added the <code>COPY</code> and <code>REPLACE</code> options.</li> <li>Starting with Redis version 3.0.6: Added the <code>KEYS</code> option.</li> <li>Starting with Redis version 4.0.7: Added the <code>AUTH</code> option.</li> <li>Starting with Redis version 6.0.0: Added the <code>AUTH2</code> option.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/migrate/\" class=\"_attribution-link\">https://redis.io/commands/migrate/</a>\n  </p>\n</div>\n","module-unload/index":"<h1 class=\"command-name\">MODULE</h1>\n<pre>MODULE UNLOAD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">MODULE UNLOAD name</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>4.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Unloads a module.</p> <p>This command unloads the module specified by <code>name</code>. Note that the module's name is reported by the <a href=\"../module-list\"><code>MODULE LIST</code></a> command, and may differ from the dynamic library's filename.</p> <p>Known limitations:</p> <ul> <li>Modules that register custom data types can not be unloaded.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> if module was unloaded.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/module-unload/\" class=\"_attribution-link\">https://redis.io/commands/module-unload/</a>\n  </p>\n</div>\n","move/index":"<h1 class=\"command-name\">MOVE</h1>\n<pre>MOVE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">MOVE key db</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Move <code>key</code> from the currently selected database (see <a href=\"../select\"><code>SELECT</code></a>) to the specified destination database. When <code>key</code> already exists in the destination database, or it does not exist in the source database, it does nothing. It is possible to use <code>MOVE</code> as a locking primitive because of this.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, specifically:</p> <ul> <li>\n<code>1</code> if <code>key</code> was moved.</li> <li>\n<code>0</code> if <code>key</code> was not moved.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/move/\" class=\"_attribution-link\">https://redis.io/commands/move/</a>\n  </p>\n</div>\n","mget/index":"<h1 class=\"command-name\">MGET</h1>\n<pre>MGET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">MGET key [key ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of keys to retrieve.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@string</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the values of all specified keys. For every key that does not hold a string value or does not exist, the special value <code>nil</code> is returned. Because of this, the operation never fails.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list of values at the specified keys.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET key1 \"Hello\"\nSET key2 \"World\"\nMGET key1 key2 nonexisting\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/mget/\" class=\"_attribution-link\">https://redis.io/commands/mget/</a>\n  </p>\n</div>\n","module-list/index":"<h1 class=\"command-name\">MODULE</h1>\n<pre>MODULE LIST</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">MODULE LIST</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>4.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of loaded modules.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns information about the modules loaded to the server.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list of loaded modules. Each element in the list represents a module, and is in itself a list of property names and their values. The following properties is reported for each loaded module:</p> <ul> <li>\n<code>name</code>: Name of the module</li> <li>\n<code>ver</code>: Version of the module</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/module-list/\" class=\"_attribution-link\">https://redis.io/commands/module-list/</a>\n  </p>\n</div>\n","multi/index":"<h1 class=\"command-name\">MULTI</h1>\n<pre>MULTI</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">MULTI</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> <code>@transaction</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Marks the start of a <a href=\"https://redis.io/topics/transactions\">transaction</a> block. Subsequent commands will be queued for atomic execution using <a href=\"../exec\"><code>EXEC</code></a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: always <code>OK</code>.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/multi/\" class=\"_attribution-link\">https://redis.io/commands/multi/</a>\n  </p>\n</div>\n","mset/index":"<h1 class=\"command-name\">MSET</h1>\n<pre>MSET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">MSET key value [key value ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.1</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of keys to set.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@string</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Sets the given keys to their respective values. <code>MSET</code> replaces existing values with new values, just as regular <a href=\"../set\"><code>SET</code></a>. See <a href=\"../msetnx\"><code>MSETNX</code></a> if you don't want to overwrite existing values.</p> <p><code>MSET</code> is atomic, so all given keys are set at once. It is not possible for clients to see that some of the keys were updated while others are unchanged.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: always <code>OK</code> since <code>MSET</code> can't fail.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nMSET key1 \"Hello\" key2 \"World\"\nGET key1\nGET key2\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/mset/\" class=\"_attribution-link\">https://redis.io/commands/mset/</a>\n  </p>\n</div>\n","object-encoding/index":"<h1 class=\"command-name\">OBJECT</h1>\n<pre>OBJECT ENCODING</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">OBJECT ENCODING key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.2.3</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the internal encoding for the Redis object stored at <code>&lt;key&gt;</code></p> <p>Redis objects can be encoded in different ways:</p> <ul> <li> <p>Strings can be encoded as:</p> <ul> <li>\n<code>raw</code>, normal string encoding.</li> <li>\n<code>int</code>, strings representing integers in a 64-bit signed interval, encoded in this way to save space.</li> <li>\n<code>embstr</code>, an embedded string, which is an object where the internal simple dynamic string, <code>sds</code>, is an unmodifiable string allocated in the same chuck as the object itself. <code>embstr</code> can be strings with lengths up to the hardcoded limit of <code>OBJ_ENCODING_EMBSTR_SIZE_LIMIT</code> or 44 bytes.</li> </ul> </li> <li> <p>Lists can be encoded as <code>ziplist</code> or <code>linkedlist</code>. The <code>ziplist</code> is the special representation that is used to save space for small lists.</p> </li> <li> <p>Sets can be encoded as <code>intset</code> or <code>hashtable</code>. The <code>intset</code> is a special encoding used for small sets composed solely of integers.</p> </li> <li> <p>Hashes can be encoded as <code>ziplist</code> or <code>hashtable</code>. The <code>ziplist</code> is a special encoding used for small hashes.</p> </li> <li> <p>Sorted Sets can be encoded as <code>ziplist</code> or <code>skiplist</code> format. As for the List type small sorted sets can be specially encoded using <code>ziplist</code>, while the <code>skiplist</code> encoding is the one that works with sorted sets of any size.</p> </li> </ul> <p>All the specially encoded types are automatically converted to the general type once you perform an operation that makes it impossible for Redis to retain the space saving encoding.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the encoding of the object, or <code>nil</code> if the key doesn't exist</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/object-encoding/\" class=\"_attribution-link\">https://redis.io/commands/object-encoding/</a>\n  </p>\n</div>\n","object-freq/index":"<h1 class=\"command-name\">OBJECT</h1>\n<pre>OBJECT FREQ</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">OBJECT FREQ key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>4.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command returns the logarithmic access frequency counter of a Redis object stored at <code>&lt;key&gt;</code>.</p> <p>The command is only available when the <code>maxmemory-policy</code> configuration directive is set to one of the LFU policies.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a></p> <p>The counter's value.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/object-freq/\" class=\"_attribution-link\">https://redis.io/commands/object-freq/</a>\n  </p>\n</div>\n","persist/index":"<h1 class=\"command-name\">PERSIST</h1>\n<pre>PERSIST</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">PERSIST key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Remove the existing timeout on <code>key</code>, turning the key from <em>volatile</em> (a key with an expire set) to <em>persistent</em> (a key that will never expire as no timeout is associated).</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, specifically:</p> <ul> <li>\n<code>1</code> if the timeout was removed.</li> <li>\n<code>0</code> if <code>key</code> does not exist or does not have an associated timeout.</li> </ul> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"Hello\"\nEXPIRE mykey 10\nTTL mykey\nPERSIST mykey\nTTL mykey\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/persist/\" class=\"_attribution-link\">https://redis.io/commands/persist/</a>\n  </p>\n</div>\n","pexpire/index":"<h1 class=\"command-name\">PEXPIRE</h1>\n<pre>PEXPIRE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">PEXPIRE key milliseconds [NX | XX | GT | LT]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.6.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command works exactly like <a href=\"../expire\"><code>EXPIRE</code></a> but the time to live of the key is specified in milliseconds instead of seconds.</p> <h2 id=\"options\">Options</h2> <p>The <code>PEXPIRE</code> command supports a set of options since Redis 7.0:</p> <ul> <li>\n<code>NX</code> -- Set expiry only when the key has no expiry</li> <li>\n<code>XX</code> -- Set expiry only when the key has an existing expiry</li> <li>\n<code>GT</code> -- Set expiry only when the new expiry is greater than current one</li> <li>\n<code>LT</code> -- Set expiry only when the new expiry is less than current one</li> </ul> <p>A non-volatile key is treated as an infinite TTL for the purpose of <code>GT</code> and <code>LT</code>. The <code>GT</code>, <code>LT</code> and <code>NX</code> options are mutually exclusive.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, specifically:</p> <ul> <li>\n<code>1</code> if the timeout was set.</li> <li>\n<code>0</code> if the timeout was not set. e.g. key doesn't exist, or operation skipped due to the provided arguments.</li> </ul> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"Hello\"\nPEXPIRE mykey 1500\nTTL mykey\nPTTL mykey\nPEXPIRE mykey 1000 XX\nTTL mykey\nPEXPIRE mykey 1000 NX\nTTL mykey\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 7.0.0: Added options: <code>NX</code>, <code>XX</code>, <code>GT</code> and <code>LT</code>.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/pexpire/\" class=\"_attribution-link\">https://redis.io/commands/pexpire/</a>\n  </p>\n</div>\n","pexpireat/index":"<h1 class=\"command-name\">PEXPIREAT</h1>\n<pre>PEXPIREAT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">PEXPIREAT key unix-time-milliseconds [NX | XX | GT | LT]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.6.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><code>PEXPIREAT</code> has the same effect and semantic as <a href=\"../expireat\"><code>EXPIREAT</code></a>, but the Unix time at which the key will expire is specified in milliseconds instead of seconds.</p> <h2 id=\"options\">Options</h2> <p>The <code>PEXPIREAT</code> command supports a set of options since Redis 7.0:</p> <ul> <li>\n<code>NX</code> -- Set expiry only when the key has no expiry</li> <li>\n<code>XX</code> -- Set expiry only when the key has an existing expiry</li> <li>\n<code>GT</code> -- Set expiry only when the new expiry is greater than current one</li> <li>\n<code>LT</code> -- Set expiry only when the new expiry is less than current one</li> </ul> <p>A non-volatile key is treated as an infinite TTL for the purpose of <code>GT</code> and <code>LT</code>. The <code>GT</code>, <code>LT</code> and <code>NX</code> options are mutually exclusive.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, specifically:</p> <ul> <li>\n<code>1</code> if the timeout was set.</li> <li>\n<code>0</code> if the timeout was not set. e.g. key doesn't exist, or operation skipped due to the provided arguments.</li> </ul> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"Hello\"\nPEXPIREAT mykey 1555555555005\nTTL mykey\nPTTL mykey\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 7.0.0: Added options: <code>NX</code>, <code>XX</code>, <code>GT</code> and <code>LT</code>.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/pexpireat/\" class=\"_attribution-link\">https://redis.io/commands/pexpireat/</a>\n  </p>\n</div>\n","object-idletime/index":"<h1 class=\"command-name\">OBJECT</h1>\n<pre>OBJECT IDLETIME</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">OBJECT IDLETIME key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.2.3</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command returns the time in seconds since the last access to the value stored at <code>&lt;key&gt;</code>.</p> <p>The command is only available when the <code>maxmemory-policy</code> configuration directive is not set to one of the LFU policies.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a></p> <p>The idle time in seconds.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/object-idletime/\" class=\"_attribution-link\">https://redis.io/commands/object-idletime/</a>\n  </p>\n</div>\n","object-refcount/index":"<h1 class=\"command-name\">OBJECT</h1>\n<pre>OBJECT REFCOUNT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">OBJECT REFCOUNT key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.2.3</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command returns the reference count of the stored at <code>&lt;key&gt;</code>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a></p> <p>The number of references.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/object-refcount/\" class=\"_attribution-link\">https://redis.io/commands/object-refcount/</a>\n  </p>\n</div>\n","pfadd/index":"<h1 class=\"command-name\">PFADD</h1>\n<pre>PFADD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">PFADD key [element [element ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.9</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) to add every element.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@hyperloglog</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Adds all the element arguments to the HyperLogLog data structure stored at the variable name specified as first argument.</p> <p>As a side effect of this command the HyperLogLog internals may be updated to reflect a different estimation of the number of unique items added so far (the cardinality of the set).</p> <p>If the approximated cardinality estimated by the HyperLogLog changed after executing the command, <code>PFADD</code> returns 1, otherwise 0 is returned. The command automatically creates an empty HyperLogLog structure (that is, a Redis String of a specified length and with a given encoding) if the specified key does not exist.</p> <p>To call the command without elements but just the variable name is valid, this will result into no operation performed if the variable already exists, or just the creation of the data structure if the key does not exist (in the latter case 1 is returned).</p> <p>For an introduction to HyperLogLog data structure check the <a href=\"../pfcount\"><code>PFCOUNT</code></a> command page.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, specifically:</p> <ul> <li>1 if at least 1 HyperLogLog internal register was altered. 0 otherwise.</li> </ul> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nPFADD hll a b c d e f g\nPFCOUNT hll\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/pfadd/\" class=\"_attribution-link\">https://redis.io/commands/pfadd/</a>\n  </p>\n</div>\n","psetex/index":"<h1 class=\"command-name\">PSETEX</h1>\n<pre>PSETEX (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 2.6.12, this command is regarded as deprecated.</p> <p>It can be replaced by <a href=\"../set\"><code>SET</code></a> with the <code>PX</code> argument when migrating or writing new code.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">PSETEX key milliseconds value</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.6.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@string</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><code>PSETEX</code> works exactly like <a href=\"../setex\"><code>SETEX</code></a> with the sole difference that the expire time is specified in milliseconds instead of seconds.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nPSETEX mykey 1000 \"Hello\"\nPTTL mykey\nGET mykey\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/psetex/\" class=\"_attribution-link\">https://redis.io/commands/psetex/</a>\n  </p>\n</div>\n","publish/index":"<h1 class=\"command-name\">PUBLISH</h1>\n<pre>PUBLISH</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">PUBLISH channel message</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N+M) where N is the number of clients subscribed to the receiving channel and M is the total number of subscribed patterns (by any client).</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@pubsub</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Posts a message to the given channel.</p> <p>In a Redis Cluster clients can publish to every node. The cluster makes sure that published messages are forwarded as needed, so clients can subscribe to any channel by connecting to any one of the nodes.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of clients that received the message. Note that in a Redis Cluster, only clients that are connected to the same node as the publishing client are included in the count.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/publish/\" class=\"_attribution-link\">https://redis.io/commands/publish/</a>\n  </p>\n</div>\n","pfmerge/index":"<h1 class=\"command-name\">PFMERGE</h1>\n<pre>PFMERGE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">PFMERGE destkey [sourcekey [sourcekey ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.9</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) to merge N HyperLogLogs, but with high constant times.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@hyperloglog</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Merge multiple HyperLogLog values into a unique value that will approximate the cardinality of the union of the observed Sets of the source HyperLogLog structures.</p> <p>The computed merged HyperLogLog is set to the destination variable, which is created if does not exist (defaulting to an empty HyperLogLog).</p> <p>If the destination variable exists, it is treated as one of the source sets and its cardinality will be included in the cardinality of the computed HyperLogLog.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: The command just returns <code>OK</code>.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nPFADD hll1 foo bar zap a\nPFADD hll2 a b c foo\nPFMERGE hll3 hll1 hll2\nPFCOUNT hll3\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/pfmerge/\" class=\"_attribution-link\">https://redis.io/commands/pfmerge/</a>\n  </p>\n</div>\n","pfdebug/index":"<h1 class=\"command-name\">PFDEBUG</h1>\n<pre>PFDEBUG</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">PFDEBUG subcommand key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.9</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>N/A</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@hyperloglog</code><span class=\"mr-1 last:hidden\">,</span> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>PFDEBUG</code> command is an internal command. It is meant to be used for developing and testing Redis.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/pfdebug/\" class=\"_attribution-link\">https://redis.io/commands/pfdebug/</a>\n  </p>\n</div>\n","pexpiretime/index":"<h1 class=\"command-name\">PEXPIRETIME</h1>\n<pre>PEXPIRETIME</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">PEXPIRETIME key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><code>PEXPIRETIME</code> has the same semantic as <a href=\"../expiretime\"><code>EXPIRETIME</code></a>, but returns the absolute Unix expiration timestamp in milliseconds instead of seconds.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: Expiration Unix timestamp in milliseconds, or a negative value in order to signal an error (see the description below).</p> <ul> <li>The command returns <code>-1</code> if the key exists but has no associated expiration time.</li> <li>The command returns <code>-2</code> if the key does not exist.</li> </ul> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"Hello\"\nPEXPIREAT mykey 33177117420000\nPEXPIRETIME mykey\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/pexpiretime/\" class=\"_attribution-link\">https://redis.io/commands/pexpiretime/</a>\n  </p>\n</div>\n","pfcount/index":"<h1 class=\"command-name\">PFCOUNT</h1>\n<pre>PFCOUNT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">PFCOUNT key [key ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.9</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) with a very small average constant time when called with a single key. O(N) with N being the number of keys, and much bigger constant times, when called with multiple keys.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@hyperloglog</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>When called with a single key, returns the approximated cardinality computed by the HyperLogLog data structure stored at the specified variable, which is 0 if the variable does not exist.</p> <p>When called with multiple keys, returns the approximated cardinality of the union of the HyperLogLogs passed, by internally merging the HyperLogLogs stored at the provided keys into a temporary HyperLogLog.</p> <p>The HyperLogLog data structure can be used in order to count <strong>unique</strong> elements in a set using just a small constant amount of memory, specifically 12k bytes for every HyperLogLog (plus a few bytes for the key itself).</p> <p>The returned cardinality of the observed set is not exact, but approximated with a standard error of 0.81%.</p> <p>For example in order to take the count of all the unique search queries performed in a day, a program needs to call <a href=\"../pfadd\"><code>PFADD</code></a> every time a query is processed. The estimated number of unique queries can be retrieved with <code>PFCOUNT</code> at any time.</p> <p>Note: as a side effect of calling this function, it is possible that the HyperLogLog is modified, since the last 8 bytes encode the latest computed cardinality for caching purposes. So <code>PFCOUNT</code> is technically a write command.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, specifically:</p> <ul> <li>The approximated number of unique elements observed via <a href=\"../pfadd\"><code>PFADD</code></a>.</li> </ul> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nPFADD hll foo bar zap\nPFADD hll zap zap zap\nPFADD hll foo bar\nPFCOUNT hll\nPFADD some-other-hll 1 2 3\nPFCOUNT hll some-other-hll\n</pre> <h2 id=\"performances\">Performances</h2> <p>When <code>PFCOUNT</code> is called with a single key, performances are excellent even if in theory constant times to process a dense HyperLogLog are high. This is possible because the <code>PFCOUNT</code> uses caching in order to remember the cardinality previously computed, that rarely changes because most <a href=\"../pfadd\"><code>PFADD</code></a> operations will not update any register. Hundreds of operations per second are possible.</p> <p>When <code>PFCOUNT</code> is called with multiple keys, an on-the-fly merge of the HyperLogLogs is performed, which is slow, moreover the cardinality of the union can't be cached, so when used with multiple keys <code>PFCOUNT</code> may take a time in the order of magnitude of the millisecond, and should be not abused.</p> <p>The user should take in mind that single-key and multiple-keys executions of this command are semantically different and have different performances.</p> <h2 id=\"hyperloglog-representation\">HyperLogLog representation</h2> <p>Redis HyperLogLogs are represented using a double representation: the <em>sparse</em> representation suitable for HLLs counting a small number of elements (resulting in a small number of registers set to non-zero value), and a <em>dense</em> representation suitable for higher cardinalities. Redis automatically switches from the sparse to the dense representation when needed.</p> <p>The sparse representation uses a run-length encoding optimized to store efficiently a big number of registers set to zero. The dense representation is a Redis string of 12288 bytes in order to store 16384 6-bit counters. The need for the double representation comes from the fact that using 12k (which is the dense representation memory requirement) to encode just a few registers for smaller cardinalities is extremely suboptimal.</p> <p>Both representations are prefixed with a 16 bytes header, that includes a magic, an encoding / version field, and the cached cardinality estimation computed, stored in little endian format (the most significant bit is 1 if the estimation is invalid since the HyperLogLog was updated since the cardinality was computed).</p> <p>The HyperLogLog, being a Redis string, can be retrieved with <a href=\"../get\"><code>GET</code></a> and restored with <a href=\"../set\"><code>SET</code></a>. Calling <a href=\"../pfadd\"><code>PFADD</code></a>, <code>PFCOUNT</code> or <a href=\"../pfmerge\"><code>PFMERGE</code></a> commands with a corrupted HyperLogLog is never a problem, it may return random values but does not affect the stability of the server. Most of the times when corrupting a sparse representation, the server recognizes the corruption and returns an error.</p> <p>The representation is neutral from the point of view of the processor word size and endianness, so the same representation is used by 32 bit and 64 bit processor, big endian or little endian.</p> <p>More details about the Redis HyperLogLog implementation can be found in <a href=\"http://antirez.com/news/75\">this blog post</a>. The source code of the implementation in the <code>hyperloglog.c</code> file is also easy to read and understand, and includes a full specification for the exact encoding used for the sparse and dense representations.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/pfcount/\" class=\"_attribution-link\">https://redis.io/commands/pfcount/</a>\n  </p>\n</div>\n","pfselftest/index":"<h1 class=\"command-name\">PFSELFTEST</h1>\n<pre>PFSELFTEST</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">PFSELFTEST</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.9</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>N/A</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@hyperloglog</code><span class=\"mr-1 last:hidden\">,</span> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>PFSELFTEST</code> command is an internal command. It is meant to be used for developing and testing Redis.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/pfselftest/\" class=\"_attribution-link\">https://redis.io/commands/pfselftest/</a>\n  </p>\n</div>\n","ping/index":"<h1 class=\"command-name\">PING</h1>\n<pre>PING</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">PING [message]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns <code>PONG</code> if no argument is provided, otherwise return a copy of the argument as a bulk. This command is useful for:</p> <ol> <li>Testing whether a connection is still alive.</li> <li>Verifying the server's ability to serve data - an error is returned when this isn't the case (e.g., during load from persistence or accessing a stale replica).</li> <li>Measuring latency.</li> </ol> <p>If the client is subscribed to a channel or a pattern, it will instead return a multi-bulk with a \"pong\" in the first position and an empty bulk in the second position, unless an argument is provided in which case it returns a copy of the argument.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>, and specifically <code>PONG</code>, when no argument is provided.</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a> the argument provided, when applicable.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nPING\n<p>PING \"hello world\"</p>\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ping/\" class=\"_attribution-link\">https://redis.io/commands/ping/</a>\n  </p>\n</div>\n","pubsub-numpat/index":"<h1 class=\"command-name\">PUBSUB</h1>\n<pre>PUBSUB NUMPAT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">PUBSUB NUMPAT</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@pubsub</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the number of unique patterns that are subscribed to by clients (that are performed using the <a href=\"../psubscribe\"><code>PSUBSCRIBE</code></a> command).</p> <p>Note that this isn't the count of clients subscribed to patterns, but the total number of unique patterns all the clients are subscribed to.</p> <p>Cluster note: in a Redis Cluster clients can subscribe to every node, and can also publish to every other node. The cluster will make sure that published messages are forwarded as needed. That said, <a href=\"../pubsub\"><code>PUBSUB</code></a>'s replies in a cluster only report information from the node's Pub/Sub context, rather than the entire cluster.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of patterns all the clients are subscribed to.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/pubsub-numpat/\" class=\"_attribution-link\">https://redis.io/commands/pubsub-numpat/</a>\n  </p>\n</div>\n","psubscribe/index":"<h1 class=\"command-name\">PSUBSCRIBE</h1>\n<pre>PSUBSCRIBE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">PSUBSCRIBE pattern [pattern ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of patterns the client is already subscribed to.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@pubsub</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Subscribes the client to the given patterns.</p> <p>Supported glob-style patterns:</p> <ul> <li>\n<code>h?llo</code> subscribes to <code>hello</code>, <code>hallo</code> and <code>hxllo</code>\n</li> <li>\n<code>h*llo</code> subscribes to <code>hllo</code> and <code>heeeello</code>\n</li> <li>\n<code>h[ae]llo</code> subscribes to <code>hello</code> and <code>hallo,</code> but not <code>hillo</code>\n</li> </ul> <p>Use <code>\\</code> to escape special characters if you want to match them verbatim.</p> <p>Once the client enters the subscribed state it is not supposed to issue any other commands, except for additional <a href=\"../subscribe\"><code>SUBSCRIBE</code></a>, <a href=\"../ssubscribe\"><code>SSUBSCRIBE</code></a>, <code>PSUBSCRIBE</code>, <a href=\"../unsubscribe\"><code>UNSUBSCRIBE</code></a>, <a href=\"../sunsubscribe\"><code>SUNSUBSCRIBE</code></a>, <a href=\"../punsubscribe\"><code>PUNSUBSCRIBE</code></a>, <a href=\"../ping\"><code>PING</code></a>, <a href=\"../reset\"><code>RESET</code></a> and <a href=\"../quit\"><code>QUIT</code></a> commands. However, if RESP3 is used (see <a href=\"../hello\"><code>HELLO</code></a>) it is possible for a client to issue any commands while in subscribed state.</p> <p>For more information, see <a href=\"https://redis.io/docs/manual/pubsub/\">Pub/sub</a>.</p> <h2 id=\"return\">Return</h2> <p>When successful, this command doesn't return anything. Instead, for each pattern, one message with the first element being the string \"psubscribe\" is pushed as a confirmation that the command succeeded.</p> <h2 id=\"behavior-change-history\">Behavior change history</h2> <ul> <li>\n<code>&gt;= 6.2.0</code>: <a href=\"../reset\"><code>RESET</code></a> can be called to exit subscribed state.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/psubscribe/\" class=\"_attribution-link\">https://redis.io/commands/psubscribe/</a>\n  </p>\n</div>\n","pubsub-channels/index":"<h1 class=\"command-name\">PUBSUB</h1>\n<pre>PUBSUB CHANNELS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">PUBSUB CHANNELS [pattern]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of active channels, and assuming constant time pattern matching (relatively short channels and patterns)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@pubsub</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Lists the currently <em>active channels</em>.</p> <p>An active channel is a Pub/Sub channel with one or more subscribers (excluding clients subscribed to patterns).</p> <p>If no <code>pattern</code> is specified, all the channels are listed, otherwise if pattern is specified only channels matching the specified glob-style pattern are listed.</p> <p>Cluster note: in a Redis Cluster clients can subscribe to every node, and can also publish to every other node. The cluster will make sure that published messages are forwarded as needed. That said, <a href=\"../pubsub\"><code>PUBSUB</code></a>'s replies in a cluster only report information from the node's Pub/Sub context, rather than the entire cluster.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a list of active channels, optionally matching the specified pattern.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/pubsub-channels/\" class=\"_attribution-link\">https://redis.io/commands/pubsub-channels/</a>\n  </p>\n</div>\n","psync/index":"<h1 class=\"command-name\">PSYNC</h1>\n<pre>PSYNC</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">PSYNC replicationid offset</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt>  <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Initiates a replication stream from the master.</p> <p>The <code>PSYNC</code> command is called by Redis replicas for initiating a replication stream from the master.</p> <p>For more information about replication in Redis please check the <a href=\"https://redis.io/topics/replication\">replication page</a>.</p> <h2 id=\"return\">Return</h2> <p><strong>Non standard return value</strong>, a bulk transfer of the data followed by <a href=\"../ping\"><code>PING</code></a> and write requests from the master.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/psync/\" class=\"_attribution-link\">https://redis.io/commands/psync/</a>\n  </p>\n</div>\n","pubsub-shardchannels/index":"<h1 class=\"command-name\">PUBSUB</h1>\n<pre>PUBSUB SHARDCHANNELS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">PUBSUB SHARDCHANNELS [pattern]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of active shard channels, and assuming constant time pattern matching (relatively short shard channels).</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@pubsub</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Lists the currently <em>active shard channels</em>.</p> <p>An active shard channel is a Pub/Sub shard channel with one or more subscribers.</p> <p>If no <code>pattern</code> is specified, all the channels are listed, otherwise if pattern is specified only channels matching the specified glob-style pattern are listed.</p> <p>The information returned about the active shard channels are at the shard level and not at the cluster level.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a list of active channels, optionally matching the specified pattern.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; PUBSUB SHARDCHANNELS\n1) \"orders\"\nPUBSUB SHARDCHANNELS o*\n1) \"orders\"\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/pubsub-shardchannels/\" class=\"_attribution-link\">https://redis.io/commands/pubsub-shardchannels/</a>\n  </p>\n</div>\n","pubsub-shardnumsub/index":"<h1 class=\"command-name\">PUBSUB</h1>\n<pre>PUBSUB SHARDNUMSUB</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">PUBSUB SHARDNUMSUB [shardchannel [shardchannel ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) for the SHARDNUMSUB subcommand, where N is the number of requested shard channels</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@pubsub</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the number of subscribers for the specified shard channels.</p> <p>Note that it is valid to call this command without channels, in this case it will just return an empty list.</p> <p>Cluster note: in a Redis Cluster, <a href=\"../pubsub\"><code>PUBSUB</code></a>'s replies in a cluster only report information from the node's Pub/Sub context, rather than the entire cluster.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a list of channels and number of subscribers for every channel.</p> <p>The format is channel, count, channel, count, ..., so the list is flat. The order in which the channels are listed is the same as the order of the shard channels specified in the command call.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; PUBSUB SHARDNUMSUB orders\n1) \"orders\"\n2) (integer) 1\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/pubsub-shardnumsub/\" class=\"_attribution-link\">https://redis.io/commands/pubsub-shardnumsub/</a>\n  </p>\n</div>\n","punsubscribe/index":"<h1 class=\"command-name\">PUNSUBSCRIBE</h1>\n<pre>PUNSUBSCRIBE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">PUNSUBSCRIBE [pattern [pattern ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N+M) where N is the number of patterns the client is already subscribed and M is the number of total patterns subscribed in the system (by any client).</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@pubsub</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Unsubscribes the client from the given patterns, or from all of them if none is given.</p> <p>When no patterns are specified, the client is unsubscribed from all the previously subscribed patterns. In this case, a message for every unsubscribed pattern will be sent to the client.</p> <h2 id=\"return\">Return</h2> <p>When successful, this command doesn't return anything. Instead, for each pattern, one message with the first element being the string \"punsubscribe\" is pushed as a confirmation that the command succeeded.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/punsubscribe/\" class=\"_attribution-link\">https://redis.io/commands/punsubscribe/</a>\n  </p>\n</div>\n","replicaof/index":"<h1 class=\"command-name\">REPLICAOF</h1>\n<pre>REPLICAOF</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">REPLICAOF host port</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>REPLICAOF</code> command can change the replication settings of a replica on the fly.</p> <p>If a Redis server is already acting as replica, the command <code>REPLICAOF</code> NO ONE will turn off the replication, turning the Redis server into a MASTER. In the proper form <code>REPLICAOF</code> hostname port will make the server a replica of another server listening at the specified hostname and port.</p> <p>If a server is already a replica of some master, <code>REPLICAOF</code> hostname port will stop the replication against the old server and start the synchronization against the new one, discarding the old dataset.</p> <p>The form <code>REPLICAOF</code> NO ONE will stop replication, turning the server into a MASTER, but will not discard the replication. So, if the old master stops working, it is possible to turn the replica into a master and set the application to use this new master in read/write. Later when the other Redis server is fixed, it can be reconfigured to work as a replica.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a></p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; REPLICAOF NO ONE\n\"OK\"\n\n&gt; REPLICAOF 127.0.0.1 6799\n\"OK\"\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/replicaof/\" class=\"_attribution-link\">https://redis.io/commands/replicaof/</a>\n  </p>\n</div>\n","rpoplpush/index":"<h1 class=\"command-name\">RPOPLPUSH</h1>\n<pre>RPOPLPUSH (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 6.2.0, this command is regarded as deprecated.</p> <p>It can be replaced by <a href=\"../lmove\"><code>LMOVE</code></a> with the <code>RIGHT</code> and <code>LEFT</code> arguments when migrating or writing new code.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">RPOPLPUSH source destination</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Atomically returns and removes the last element (tail) of the list stored at <code>source</code>, and pushes the element at the first element (head) of the list stored at <code>destination</code>.</p> <p>For example: consider <code>source</code> holding the list <code>a,b,c</code>, and <code>destination</code> holding the list <code>x,y,z</code>. Executing <code>RPOPLPUSH</code> results in <code>source</code> holding <code>a,b</code> and <code>destination</code> holding <code>c,x,y,z</code>.</p> <p>If <code>source</code> does not exist, the value <code>nil</code> is returned and no operation is performed. If <code>source</code> and <code>destination</code> are the same, the operation is equivalent to removing the last element from the list and pushing it as first element of the list, so it can be considered as a list rotation command.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the element being popped and pushed.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nRPUSH mylist \"one\"\nRPUSH mylist \"two\"\nRPUSH mylist \"three\"\nRPOPLPUSH mylist myotherlist\nLRANGE mylist 0 -1\nLRANGE myotherlist 0 -1\n</pre> <h2 id=\"pattern-reliable-queue\">Pattern: Reliable queue</h2> <p>Redis is often used as a messaging server to implement processing of background jobs or other kinds of messaging tasks. A simple form of queue is often obtained pushing values into a list in the producer side, and waiting for this values in the consumer side using <a href=\"../rpop\"><code>RPOP</code></a> (using polling), or <a href=\"../brpop\"><code>BRPOP</code></a> if the client is better served by a blocking operation.</p> <p>However in this context the obtained queue is not <em>reliable</em> as messages can be lost, for example in the case there is a network problem or if the consumer crashes just after the message is received but before it can be processed.</p> <p><code>RPOPLPUSH</code> (or <a href=\"../brpoplpush\"><code>BRPOPLPUSH</code></a> for the blocking variant) offers a way to avoid this problem: the consumer fetches the message and at the same time pushes it into a <em>processing</em> list. It will use the <a href=\"../lrem\"><code>LREM</code></a> command in order to remove the message from the <em>processing</em> list once the message has been processed.</p> <p>An additional client may monitor the <em>processing</em> list for items that remain there for too much time, pushing timed out items into the queue again if needed.</p> <h2 id=\"pattern-circular-list\">Pattern: Circular list</h2> <p>Using <code>RPOPLPUSH</code> with the same source and destination key, a client can visit all the elements of an N-elements list, one after the other, in O(N) without transferring the full list from the server to the client using a single <a href=\"../lrange\"><code>LRANGE</code></a> operation.</p> <p>The above pattern works even if one or both of the following conditions occur:</p> <ul> <li>There are multiple clients rotating the list: they'll fetch different elements, until all the elements of the list are visited, and the process restarts.</li> <li>Other clients are actively pushing new items at the end of the list.</li> </ul> <p>The above makes it very simple to implement a system where a set of items must be processed by N workers continuously as fast as possible. An example is a monitoring system that must check that a set of web sites are reachable, with the smallest delay possible, using a number of parallel workers.</p> <p>Note that this implementation of workers is trivially scalable and reliable, because even if a message is lost the item is still in the queue and will be processed at the next iteration.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/rpoplpush/\" class=\"_attribution-link\">https://redis.io/commands/rpoplpush/</a>\n  </p>\n</div>\n","pttl/index":"<h1 class=\"command-name\">PTTL</h1>\n<pre>PTTL</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">PTTL key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.6.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Like <a href=\"../ttl\"><code>TTL</code></a> this command returns the remaining time to live of a key that has an expire set, with the sole difference that <a href=\"../ttl\"><code>TTL</code></a> returns the amount of remaining time in seconds while <code>PTTL</code> returns it in milliseconds.</p> <p>In Redis 2.6 or older the command returns <code>-1</code> if the key does not exist or if the key exist but has no associated expire.</p> <p>Starting with Redis 2.8 the return value in case of error changed:</p> <ul> <li>The command returns <code>-2</code> if the key does not exist.</li> <li>The command returns <code>-1</code> if the key exists but has no associated expire.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: TTL in milliseconds, or a negative value in order to signal an error (see the description above).</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"Hello\"\nEXPIRE mykey 1\nPTTL mykey\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 2.8.0: Added the -2 reply.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/pttl/\" class=\"_attribution-link\">https://redis.io/commands/pttl/</a>\n  </p>\n</div>\n","quit/index":"<h1 class=\"command-name\">QUIT</h1>\n<pre>QUIT (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 7.2.0, this command is regarded as deprecated.</p> <p>It can be replaced by just closing the connection when migrating or writing new code.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">QUIT</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Ask the server to close the connection. The connection is closed as soon as all pending replies have been written to the client.</p> <p><strong>Note:</strong> Clients should not use this command. Instead, clients should simply close the connection when they're not used anymore. Terminating a connection on the client side is preferable, as it eliminates <code>TIME_WAIT</code> lingering sockets on the server side.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: always OK.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/quit/\" class=\"_attribution-link\">https://redis.io/commands/quit/</a>\n  </p>\n</div>\n","randomkey/index":"<h1 class=\"command-name\">RANDOMKEY</h1>\n<pre>RANDOMKEY</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">RANDOMKEY</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Return a random key from the currently selected database.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the random key, or <code>nil</code> when the database is empty.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/randomkey/\" class=\"_attribution-link\">https://redis.io/commands/randomkey/</a>\n  </p>\n</div>\n","restore/index":"<h1 class=\"command-name\">RESTORE</h1>\n<pre>RESTORE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">RESTORE key ttl serialized-value [REPLACE] [ABSTTL]\n  [IDLETIMEseconds] [FREQfrequency]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.6.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) to create the new key and additional O(N*M) to reconstruct the serialized value, where N is the number of Redis objects composing the value and M their average size. For small string values the time complexity is thus O(1)+O(1*M) where M is small, so simply O(1). However for sorted set values the complexity is O(N*M*log(N)) because inserting values into sorted sets is O(log(N)).</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Create a key associated with a value that is obtained by deserializing the provided serialized value (obtained via <a href=\"../dump\"><code>DUMP</code></a>).</p> <p>If <code>ttl</code> is 0 the key is created without any expire, otherwise the specified expire time (in milliseconds) is set.</p> <p>If the <code>ABSTTL</code> modifier was used, <code>ttl</code> should represent an absolute <a href=\"http://en.wikipedia.org/wiki/Unix_time\">Unix timestamp</a> (in milliseconds) in which the key will expire.</p> <p>For eviction purposes, you may use the <code>IDLETIME</code> or <code>FREQ</code> modifiers. See <a href=\"../object\"><code>OBJECT</code></a> for more information.</p> <p><code>RESTORE</code> will return a \"Target key name is busy\" error when <code>key</code> already exists unless you use the <code>REPLACE</code> modifier.</p> <p><code>RESTORE</code> checks the RDB version and data checksum. If they don't match an error is returned.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: The command returns OK on success.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; DEL mykey\n0\nredis&gt; RESTORE mykey 0 \"\\n\\x17\\x17\\x00\\x00\\x00\\x12\\x00\\x00\\x00\\x03\\x00\\\n                        x00\\xc0\\x01\\x00\\x04\\xc0\\x02\\x00\\x04\\xc0\\x03\\x00\\\n                        xff\\x04\\x00u#&lt;\\xc0;.\\xe9\\xdd\"\nOK\nredis&gt; TYPE mykey\nlist\nredis&gt; LRANGE mykey 0 -1\n1) \"1\"\n2) \"2\"\n3) \"3\"\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 3.0.0: Added the <code>REPLACE</code> modifier.</li> <li>Starting with Redis version 5.0.0: Added the <code>ABSTTL</code> modifier.</li> <li>Starting with Redis version 5.0.0: Added the <code>IDLETIME</code> and <code>FREQ</code> options.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/restore/\" class=\"_attribution-link\">https://redis.io/commands/restore/</a>\n  </p>\n</div>\n","readonly/index":"<h1 class=\"command-name\">READONLY</h1>\n<pre>READONLY</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">READONLY</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Enables read queries for a connection to a Redis Cluster replica node.</p> <p>Normally replica nodes will redirect clients to the authoritative master for the hash slot involved in a given command, however clients can use replicas in order to scale reads using the <code>READONLY</code> command.</p> <p><code>READONLY</code> tells a Redis Cluster replica node that the client is willing to read possibly stale data and is not interested in running write queries.</p> <p>When the connection is in readonly mode, the cluster will send a redirection to the client only if the operation involves keys not served by the replica's master node. This may happen because:</p> <ol> <li>The client sent a command about hash slots never served by the master of this replica.</li> <li>The cluster was reconfigured (for example resharded) and the replica is no longer able to serve commands for a given hash slot.</li> </ol> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/readonly/\" class=\"_attribution-link\">https://redis.io/commands/readonly/</a>\n  </p>\n</div>\n","restore-asking/index":"<h1 class=\"command-name\">RESTORE-ASKING</h1>\n<pre>RESTORE-ASKING</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">RESTORE-ASKING key ttl serialized-value [REPLACE] [ABSTTL]\n  [IDLETIMEseconds] [FREQfrequency]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) to create the new key and additional O(N*M) to reconstruct the serialized value, where N is the number of Redis objects composing the value and M their average size. For small string values the time complexity is thus O(1)+O(1*M) where M is small, so simply O(1). However for sorted set values the complexity is O(N*M*log(N)) because inserting values into sorted sets is O(log(N)).</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>RESTORE-ASKING</code> command is an internal command. It is used by a Redis cluster master during slot migration.</p> <h2>History</h2> <ul> <li>Starting with Redis version 3.0.0: Added the <code>REPLACE</code> modifier.</li> <li>Starting with Redis version 5.0.0: Added the <code>ABSTTL</code> modifier.</li> <li>Starting with Redis version 5.0.0: Added the <code>IDLETIME</code> and <code>FREQ</code> options.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/restore-asking/\" class=\"_attribution-link\">https://redis.io/commands/restore-asking/</a>\n  </p>\n</div>\n","readwrite/index":"<h1 class=\"command-name\">READWRITE</h1>\n<pre>READWRITE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">READWRITE</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Disables read queries for a connection to a Redis Cluster replica node.</p> <p>Read queries against a Redis Cluster replica node are disabled by default, but you can use the <a href=\"../readonly\"><code>READONLY</code></a> command to change this behavior on a per- connection basis. The <code>READWRITE</code> command resets the readonly mode flag of a connection back to readwrite.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/readwrite/\" class=\"_attribution-link\">https://redis.io/commands/readwrite/</a>\n  </p>\n</div>\n","renamenx/index":"<h1 class=\"command-name\">RENAMENX</h1>\n<pre>RENAMENX</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">RENAMENX key newkey</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Renames <code>key</code> to <code>newkey</code> if <code>newkey</code> does not yet exist. It returns an error when <code>key</code> does not exist.</p> <p>In Cluster mode, both <code>key</code> and <code>newkey</code> must be in the same <strong>hash slot</strong>, meaning that in practice only keys that have the same hash tag can be reliably renamed in cluster.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, specifically:</p> <ul> <li>\n<code>1</code> if <code>key</code> was renamed to <code>newkey</code>.</li> <li>\n<code>0</code> if <code>newkey</code> already exists.</li> </ul> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"Hello\"\nSET myotherkey \"World\"\nRENAMENX mykey myotherkey\nGET myotherkey\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 3.2.0: The command no longer returns an error when source and destination names are the same.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/renamenx/\" class=\"_attribution-link\">https://redis.io/commands/renamenx/</a>\n  </p>\n</div>\n","pubsub-numsub/index":"<h1 class=\"command-name\">PUBSUB</h1>\n<pre>PUBSUB NUMSUB</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">PUBSUB NUMSUB [channel [channel ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) for the NUMSUB subcommand, where N is the number of requested channels</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@pubsub</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the number of subscribers (exclusive of clients subscribed to patterns) for the specified channels.</p> <p>Note that it is valid to call this command without channels. In this case it will just return an empty list.</p> <p>Cluster note: in a Redis Cluster clients can subscribe to every node, and can also publish to every other node. The cluster will make sure that published messages are forwarded as needed. That said, <a href=\"../pubsub\"><code>PUBSUB</code></a>'s replies in a cluster only report information from the node's Pub/Sub context, rather than the entire cluster.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a list of channels and number of subscribers for every channel.</p> <p>The format is channel, count, channel, count, ..., so the list is flat. The order in which the channels are listed is the same as the order of the channels specified in the command call.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/pubsub-numsub/\" class=\"_attribution-link\">https://redis.io/commands/pubsub-numsub/</a>\n  </p>\n</div>\n","rename/index":"<h1 class=\"command-name\">RENAME</h1>\n<pre>RENAME</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">RENAME key newkey</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Renames <code>key</code> to <code>newkey</code>. It returns an error when <code>key</code> does not exist. If <code>newkey</code> already exists it is overwritten, when this happens <code>RENAME</code> executes an implicit <a href=\"../del\"><code>DEL</code></a> operation, so if the deleted key contains a very big value it may cause high latency even if <code>RENAME</code> itself is usually a constant-time operation.</p> <p>In Cluster mode, both <code>key</code> and <code>newkey</code> must be in the same <strong>hash slot</strong>, meaning that in practice only keys that have the same hash tag can be reliably renamed in cluster.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a></p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"Hello\"\nRENAME mykey myotherkey\nGET myotherkey\n</pre> <h2 id=\"behavior-change-history\">Behavior change history</h2> <ul> <li>\n<code>&gt;= 3.2.0</code>: The command no longer returns an error when source and destination names are the same.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/rename/\" class=\"_attribution-link\">https://redis.io/commands/rename/</a>\n  </p>\n</div>\n","rpush/index":"<h1 class=\"command-name\">RPUSH</h1>\n<pre>RPUSH</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">RPUSH key element [element ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) for each element added, so O(N) to add N elements when the command is called with multiple arguments.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Insert all the specified values at the tail of the list stored at <code>key</code>. If <code>key</code> does not exist, it is created as empty list before performing the push operation. When <code>key</code> holds a value that is not a list, an error is returned.</p> <p>It is possible to push multiple elements using a single command call just specifying multiple arguments at the end of the command. Elements are inserted one after the other to the tail of the list, from the leftmost element to the rightmost element. So for instance the command <code>RPUSH mylist a b c</code> will result into a list containing <code>a</code> as first element, <code>b</code> as second element and <code>c</code> as third element.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the length of the list after the push operation.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nRPUSH mylist \"hello\"\nRPUSH mylist \"world\"\nLRANGE mylist 0 -1\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 2.4.0: Accepts multiple <code>element</code> arguments.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/rpush/\" class=\"_attribution-link\">https://redis.io/commands/rpush/</a>\n  </p>\n</div>\n","replconf/index":"<h1 class=\"command-name\">REPLCONF</h1>\n<pre>REPLCONF</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">REPLCONF</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>REPLCONF</code> command is an internal command. It is used by a Redis master to configure a connected replica.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/replconf/\" class=\"_attribution-link\">https://redis.io/commands/replconf/</a>\n  </p>\n</div>\n","reset/index":"<h1 class=\"command-name\">RESET</h1>\n<pre>RESET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">RESET</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command performs a full reset of the connection's server-side context, mimicking the effect of disconnecting and reconnecting again.</p> <p>When the command is called from a regular client connection, it does the following:</p> <ul> <li>Discards the current <a href=\"../multi\"><code>MULTI</code></a> transaction block, if one exists.</li> <li>Unwatches all keys <a href=\"../watch\"><code>WATCH</code></a>ed by the connection.</li> <li>Disables <a href=\"../client-tracking\"><code>CLIENT TRACKING</code></a>, if in use.</li> <li>Sets the connection to <a href=\"../readwrite\"><code>READWRITE</code></a> mode.</li> <li>Cancels the connection's <a href=\"../asking\"><code>ASKING</code></a> mode, if previously set.</li> <li>Sets <a href=\"../client-reply\"><code>CLIENT REPLY</code></a> to <code>ON</code>.</li> <li>Sets the protocol version to RESP2.</li> <li>\n<a href=\"../select\"><code>SELECT</code></a>s database 0.</li> <li>Exits <a href=\"../monitor\"><code>MONITOR</code></a> mode, when applicable.</li> <li>Aborts Pub/Sub's subscription state (<a href=\"../subscribe\"><code>SUBSCRIBE</code></a> and <a href=\"../psubscribe\"><code>PSUBSCRIBE</code></a>), when appropriate.</li> <li>Deauthenticates the connection, requiring a call <a href=\"../auth\"><code>AUTH</code></a> to reauthenticate when authentication is enabled.</li> <li>Turns off <code>NO-EVICT</code> mode.</li> <li>Turns off <code>NO-TOUCH</code> mode.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: always 'RESET'.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/reset/\" class=\"_attribution-link\">https://redis.io/commands/reset/</a>\n  </p>\n</div>\n","scan/index":"<h1 class=\"command-name\">SCAN</h1>\n<pre>SCAN</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SCAN cursor [MATCHpattern] [COUNTcount] [TYPEtype]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) for every call. O(N) for a complete iteration, including enough command calls for the cursor to return back to 0. N is the number of elements inside the collection.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>SCAN</code> command and the closely related commands <a href=\"../sscan\"><code>SSCAN</code></a>, <a href=\"../hscan\"><code>HSCAN</code></a> and <a href=\"../zscan\"><code>ZSCAN</code></a> are used in order to incrementally iterate over a collection of elements.</p> <ul> <li>\n<code>SCAN</code> iterates the set of keys in the currently selected Redis database.</li> <li>\n<a href=\"../sscan\"><code>SSCAN</code></a> iterates elements of Sets types.</li> <li>\n<a href=\"../hscan\"><code>HSCAN</code></a> iterates fields of Hash types and their associated values.</li> <li>\n<a href=\"../zscan\"><code>ZSCAN</code></a> iterates elements of Sorted Set types and their associated scores.</li> </ul> <p>Since these commands allow for incremental iteration, returning only a small number of elements per call, they can be used in production without the downside of commands like <a href=\"../keys\"><code>KEYS</code></a> or <a href=\"../smembers\"><code>SMEMBERS</code></a> that may block the server for a long time (even several seconds) when called against big collections of keys or elements.</p> <p>However while blocking commands like <a href=\"../smembers\"><code>SMEMBERS</code></a> are able to provide all the elements that are part of a Set in a given moment, The SCAN family of commands only offer limited guarantees about the returned elements since the collection that we incrementally iterate can change during the iteration process.</p> <p>Note that <code>SCAN</code>, <a href=\"../sscan\"><code>SSCAN</code></a>, <a href=\"../hscan\"><code>HSCAN</code></a> and <a href=\"../zscan\"><code>ZSCAN</code></a> all work very similarly, so this documentation covers all the four commands. However an obvious difference is that in the case of <a href=\"../sscan\"><code>SSCAN</code></a>, <a href=\"../hscan\"><code>HSCAN</code></a> and <a href=\"../zscan\"><code>ZSCAN</code></a> the first argument is the name of the key holding the Set, Hash or Sorted Set value. The <code>SCAN</code> command does not need any key name argument as it iterates keys in the current database, so the iterated object is the database itself.</p> <h2 id=\"scan-basic-usage\">SCAN basic usage</h2> <p>SCAN is a cursor based iterator. This means that at every call of the command, the server returns an updated cursor that the user needs to use as the cursor argument in the next call.</p> <p>An iteration starts when the cursor is set to 0, and terminates when the cursor returned by the server is 0. The following is an example of SCAN iteration:</p> <pre tabindex=\"0\">redis 127.0.0.1:6379&gt; scan 0\n1) \"17\"\n2)  1) \"key:12\"\n    2) \"key:8\"\n    3) \"key:4\"\n    4) \"key:14\"\n    5) \"key:16\"\n    6) \"key:17\"\n    7) \"key:15\"\n    8) \"key:10\"\n    9) \"key:3\"\n   10) \"key:7\"\n   11) \"key:1\"\nredis 127.0.0.1:6379&gt; scan 17\n1) \"0\"\n2) 1) \"key:5\"\n   2) \"key:18\"\n   3) \"key:0\"\n   4) \"key:2\"\n   5) \"key:19\"\n   6) \"key:13\"\n   7) \"key:6\"\n   8) \"key:9\"\n   9) \"key:11\"\n</pre>\n<p>In the example above, the first call uses zero as a cursor, to start the iteration. The second call uses the cursor returned by the previous call as the first element of the reply, that is, 17.</p> <p>As you can see the <strong>SCAN return value</strong> is an array of two values: the first value is the new cursor to use in the next call, the second value is an array of elements.</p> <p>Since in the second call the returned cursor is 0, the server signaled to the caller that the iteration finished, and the collection was completely explored. Starting an iteration with a cursor value of 0, and calling <code>SCAN</code> until the returned cursor is 0 again is called a <strong>full iteration</strong>.</p> <h2 id=\"scan-guarantees\">Scan guarantees</h2> <p>The <code>SCAN</code> command, and the other commands in the <code>SCAN</code> family, are able to provide to the user a set of guarantees associated to full iterations.</p> <ul> <li>A full iteration always retrieves all the elements that were present in the collection from the start to the end of a full iteration. This means that if a given element is inside the collection when an iteration is started, and is still there when an iteration terminates, then at some point <code>SCAN</code> returned it to the user.</li> <li>A full iteration never returns any element that was NOT present in the collection from the start to the end of a full iteration. So if an element was removed before the start of an iteration, and is never added back to the collection for all the time an iteration lasts, <code>SCAN</code> ensures that this element will never be returned.</li> </ul> <p>However because <code>SCAN</code> has very little state associated (just the cursor) it has the following drawbacks:</p> <ul> <li>A given element may be returned multiple times. It is up to the application to handle the case of duplicated elements, for example only using the returned elements in order to perform operations that are safe when re-applied multiple times.</li> <li>Elements that were not constantly present in the collection during a full iteration, may be returned or not: it is undefined.</li> </ul> <h2 id=\"number-of-elements-returned-at-every-scan-call\">Number of elements returned at every SCAN call</h2> <p><code>SCAN</code> family functions do not guarantee that the number of elements returned per call are in a given range. The commands are also allowed to return zero elements, and the client should not consider the iteration complete as long as the returned cursor is not zero.</p> <p>However the number of returned elements is reasonable, that is, in practical terms SCAN may return a maximum number of elements in the order of a few tens of elements when iterating a large collection, or may return all the elements of the collection in a single call when the iterated collection is small enough to be internally represented as an encoded data structure (this happens for small sets, hashes and sorted sets).</p> <p>However there is a way for the user to tune the order of magnitude of the number of returned elements per call using the <strong>COUNT</strong> option.</p> <h2 id=\"the-count-option\">The COUNT option</h2> <p>While <code>SCAN</code> does not provide guarantees about the number of elements returned at every iteration, it is possible to empirically adjust the behavior of <code>SCAN</code> using the <strong>COUNT</strong> option. Basically with COUNT the user specified the <em>amount of work that should be done at every call in order to retrieve elements from the collection</em>. This is <strong>just a hint</strong> for the implementation, however generally speaking this is what you could expect most of the times from the implementation.</p> <ul> <li>The default COUNT value is 10.</li> <li>When iterating the key space, or a Set, Hash or Sorted Set that is big enough to be represented by a hash table, assuming no <strong>MATCH</strong> option is used, the server will usually return <em>count</em> or a bit more than <em>count</em> elements per call. Please check the <em>why SCAN may return all the elements at once</em> section later in this document.</li> <li>When iterating Sets encoded as intsets (small sets composed of just integers), or Hashes and Sorted Sets encoded as ziplists (small hashes and sets composed of small individual values), usually all the elements are returned in the first <code>SCAN</code> call regardless of the COUNT value.</li> </ul> <p>Important: <strong>there is no need to use the same COUNT value</strong> for every iteration. The caller is free to change the count from one iteration to the other as required, as long as the cursor passed in the next call is the one obtained in the previous call to the command.</p> <h2 id=\"the-match-option\">The MATCH option</h2> <p>It is possible to only iterate elements matching a given glob-style pattern, similarly to the behavior of the <a href=\"../keys\"><code>KEYS</code></a> command that takes a pattern as its only argument.</p> <p>To do so, just append the <code>MATCH &lt;pattern&gt;</code> arguments at the end of the <code>SCAN</code> command (it works with all the SCAN family commands).</p> <p>This is an example of iteration using <strong>MATCH</strong>:</p> <pre tabindex=\"0\">redis 127.0.0.1:6379&gt; sadd myset 1 2 3 foo foobar feelsgood\n(integer) 6\nredis 127.0.0.1:6379&gt; sscan myset 0 match f*\n1) \"0\"\n2) 1) \"foo\"\n   2) \"feelsgood\"\n   3) \"foobar\"\nredis 127.0.0.1:6379&gt;\n</pre>\n<p>It is important to note that the <strong>MATCH</strong> filter is applied after elements are retrieved from the collection, just before returning data to the client. This means that if the pattern matches very little elements inside the collection, <code>SCAN</code> will likely return no elements in most iterations. An example is shown below:</p> <pre tabindex=\"0\">redis 127.0.0.1:6379&gt; scan 0 MATCH *11*\n1) \"288\"\n2) 1) \"key:911\"\nredis 127.0.0.1:6379&gt; scan 288 MATCH *11*\n1) \"224\"\n2) (empty list or set)\nredis 127.0.0.1:6379&gt; scan 224 MATCH *11*\n1) \"80\"\n2) (empty list or set)\nredis 127.0.0.1:6379&gt; scan 80 MATCH *11*\n1) \"176\"\n2) (empty list or set)\nredis 127.0.0.1:6379&gt; scan 176 MATCH *11* COUNT 1000\n1) \"0\"\n2)  1) \"key:611\"\n    2) \"key:711\"\n    3) \"key:118\"\n    4) \"key:117\"\n    5) \"key:311\"\n    6) \"key:112\"\n    7) \"key:111\"\n    8) \"key:110\"\n    9) \"key:113\"\n   10) \"key:211\"\n   11) \"key:411\"\n   12) \"key:115\"\n   13) \"key:116\"\n   14) \"key:114\"\n   15) \"key:119\"\n   16) \"key:811\"\n   17) \"key:511\"\n   18) \"key:11\"\nredis 127.0.0.1:6379&gt;\n</pre>\n<p>As you can see most of the calls returned zero elements, but the last call where a COUNT of 1000 was used in order to force the command to do more scanning for that iteration.</p> <h2 id=\"the-type-option\">The TYPE option</h2> <p>You can use the <code>TYPE</code> option to ask <code>SCAN</code> to only return objects that match a given <code>type</code>, allowing you to iterate through the database looking for keys of a specific type. The <strong>TYPE</strong> option is only available on the whole-database <code>SCAN</code>, not <a href=\"../hscan\"><code>HSCAN</code></a> or <a href=\"../zscan\"><code>ZSCAN</code></a> etc.</p> <p>The <code>type</code> argument is the same string name that the <a href=\"../type\"><code>TYPE</code></a> command returns. Note a quirk where some Redis types, such as GeoHashes, HyperLogLogs, Bitmaps, and Bitfields, may internally be implemented using other Redis types, such as a string or zset, so can't be distinguished from other keys of that same type by <code>SCAN</code>. For example, a ZSET and GEOHASH:</p> <pre tabindex=\"0\">redis 127.0.0.1:6379&gt; GEOADD geokey 0 0 value\n(integer) 1\nredis 127.0.0.1:6379&gt; ZADD zkey 1000 value\n(integer) 1\nredis 127.0.0.1:6379&gt; TYPE geokey\nzset\nredis 127.0.0.1:6379&gt; TYPE zkey\nzset\nredis 127.0.0.1:6379&gt; SCAN 0 TYPE zset\n1) \"0\"\n2) 1) \"geokey\"\n   2) \"zkey\"\n</pre>\n<p>It is important to note that the <strong>TYPE</strong> filter is also applied after elements are retrieved from the database, so the option does not reduce the amount of work the server has to do to complete a full iteration, and for rare types you may receive no elements in many iterations.</p> <h2 id=\"multiple-parallel-iterations\">Multiple parallel iterations</h2> <p>It is possible for an infinite number of clients to iterate the same collection at the same time, as the full state of the iterator is in the cursor, that is obtained and returned to the client at every call. No server side state is taken at all.</p> <h2 id=\"terminating-iterations-in-the-middle\">Terminating iterations in the middle</h2> <p>Since there is no state server side, but the full state is captured by the cursor, the caller is free to terminate an iteration half-way without signaling this to the server in any way. An infinite number of iterations can be started and never terminated without any issue.</p> <h2 id=\"calling-scan-with-a-corrupted-cursor\">Calling SCAN with a corrupted cursor</h2> <p>Calling <code>SCAN</code> with a broken, negative, out of range, or otherwise invalid cursor, will result in undefined behavior but never in a crash. What will be undefined is that the guarantees about the returned elements can no longer be ensured by the <code>SCAN</code> implementation.</p> <p>The only valid cursors to use are:</p> <ul> <li>The cursor value of 0 when starting an iteration.</li> <li>The cursor returned by the previous call to SCAN in order to continue the iteration.</li> </ul> <h2 id=\"guarantee-of-termination\">Guarantee of termination</h2> <p>The <code>SCAN</code> algorithm is guaranteed to terminate only if the size of the iterated collection remains bounded to a given maximum size, otherwise iterating a collection that always grows may result into <code>SCAN</code> to never terminate a full iteration.</p> <p>This is easy to see intuitively: if the collection grows there is more and more work to do in order to visit all the possible elements, and the ability to terminate the iteration depends on the number of calls to <code>SCAN</code> and its COUNT option value compared with the rate at which the collection grows.</p> <h2 id=\"why-scan-may-return-all-the-items-of-an-aggregate-data-type-in-a-single-call\">Why SCAN may return all the items of an aggregate data type in a single call?</h2> <p>In the <code>COUNT</code> option documentation, we state that sometimes this family of commands may return all the elements of a Set, Hash or Sorted Set at once in a single call, regardless of the <code>COUNT</code> option value. The reason why this happens is that the cursor-based iterator can be implemented, and is useful, only when the aggregate data type that we are scanning is represented as a hash table. However Redis uses a <a href=\"https://redis.io/topics/memory-optimization\">memory optimization</a> where small aggregate data types, until they reach a given amount of items or a given max size of single elements, are represented using a compact single-allocation packed encoding. When this is the case, <code>SCAN</code> has no meaningful cursor to return, and must iterate the whole data structure at once, so the only sane behavior it has is to return everything in a call.</p> <p>However once the data structures are bigger and are promoted to use real hash tables, the <code>SCAN</code> family of commands will resort to the normal behavior. Note that since this special behavior of returning all the elements is true only for small aggregates, it has no effects on the command complexity or latency. However the exact limits to get converted into real hash tables are <a href=\"https://redis.io/topics/memory-optimization\">user configurable</a>, so the maximum number of elements you can see returned in a single call depends on how big an aggregate data type could be and still use the packed representation.</p> <p>Also note that this behavior is specific of <a href=\"../sscan\"><code>SSCAN</code></a>, <a href=\"../hscan\"><code>HSCAN</code></a> and <a href=\"../zscan\"><code>ZSCAN</code></a>. <code>SCAN</code> itself never shows this behavior because the key space is always represented by hash tables.</p> <h2 id=\"return-value\">Return value</h2> <p><code>SCAN</code>, <a href=\"../sscan\"><code>SSCAN</code></a>, <a href=\"../hscan\"><code>HSCAN</code></a> and <a href=\"../zscan\"><code>ZSCAN</code></a> return a two elements multi-bulk reply, where the first element is a string representing an unsigned 64 bit number (the cursor), and the second element is a multi-bulk with an array of elements.</p> <ul> <li>\n<code>SCAN</code> array of elements is a list of keys.</li> <li>\n<a href=\"../sscan\"><code>SSCAN</code></a> array of elements is a list of Set members.</li> <li>\n<a href=\"../hscan\"><code>HSCAN</code></a> array of elements contain two elements, a field and a value, for every returned element of the Hash.</li> <li>\n<a href=\"../zscan\"><code>ZSCAN</code></a> array of elements contain two elements, a member and its associated score, for every returned element of the sorted set.</li> </ul> <h2 id=\"additional-examples\">Additional examples</h2> <p>Iteration of a Hash value.</p> <pre tabindex=\"0\">redis 127.0.0.1:6379&gt; hmset hash name Jack age 33\nOK\nredis 127.0.0.1:6379&gt; hscan hash 0\n1) \"0\"\n2) 1) \"name\"\n   2) \"Jack\"\n   3) \"age\"\n   4) \"33\"\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 6.0.0: Added the <code>TYPE</code> subcommand.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/scan/\" class=\"_attribution-link\">https://redis.io/commands/scan/</a>\n  </p>\n</div>\n","save/index":"<h1 class=\"command-name\">SAVE</h1>\n<pre>SAVE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SAVE</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the total number of keys in all databases</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>SAVE</code> commands performs a <strong>synchronous</strong> save of the dataset producing a <em>point in time</em> snapshot of all the data inside the Redis instance, in the form of an RDB file.</p> <p>You almost never want to call <code>SAVE</code> in production environments where it will block all the other clients. Instead usually <a href=\"../bgsave\"><code>BGSAVE</code></a> is used. However in case of issues preventing Redis to create the background saving child (for instance errors in the fork(2) system call), the <code>SAVE</code> command can be a good last resort to perform the dump of the latest dataset.</p> <p>Please refer to the <a href=\"https://redis.io/topics/persistence\">persistence documentation</a> for detailed information.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: The commands returns OK on success.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/save/\" class=\"_attribution-link\">https://redis.io/commands/save/</a>\n  </p>\n</div>\n","rpop/index":"<h1 class=\"command-name\">RPOP</h1>\n<pre>RPOP</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">RPOP key [count]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of elements returned</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Removes and returns the last elements of the list stored at <code>key</code>.</p> <p>By default, the command pops a single element from the end of the list. When provided with the optional <code>count</code> argument, the reply will consist of up to <code>count</code> elements, depending on the list's length.</p> <h2 id=\"return\">Return</h2> <p>When called without the <code>count</code> argument:</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the value of the last element, or <code>nil</code> when <code>key</code> does not exist.</p> <p>When called with the <code>count</code> argument:</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list of popped elements, or <code>nil</code> when <code>key</code> does not exist.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nRPUSH mylist \"one\" \"two\" \"three\" \"four\" \"five\"\nRPOP mylist\nRPOP mylist 2\nLRANGE mylist 0 -1\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 6.2.0: Added the <code>count</code> argument.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/rpop/\" class=\"_attribution-link\">https://redis.io/commands/rpop/</a>\n  </p>\n</div>\n","role/index":"<h1 class=\"command-name\">ROLE</h1>\n<pre>ROLE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ROLE</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.12</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Provide information on the role of a Redis instance in the context of replication, by returning if the instance is currently a <code>master</code>, <code>slave</code>, or <code>sentinel</code>. The command also returns additional information about the state of the replication (if the role is master or slave) or the list of monitored master names (if the role is sentinel).</p> <h2 id=\"output-format\">Output format</h2> <p>The command returns an array of elements. The first element is the role of the instance, as one of the following three strings:</p> <ul> <li>\"master\"</li> <li>\"slave\"</li> <li>\"sentinel\"</li> </ul> <p>The additional elements of the array depends on the role.</p> <h2 id=\"master-output\">Master output</h2> <p>An example of output when <code>ROLE</code> is called in a master instance:</p> <pre tabindex=\"0\">1) \"master\"\n2) (integer) 3129659\n3) 1) 1) \"127.0.0.1\"\n      2) \"9001\"\n      3) \"3129242\"\n   2) 1) \"127.0.0.1\"\n      2) \"9002\"\n      3) \"3129543\"\n</pre>\n<p>The master output is composed of the following parts:</p> <ol> <li>The string <code>master</code>.</li> <li>The current master replication offset, which is an offset that masters and replicas share to understand, in partial resynchronizations, the part of the replication stream the replicas needs to fetch to continue.</li> <li>An array composed of three elements array representing the connected replicas. Every sub-array contains the replica IP, port, and the last acknowledged replication offset.</li> </ol> <h2 id=\"output-of-the-command-on-replicas\">Output of the command on replicas</h2> <p>An example of output when <code>ROLE</code> is called in a replica instance:</p> <pre tabindex=\"0\">1) \"slave\"\n2) \"127.0.0.1\"\n3) (integer) 9000\n4) \"connected\"\n5) (integer) 3167038\n</pre>\n<p>The replica output is composed of the following parts:</p> <ol> <li>The string <code>slave</code>, because of backward compatibility (see note at the end of this page).</li> <li>The IP of the master.</li> <li>The port number of the master.</li> <li>The state of the replication from the point of view of the master, that can be <code>connect</code> (the instance needs to connect to its master), <code>connecting</code> (the master-replica connection is in progress), <code>sync</code> (the master and replica are trying to perform the synchronization), <code>connected</code> (the replica is online).</li> <li>The amount of data received from the replica so far in terms of master replication offset.</li> </ol> <h2 id=\"sentinel-output\">Sentinel output</h2> <p>An example of Sentinel output:</p> <pre tabindex=\"0\">1) \"sentinel\"\n2) 1) \"resque-master\"\n   2) \"html-fragments-master\"\n   3) \"stats-master\"\n   4) \"metadata-master\"\n</pre>\n<p>The sentinel output is composed of the following parts:</p> <ol> <li>The string <code>sentinel</code>.</li> <li>An array of master names monitored by this Sentinel instance.</li> </ol> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: where the first element is one of <code>master</code>, <code>slave</code>, <code>sentinel</code> and the additional elements are role-specific as illustrated above.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nROLE\n</pre> <p><strong>A note about the word slave used in this man page</strong>: Starting with Redis 5, if not for backward compatibility, the Redis project no longer uses the word slave. Unfortunately in this command the word slave is part of the protocol, so we'll be able to remove such occurrences only when this API will be naturally deprecated.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/role/\" class=\"_attribution-link\">https://redis.io/commands/role/</a>\n  </p>\n</div>\n","setex/index":"<h1 class=\"command-name\">SETEX</h1>\n<pre>SETEX (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 2.6.12, this command is regarded as deprecated.</p> <p>It can be replaced by <a href=\"../set\"><code>SET</code></a> with the <code>EX</code> argument when migrating or writing new code.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SETEX key seconds value</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@string</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Set <code>key</code> to hold the string <code>value</code> and set <code>key</code> to timeout after a given number of seconds. This command is equivalent to:</p> <pre tabindex=\"0\">SET key value EX seconds\n</pre>\n<p>An error is returned when <code>seconds</code> is invalid.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a></p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSETEX mykey 10 \"Hello\"\nTTL mykey\nGET mykey\n</pre> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ttl\"><code>TTL</code></a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/setex/\" class=\"_attribution-link\">https://redis.io/commands/setex/</a>\n  </p>\n</div>\n","rpushx/index":"<h1 class=\"command-name\">RPUSHX</h1>\n<pre>RPUSHX</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">RPUSHX key element [element ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) for each element added, so O(N) to add N elements when the command is called with multiple arguments.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Inserts specified values at the tail of the list stored at <code>key</code>, only if <code>key</code> already exists and holds a list. In contrary to <a href=\"../rpush\"><code>RPUSH</code></a>, no operation will be performed when <code>key</code> does not yet exist.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the length of the list after the push operation.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nRPUSH mylist \"Hello\"\nRPUSHX mylist \"World\"\nRPUSHX myotherlist \"World\"\nLRANGE mylist 0 -1\nLRANGE myotherlist 0 -1\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 4.0.0: Accepts multiple <code>element</code> arguments.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/rpushx/\" class=\"_attribution-link\">https://redis.io/commands/rpushx/</a>\n  </p>\n</div>\n","set/index":"<h1 class=\"command-name\">SET</h1>\n<pre>SET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SET key value [NX | XX] [GET] [EXseconds | PXmilliseconds |\n  EXATunix-time-seconds | PXATunix-time-milliseconds | KEEPTTL]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@string</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Set <code>key</code> to hold the string <code>value</code>. If <code>key</code> already holds a value, it is overwritten, regardless of its type. Any previous time to live associated with the key is discarded on successful <code>SET</code> operation.</p> <h2 id=\"options\">Options</h2> <p>The <code>SET</code> command supports a set of options that modify its behavior:</p> <ul> <li>\n<code>EX</code> <em>seconds</em> -- Set the specified expire time, in seconds.</li> <li>\n<code>PX</code> <em>milliseconds</em> -- Set the specified expire time, in milliseconds.</li> <li>\n<code>EXAT</code> <em>timestamp-seconds</em> -- Set the specified Unix time at which the key will expire, in seconds.</li> <li>\n<code>PXAT</code> <em>timestamp-milliseconds</em> -- Set the specified Unix time at which the key will expire, in milliseconds.</li> <li>\n<code>NX</code> -- Only set the key if it does not already exist.</li> <li>\n<code>XX</code> -- Only set the key if it already exist.</li> <li>\n<code>KEEPTTL</code> -- Retain the time to live associated with the key.</li> <li>\n<code>GET</code> -- Return the old string stored at key, or nil if key did not exist. An error is returned and <code>SET</code> aborted if the value stored at key is not a string.</li> </ul> <p>Note: Since the <code>SET</code> command options can replace <a href=\"../setnx\"><code>SETNX</code></a>, <a href=\"../setex\"><code>SETEX</code></a>, <a href=\"../psetex\"><code>PSETEX</code></a>, <a href=\"../getset\"><code>GETSET</code></a>, it is possible that in future versions of Redis these commands will be deprecated and finally removed.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> if <code>SET</code> was executed correctly.</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Null reply</a>: <code>(nil)</code> if the <code>SET</code> operation was not performed because the user specified the <code>NX</code> or <code>XX</code> option but the condition was not met.</p> <p>If the command is issued with the <code>GET</code> option, the above does not apply. It will instead reply as follows, regardless if the <code>SET</code> was actually performed:</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the old string value stored at key.</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Null reply</a>: <code>(nil)</code> if the key did not exist.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"Hello\"\nGET mykey\n<p>SET anotherkey \"will expire in a minute\" EX 60</p>\n</pre> <h2 id=\"patterns\">Patterns</h2> <p><strong>Note:</strong> The following pattern is discouraged in favor of <a href=\"https://redis.io/topics/distlock\">the Redlock algorithm</a> which is only a bit more complex to implement, but offers better guarantees and is fault tolerant.</p> <p>The command <code>SET resource-name anystring NX EX max-lock-time</code> is a simple way to implement a locking system with Redis.</p> <p>A client can acquire the lock if the above command returns <code>OK</code> (or retry after some time if the command returns Nil), and remove the lock just using <a href=\"../del\"><code>DEL</code></a>.</p> <p>The lock will be auto-released after the expire time is reached.</p> <p>It is possible to make this system more robust modifying the unlock schema as follows:</p> <ul> <li>Instead of setting a fixed string, set a non-guessable large random string, called token.</li> <li>Instead of releasing the lock with <a href=\"../del\"><code>DEL</code></a>, send a script that only removes the key if the value matches.</li> </ul> <p>This avoids that a client will try to release the lock after the expire time deleting the key created by another client that acquired the lock later.</p> <p>An example of unlock script would be similar to the following:</p> <pre>if redis.call(\"get\",KEYS[1]) == ARGV[1]\nthen\n    return redis.call(\"del\",KEYS[1])\nelse\n    return 0\nend\n</pre> <p>The script should be called with <code>EVAL ...script... 1 resource-name token-value</code></p> <h2>History</h2> <ul> <li>Starting with Redis version 2.6.12: Added the <code>EX</code>, <code>PX</code>, <code>NX</code> and <code>XX</code> options.</li> <li>Starting with Redis version 6.0.0: Added the <code>KEEPTTL</code> option.</li> <li>Starting with Redis version 6.2.0: Added the <code>GET</code>, <code>EXAT</code> and <code>PXAT</code> option.</li> <li>Starting with Redis version 7.0.0: Allowed the <code>NX</code> and <code>GET</code> options to be used together.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/set/\" class=\"_attribution-link\">https://redis.io/commands/set/</a>\n  </p>\n</div>\n","script-kill/index":"<h1 class=\"command-name\">SCRIPT</h1>\n<pre>SCRIPT KILL</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SCRIPT KILL</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.6.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@scripting</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Kills the currently executing <a href=\"../eval\"><code>EVAL</code></a> script, assuming no write operation was yet performed by the script.</p> <p>This command is mainly useful to kill a script that is running for too much time(for instance, because it entered an infinite loop because of a bug). The script will be killed, and the client currently blocked into EVAL will see the command returning with an error.</p> <p>If the script has already performed write operations, it can not be killed in this way because it would violate Lua's script atomicity contract. In such a case, only <code>SHUTDOWN NOSAVE</code> can kill the script, killing the Redis process in a hard way and preventing it from persisting with half-written information.</p> <p>For more information about <a href=\"../eval\"><code>EVAL</code></a> scripts please refer to <a href=\"https://redis.io/topics/eval-intro\">Introduction to Eval Scripts</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/script-kill/\" class=\"_attribution-link\">https://redis.io/commands/script-kill/</a>\n  </p>\n</div>\n","sadd/index":"<h1 class=\"command-name\">SADD</h1>\n<pre>SADD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SADD key member [member ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) for each element added, so O(N) to add N elements when the command is called with multiple arguments.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@set</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Add the specified members to the set stored at <code>key</code>. Specified members that are already a member of this set are ignored. If <code>key</code> does not exist, a new set is created before adding the specified members.</p> <p>An error is returned when the value stored at <code>key</code> is not a set.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of elements that were added to the set, not including all the elements already present in the set.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSADD myset \"Hello\"\nSADD myset \"World\"\nSADD myset \"World\"\nSMEMBERS myset\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 2.4.0: Accepts multiple <code>member</code> arguments.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/sadd/\" class=\"_attribution-link\">https://redis.io/commands/sadd/</a>\n  </p>\n</div>\n","setrange/index":"<h1 class=\"command-name\">SETRANGE</h1>\n<pre>SETRANGE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SETRANGE key offset value</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1), not counting the time taken to copy the new string in place. Usually, this string is very small so the amortized complexity is O(1). Otherwise, complexity is O(M) with M being the length of the value argument.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@string</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Overwrites part of the string stored at <em>key</em>, starting at the specified offset, for the entire length of <em>value</em>. If the offset is larger than the current length of the string at <em>key</em>, the string is padded with zero-bytes to make <em>offset</em> fit. Non-existing keys are considered as empty strings, so this command will make sure it holds a string large enough to be able to set <em>value</em> at <em>offset</em>.</p> <p>Note that the maximum offset that you can set is 2^29 -1 (536870911), as Redis Strings are limited to 512 megabytes. If you need to grow beyond this size, you can use multiple keys.</p> <p><strong>Warning</strong>: When setting the last possible byte and the string value stored at <em>key</em> does not yet hold a string value, or holds a small string value, Redis needs to allocate all intermediate memory which can block the server for some time. On a 2010 MacBook Pro, setting byte number 536870911 (512MB allocation) takes ~300ms, setting byte number 134217728 (128MB allocation) takes ~80ms, setting bit number 33554432 (32MB allocation) takes ~30ms and setting bit number 8388608 (8MB allocation) takes ~8ms. Note that once this first allocation is done, subsequent calls to <code>SETRANGE</code> for the same <em>key</em> will not have the allocation overhead.</p> <h2 id=\"patterns\">Patterns</h2> <p>Thanks to <code>SETRANGE</code> and the analogous <a href=\"../getrange\"><code>GETRANGE</code></a> commands, you can use Redis strings as a linear array with O(1) random access. This is a very fast and efficient storage in many real world use cases.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the length of the string after it was modified by the command.</p> <h2 id=\"examples\">Examples</h2> <p>Basic usage:</p>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET key1 \"Hello World\"\nSETRANGE key1 6 \"Redis\"\nGET key1\n</pre> <p>Example of zero padding:</p>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSETRANGE key2 6 \"Redis\"\nGET key2\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/setrange/\" class=\"_attribution-link\">https://redis.io/commands/setrange/</a>\n  </p>\n</div>\n","scard/index":"<h1 class=\"command-name\">SCARD</h1>\n<pre>SCARD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SCARD key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@set</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the set cardinality (number of elements) of the set stored at <code>key</code>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the cardinality (number of elements) of the set, or <code>0</code> if <code>key</code> does not exist.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSADD myset \"Hello\"\nSADD myset \"World\"\nSCARD myset\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/scard/\" class=\"_attribution-link\">https://redis.io/commands/scard/</a>\n  </p>\n</div>\n","script-debug/index":"<h1 class=\"command-name\">SCRIPT</h1>\n<pre>SCRIPT DEBUG</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SCRIPT DEBUG &lt;YES | SYNC | NO&gt;</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@scripting</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Set the debug mode for subsequent scripts executed with <a href=\"../eval\"><code>EVAL</code></a>. Redis includes a complete Lua debugger, codename LDB, that can be used to make the task of writing complex scripts much simpler. In debug mode Redis acts as a remote debugging server and a client, such as <code>redis-cli</code>, can execute scripts step by step, set breakpoints, inspect variables and more - for additional information about LDB refer to the <a href=\"https://redis.io/topics/ldb\">Redis Lua debugger</a> page.</p> <p><strong>Important note:</strong> avoid debugging Lua scripts using your Redis production server. Use a development server instead.</p> <p>LDB can be enabled in one of two modes: asynchronous or synchronous. In asynchronous mode the server creates a forked debugging session that does not block and all changes to the data are <strong>rolled back</strong> after the session finishes, so debugging can be restarted using the same initial state. The alternative synchronous debug mode blocks the server while the debugging session is active and retains all changes to the data set once it ends.</p> <ul> <li>\n<code>YES</code>. Enable non-blocking asynchronous debugging of Lua scripts (changes are discarded).</li> <li>\n<code>SYNC</code>. Enable blocking synchronous debugging of Lua scripts (saves changes to data).</li> <li>\n<code>NO</code>. Disables scripts debug mode.</li> </ul> <p>For more information about <a href=\"../eval\"><code>EVAL</code></a> scripts please refer to <a href=\"https://redis.io/topics/eval-intro\">Introduction to Eval Scripts</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code>.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/script-debug/\" class=\"_attribution-link\">https://redis.io/commands/script-debug/</a>\n  </p>\n</div>\n","select/index":"<h1 class=\"command-name\">SELECT</h1>\n<pre>SELECT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SELECT index</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Select the Redis logical database having the specified zero-based numeric index. New connections always use the database 0.</p> <p>Selectable Redis databases are a form of namespacing: all databases are still persisted in the same RDB / AOF file. However different databases can have keys with the same name, and commands like <a href=\"../flushdb\"><code>FLUSHDB</code></a>, <a href=\"../swapdb\"><code>SWAPDB</code></a> or <a href=\"../randomkey\"><code>RANDOMKEY</code></a> work on specific databases.</p> <p>In practical terms, Redis databases should be used to separate different keys belonging to the same application (if needed), and not to use a single Redis instance for multiple unrelated applications.</p> <p>When using Redis Cluster, the <code>SELECT</code> command cannot be used, since Redis Cluster only supports database zero. In the case of a Redis Cluster, having multiple databases would be useless and an unnecessary source of complexity. Commands operating atomically on a single database would not be possible with the Redis Cluster design and goals.</p> <p>Since the currently selected database is a property of the connection, clients should track the currently selected database and re-select it on reconnection. While there is no command in order to query the selected database in the current connection, the <a href=\"../client-list\"><code>CLIENT LIST</code></a> output shows, for each client, the currently selected database.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/select/\" class=\"_attribution-link\">https://redis.io/commands/select/</a>\n  </p>\n</div>\n","script-flush/index":"<h1 class=\"command-name\">SCRIPT</h1>\n<pre>SCRIPT FLUSH</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SCRIPT FLUSH [ASYNC | SYNC]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.6.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) with N being the number of scripts in cache</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@scripting</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Flush the Lua scripts cache.</p> <p>By default, <code>SCRIPT FLUSH</code> will synchronously flush the cache. Starting with Redis 6.2, setting the <strong>lazyfree-lazy-user-flush</strong> configuration directive to \"yes\" changes the default flush mode to asynchronous.</p> <p>It is possible to use one of the following modifiers to dictate the flushing mode explicitly:</p> <ul> <li>\n<code>ASYNC</code>: flushes the cache asynchronously</li> <li>\n<code>SYNC</code>: flushes the cache synchronously</li> </ul> <p>For more information about <a href=\"../eval\"><code>EVAL</code></a> scripts please refer to <a href=\"https://redis.io/topics/eval-intro\">Introduction to Eval Scripts</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a></p> <h2 id=\"behavior-change-history\">Behavior change history</h2> <ul> <li>\n<code>&gt;= 6.2.0</code>: Default flush behavior now configurable by the <strong>lazyfree-lazy-user-flush</strong> configuration directive.</li> </ul> <h2>History</h2> <ul> <li>Starting with Redis version 6.2.0: Added the <code>ASYNC</code> and <code>SYNC</code> flushing mode modifiers.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/script-flush/\" class=\"_attribution-link\">https://redis.io/commands/script-flush/</a>\n  </p>\n</div>\n","script-exists/index":"<h1 class=\"command-name\">SCRIPT</h1>\n<pre>SCRIPT EXISTS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SCRIPT EXISTS sha1 [sha1 ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.6.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) with N being the number of scripts to check (so checking a single script is an O(1) operation).</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@scripting</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns information about the existence of the scripts in the script cache.</p> <p>This command accepts one or more SHA1 digests and returns a list of ones or zeros to signal if the scripts are already defined or not inside the script cache. This can be useful before a pipelining operation to ensure that scripts are loaded (and if not, to load them using <a href=\"../script-load\"><code>SCRIPT LOAD</code></a>) so that the pipelining operation can be performed solely using <a href=\"../evalsha\"><code>EVALSHA</code></a> instead of <a href=\"../eval\"><code>EVAL</code></a> to save bandwidth.</p> <p>For more information about <a href=\"../eval\"><code>EVAL</code></a> scripts please refer to <a href=\"https://redis.io/topics/eval-intro\">Introduction to Eval Scripts</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> The command returns an array of integers that correspond to the specified SHA1 digest arguments. For every corresponding SHA1 digest of a script that actually exists in the script cache, a 1 is returned, otherwise 0 is returned.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/script-exists/\" class=\"_attribution-link\">https://redis.io/commands/script-exists/</a>\n  </p>\n</div>\n","sismember/index":"<h1 class=\"command-name\">SISMEMBER</h1>\n<pre>SISMEMBER</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SISMEMBER key member</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@set</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns if <code>member</code> is a member of the set stored at <code>key</code>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, specifically:</p> <ul> <li>\n<code>1</code> if the element is a member of the set.</li> <li>\n<code>0</code> if the element is not a member of the set, or if <code>key</code> does not exist.</li> </ul> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSADD myset \"one\"\nSISMEMBER myset \"one\"\nSISMEMBER myset \"two\"\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/sismember/\" class=\"_attribution-link\">https://redis.io/commands/sismember/</a>\n  </p>\n</div>\n","sdiffstore/index":"<h1 class=\"command-name\">SDIFFSTORE</h1>\n<pre>SDIFFSTORE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SDIFFSTORE destination key [key ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the total number of elements in all given sets.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@set</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command is equal to <a href=\"../sdiff\"><code>SDIFF</code></a>, but instead of returning the resulting set, it is stored in <code>destination</code>.</p> <p>If <code>destination</code> already exists, it is overwritten.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of elements in the resulting set.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSADD key1 \"a\"\nSADD key1 \"b\"\nSADD key1 \"c\"\nSADD key2 \"c\"\nSADD key2 \"d\"\nSADD key2 \"e\"\nSDIFFSTORE key key1 key2\nSMEMBERS key\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/sdiffstore/\" class=\"_attribution-link\">https://redis.io/commands/sdiffstore/</a>\n  </p>\n</div>\n","setbit/index":"<h1 class=\"command-name\">SETBIT</h1>\n<pre>SETBIT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SETBIT key offset value</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@bitmap</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Sets or clears the bit at <em>offset</em> in the string value stored at <em>key</em>.</p> <p>The bit is either set or cleared depending on <em>value</em>, which can be either 0 or 1.</p> <p>When <em>key</em> does not exist, a new string value is created. The string is grown to make sure it can hold a bit at <em>offset</em>. The <em>offset</em> argument is required to be greater than or equal to 0, and smaller than 2^32 (this limits bitmaps to 512MB). When the string at <em>key</em> is grown, added bits are set to 0.</p> <p><strong>Warning</strong>: When setting the last possible bit (<em>offset</em> equal to 2^32 -1) and the string value stored at <em>key</em> does not yet hold a string value, or holds a small string value, Redis needs to allocate all intermediate memory which can block the server for some time. On a 2010 MacBook Pro, setting bit number 2^32 -1 (512MB allocation) takes ~300ms, setting bit number 2^30 -1 (128MB allocation) takes ~80ms, setting bit number 2^28 -1 (32MB allocation) takes ~30ms and setting bit number 2^26 -1 (8MB allocation) takes ~8ms. Note that once this first allocation is done, subsequent calls to <code>SETBIT</code> for the same <em>key</em> will not have the allocation overhead.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the original bit value stored at <em>offset</em>.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSETBIT mykey 7 1\nSETBIT mykey 7 0\nGET mykey\n</pre> <h2 id=\"pattern-accessing-the-entire-bitmap\">Pattern: accessing the entire bitmap</h2> <p>There are cases when you need to set all the bits of single bitmap at once, for example when initializing it to a default non-zero value. It is possible to do this with multiple calls to the <code>SETBIT</code> command, one for each bit that needs to be set. However, so as an optimization you can use a single <a href=\"../set\"><code>SET</code></a> command to set the entire bitmap.</p> <p>Bitmaps are not an actual data type, but a set of bit-oriented operations defined on the String type (for more information refer to the <a href=\"https://redis.io/topics/data-types-intro#bitmaps\">Bitmaps section of the Data Types Introduction page</a>). This means that bitmaps can be used with string commands, and most importantly with <a href=\"../set\"><code>SET</code></a> and <a href=\"../get\"><code>GET</code></a>.</p> <p>Because Redis' strings are binary-safe, a bitmap is trivially encoded as a bytes stream. The first byte of the string corresponds to offsets 0..7 of the bitmap, the second byte to the 8..15 range, and so forth.</p> <p>For example, after setting a few bits, getting the string value of the bitmap would look like this:</p> <pre tabindex=\"0\">&gt; SETBIT bitmapsarestrings 2 1\n&gt; SETBIT bitmapsarestrings 3 1\n&gt; SETBIT bitmapsarestrings 5 1\n&gt; SETBIT bitmapsarestrings 10 1\n&gt; SETBIT bitmapsarestrings 11 1\n&gt; SETBIT bitmapsarestrings 14 1\n&gt; GET bitmapsarestrings\n\"42\"\n</pre>\n<p>By getting the string representation of a bitmap, the client can then parse the response's bytes by extracting the bit values using native bit operations in its native programming language. Symmetrically, it is also possible to set an entire bitmap by performing the bits-to-bytes encoding in the client and calling <a href=\"../set\"><code>SET</code></a> with the resultant string.</p> <h2 id=\"pattern-setting-multiple-bits\">Pattern: setting multiple bits</h2> <p><code>SETBIT</code> excels at setting single bits, and can be called several times when multiple bits need to be set. To optimize this operation you can replace multiple <code>SETBIT</code> calls with a single call to the variadic <a href=\"../bitfield\"><code>BITFIELD</code></a> command and the use of fields of type <code>u1</code>.</p> <p>For example, the example above could be replaced by:</p> <pre tabindex=\"0\">&gt; BITFIELD bitsinabitmap SET u1 2 1 SET u1 3 1 SET u1 5 1 SET u1 10 1 SET u1 11 1 SET u1 14 1\n</pre>\n<h2 id=\"advanced-pattern-accessing-bitmap-ranges\">Advanced Pattern: accessing bitmap ranges</h2> <p>It is also possible to use the <a href=\"../getrange\"><code>GETRANGE</code></a> and <a href=\"../setrange\"><code>SETRANGE</code></a> string commands to efficiently access a range of bit offsets in a bitmap. Below is a sample implementation in idiomatic Redis Lua scripting that can be run with the <a href=\"../eval\"><code>EVAL</code></a> command:</p> <pre tabindex=\"0\">--[[\nSets a bitmap range\n\nBitmaps are stored as Strings in Redis. A range spans one or more bytes,\nso we can call [`SETRANGE`](/commands/setrange) when entire bytes need to be set instead of flipping\nindividual bits. Also, to avoid multiple internal memory allocations in\nRedis, we traverse in reverse.\nExpected input:\n  KEYS[1] - bitfield key\n  ARGV[1] - start offset (0-based, inclusive)\n  ARGV[2] - end offset (same, should be bigger than start, no error checking)\n  ARGV[3] - value (should be 0 or 1, no error checking)\n]]--\n\n-- A helper function to stringify a binary string to semi-binary format\nlocal function tobits(str)\n  local r = ''\n  for i = 1, string.len(str) do\n    local c = string.byte(str, i)\n    local b = ' '\n    for j = 0, 7 do\n      b = tostring(bit.band(c, 1)) .. b\n      c = bit.rshift(c, 1)\n    end\n    r = r .. b\n  end\n  return r\nend\n\n-- Main\nlocal k = KEYS[1]\nlocal s, e, v = tonumber(ARGV[1]), tonumber(ARGV[2]), tonumber(ARGV[3])\n\n-- First treat the dangling bits in the last byte\nlocal ms, me = s % 8, (e + 1) % 8\nif me &gt; 0 then\n  local t = math.max(e - me + 1, s)\n  for i = e, t, -1 do\n    redis.call('SETBIT', k, i, v)\n  end\n  e = t\nend\n\n-- Then the danglings in the first byte\nif ms &gt; 0 then\n  local t = math.min(s - ms + 7, e)\n  for i = s, t, 1 do\n    redis.call('SETBIT', k, i, v)\n  end\n  s = t + 1\nend\n\n-- Set a range accordingly, if at all\nlocal rs, re = s / 8, (e + 1) / 8\nlocal rl = re - rs\nif rl &gt; 0 then\n  local b = '\\255'\n  if 0 == v then\n    b = '\\0'\n  end\n  redis.call('SETRANGE', k, rs, string.rep(b, rl))\nend\n</pre>\n<p><strong>Note:</strong> the implementation for getting a range of bit offsets from a bitmap is left as an exercise to the reader.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/setbit/\" class=\"_attribution-link\">https://redis.io/commands/setbit/</a>\n  </p>\n</div>\n","sinter/index":"<h1 class=\"command-name\">SINTER</h1>\n<pre>SINTER</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SINTER key [key ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N*M) worst case where N is the cardinality of the smallest set and M is the number of sets.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@set</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the members of the set resulting from the intersection of all the given sets.</p> <p>For example:</p> <pre tabindex=\"0\">key1 = {a,b,c,d}\nkey2 = {c}\nkey3 = {a,c,e}\nSINTER key1 key2 key3 = {c}\n</pre>\n<p>Keys that do not exist are considered to be empty sets. With one of the keys being an empty set, the resulting set is also empty (since set intersection with an empty set always results in an empty set).</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list with members of the resulting set.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSADD key1 \"a\"\nSADD key1 \"b\"\nSADD key1 \"c\"\nSADD key2 \"c\"\nSADD key2 \"d\"\nSADD key2 \"e\"\nSINTER key1 key2\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/sinter/\" class=\"_attribution-link\">https://redis.io/commands/sinter/</a>\n  </p>\n</div>\n","sinterstore/index":"<h1 class=\"command-name\">SINTERSTORE</h1>\n<pre>SINTERSTORE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SINTERSTORE destination key [key ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N*M) worst case where N is the cardinality of the smallest set and M is the number of sets.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@set</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command is equal to <a href=\"../sinter\"><code>SINTER</code></a>, but instead of returning the resulting set, it is stored in <code>destination</code>.</p> <p>If <code>destination</code> already exists, it is overwritten.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of elements in the resulting set.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSADD key1 \"a\"\nSADD key1 \"b\"\nSADD key1 \"c\"\nSADD key2 \"c\"\nSADD key2 \"d\"\nSADD key2 \"e\"\nSINTERSTORE key key1 key2\nSMEMBERS key\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/sinterstore/\" class=\"_attribution-link\">https://redis.io/commands/sinterstore/</a>\n  </p>\n</div>\n","setnx/index":"<h1 class=\"command-name\">SETNX</h1>\n<pre>SETNX (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 2.6.12, this command is regarded as deprecated.</p> <p>It can be replaced by <a href=\"../set\"><code>SET</code></a> with the <code>NX</code> argument when migrating or writing new code.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SETNX key value</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@string</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Set <code>key</code> to hold string <code>value</code> if <code>key</code> does not exist. In that case, it is equal to <a href=\"../set\"><code>SET</code></a>. When <code>key</code> already holds a value, no operation is performed. <code>SETNX</code> is short for \"<strong>SET</strong> if <strong>N</strong>ot e<strong>X</strong>ists\".</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, specifically:</p> <ul> <li>\n<code>1</code> if the key was set</li> <li>\n<code>0</code> if the key was not set</li> </ul> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSETNX mykey \"Hello\"\nSETNX mykey \"World\"\nGET mykey\n</pre> <h2 id=\"design-pattern-locking-with-setnx\">Design pattern: Locking with <code>SETNX</code>\n</h2> <p><strong>Please note that:</strong></p> <ol> <li>The following pattern is discouraged in favor of <a href=\"https://redis.io/topics/distlock\">the Redlock algorithm</a> which is only a bit more complex to implement, but offers better guarantees and is fault tolerant.</li> <li>We document the old pattern anyway because certain existing implementations link to this page as a reference. Moreover it is an interesting example of how Redis commands can be used in order to mount programming primitives.</li> <li>Anyway even assuming a single-instance locking primitive, starting with 2.6.12 it is possible to create a much simpler locking primitive, equivalent to the one discussed here, using the <a href=\"../set\"><code>SET</code></a> command to acquire the lock, and a simple Lua script to release the lock. The pattern is documented in the <a href=\"../set\"><code>SET</code></a> command page.</li> </ol> <p>That said, <code>SETNX</code> can be used, and was historically used, as a locking primitive. For example, to acquire the lock of the key <code>foo</code>, the client could try the following:</p> <pre tabindex=\"0\">SETNX lock.foo &lt;current Unix time + lock timeout + 1&gt;\n</pre>\n<p>If <code>SETNX</code> returns <code>1</code> the client acquired the lock, setting the <code>lock.foo</code> key to the Unix time at which the lock should no longer be considered valid. The client will later use <code>DEL lock.foo</code> in order to release the lock.</p> <p>If <code>SETNX</code> returns <code>0</code> the key is already locked by some other client. We can either return to the caller if it's a non blocking lock, or enter a loop retrying to hold the lock until we succeed or some kind of timeout expires.</p> <h3 id=\"handling-deadlocks\">Handling deadlocks</h3> <p>In the above locking algorithm there is a problem: what happens if a client fails, crashes, or is otherwise not able to release the lock? It's possible to detect this condition because the lock key contains a UNIX timestamp. If such a timestamp is equal to the current Unix time the lock is no longer valid.</p> <p>When this happens we can't just call <a href=\"../del\"><code>DEL</code></a> against the key to remove the lock and then try to issue a <code>SETNX</code>, as there is a race condition here, when multiple clients detected an expired lock and are trying to release it.</p> <ul> <li>C1 and C2 read <code>lock.foo</code> to check the timestamp, because they both received <code>0</code> after executing <code>SETNX</code>, as the lock is still held by C3 that crashed after holding the lock.</li> <li>C1 sends <code>DEL lock.foo</code>\n</li> <li>C1 sends <code>SETNX lock.foo</code> and it succeeds</li> <li>C2 sends <code>DEL lock.foo</code>\n</li> <li>C2 sends <code>SETNX lock.foo</code> and it succeeds</li> <li>\n<strong>ERROR</strong>: both C1 and C2 acquired the lock because of the race condition.</li> </ul> <p>Fortunately, it's possible to avoid this issue using the following algorithm. Let's see how C4, our sane client, uses the good algorithm:</p> <ul> <li> <p>C4 sends <code>SETNX lock.foo</code> in order to acquire the lock</p> </li> <li> <p>The crashed client C3 still holds it, so Redis will reply with <code>0</code> to C4.</p> </li> <li> <p>C4 sends <code>GET lock.foo</code> to check if the lock expired. If it is not, it will sleep for some time and retry from the start.</p> </li> <li> <p>Instead, if the lock is expired because the Unix time at <code>lock.foo</code> is older than the current Unix time, C4 tries to perform:</p> <pre tabindex=\"0\">GETSET lock.foo &lt;current Unix timestamp + lock timeout + 1&gt;\n</pre>\n</li> <li> <p>Because of the <a href=\"../getset\"><code>GETSET</code></a> semantic, C4 can check if the old value stored at <code>key</code> is still an expired timestamp. If it is, the lock was acquired.</p> </li> <li> <p>If another client, for instance C5, was faster than C4 and acquired the lock with the <a href=\"../getset\"><code>GETSET</code></a> operation, the C4 <a href=\"../getset\"><code>GETSET</code></a> operation will return a non expired timestamp. C4 will simply restart from the first step. Note that even if C4 set the key a bit a few seconds in the future this is not a problem.</p> </li> </ul> <p>In order to make this locking algorithm more robust, a client holding a lock should always check the timeout didn't expire before unlocking the key with <a href=\"../del\"><code>DEL</code></a> because client failures can be complex, not just crashing but also blocking a lot of time against some operations and trying to issue <a href=\"../del\"><code>DEL</code></a> after a lot of time (when the LOCK is already held by another client).</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/setnx/\" class=\"_attribution-link\">https://redis.io/commands/setnx/</a>\n  </p>\n</div>\n","sintercard/index":"<h1 class=\"command-name\">SINTERCARD</h1>\n<pre>SINTERCARD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SINTERCARD numkeys key [key ...] [LIMITlimit]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N*M) worst case where N is the cardinality of the smallest set and M is the number of sets.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@set</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command is similar to <a href=\"../sinter\"><code>SINTER</code></a>, but instead of returning the result set, it returns just the cardinality of the result. Returns the cardinality of the set which would result from the intersection of all the given sets.</p> <p>Keys that do not exist are considered to be empty sets. With one of the keys being an empty set, the resulting set is also empty (since set intersection with an empty set always results in an empty set).</p> <p>By default, the command calculates the cardinality of the intersection of all given sets. When provided with the optional <code>LIMIT</code> argument (which defaults to 0 and means unlimited), if the intersection cardinality reaches limit partway through the computation, the algorithm will exit and yield limit as the cardinality. Such implementation ensures a significant speedup for queries where the limit is lower than the actual intersection cardinality.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of elements in the resulting intersection.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSADD key1 \"a\"\nSADD key1 \"b\"\nSADD key1 \"c\"\nSADD key1 \"d\"\nSADD key2 \"c\"\nSADD key2 \"d\"\nSADD key2 \"e\"\nSINTER key1 key2\nSINTERCARD 2 key1 key2\nSINTERCARD 2 key1 key2 LIMIT 1\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/sintercard/\" class=\"_attribution-link\">https://redis.io/commands/sintercard/</a>\n  </p>\n</div>\n","script-load/index":"<h1 class=\"command-name\">SCRIPT</h1>\n<pre>SCRIPT LOAD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SCRIPT LOAD script</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.6.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) with N being the length in bytes of the script body.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@scripting</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Load a script into the scripts cache, without executing it. After the specified command is loaded into the script cache it will be callable using <a href=\"../evalsha\"><code>EVALSHA</code></a> with the correct SHA1 digest of the script, exactly like after the first successful invocation of <a href=\"../eval\"><code>EVAL</code></a>.</p> <p>The script is guaranteed to stay in the script cache forever (unless <code>SCRIPT FLUSH</code> is called).</p> <p>The command works in the same way even if the script was already present in the script cache.</p> <p>For more information about <a href=\"../eval\"><code>EVAL</code></a> scripts please refer to <a href=\"https://redis.io/topics/eval-intro\">Introduction to Eval Scripts</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a> This command returns the SHA1 digest of the script added into the script cache.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/script-load/\" class=\"_attribution-link\">https://redis.io/commands/script-load/</a>\n  </p>\n</div>\n","slowlog-get/index":"<h1 class=\"command-name\">SLOWLOG</h1>\n<pre>SLOWLOG GET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SLOWLOG GET [count]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.2.12</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of entries returned</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>SLOWLOG GET</code> command returns entries from the slow log in chronological order.</p> <p>The Redis Slow Log is a system to log queries that exceeded a specified execution time. The execution time does not include I/O operations like talking with the client, sending the reply and so forth, but just the time needed to actually execute the command (this is the only stage of command execution where the thread is blocked and can not serve other requests in the meantime).</p> <p>A new entry is added to the slow log whenever a command exceeds the execution time threshold defined by the <code>slowlog-log-slower-than</code> configuration directive. The maximum number of entries in the slow log is governed by the <code>slowlog-max-len</code> configuration directive.</p> <p>By default the command returns latest ten entries in the log. The optional <code>count</code> argument limits the number of returned entries, so the command returns at most up to <code>count</code> entries, the special number -1 means return all entries.</p> <p>Each entry from the slow log is comprised of the following six values:</p> <ol> <li>A unique progressive identifier for every slow log entry.</li> <li>The unix timestamp at which the logged command was processed.</li> <li>The amount of time needed for its execution, in microseconds.</li> <li>The array composing the arguments of the command.</li> <li>Client IP address and port.</li> <li>Client name if set via the <a href=\"../client-setname\"><code>CLIENT SETNAME</code></a> command.</li> </ol> <p>The entry's unique ID can be used in order to avoid processing slow log entries multiple times (for instance you may have a script sending you an email alert for every new slow log entry). The ID is never reset in the course of the Redis server execution, only a server restart will reset it.</p> <p>@reply</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a list of slow log entries.</p> <h2>History</h2> <ul> <li>Starting with Redis version 4.0.0: Added client IP address, port and name to the reply.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/slowlog-get/\" class=\"_attribution-link\">https://redis.io/commands/slowlog-get/</a>\n  </p>\n</div>\n","sdiff/index":"<h1 class=\"command-name\">SDIFF</h1>\n<pre>SDIFF</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SDIFF key [key ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the total number of elements in all given sets.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@set</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the members of the set resulting from the difference between the first set and all the successive sets.</p> <p>For example:</p> <pre tabindex=\"0\">key1 = {a,b,c,d}\nkey2 = {c}\nkey3 = {a,c,e}\nSDIFF key1 key2 key3 = {b,d}\n</pre>\n<p>Keys that do not exist are considered to be empty sets.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list with members of the resulting set.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSADD key1 \"a\"\nSADD key1 \"b\"\nSADD key1 \"c\"\nSADD key2 \"c\"\nSADD key2 \"d\"\nSADD key2 \"e\"\nSDIFF key1 key2\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/sdiff/\" class=\"_attribution-link\">https://redis.io/commands/sdiff/</a>\n  </p>\n</div>\n","slaveof/index":"<h1 class=\"command-name\">SLAVEOF</h1>\n<pre>SLAVEOF (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 5.0.0, this command is regarded as deprecated.</p> <p>It can be replaced by <a href=\"../replicaof\"><code>REPLICAOF</code></a> when migrating or writing new code.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SLAVEOF host port</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><strong>A note about the word slave used in this man page and command name</strong>: starting with Redis version 5, if not for backward compatibility, the Redis project no longer uses the word slave. Please use the new command <a href=\"../replicaof\"><code>REPLICAOF</code></a>. The command <code>SLAVEOF</code> will continue to work for backward compatibility.</p> <p>The <code>SLAVEOF</code> command can change the replication settings of a replica on the fly. If a Redis server is already acting as replica, the command <code>SLAVEOF</code> NO ONE will turn off the replication, turning the Redis server into a MASTER. In the proper form <code>SLAVEOF</code> hostname port will make the server a replica of another server listening at the specified hostname and port.</p> <p>If a server is already a replica of some master, <code>SLAVEOF</code> hostname port will stop the replication against the old server and start the synchronization against the new one, discarding the old dataset.</p> <p>The form <code>SLAVEOF</code> NO ONE will stop replication, turning the server into a MASTER, but will not discard the replication. So, if the old master stops working, it is possible to turn the replica into a master and set the application to use this new master in read/write. Later when the other Redis server is fixed, it can be reconfigured to work as a replica.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/slaveof/\" class=\"_attribution-link\">https://redis.io/commands/slaveof/</a>\n  </p>\n</div>\n","slowlog-len/index":"<h1 class=\"command-name\">SLOWLOG</h1>\n<pre>SLOWLOG LEN</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SLOWLOG LEN</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.2.12</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command returns the current number of entries in the slow log.</p> <p>A new entry is added to the slow log whenever a command exceeds the execution time threshold defined by the <code>slowlog-log-slower-than</code> configuration directive. The maximum number of entries in the slow log is governed by the <code>slowlog-max-len</code> configuration directive. Once the slog log reaches its maximal size, the oldest entry is removed whenever a new entry is created. The slow log can be cleared with the <a href=\"../slowlog-reset\"><code>SLOWLOG RESET</code></a> command.</p> <p>@reply</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a></p> <p>The number of entries in the slow log.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/slowlog-len/\" class=\"_attribution-link\">https://redis.io/commands/slowlog-len/</a>\n  </p>\n</div>\n","smembers/index":"<h1 class=\"command-name\">SMEMBERS</h1>\n<pre>SMEMBERS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SMEMBERS key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the set cardinality.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@set</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns all the members of the set value stored at <code>key</code>.</p> <p>This has the same effect as running <a href=\"../sinter\"><code>SINTER</code></a> with one argument <code>key</code>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: all elements of the set.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSADD myset \"Hello\"\nSADD myset \"World\"\nSMEMBERS myset\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/smembers/\" class=\"_attribution-link\">https://redis.io/commands/smembers/</a>\n  </p>\n</div>\n","slowlog-reset/index":"<h1 class=\"command-name\">SLOWLOG</h1>\n<pre>SLOWLOG RESET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SLOWLOG RESET</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.2.12</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of entries in the slowlog</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command resets the slow log, clearing all entries in it.</p> <p>Once deleted the information is lost forever.</p> <p>@reply</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/slowlog-reset/\" class=\"_attribution-link\">https://redis.io/commands/slowlog-reset/</a>\n  </p>\n</div>\n","spop/index":"<h1 class=\"command-name\">SPOP</h1>\n<pre>SPOP</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SPOP key [count]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>Without the count argument O(1), otherwise O(N) where N is the value of the passed count.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@set</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Removes and returns one or more random members from the set value store at <code>key</code>.</p> <p>This operation is similar to <a href=\"../srandmember\"><code>SRANDMEMBER</code></a>, that returns one or more random elements from a set but does not remove it.</p> <p>By default, the command pops a single member from the set. When provided with the optional <code>count</code> argument, the reply will consist of up to <code>count</code> members, depending on the set's cardinality.</p> <h2 id=\"return\">Return</h2> <p>When called without the <code>count</code> argument:</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the removed member, or <code>nil</code> when <code>key</code> does not exist.</p> <p>When called with the <code>count</code> argument:</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: the removed members, or an empty array when <code>key</code> does not exist.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSADD myset \"one\"\nSADD myset \"two\"\nSADD myset \"three\"\nSPOP myset\nSMEMBERS myset\nSADD myset \"four\"\nSADD myset \"five\"\nSPOP myset 3\nSMEMBERS myset\n</pre> <h2 id=\"distribution-of-returned-elements\">Distribution of returned elements</h2> <p>Note that this command is not suitable when you need a guaranteed uniform distribution of the returned elements. For more information about the algorithms used for <code>SPOP</code>, look up both the Knuth sampling and Floyd sampling algorithms.</p> <h2>History</h2> <ul> <li>Starting with Redis version 3.2.0: Added the <code>count</code> argument.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/spop/\" class=\"_attribution-link\">https://redis.io/commands/spop/</a>\n  </p>\n</div>\n","shutdown/index":"<h1 class=\"command-name\">SHUTDOWN</h1>\n<pre>SHUTDOWN</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SHUTDOWN [NOSAVE | SAVE] [NOW] [FORCE] [ABORT]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) when saving, where N is the total number of keys in all databases when saving data, otherwise O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The command behavior is the following:</p> <ul> <li>If there are any replicas lagging behind in replication: <ul> <li>Pause clients attempting to write by performing a <a href=\"../client-pause\"><code>CLIENT PAUSE</code></a> with the <code>WRITE</code> option.</li> <li>Wait up to the configured <code>shutdown-timeout</code> (default 10 seconds) for replicas to catch up the replication offset.</li> </ul> </li> <li>Stop all the clients.</li> <li>Perform a blocking SAVE if at least one <strong>save point</strong> is configured.</li> <li>Flush the Append Only File if AOF is enabled.</li> <li>Quit the server.</li> </ul> <p>If persistence is enabled this commands makes sure that Redis is switched off without any data loss.</p> <p>Note: A Redis instance that is configured for not persisting on disk (no AOF configured, nor \"save\" directive) will not dump the RDB file on <code>SHUTDOWN</code>, as usually you don't want Redis instances used only for caching to block on when shutting down.</p> <p>Also note: If Redis receives one of the signals <code>SIGTERM</code> and <code>SIGINT</code>, the same shutdown sequence is performed. See also <a href=\"https://redis.io/topics/signals\">Signal Handling</a>.</p> <h2 id=\"modifiers\">Modifiers</h2> <p>It is possible to specify optional modifiers to alter the behavior of the command. Specifically:</p> <ul> <li>\n<strong>SAVE</strong> will force a DB saving operation even if no save points are configured.</li> <li>\n<strong>NOSAVE</strong> will prevent a DB saving operation even if one or more save points are configured.</li> <li>\n<strong>NOW</strong> skips waiting for lagging replicas, i.e. it bypasses the first step in the shutdown sequence.</li> <li>\n<strong>FORCE</strong> ignores any errors that would normally prevent the server from exiting. For details, see the following section.</li> <li>\n<strong>ABORT</strong> cancels an ongoing shutdown and cannot be combined with other flags.</li> </ul> <h2 id=\"conditions-where-a-shutdown-fails\">Conditions where a SHUTDOWN fails</h2> <p>When a save point is configured or the <strong>SAVE</strong> modifier is specified, the shutdown may fail if the RDB file can't be saved. Then, the server continues to run in order to ensure no data loss. This may be bypassed using the <strong>FORCE</strong> modifier, causing the server to exit anyway.</p> <p>When the Append Only File is enabled the shutdown may fail because the system is in a state that does not allow to safely immediately persist on disk.</p> <p>Normally if there is an AOF child process performing an AOF rewrite, Redis will simply kill it and exit. However, there are situations where it is unsafe to do so and, unless the <strong>FORCE</strong> modifier is specified, the <strong>SHUTDOWN</strong> command will be refused with an error instead. This happens in the following situations:</p> <ul> <li>The user just turned on AOF, and the server triggered the first AOF rewrite in order to create the initial AOF file. In this context, stopping will result in losing the dataset at all: once restarted, the server will potentially have AOF enabled without having any AOF file at all.</li> <li>A replica with AOF enabled, reconnected with its master, performed a full resynchronization, and restarted the AOF file, triggering the initial AOF creation process. In this case not completing the AOF rewrite is dangerous because the latest dataset received from the master would be lost. The new master can actually be even a different instance (if the <strong>REPLICAOF</strong> or <strong>SLAVEOF</strong> command was used in order to reconfigure the replica), so it is important to finish the AOF rewrite and start with the correct data set representing the data set in memory when the server was terminated.</li> </ul> <p>There are situations when we want just to terminate a Redis instance ASAP, regardless of what its content is. In such a case, the command <strong>SHUTDOWN NOW NOSAVE FORCE</strong> can be used. In versions before 7.0, where the <strong>NOW</strong> and <strong>FORCE</strong> flags are not available, the right combination of commands is to send a <strong>CONFIG appendonly no</strong> followed by a <strong>SHUTDOWN NOSAVE</strong>. The first command will turn off the AOF if needed, and will terminate the AOF rewriting child if there is one active. The second command will not have any problem to execute since the AOF is no longer enabled.</p> <h2 id=\"minimize-the-risk-of-data-loss\">Minimize the risk of data loss</h2> <p>Since Redis 7.0, the server waits for lagging replicas up to a configurable <code>shutdown-timeout</code>, by default 10 seconds, before shutting down. This provides a best effort minimizing the risk of data loss in a situation where no save points are configured and AOF is disabled. Before version 7.0, shutting down a heavily loaded master node in a diskless setup was more likely to result in data loss. To minimize the risk of data loss in such setups, it's advised to trigger a manual <a href=\"../failover\"><code>FAILOVER</code></a> (or <a href=\"../cluster-failover\"><code>CLUSTER FAILOVER</code></a>) to demote the master to a replica and promote one of the replicas to be the new master, before shutting down a master node.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> if <code>ABORT</code> was specified and shutdown was aborted. On successful shutdown, nothing is returned since the server quits and the connection is closed. On failure, an error is returned.</p> <h2 id=\"behavior-change-history\">Behavior change history</h2> <ul> <li>\n<code>&gt;= 7.0.0</code>: Introduced waiting for lagging replicas before exiting.</li> </ul> <h2>History</h2> <ul> <li>Starting with Redis version 7.0.0: Added the <code>NOW</code>, <code>FORCE</code> and <code>ABORT</code> modifiers.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/shutdown/\" class=\"_attribution-link\">https://redis.io/commands/shutdown/</a>\n  </p>\n</div>\n","sort/index":"<h1 class=\"command-name\">SORT</h1>\n<pre>SORT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SORT key [BYpattern] [LIMIToffset count] [GETpattern [GET pattern\n  ...]] [ASC | DESC] [ALPHA] [STOREdestination]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N+M*log(M)) where N is the number of elements in the list or set to sort, and M the number of returned elements. When the elements are not sorted, complexity is O(N).</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@set</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns or stores the elements contained in the <a href=\"https://redis.io/topics/data-types#lists\">list</a>, <a href=\"https://redis.io/topics/data-types#set\">set</a> or <a href=\"https://redis.io/topics/data-types#sorted-sets\">sorted set</a> at <code>key</code>.</p> <p>There is also the <a href=\"../sort_ro\"><code>SORT_RO</code></a> read-only variant of this command.</p> <p>By default, sorting is numeric and elements are compared by their value interpreted as double precision floating point number. This is <code>SORT</code> in its simplest form:</p> <pre tabindex=\"0\">SORT mylist\n</pre>\n<p>Assuming <code>mylist</code> is a list of numbers, this command will return the same list with the elements sorted from small to large. In order to sort the numbers from large to small, use the <code>DESC</code> modifier:</p> <pre tabindex=\"0\">SORT mylist DESC\n</pre>\n<p>When <code>mylist</code> contains string values and you want to sort them lexicographically, use the <code>ALPHA</code> modifier:</p> <pre tabindex=\"0\">SORT mylist ALPHA\n</pre>\n<p>Redis is UTF-8 aware, assuming you correctly set the <code>LC_COLLATE</code> environment variable.</p> <p>The number of returned elements can be limited using the <code>LIMIT</code> modifier. This modifier takes the <code>offset</code> argument, specifying the number of elements to skip and the <code>count</code> argument, specifying the number of elements to return from starting at <code>offset</code>. The following example will return 10 elements of the sorted version of <code>mylist</code>, starting at element 0 (<code>offset</code> is zero-based):</p> <pre tabindex=\"0\">SORT mylist LIMIT 0 10\n</pre>\n<p>Almost all modifiers can be used together. The following example will return the first 5 elements, lexicographically sorted in descending order:</p> <pre tabindex=\"0\">SORT mylist LIMIT 0 5 ALPHA DESC\n</pre>\n<h2 id=\"sorting-by-external-keys\">Sorting by external keys</h2> <p>Sometimes you want to sort elements using external keys as weights to compare instead of comparing the actual elements in the list, set or sorted set. Let's say the list <code>mylist</code> contains the elements <code>1</code>, <code>2</code> and <code>3</code> representing unique IDs of objects stored in <code>object_1</code>, <code>object_2</code> and <code>object_3</code>. When these objects have associated weights stored in <code>weight_1</code>, <code>weight_2</code> and <code>weight_3</code>, <code>SORT</code> can be instructed to use these weights to sort <code>mylist</code> with the following statement:</p> <pre tabindex=\"0\">SORT mylist BY weight_*\n</pre>\n<p>The <code>BY</code> option takes a pattern (equal to <code>weight_*</code> in this example) that is used to generate the keys that are used for sorting. These key names are obtained substituting the first occurrence of <code>*</code> with the actual value of the element in the list (<code>1</code>, <code>2</code> and <code>3</code> in this example).</p> <h2 id=\"skip-sorting-the-elements\">Skip sorting the elements</h2> <p>The <code>BY</code> option can also take a non-existent key, which causes <code>SORT</code> to skip the sorting operation. This is useful if you want to retrieve external keys (see the <code>GET</code> option below) without the overhead of sorting.</p> <pre tabindex=\"0\">SORT mylist BY nosort\n</pre>\n<h2 id=\"retrieving-external-keys\">Retrieving external keys</h2> <p>Our previous example returns just the sorted IDs. In some cases, it is more useful to get the actual objects instead of their IDs (<code>object_1</code>, <code>object_2</code> and <code>object_3</code>). Retrieving external keys based on the elements in a list, set or sorted set can be done with the following command:</p> <pre tabindex=\"0\">SORT mylist BY weight_* GET object_*\n</pre>\n<p>The <code>GET</code> option can be used multiple times in order to get more keys for every element of the original list, set or sorted set.</p> <p>It is also possible to <code>GET</code> the element itself using the special pattern <code>#</code>:</p> <pre tabindex=\"0\">SORT mylist BY weight_* GET object_* GET #\n</pre>\n<h2 id=\"restrictions-for-using-external-keys\">Restrictions for using external keys</h2> <p>When enabling <code>Redis cluster-mode</code> there is no way to guarantee the existence of the external keys on the node which the command is processed on. In this case, any use of <a href=\"../get\"><code>GET</code></a> or <code>BY</code> which reference external key pattern will cause the command to fail with an error.</p> <p>Starting from Redis 7.0, any use of <a href=\"../get\"><code>GET</code></a> or <code>BY</code> which reference external key pattern will only be allowed in case the current user running the command has full key read permissions. Full key read permissions can be set for the user by, for example, specifying <code>'%R~*'</code> or <code>'~*</code> with the relevant command access rules. You can check the <a href=\"../acl-setuser\"><code>ACL SETUSER</code></a> command manual for more information on setting ACL access rules. If full key read permissions aren't set, the command will fail with an error.</p> <h2 id=\"storing-the-result-of-a-sort-operation\">Storing the result of a SORT operation</h2> <p>By default, <code>SORT</code> returns the sorted elements to the client. With the <code>STORE</code> option, the result will be stored as a list at the specified key instead of being returned to the client.</p> <pre tabindex=\"0\">SORT mylist BY weight_* STORE resultkey\n</pre>\n<p>An interesting pattern using <code>SORT ... STORE</code> consists in associating an <a href=\"../expire\"><code>EXPIRE</code></a> timeout to the resulting key so that in applications where the result of a <code>SORT</code> operation can be cached for some time. Other clients will use the cached list instead of calling <code>SORT</code> for every request. When the key will timeout, an updated version of the cache can be created by calling <code>SORT ... STORE</code> again.</p> <p>Note that for correctly implementing this pattern it is important to avoid multiple clients rebuilding the cache at the same time. Some kind of locking is needed here (for instance using <a href=\"../setnx\"><code>SETNX</code></a>).</p> <h2 id=\"using-hashes-in-by-and-get\">Using hashes in <code>BY</code> and <code>GET</code>\n</h2> <p>It is possible to use <code>BY</code> and <code>GET</code> options against hash fields with the following syntax:</p> <pre tabindex=\"0\">SORT mylist BY weight_*-&gt;fieldname GET object_*-&gt;fieldname\n</pre>\n<p>The string <code>-&gt;</code> is used to separate the key name from the hash field name. The key is substituted as documented above, and the hash stored at the resulting key is accessed to retrieve the specified hash field.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: without passing the <code>store</code> option the command returns a list of sorted elements. <a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: when the <code>store</code> option is specified the command returns the number of sorted elements in the destination list.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/sort/\" class=\"_attribution-link\">https://redis.io/commands/sort/</a>\n  </p>\n</div>\n","srandmember/index":"<h1 class=\"command-name\">SRANDMEMBER</h1>\n<pre>SRANDMEMBER</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SRANDMEMBER key [count]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>Without the count argument O(1), otherwise O(N) where N is the absolute value of the passed count.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@set</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>When called with just the <code>key</code> argument, return a random element from the set value stored at <code>key</code>.</p> <p>If the provided <code>count</code> argument is positive, return an array of <strong>distinct elements</strong>. The array's length is either <code>count</code> or the set's cardinality (<a href=\"../scard\"><code>SCARD</code></a>), whichever is lower.</p> <p>If called with a negative <code>count</code>, the behavior changes and the command is allowed to return the <strong>same element multiple times</strong>. In this case, the number of returned elements is the absolute value of the specified <code>count</code>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: without the additional <code>count</code> argument, the command returns a Bulk Reply with the randomly selected element, or <code>nil</code> when <code>key</code> does not exist.</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: when the additional <code>count</code> argument is passed, the command returns an array of elements, or an empty array when <code>key</code> does not exist.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSADD myset one two three\nSRANDMEMBER myset\nSRANDMEMBER myset 2\nSRANDMEMBER myset -5\n</pre> <h2 id=\"specification-of-the-behavior-when-count-is-passed\">Specification of the behavior when count is passed</h2> <p>When the <code>count</code> argument is a positive value this command behaves as follows:</p> <ul> <li>No repeated elements are returned.</li> <li>If <code>count</code> is bigger than the set's cardinality, the command will only return the whole set without additional elements.</li> <li>The order of elements in the reply is not truly random, so it is up to the client to shuffle them if needed.</li> </ul> <p>When the <code>count</code> is a negative value, the behavior changes as follows:</p> <ul> <li>Repeating elements are possible.</li> <li>Exactly <code>count</code> elements, or an empty array if the set is empty (non-existing key), are always returned.</li> <li>The order of elements in the reply is truly random.</li> </ul> <h2 id=\"distribution-of-returned-elements\">Distribution of returned elements</h2> <p>Note: this section is relevant only for Redis 5 or below, as Redis 6 implements a fairer algorithm.</p> <p>The distribution of the returned elements is far from perfect when the number of elements in the set is small, this is due to the fact that we used an approximated random element function that does not really guarantees good distribution.</p> <p>The algorithm used, that is implemented inside dict.c, samples the hash table buckets to find a non-empty one. Once a non empty bucket is found, since we use chaining in our hash table implementation, the number of elements inside the bucket is checked and a random element is selected.</p> <p>This means that if you have two non-empty buckets in the entire hash table, and one has three elements while one has just one, the element that is alone in its bucket will be returned with much higher probability.</p> <h2>History</h2> <ul> <li>Starting with Redis version 2.6.0: Added the optional <code>count</code> argument.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/srandmember/\" class=\"_attribution-link\">https://redis.io/commands/srandmember/</a>\n  </p>\n</div>\n","srem/index":"<h1 class=\"command-name\">SREM</h1>\n<pre>SREM</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SREM key member [member ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of members to be removed.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@set</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Remove the specified members from the set stored at <code>key</code>. Specified members that are not a member of this set are ignored. If <code>key</code> does not exist, it is treated as an empty set and this command returns <code>0</code>.</p> <p>An error is returned when the value stored at <code>key</code> is not a set.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of members that were removed from the set, not including non existing members.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSADD myset \"one\"\nSADD myset \"two\"\nSADD myset \"three\"\nSREM myset \"one\"\nSREM myset \"four\"\nSMEMBERS myset\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 2.4.0: Accepts multiple <code>member</code> arguments.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/srem/\" class=\"_attribution-link\">https://redis.io/commands/srem/</a>\n  </p>\n</div>\n","smismember/index":"<h1 class=\"command-name\">SMISMEMBER</h1>\n<pre>SMISMEMBER</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SMISMEMBER key member [member ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of elements being checked for membership</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@set</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns whether each <code>member</code> is a member of the set stored at <code>key</code>.</p> <p>For every <code>member</code>, <code>1</code> is returned if the value is a member of the set, or <code>0</code> if the element is not a member of the set or if <code>key</code> does not exist.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list representing the membership of the given elements, in the same order as they are requested.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSADD myset \"one\"\nSADD myset \"one\"\nSMISMEMBER myset \"one\" \"notamember\"\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/smismember/\" class=\"_attribution-link\">https://redis.io/commands/smismember/</a>\n  </p>\n</div>\n","spublish/index":"<h1 class=\"command-name\">SPUBLISH</h1>\n<pre>SPUBLISH</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SPUBLISH shardchannel message</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of clients subscribed to the receiving shard channel.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@pubsub</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Posts a message to the given shard channel.</p> <p>In Redis Cluster, shard channels are assigned to slots by the same algorithm used to assign keys to slots. A shard message must be sent to a node that own the slot the shard channel is hashed to. The cluster makes sure that published shard messages are forwarded to all the node in the shard, so clients can subscribe to a shard channel by connecting to any one of the nodes in the shard.</p> <p>For more information about sharded pubsub, see <a href=\"https://redis.io/topics/pubsub#sharded-pubsub\">Sharded Pubsub</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of clients that received the message. Note that in a Redis Cluster, only clients that are connected to the same node as the publishing client are included in the count.</p> <h2 id=\"examples\">Examples</h2> <p>For example the following command publish to channel <code>orders</code> with a subscriber already waiting for message(s).</p> <pre tabindex=\"0\">&gt; spublish orders hello\n(integer) 1\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/spublish/\" class=\"_attribution-link\">https://redis.io/commands/spublish/</a>\n  </p>\n</div>\n","smove/index":"<h1 class=\"command-name\">SMOVE</h1>\n<pre>SMOVE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SMOVE source destination member</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@set</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Move <code>member</code> from the set at <code>source</code> to the set at <code>destination</code>. This operation is atomic. In every given moment the element will appear to be a member of <code>source</code> <strong>or</strong> <code>destination</code> for other clients.</p> <p>If the source set does not exist or does not contain the specified element, no operation is performed and <code>0</code> is returned. Otherwise, the element is removed from the source set and added to the destination set. When the specified element already exists in the destination set, it is only removed from the source set.</p> <p>An error is returned if <code>source</code> or <code>destination</code> does not hold a set value.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, specifically:</p> <ul> <li>\n<code>1</code> if the element is moved.</li> <li>\n<code>0</code> if the element is not a member of <code>source</code> and no operation was performed.</li> </ul> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSADD myset \"one\"\nSADD myset \"two\"\nSADD myotherset \"three\"\nSMOVE myset myotherset \"two\"\nSMEMBERS myset\nSMEMBERS myotherset\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/smove/\" class=\"_attribution-link\">https://redis.io/commands/smove/</a>\n  </p>\n</div>\n","sort_ro/index":"<h1 class=\"command-name\">SORT_RO</h1>\n<pre>SORT_RO</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SORT_RO key [BYpattern] [LIMIToffset count] [GETpattern [GET\n  pattern ...]] [ASC | DESC] [ALPHA]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N+M*log(M)) where N is the number of elements in the list or set to sort, and M the number of returned elements. When the elements are not sorted, complexity is O(N).</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@set</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@list</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Read-only variant of the <a href=\"../sort\"><code>SORT</code></a> command. It is exactly like the original <a href=\"../sort\"><code>SORT</code></a> but refuses the <code>STORE</code> option and can safely be used in read-only replicas.</p> <p>Since the original <a href=\"../sort\"><code>SORT</code></a> has a <code>STORE</code> option it is technically flagged as a writing command in the Redis command table. For this reason read-only replicas in a Redis Cluster will redirect it to the master instance even if the connection is in read-only mode (see the <a href=\"../readonly\"><code>READONLY</code></a> command of Redis Cluster).</p> <p>The <code>SORT_RO</code> variant was introduced in order to allow <a href=\"../sort\"><code>SORT</code></a> behavior in read-only replicas without breaking compatibility on command flags.</p> <p>See original <a href=\"../sort\"><code>SORT</code></a> for more details.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">SORT_RO mylist BY weight_*-&gt;fieldname GET object_*-&gt;fieldname\n</pre>\n<h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a list of sorted elements.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/sort_ro/\" class=\"_attribution-link\">https://redis.io/commands/sort_ro/</a>\n  </p>\n</div>\n","sscan/index":"<h1 class=\"command-name\">SSCAN</h1>\n<pre>SSCAN</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SSCAN key cursor [MATCHpattern] [COUNTcount]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) for every call. O(N) for a complete iteration, including enough command calls for the cursor to return back to 0. N is the number of elements inside the collection.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@set</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>See <a href=\"../scan\"><code>SCAN</code></a> for <code>SSCAN</code> documentation.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/sscan/\" class=\"_attribution-link\">https://redis.io/commands/sscan/</a>\n  </p>\n</div>\n","ssubscribe/index":"<h1 class=\"command-name\">SSUBSCRIBE</h1>\n<pre>SSUBSCRIBE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SSUBSCRIBE shardchannel [shardchannel ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of shard channels to subscribe to.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@pubsub</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Subscribes the client to the specified shard channels.</p> <p>In a Redis cluster, shard channels are assigned to slots by the same algorithm used to assign keys to slots. Client(s) can subscribe to a node covering a slot (primary/replica) to receive the messages published. All the specified shard channels needs to belong to a single slot to subscribe in a given <code>SSUBSCRIBE</code> call, A client can subscribe to channels across different slots over separate <code>SSUBSCRIBE</code> call.</p> <p>For more information about sharded Pub/Sub, see <a href=\"https://redis.io/topics/pubsub#sharded-pubsub\">Sharded Pub/Sub</a>.</p> <h2 id=\"return\">Return</h2> <p>When successful, this command doesn't return anything. Instead, for each shard channel, one message with the first element being the string \"ssubscribe\" is pushed as a confirmation that the command succeeded. Note that this command can also return a -MOVED redirect.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; ssubscribe orders\nReading messages... (press Ctrl-C to quit)\n1) \"ssubscribe\"\n2) \"orders\"\n3) (integer) 1\n1) \"smessage\"\n2) \"orders\"\n3) \"hello\"\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ssubscribe/\" class=\"_attribution-link\">https://redis.io/commands/ssubscribe/</a>\n  </p>\n</div>\n","swapdb/index":"<h1 class=\"command-name\">SWAPDB</h1>\n<pre>SWAPDB</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SWAPDB index1 index2</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>4.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the count of clients watching or blocking on keys from both databases.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command swaps two Redis databases, so that immediately all the clients connected to a given database will see the data of the other database, and the other way around. Example:</p> <pre>SWAPDB 0 1\n</pre> <p>This will swap database 0 with database 1. All the clients connected with database 0 will immediately see the new data, exactly like all the clients connected with database 1 will see the data that was formerly of database 0.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> if <code>SWAPDB</code> was executed correctly.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">SWAPDB 0 1\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/swapdb/\" class=\"_attribution-link\">https://redis.io/commands/swapdb/</a>\n  </p>\n</div>\n","sunionstore/index":"<h1 class=\"command-name\">SUNIONSTORE</h1>\n<pre>SUNIONSTORE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SUNIONSTORE destination key [key ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the total number of elements in all given sets.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@set</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command is equal to <a href=\"../sunion\"><code>SUNION</code></a>, but instead of returning the resulting set, it is stored in <code>destination</code>.</p> <p>If <code>destination</code> already exists, it is overwritten.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of elements in the resulting set.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSADD key1 \"a\"\nSADD key1 \"b\"\nSADD key1 \"c\"\nSADD key2 \"c\"\nSADD key2 \"d\"\nSADD key2 \"e\"\nSUNIONSTORE key key1 key2\nSMEMBERS key\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/sunionstore/\" class=\"_attribution-link\">https://redis.io/commands/sunionstore/</a>\n  </p>\n</div>\n","tdigest.add/index":"<h1 class=\"command-name\">TDIGEST.ADD</h1>\n<pre>TDIGEST.ADD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TDIGEST.ADD key value [value ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.4.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) , where N is the number of samples to add</dd> </dl> <p>Adds one or more observations to a t-digest sketch.</p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> is key name for an existing t-digest sketch. </details> <details open><summary><code>value</code></summary> is value of an observation (floating-point). </details> <h2 id=\"return-value\">Return value</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> - <code>OK</code> if executed correctly, or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> otherwise.</p> <h2 id=\"examples\">Examples</h2> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.ADD t <span class=\"m\">1</span> <span class=\"m\">2</span> <span class=\"m\">3</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.ADD t string\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>error<span class=\"o\">)</span> ERR T-Digest: error parsing val parameter</span></span></pre></div><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/tdigest.add/\" class=\"_attribution-link\">https://redis.io/commands/tdigest.add/</a>\n  </p>\n</div>\n","strlen/index":"<h1 class=\"command-name\">STRLEN</h1>\n<pre>STRLEN</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">STRLEN key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@string</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the length of the string value stored at <code>key</code>. An error is returned when <code>key</code> holds a non-string value.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the length of the string at <code>key</code>, or <code>0</code> when <code>key</code> does not exist.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"Hello world\"\nSTRLEN mykey\nSTRLEN nonexisting\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/strlen/\" class=\"_attribution-link\">https://redis.io/commands/strlen/</a>\n  </p>\n</div>\n","substr/index":"<h1 class=\"command-name\">SUBSTR</h1>\n<pre>SUBSTR (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 2.0.0, this command is regarded as deprecated.</p> <p>It can be replaced by <a href=\"../getrange\"><code>GETRANGE</code></a> when migrating or writing new code.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SUBSTR key start end</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the length of the returned string. The complexity is ultimately determined by the returned length, but because creating a substring from an existing string is very cheap, it can be considered O(1) for small strings.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@string</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the substring of the string value stored at <code>key</code>, determined by the offsets <code>start</code> and <code>end</code> (both are inclusive). Negative offsets can be used in order to provide an offset starting from the end of the string. So -1 means the last character, -2 the penultimate and so forth.</p> <p>The function handles out of range requests by limiting the resulting range to the actual length of the string.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a></p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"This is a string\"\nGETRANGE mykey 0 3\nGETRANGE mykey -3 -1\nGETRANGE mykey 0 -1\nGETRANGE mykey 10 100\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/substr/\" class=\"_attribution-link\">https://redis.io/commands/substr/</a>\n  </p>\n</div>\n","tdigest.byrank/index":"<h1 class=\"command-name\">TDIGEST.BYRANK</h1>\n<pre>TDIGEST.BYRANK</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TDIGEST.BYRANK key rank [rank ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.4.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Returns, for each input rank, an estimation of the value (floating-point) with that rank.</p> <p>Multiple estimations can be retrieved in a signle call.</p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> is key name for an existing t-digest sketch. </details> <details open><summary><code>rank</code></summary> <p>Rank, for which the value should be retrieved.</p> <p>0 is the rank of the value of the smallest observation.</p> <p><em>n</em>-1 is the rank of the value of the largest observation; <em>n</em> denotes the number of observations added to the sketch.</p> </details> <h2 id=\"return-value\">Return value</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> - an array of floating-points populated with value_1, value_2, ..., value_R:</p> <ul> <li>Return an accurate result when <code>rank</code> is 0 (the value of the smallest observation)</li> <li>Return an accurate result when <code>rank</code> is <em>n</em>-1 (the value of the largest observation), where <em>n</em> denotes the number of observations added to the sketch.</li> <li>Return 'inf' when <code>rank</code> is equal to <em>n</em> or larger than <em>n</em>\n</li> </ul> <p>All values are 'nan' if the sketch is empty.</p> <h2 id=\"examples\">Examples</h2> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.CREATE t COMPRESSION <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.ADD t <span class=\"m\">1</span> <span class=\"m\">2</span> <span class=\"m\">2</span> <span class=\"m\">3</span> <span class=\"m\">3</span> <span class=\"m\">3</span> <span class=\"m\">4</span> <span class=\"m\">4</span> <span class=\"m\">4</span> <span class=\"m\">4</span> <span class=\"m\">5</span> <span class=\"m\">5</span> <span class=\"m\">5</span> <span class=\"m\">5</span> <span class=\"m\">5</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.BYRANK t <span class=\"m\">0</span> <span class=\"m\">1</span> <span class=\"m\">2</span> <span class=\"m\">3</span> <span class=\"m\">4</span> <span class=\"m\">5</span> <span class=\"m\">6</span> <span class=\"m\">7</span> <span class=\"m\">8</span> <span class=\"m\">9</span> <span class=\"m\">10</span> <span class=\"m\">11</span> <span class=\"m\">12</span> <span class=\"m\">13</span> <span class=\"m\">14</span> <span class=\"m\">15</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 1<span class=\"o\">)</span> <span class=\"s2\">\"1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 2<span class=\"o\">)</span> <span class=\"s2\">\"2\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 3<span class=\"o\">)</span> <span class=\"s2\">\"2\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 4<span class=\"o\">)</span> <span class=\"s2\">\"3\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 5<span class=\"o\">)</span> <span class=\"s2\">\"3\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 6<span class=\"o\">)</span> <span class=\"s2\">\"3\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 7<span class=\"o\">)</span> <span class=\"s2\">\"4\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 8<span class=\"o\">)</span> <span class=\"s2\">\"4\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 9<span class=\"o\">)</span> <span class=\"s2\">\"4\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">10<span class=\"o\">)</span> <span class=\"s2\">\"4\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">11<span class=\"o\">)</span> <span class=\"s2\">\"5\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">12<span class=\"o\">)</span> <span class=\"s2\">\"5\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">13<span class=\"o\">)</span> <span class=\"s2\">\"5\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">14<span class=\"o\">)</span> <span class=\"s2\">\"5\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">15<span class=\"o\">)</span> <span class=\"s2\">\"5\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">16<span class=\"o\">)</span> <span class=\"s2\">\"inf\"</span></span></span></pre></div><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/tdigest.byrank/\" class=\"_attribution-link\">https://redis.io/commands/tdigest.byrank/</a>\n  </p>\n</div>\n","subscribe/index":"<h1 class=\"command-name\">SUBSCRIBE</h1>\n<pre>SUBSCRIBE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SUBSCRIBE channel [channel ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of channels to subscribe to.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@pubsub</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Subscribes the client to the specified channels.</p> <p>Once the client enters the subscribed state it is not supposed to issue any other commands, except for additional <code>SUBSCRIBE</code>, <a href=\"../ssubscribe\"><code>SSUBSCRIBE</code></a>, <a href=\"../psubscribe\"><code>PSUBSCRIBE</code></a>, <a href=\"../unsubscribe\"><code>UNSUBSCRIBE</code></a>, <a href=\"../sunsubscribe\"><code>SUNSUBSCRIBE</code></a>, <a href=\"../punsubscribe\"><code>PUNSUBSCRIBE</code></a>, <a href=\"../ping\"><code>PING</code></a>, <a href=\"../reset\"><code>RESET</code></a> and <a href=\"../quit\"><code>QUIT</code></a> commands. However, if RESP3 is used (see <a href=\"../hello\"><code>HELLO</code></a>) it is possible for a client to issue any commands while in subscribed state.</p> <p>For more information, see <a href=\"https://redis.io/docs/manual/pubsub/\">Pub/sub</a>.</p> <h2 id=\"return\">Return</h2> <p>When successful, this command doesn't return anything. Instead, for each channel, one message with the first element being the string \"subscribe\" is pushed as a confirmation that the command succeeded.</p> <h2 id=\"behavior-change-history\">Behavior change history</h2> <ul> <li>\n<code>&gt;= 6.2.0</code>: <a href=\"../reset\"><code>RESET</code></a> can be called to exit subscribed state.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/subscribe/\" class=\"_attribution-link\">https://redis.io/commands/subscribe/</a>\n  </p>\n</div>\n","sunsubscribe/index":"<h1 class=\"command-name\">SUNSUBSCRIBE</h1>\n<pre>SUNSUBSCRIBE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SUNSUBSCRIBE [shardchannel [shardchannel ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of clients already subscribed to a shard channel.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@pubsub</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Unsubscribes the client from the given shard channels, or from all of them if none is given.</p> <p>When no shard channels are specified, the client is unsubscribed from all the previously subscribed shard channels. In this case a message for every unsubscribed shard channel will be sent to the client.</p> <p>Note: The global channels and shard channels needs to be unsubscribed from separately.</p> <p>For more information about sharded Pub/Sub, see <a href=\"https://redis.io/topics/pubsub#sharded-pubsub\">Sharded Pub/Sub</a>.</p> <h2 id=\"return\">Return</h2> <p>When successful, this command doesn't return anything. Instead, for each shard channel, one message with the first element being the string \"sunsubscribe\" is pushed as a confirmation that the command succeeded.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/sunsubscribe/\" class=\"_attribution-link\">https://redis.io/commands/sunsubscribe/</a>\n  </p>\n</div>\n","tdigest.create/index":"<h1 class=\"command-name\">TDIGEST.CREATE</h1>\n<pre>TDIGEST.CREATE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TDIGEST.CREATE key [COMPRESSIONcompression]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.4.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Allocates memory and initializes a new t-digest sketch.</p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> is key name for this new t-digest sketch. </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>COMPRESSION compression</code></summary> <p>is a controllable tradeoff between accuracy and memory consumption. 100 is a common value for normal uses. 1000 is more accurate. If no value is passed by default the compression will be 100. For more information on scaling of accuracy versus the compression parameter see <a href=\"https://www.sciencedirect.com/science/article/pii/S2665963820300403\"><em>The t-digest: Efficient estimates of distributions</em></a>.</p> </details> <h2 id=\"return-value\">Return value</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> - <code>OK</code> if executed correctly, or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> otherwise.</p> <h2 id=\"examples\">Examples</h2> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.CREATE t COMPRESSION <span class=\"m\">100</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/tdigest.create/\" class=\"_attribution-link\">https://redis.io/commands/tdigest.create/</a>\n  </p>\n</div>\n","sync/index":"<h1 class=\"command-name\">SYNC</h1>\n<pre>SYNC</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SYNC</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt>  <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@admin</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@dangerous</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Initiates a replication stream from the master.</p> <p>The <code>SYNC</code> command is called by Redis replicas for initiating a replication stream from the master. It has been replaced in newer versions of Redis by <a href=\"../psync\"><code>PSYNC</code></a>.</p> <p>For more information about replication in Redis please check the <a href=\"https://redis.io/topics/replication\">replication page</a>.</p> <h2 id=\"return\">Return</h2> <p><strong>Non standard return value</strong>, a bulk transfer of the data followed by <a href=\"../ping\"><code>PING</code></a> and write requests from the master.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/sync/\" class=\"_attribution-link\">https://redis.io/commands/sync/</a>\n  </p>\n</div>\n","tdigest.byrevrank/index":"<h1 class=\"command-name\">TDIGEST.BYREVRANK</h1>\n<pre>TDIGEST.BYREVRANK</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TDIGEST.BYREVRANK key reverse_rank [reverse_rank ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.4.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Returns, for each input reverse rank, an estimation of the value (floating-point) with that reverse rank.</p> <p>Multiple estimations can be retrieved in a signle call.</p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> is key name for an existing t-digest sketch. </details> <details open><summary><code>revrank</code></summary> <p>Reverse rank, for which the value should be retrieved.</p> <p>0 is the reverse rank of the value of the largest observation.</p> <p><em>n</em>-1 is the reverse rank of the value of the smallest observation; <em>n</em> denotes the number of observations added to the sketch.</p> </details> <h2 id=\"return-value\">Return value</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> - an array of floating-points populated with value_1, value_2, ..., value_R:</p> <ul> <li>Return an accurate result when <code>revrank</code> is 0 (the value of the largest observation)</li> <li>Return an accurate result when <code>revrank</code> is <em>n</em>-1 (the value of the smallest observation), where <em>n</em> denotes the number of observations added to the sketch.</li> <li>Return '-inf' when <code>revrank</code> is equal to <em>n</em> or larger than <em>n</em>\n</li> </ul> <p>All values are 'nan' if the sketch is empty.</p> <h2 id=\"examples\">Examples</h2> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.CREATE t COMPRESSION <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.ADD t <span class=\"m\">1</span> <span class=\"m\">2</span> <span class=\"m\">2</span> <span class=\"m\">3</span> <span class=\"m\">3</span> <span class=\"m\">3</span> <span class=\"m\">4</span> <span class=\"m\">4</span> <span class=\"m\">4</span> <span class=\"m\">4</span> <span class=\"m\">5</span> <span class=\"m\">5</span> <span class=\"m\">5</span> <span class=\"m\">5</span> <span class=\"m\">5</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.BYREVRANK t <span class=\"m\">0</span> <span class=\"m\">1</span> <span class=\"m\">2</span> <span class=\"m\">3</span> <span class=\"m\">4</span> <span class=\"m\">5</span> <span class=\"m\">6</span> <span class=\"m\">7</span> <span class=\"m\">8</span> <span class=\"m\">9</span> <span class=\"m\">10</span> <span class=\"m\">11</span> <span class=\"m\">12</span> <span class=\"m\">13</span> <span class=\"m\">14</span> <span class=\"m\">15</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 1<span class=\"o\">)</span> <span class=\"s2\">\"5\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 2<span class=\"o\">)</span> <span class=\"s2\">\"5\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 3<span class=\"o\">)</span> <span class=\"s2\">\"5\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 4<span class=\"o\">)</span> <span class=\"s2\">\"5\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 5<span class=\"o\">)</span> <span class=\"s2\">\"5\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 6<span class=\"o\">)</span> <span class=\"s2\">\"4\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 7<span class=\"o\">)</span> <span class=\"s2\">\"4\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 8<span class=\"o\">)</span> <span class=\"s2\">\"4\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 9<span class=\"o\">)</span> <span class=\"s2\">\"4\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">10<span class=\"o\">)</span> <span class=\"s2\">\"3\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">11<span class=\"o\">)</span> <span class=\"s2\">\"3\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">12<span class=\"o\">)</span> <span class=\"s2\">\"3\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">13<span class=\"o\">)</span> <span class=\"s2\">\"2\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">14<span class=\"o\">)</span> <span class=\"s2\">\"2\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">15<span class=\"o\">)</span> <span class=\"s2\">\"1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">16<span class=\"o\">)</span> <span class=\"s2\">\"-inf\"</span></span></span></pre></div><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/tdigest.byrevrank/\" class=\"_attribution-link\">https://redis.io/commands/tdigest.byrevrank/</a>\n  </p>\n</div>\n","tdigest.info/index":"<h1 class=\"command-name\">TDIGEST.INFO</h1>\n<pre>TDIGEST.INFO</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TDIGEST.INFO key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.4.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Returns information and statistics about a t-digest sketch.</p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key name for an existing t-digest sketch.</p> </details> <h2 id=\"return-value\">Return value</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> with information about the sketch:</p> <table> <thead> <tr> <th>Name</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>Compression</code></td> <td>The compression (controllable trade-off between accuracy and memory consumption) of the sketch</td> </tr> <tr> <td><code>Capacity</code></td> <td>Size of the buffer used for storing the centroids and for the incoming unmerged observations</td> </tr> <tr> <td><code>Merged nodes</code></td> <td>Number of merged observations</td> </tr> <tr> <td><code>Unmerged nodes</code></td> <td>Number of buffered nodes (uncompressed observations)</td> </tr> <tr> <td><code>Merged weight</code></td> <td>Weight of values of the merged nodes</td> </tr> <tr> <td><code>Unmerged weight</code></td> <td>Weight of values of the unmerged nodes (uncompressed observations)</td> </tr> <tr> <td><code>Observations</code></td> <td>Number of observations added to the sketch</td> </tr> <tr> <td><code>Total compressions</code></td> <td>Number of times this sketch compressed data together</td> </tr> <tr> <td><code>Memory usage</code></td> <td>Number of bytes allocated for the sketch</td> </tr> </tbody> </table> <h2 id=\"examples\">Examples</h2> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.CREATE t\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.ADD t <span class=\"m\">1</span> <span class=\"m\">2</span> <span class=\"m\">3</span> <span class=\"m\">4</span> <span class=\"m\">5</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.INFO t\n</span></span><span class=\"line\"><span class=\"cl\"> 1<span class=\"o\">)</span> Compression\n</span></span><span class=\"line\"><span class=\"cl\"> 2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">100</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 3<span class=\"o\">)</span> Capacity\n</span></span><span class=\"line\"><span class=\"cl\"> 4<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">610</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 5<span class=\"o\">)</span> Merged nodes\n</span></span><span class=\"line\"><span class=\"cl\"> 6<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 7<span class=\"o\">)</span> Unmerged nodes\n</span></span><span class=\"line\"><span class=\"cl\"> 8<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">5</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 9<span class=\"o\">)</span> Merged weight\n</span></span><span class=\"line\"><span class=\"cl\">10<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\">11<span class=\"o\">)</span> Unmerged weight\n</span></span><span class=\"line\"><span class=\"cl\">12<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">5</span>\n</span></span><span class=\"line\"><span class=\"cl\">13<span class=\"o\">)</span> Observations\n</span></span><span class=\"line\"><span class=\"cl\">14<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">5</span>\n</span></span><span class=\"line\"><span class=\"cl\">15<span class=\"o\">)</span> Total compressions\n</span></span><span class=\"line\"><span class=\"cl\">16<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\">17<span class=\"o\">)</span> Memory usage\n</span></span><span class=\"line\"><span class=\"cl\">18<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">9768</span></span></span></pre></div><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/tdigest.info/\" class=\"_attribution-link\">https://redis.io/commands/tdigest.info/</a>\n  </p>\n</div>\n","tdigest.merge/index":"<h1 class=\"command-name\">TDIGEST.MERGE</h1>\n<pre>TDIGEST.MERGE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TDIGEST.MERGE destination-key numkeys source-key [source-key ...]\n  [COMPRESSION compression] [OVERRIDE]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.4.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N*K), where N is the number of centroids and K being the number of input sketches</dd> </dl> <p>Merges multiple t-digest sketches into a single sketch.</p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>destination-key</code></summary> <p>is key name for a t-digest sketch to merge observation values to.</p> <p>If <code>destination-key</code> does not exist - a new sketch is created.</p> <p>If <code>destination-key</code> is an existing sketch, its values are merged with the values of the source keys. To override the destination key contents use <code>OVERRIDE</code>.</p> </details> <details open><summary><code>numkeys</code></summary> Number of sketches to merge observation values from (1 or more). </details> <details open><summary><code>source-key</code></summary> each is a key name for a t-digest sketch to merge observation values from. </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>COMPRESSION compression</code></summary> <p>is a controllable tradeoff between accuracy and memory consumption. 100 is a common value for normal uses. 1000 is more accurate. If no value is passed by default the compression will be 100. For more information on scaling of accuracy versus the compression parameter see <a href=\"https://www.sciencedirect.com/science/article/pii/S2665963820300403\"><em>The t-digest: Efficient estimates of distributions</em></a>.</p> <p>When <code>COMPRESSION</code> is not specified:</p> <ul> <li>If <code>destination-key</code> does not exist or if <code>OVERRIDE</code> is specified, the compression is set to the maximal value among all source sketches.</li> <li>If <code>destination-key</code> already exists and <code>OVERRIDE</code> is not specified, its compression is not changed.</li> </ul> </details> <details open><summary><code>OVERRIDE</code></summary> When specified, if `destination-key` already exists, it is overwritten. </details> <h2 id=\"return-value\">Return value</h2> <p>OK on success, error otherwise.</p> <h2 id=\"examples\">Examples</h2> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.CREATE s1\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.CREATE s2\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.ADD s1 10.0 20.0\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.ADD s2 30.0 40.0\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.MERGE sM <span class=\"m\">2</span> s1 s2\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.BYRANK sM <span class=\"m\">0</span> <span class=\"m\">1</span> <span class=\"m\">2</span> <span class=\"m\">3</span> <span class=\"m\">4</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"s2\">\"10\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"s2\">\"20\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"s2\">\"30\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> <span class=\"s2\">\"40\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">5<span class=\"o\">)</span> <span class=\"s2\">\"inf\"</span></span></span></pre></div><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/tdigest.merge/\" class=\"_attribution-link\">https://redis.io/commands/tdigest.merge/</a>\n  </p>\n</div>\n","tdigest.cdf/index":"<h1 class=\"command-name\">TDIGEST.CDF</h1>\n<pre>TDIGEST.CDF</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TDIGEST.CDF key value [value ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.4.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Returns, for each input value, an estimation of the fraction (floating-point) of (observations smaller than the given value + half the observations equal to the given value).</p> <p>Multiple fractions can be retrieved in a signle call.</p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> is key name for an existing t-digest sketch. </details> <details open><summary><code>value</code></summary> is value for which the CDF (Cumulative Distribution Function) should be retrieved. </details> <h2 id=\"return-value\">Return value</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> - the command returns an array of floating-points populated with fraction_1, fraction_2, ..., fraction_N.</p> <p>All values are 'nan' if the sketch is empty.</p> <h2 id=\"examples\">Examples</h2> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.CREATE t COMPRESSION <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.ADD t <span class=\"m\">1</span> <span class=\"m\">2</span> <span class=\"m\">2</span> <span class=\"m\">3</span> <span class=\"m\">3</span> <span class=\"m\">3</span> <span class=\"m\">4</span> <span class=\"m\">4</span> <span class=\"m\">4</span> <span class=\"m\">4</span> <span class=\"m\">5</span> <span class=\"m\">5</span> <span class=\"m\">5</span> <span class=\"m\">5</span> <span class=\"m\">5</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.CDF t <span class=\"m\">0</span> <span class=\"m\">1</span> <span class=\"m\">2</span> <span class=\"m\">3</span> <span class=\"m\">4</span> <span class=\"m\">5</span> <span class=\"m\">6</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"s2\">\"0\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"s2\">\"0.033333333333333333\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"s2\">\"0.13333333333333333\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> <span class=\"s2\">\"0.29999999999999999\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">5<span class=\"o\">)</span> <span class=\"s2\">\"0.53333333333333333\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">6<span class=\"o\">)</span> <span class=\"s2\">\"0.83333333333333337\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">7<span class=\"o\">)</span> <span class=\"s2\">\"1\"</span></span></span></pre></div><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/tdigest.cdf/\" class=\"_attribution-link\">https://redis.io/commands/tdigest.cdf/</a>\n  </p>\n</div>\n","tdigest.max/index":"<h1 class=\"command-name\">TDIGEST.MAX</h1>\n<pre>TDIGEST.MAX</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TDIGEST.MAX key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.4.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Returns the maximum observation value from a t-digest sketch.</p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> is key name for an existing t-digest sketch. </details> <h2 id=\"return-value\">Return value</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> of maximum observation value from a sketch. The result is always accurate. 'nan' if the sketch is empty.</p> <h2 id=\"examples\">Examples</h2> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.CREATE t\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.MAX t\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"nan\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.ADD t <span class=\"m\">3</span> <span class=\"m\">4</span> <span class=\"m\">1</span> <span class=\"m\">2</span> <span class=\"m\">5</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt;TDIGEST.MAX t\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"5\"</span></span></span></pre></div><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/tdigest.max/\" class=\"_attribution-link\">https://redis.io/commands/tdigest.max/</a>\n  </p>\n</div>\n","time/index":"<h1 class=\"command-name\">TIME</h1>\n<pre>TIME</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TIME</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.6.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>TIME</code> command returns the current server time as a two items lists: a Unix timestamp and the amount of microseconds already elapsed in the current second. Basically the interface is very similar to the one of the <code>gettimeofday</code> system call.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>, specifically:</p> <p>A multi bulk reply containing two elements:</p> <ul> <li>unix time in seconds.</li> <li>microseconds.</li> </ul> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nTIME\nTIME\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/time/\" class=\"_attribution-link\">https://redis.io/commands/time/</a>\n  </p>\n</div>\n","tdigest.quantile/index":"<h1 class=\"command-name\">TDIGEST.QUANTILE</h1>\n<pre>TDIGEST.QUANTILE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TDIGEST.QUANTILE key quantile [quantile ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.4.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Returns, for each input fraction, an estimation of the value (floating point) that is smaller than the given fraction of observations.</p> <p>Multiple quantiles can be retrieved in a signle call.</p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> is key name for an existing t-digest sketch. </details> <details open><summary><code>quantile</code></summary> is the input fraction (between 0 and 1 inclusively) </details> <h2 id=\"return-value\">Return value</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> - an array of estimates (floating-point) populated with value_1, value_2, ..., value_N.</p> <ul> <li>Return an accurate result when <code>quantile</code> is 0 (the value of the smallest observation)</li> <li>Return an accurate result when <code>quantile</code> is 1 (the value of the largest observation)</li> </ul> <p>All values are 'nan' if the sketch is empty.</p> <h2 id=\"examples\">Examples</h2> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.CREATE t COMPRESSION <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.ADD t <span class=\"m\">1</span> <span class=\"m\">2</span> <span class=\"m\">2</span> <span class=\"m\">3</span> <span class=\"m\">3</span> <span class=\"m\">3</span> <span class=\"m\">4</span> <span class=\"m\">4</span> <span class=\"m\">4</span> <span class=\"m\">4</span> <span class=\"m\">5</span> <span class=\"m\">5</span> <span class=\"m\">5</span> <span class=\"m\">5</span> <span class=\"m\">5</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.QUANTILE t <span class=\"m\">0</span> 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 1<span class=\"o\">)</span> <span class=\"s2\">\"1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 2<span class=\"o\">)</span> <span class=\"s2\">\"2\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 3<span class=\"o\">)</span> <span class=\"s2\">\"3\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 4<span class=\"o\">)</span> <span class=\"s2\">\"3\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 5<span class=\"o\">)</span> <span class=\"s2\">\"4\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 6<span class=\"o\">)</span> <span class=\"s2\">\"4\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 7<span class=\"o\">)</span> <span class=\"s2\">\"4\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 8<span class=\"o\">)</span> <span class=\"s2\">\"5\"</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 9<span class=\"o\">)</span> <span class=\"s2\">\"5\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">10<span class=\"o\">)</span> <span class=\"s2\">\"5\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">11<span class=\"o\">)</span> <span class=\"s2\">\"5\"</span></span></span></pre></div><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/tdigest.quantile/\" class=\"_attribution-link\">https://redis.io/commands/tdigest.quantile/</a>\n  </p>\n</div>\n","tdigest.min/index":"<h1 class=\"command-name\">TDIGEST.MIN</h1>\n<pre>TDIGEST.MIN</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TDIGEST.MIN key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.4.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Returns the minimum observation value from a t-digest sketch.</p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> is key name for an existing t-digest sketch. </details> <h2 id=\"return-value\">Return value</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> of minimum observation value from a sketch. The result is always accurate. 'nan' if the sketch is empty.</p> <h2 id=\"examples\">Examples</h2> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.CREATE t\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.MIN t\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"nan\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.ADD t <span class=\"m\">3</span> <span class=\"m\">4</span> <span class=\"m\">1</span> <span class=\"m\">2</span> <span class=\"m\">5</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.MIN t\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"1\"</span></span></span></pre></div><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/tdigest.min/\" class=\"_attribution-link\">https://redis.io/commands/tdigest.min/</a>\n  </p>\n</div>\n","sunion/index":"<h1 class=\"command-name\">SUNION</h1>\n<pre>SUNION</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">SUNION key [key ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the total number of elements in all given sets.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@set</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the members of the set resulting from the union of all the given sets.</p> <p>For example:</p> <pre tabindex=\"0\">key1 = {a,b,c,d}\nkey2 = {c}\nkey3 = {a,c,e}\nSUNION key1 key2 key3 = {a,b,c,d,e}\n</pre>\n<p>Keys that do not exist are considered to be empty sets.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list with members of the resulting set.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSADD key1 \"a\"\nSADD key1 \"b\"\nSADD key1 \"c\"\nSADD key2 \"c\"\nSADD key2 \"d\"\nSADD key2 \"e\"\nSUNION key1 key2\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/sunion/\" class=\"_attribution-link\">https://redis.io/commands/sunion/</a>\n  </p>\n</div>\n","tdigest.reset/index":"<h1 class=\"command-name\">TDIGEST.RESET</h1>\n<pre>TDIGEST.RESET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TDIGEST.RESET key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.4.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Resets a t-digest sketch: empty the sketch and re-initializes it.</p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> is key name for an existing t-digest sketch. </details> <h2 id=\"return-value\">Return value</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> - <code>OK</code> if executed correctly, or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> otherwise.</p> <h2 id=\"examples\">Examples</h2> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.RESET t\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/tdigest.reset/\" class=\"_attribution-link\">https://redis.io/commands/tdigest.reset/</a>\n  </p>\n</div>\n","tdigest.trimmed_mean/index":"<h1 class=\"command-name\">TDIGEST.TRIMMED_MEAN</h1>\n<pre>TDIGEST.TRIMMED_MEAN</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TDIGEST.TRIMMED_MEAN key low_cut_quantile high_cut_quantile</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.4.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of centroids</dd> </dl> <p>Returns an estimation of the mean value from the sketch, excluding observation values outside the low and high cutoff quantiles.</p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> is key name for an existing t-digest sketch. </details> <details open><summary><code>low_cut_quantile</code></summary> <p>Foating-point value in the range [0..1], should be lower than <code>high_cut_quantile</code></p> <p>When equal to 0: No low cut.</p> <p>When higher than 0: Exclude observation values lower than this quantile.</p> </details> <details open><summary><code>high_cut_quantile</code></summary> <p>Floating-point value in the range [0..1], should be higher than <code>low_cut_quantile</code></p> <p>When lower than 1: Exclude observation values higher than or equal to this quantile.</p> <p>When equal to 1: No high cut.</p> </details> <h2 id=\"return-value\">Return value</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> estimation of the mean value. 'nan' if the sketch is empty.</p> <h2 id=\"examples\">Examples</h2> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.CREATE t COMPRESSION <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.ADD t <span class=\"m\">1</span> <span class=\"m\">2</span> <span class=\"m\">3</span> <span class=\"m\">4</span> <span class=\"m\">5</span> <span class=\"m\">6</span> <span class=\"m\">7</span> <span class=\"m\">8</span> <span class=\"m\">9</span> <span class=\"m\">10</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.TRIMMED_MEAN t 0.1 0.6\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"4\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.TRIMMED_MEAN t 0.3 0.9\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"6.5\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.TRIMMED_MEAN t <span class=\"m\">0</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"s2\">\"5.5\"</span></span></span></pre></div><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/tdigest.trimmed_mean/\" class=\"_attribution-link\">https://redis.io/commands/tdigest.trimmed_mean/</a>\n  </p>\n</div>\n","tdigest.rank/index":"<h1 class=\"command-name\">TDIGEST.RANK</h1>\n<pre>TDIGEST.RANK</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TDIGEST.RANK key value [value ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.4.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Returns, for each input value (floating-point), the estimated rank of the value (the number of observations in the sketch that are smaller than the value + half the number of observations that are equal to the value).</p> <p>Multiple ranks can be retrieved in a signle call.</p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> is key name for an existing t-digest sketch. </details> <details open><summary><code>value</code></summary> is input value for which the rank should be estimated. <h2 id=\"return-value\">Return value</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> - an array of integers populated with rank_1, rank_2, ..., rank_V:</p> <ul> <li>-1 - when <code>value</code> is smaller than the value of the smallest observation.</li> <li>The number of observations - when <code>value</code> is larger than the value of the largest observation.</li> <li>Otherwise: an estimation of the number of (observations smaller than <code>value</code> + half the observations equal to <code>value</code>).</li> </ul> <p>0 is the rank of the value of the smallest observation.</p> <p><em>n</em>-1 is the rank of the value of the largest observation; <em>n</em> denotes the number of observations added to the sketch.</p> <p>All values are -2 if the sketch is empty.</p> <h2 id=\"examples\">Examples</h2> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.CREATE s COMPRESSION <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.ADD s <span class=\"m\">10</span> <span class=\"m\">20</span> <span class=\"m\">30</span> <span class=\"m\">40</span> <span class=\"m\">50</span> <span class=\"m\">60</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.RANK s <span class=\"m\">0</span> <span class=\"m\">10</span> <span class=\"m\">20</span> <span class=\"m\">30</span> <span class=\"m\">40</span> <span class=\"m\">50</span> <span class=\"m\">60</span> <span class=\"m\">70</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> -1\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2</span>\n</span></span><span class=\"line\"><span class=\"cl\">5<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3</span>\n</span></span><span class=\"line\"><span class=\"cl\">6<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">4</span>\n</span></span><span class=\"line\"><span class=\"cl\">7<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">5</span>\n</span></span><span class=\"line\"><span class=\"cl\">8<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">6</span>\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.REVRANK s <span class=\"m\">0</span> <span class=\"m\">10</span> <span class=\"m\">20</span> <span class=\"m\">30</span> <span class=\"m\">40</span> <span class=\"m\">50</span> <span class=\"m\">60</span> <span class=\"m\">70</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">6</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">5</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">4</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3</span>\n</span></span><span class=\"line\"><span class=\"cl\">5<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2</span>\n</span></span><span class=\"line\"><span class=\"cl\">6<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">7<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\">8<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> -1  </span></span></pre></div> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.CREATE s COMPRESSION <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.ADD s <span class=\"m\">10</span> <span class=\"m\">10</span> <span class=\"m\">10</span> <span class=\"m\">10</span> <span class=\"m\">20</span> <span class=\"m\">20</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.RANK s <span class=\"m\">10</span> <span class=\"m\">20</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">5</span>\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.REVRANK s <span class=\"m\">10</span> <span class=\"m\">20</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">4</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span></span></span></pre></div>  </details><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/tdigest.rank/\" class=\"_attribution-link\">https://redis.io/commands/tdigest.rank/</a>\n  </p>\n</div>\n","topk.count/index":"<h1 class=\"command-name\">TOPK.COUNT</h1>\n<pre>TOPK.COUNT (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 2.4, this command is regarded as deprecated.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TOPK.COUNT key item [item ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(n) where n is the number of items</dd> </dl> <p>Returns count for an item. Multiple items can be requested at once. Please note this number will never be higher than the real count and likely to be lower.</p> <p>This command has been deprecated. The count value is not a representative of the number of appearances of an item.</p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: Name of sketch where item is counted.</li> <li>\n<strong>item</strong>: Item/s to be counted.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of <a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> - count for responding item.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; TOPK.COUNT topk foo 42 nonexist\n1) (integer) 3\n2) (integer) 1\n3) (integer) 0\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/topk.count/\" class=\"_attribution-link\">https://redis.io/commands/topk.count/</a>\n  </p>\n</div>\n","topk.add/index":"<h1 class=\"command-name\">TOPK.ADD</h1>\n<pre>TOPK.ADD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TOPK.ADD key items [items ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(n * k) where n is the number of items and k is the depth</dd> </dl> <p>Adds an item to the data structure. Multiple items can be added at once. If an item enters the Top-K list, the item which is expelled is returned. This allows dynamic heavy-hitter detection of items being entered or expelled from Top-K list.</p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: Name of sketch where item is added.</li> <li>\n<strong>item</strong>: Item/s to be added.</li> </ul> <h3 id=\"return\">Return</h3> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of <a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> - if an element was dropped from the TopK list, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Null reply</a> otherwise..</p> <h4 id=\"example\">Example</h4> <pre tabindex=\"0\">redis&gt; TOPK.ADD topk foo bar 42\n1) (nil)\n2) baz\n3) (nil)\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/topk.add/\" class=\"_attribution-link\">https://redis.io/commands/topk.add/</a>\n  </p>\n</div>\n","topk.query/index":"<h1 class=\"command-name\">TOPK.QUERY</h1>\n<pre>TOPK.QUERY</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TOPK.QUERY key item [item ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(n) where n is the number of items</dd> </dl> <p>Checks whether an item is one of Top-K items. Multiple items can be checked at once.</p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: Name of sketch where item is queried.</li> <li>\n<strong>item</strong>: Item/s to be queried.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of <a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> - \"1\" if item is in Top-K, otherwise \"0\".</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; TOPK.QUERY topk 42 nonexist\n1) (integer) 1\n2) (integer) 0\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/topk.query/\" class=\"_attribution-link\">https://redis.io/commands/topk.query/</a>\n  </p>\n</div>\n","tdigest.revrank/index":"<h1 class=\"command-name\">TDIGEST.REVRANK</h1>\n<pre>TDIGEST.REVRANK</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TDIGEST.REVRANK key value [value ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.4.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Returns, for each input value (floating-point), the estimated reverse rank of the value (the number of observations in the sketch that are larger than the value + half the number of observations that are equal to the value).</p> <p>Multiple reverse ranks can be retrieved in a signle call.</p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> is key name for an existing t-digest sketch. </details> <details open><summary><code>value</code></summary> is input value for which the reverse rank should be estimated. <h2 id=\"return-value\">Return value</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> - an array of integers populated with revrank_1, revrank_2, ..., revrank_V:</p> <ul> <li>-1 - when <code>value</code> is larger than the value of the largest observation.</li> <li>The number of observations - when <code>value</code> is smaller than the value of the smallest observation.</li> <li>Otherwise: an estimation of the number of (observations larger than <code>value</code> + half the observations equal to <code>value</code>).</li> </ul> <p>0 is the reverse rank of the value of the largest observation.</p> <p><em>n</em>-1 is the reverse rank of the value of the smallest observation; <em>n</em> denotes the number of observations added to the sketch.</p> <p>All values are -2 if the sketch is empty.</p> <h2 id=\"examples\">Examples</h2> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.CREATE s COMPRESSION <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.ADD s <span class=\"m\">10</span> <span class=\"m\">20</span> <span class=\"m\">30</span> <span class=\"m\">40</span> <span class=\"m\">50</span> <span class=\"m\">60</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.RANK s <span class=\"m\">0</span> <span class=\"m\">10</span> <span class=\"m\">20</span> <span class=\"m\">30</span> <span class=\"m\">40</span> <span class=\"m\">50</span> <span class=\"m\">60</span> <span class=\"m\">70</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> -1\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2</span>\n</span></span><span class=\"line\"><span class=\"cl\">5<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3</span>\n</span></span><span class=\"line\"><span class=\"cl\">6<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">4</span>\n</span></span><span class=\"line\"><span class=\"cl\">7<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">5</span>\n</span></span><span class=\"line\"><span class=\"cl\">8<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">6</span>\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.REVRANK s <span class=\"m\">0</span> <span class=\"m\">10</span> <span class=\"m\">20</span> <span class=\"m\">30</span> <span class=\"m\">40</span> <span class=\"m\">50</span> <span class=\"m\">60</span> <span class=\"m\">70</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">6</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">5</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">4</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3</span>\n</span></span><span class=\"line\"><span class=\"cl\">5<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2</span>\n</span></span><span class=\"line\"><span class=\"cl\">6<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">7<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\">8<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> -1</span></span></pre></div> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.CREATE s COMPRESSION <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.ADD s <span class=\"m\">10</span> <span class=\"m\">10</span> <span class=\"m\">10</span> <span class=\"m\">10</span> <span class=\"m\">20</span> <span class=\"m\">20</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.RANK s <span class=\"m\">10</span> <span class=\"m\">20</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">5</span>\n</span></span><span class=\"line\"><span class=\"cl\">redis&gt; TDIGEST.REVRANK s <span class=\"m\">10</span> <span class=\"m\">20</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">4</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span></span></span></pre></div>  </details><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/tdigest.revrank/\" class=\"_attribution-link\">https://redis.io/commands/tdigest.revrank/</a>\n  </p>\n</div>\n","topk.list/index":"<h1 class=\"command-name\">TOPK.LIST</h1>\n<pre>TOPK.LIST</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TOPK.LIST key [WITHCOUNT]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(k) where k is the value of top-k</dd> </dl> <p>Return full list of items in Top K list.</p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: Name of sketch where item is counted.</li> <li>\n<strong>WITHCOUNT</strong>: Count of each element is returned.</li> </ul> <h2 id=\"return\">Return</h2> <p>k (or less) items in Top K list.</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of <a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> - the names of items in the TopK list. If <code>WITHCOUNT</code> is requested, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of <a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> and <a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> pairs of the names of items in the TopK list and their count.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">TOPK.LIST topk\n1) foo\n2) 42\n3) bar\n</pre>\n<pre tabindex=\"0\">TOPK.LIST topk WITHCOUNT\n1) foo\n2) (integer) 12\n3) 42\n4) (integer) 7\n5) bar\n6) (integer) 2\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/topk.list/\" class=\"_attribution-link\">https://redis.io/commands/topk.list/</a>\n  </p>\n</div>\n","topk.reserve/index":"<h1 class=\"command-name\">TOPK.RESERVE</h1>\n<pre>TOPK.RESERVE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TOPK.RESERVE key topk [width depth decay]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Initializes a TopK with specified parameters.</p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: Key under which the sketch is to be found.</li> <li>\n<strong>topk</strong>: Number of top occurring items to keep.</li> </ul> <p>Optional parameters</p> <ul> <li>\n<strong>width</strong>: Number of counters kept in each array. (Default 8)</li> <li>\n<strong>depth</strong>: Number of arrays. (Default 7)</li> <li>\n<strong>decay</strong>: The probability of reducing a counter in an occupied bucket. It is raised to power of it's counter (decay ^ bucket[i].counter). Therefore, as the counter gets higher, the chance of a reduction is being reduced. (Default 0.9)</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> - <code>OK</code> if executed correctly, or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> otherwise.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; TOPK.RESERVE topk 50 2000 7 0.925\nOK\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/topk.reserve/\" class=\"_attribution-link\">https://redis.io/commands/topk.reserve/</a>\n  </p>\n</div>\n","topk.info/index":"<h1 class=\"command-name\">TOPK.INFO</h1>\n<pre>TOPK.INFO</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TOPK.INFO key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Returns number of required items (k), width, depth and decay values.</p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: Name of sketch.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> with information of the filter.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">TOPK.INFO topk\n1) k\n2) (integer) 50\n3) width\n4) (integer) 2000\n5) depth\n6) (integer) 7\n7) decay\n8) \"0.92500000000000004\"\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/topk.info/\" class=\"_attribution-link\">https://redis.io/commands/topk.info/</a>\n  </p>\n</div>\n","ts.alter/index":"<h1 class=\"command-name\">TS.ALTER</h1>\n<pre>TS.ALTER</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TS.ALTER key \n  [RETENTION retentionPeriod] \n  [CHUNK_SIZE size] \n  [DUPLICATE_POLICY policy] \n  [LABELS [{label value}...]]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/timeseries\">TimeSeries 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of labels requested to update</dd> </dl> <p>Update the retention, chunk size, duplicate policy, and labels of an existing time series</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key name for the time series.</p> </details> <p><note><b>Note:</b> This command alters only the specified element. For example, if you specify only <code>RETENTION</code> and <code>LABELS</code>, the chunk size and the duplicate policy are not altered. </note></p> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>RETENTION retentionPeriod</code></summary> <p>is maximum retention period, compared to the maximum existing timestamp, in milliseconds. See <code>RETENTION</code> in <a href=\"../ts.create\"><code>TS.CREATE</code></a>.</p> </details> <details open><summary><code>CHUNK_SIZE size</code></summary> <p>is the initial allocation size, in bytes, for the data part of each new chunk. Actual chunks may consume more memory. See <code>CHUNK_SIZE</code> in <a href=\"../ts.create\"><code>TS.CREATE</code></a>. Changing this value does not affect existing chunks.</p> </details> <details open><summary><code>DUPLICATE_POLICY policy</code></summary> <p>is policy for handling multiple samples with identical timestamps. See <code>DUPLICATE_POLICY</code> in <a href=\"../ts.create\"><code>TS.CREATE</code></a>.</p> </details> <details open><summary><code>LABELS [{label value}...]</code></summary> <p>is set of label-value pairs that represent metadata labels of the key and serve as a secondary index.</p> <p>If <code>LABELS</code> is specified, the given label list is applied. Labels that are not present in the given list are removed implicitly. Specifying <code>LABELS</code> with no label-value pairs removes all existing labels. See <code>LABELS</code> in <a href=\"../ts.create\"><code>TS.CREATE</code></a>.</p> </details> <h2 id=\"return-value\">Return value</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> - <code>OK</code> if executed correctly, or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> otherwise.</p> <h2 id=\"examples\">Examples</h2> <details open><summary><b>Alter a temperature time series</b></summary> <p>Create a temperature time series.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE temperature:2:32 RETENTION <span class=\"m\">60000</span> DUPLICATE_POLICY MAX LABELS sensor_id <span class=\"m\">2</span> area_id <span class=\"m\">32</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Alter the labels in the time series.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.ALTER temperature:2:32 LABELS sensor_id <span class=\"m\">2</span> area_id <span class=\"m\">32</span> sub_area_id <span class=\"m\">15</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ts.create\"><code>TS.CREATE</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/timeseries\">RedisTimeSeries</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ts.alter/\" class=\"_attribution-link\">https://redis.io/commands/ts.alter/</a>\n  </p>\n</div>\n","touch/index":"<h1 class=\"command-name\">TOUCH</h1>\n<pre>TOUCH</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TOUCH key [key ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.2.1</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of keys that will be touched.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Alters the last access time of a key(s). A key is ignored if it does not exist.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: The number of keys that were touched.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET key1 \"Hello\"\nSET key2 \"World\"\nTOUCH key1 key2\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/touch/\" class=\"_attribution-link\">https://redis.io/commands/touch/</a>\n  </p>\n</div>\n","ts.madd/index":"<h1 class=\"command-name\">TS.MADD</h1>\n<pre>TS.MADD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TS.MADD {key timestamp value}...\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/timeseries\">TimeSeries 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N*M) when N is the amount of series updated and M is the amount of compaction rules or O(N) with no compaction</dd> </dl> <p>Append new samples to one or more time series</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>key</code></summary> <p>is the key name for the time series.</p> </details> <details open> <summary><code>timestamp</code></summary> <p>is (integer) UNIX sample timestamp in milliseconds or <code>*</code> to set the timestamp according to the server clock.</p> </details> <details open> <summary><code>value</code></summary> <p>is numeric data value of the sample (double). The double number should follow <a href=\"https://tools.ietf.org/html/rfc7159\">RFC 7159</a> (a JSON standard). The parser rejects overly large values that would not fit in binary64. It does not accept NaN or infinite values.</p> </details> <p><note><b>Notes:</b></note></p> <ul> <li>If <code>timestamp</code> is older than the retention period compared to the maximum existing timestamp, the sample is discarded and an error is returned.</li> <li>Explicitly adding samples to a compacted time series (using <a href=\"../ts.add\"><code>TS.ADD</code></a>, <code>TS.MADD</code>, <a href=\"../ts.incrby\"><code>TS.INCRBY</code></a>, or <a href=\"../ts.decrby\"><code>TS.DECRBY</code></a>) may result in inconsistencies between the raw and the compacted data. The compaction process may override such samples. </li> </ul> <h2 id=\"return-value\">Return value</h2> <p>Either</p> <ul> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of <a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> representing the timestamp of each added sample or an <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> (e.g., on <code>DUPLICATE_POLICY</code> violation)</li> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> (e.g., on wrong number of arguments)</li> </ul> <h2 id=\"complexity\">Complexity</h2> <p>If a compaction rule exits on a time series, TS.MADD performance might be reduced. The complexity of TS.MADD is always <code>O(N*M)</code>, where <code>N</code> is the amount of series updated and <code>M</code> is the amount of compaction rules or <code>O(N)</code> with no compaction.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Add stock prices at different timestamps</b></summary> <p>Create two stocks and add their prices at three different timestamps.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE stock:A LABELS <span class=\"nb\">type</span> stock name A\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE stock:B LABELS <span class=\"nb\">type</span> stock name B\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:A <span class=\"m\">1000</span> <span class=\"m\">100</span> stock:A <span class=\"m\">1010</span> <span class=\"m\">110</span> stock:A <span class=\"m\">1020</span> <span class=\"m\">120</span> stock:B <span class=\"m\">1000</span> <span class=\"m\">120</span> stock:B <span class=\"m\">1010</span> <span class=\"m\">110</span> stock:B <span class=\"m\">1020</span> <span class=\"m\">100</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1020</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">5<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1010</span>\n</span></span><span class=\"line\"><span class=\"cl\">6<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1020</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ts.mrange\"><code>TS.MRANGE</code></a> | <a href=\"../ts.range\"><code>TS.RANGE</code></a> | <a href=\"../ts.mrevrange\"><code>TS.MREVRANGE</code></a> | <a href=\"../ts.revrange\"><code>TS.REVRANGE</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/timeseries\">RedisTimeSeries</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ts.madd/\" class=\"_attribution-link\">https://redis.io/commands/ts.madd/</a>\n  </p>\n</div>\n","topk.incrby/index":"<h1 class=\"command-name\">TOPK.INCRBY</h1>\n<pre>TOPK.INCRBY</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TOPK.INCRBY key item increment [item increment ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/bloom\">Bloom 2.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(n * k * incr) where n is the number of items, k is the depth and incr is the increment</dd> </dl> <p>Increase the score of an item in the data structure by increment. Multiple items' score can be increased at once. If an item enters the Top-K list, the item which is expelled is returned.</p> <h3 id=\"parameters\">Parameters</h3> <ul> <li>\n<strong>key</strong>: Name of sketch where item is added.</li> <li>\n<strong>item</strong>: Item/s to be added.</li> <li>\n<strong>increment</strong>: increment to current item score. Increment must be greater or equal to 1. Increment is limited to 100,000 to avoid server freeze.</li> </ul> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of <a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> - if an element was dropped from the TopK list, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Null reply</a> otherwise..</p> <p>@example</p> <pre tabindex=\"0\">redis&gt; TOPK.INCRBY topk foo 3 bar 2 42 30\n1) (nil)\n2) (nil)\n3) foo\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/topk.incrby/\" class=\"_attribution-link\">https://redis.io/commands/topk.incrby/</a>\n  </p>\n</div>\n","ts.add/index":"<h1 class=\"command-name\">TS.ADD</h1>\n<pre>TS.ADD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TS.ADD key timestamp value \n  [RETENTION retentionPeriod] \n  [ENCODING [COMPRESSED|UNCOMPRESSED]] \n  [CHUNK_SIZE size] \n  [ON_DUPLICATE policy] \n  [LABELS {label value}...]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/timeseries\">TimeSeries 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(M) when M is the amount of compaction rules or O(1) with no compaction</dd> </dl> <p>Append a sample to a time series</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key name for the time series.</p> </details> <details open><summary><code>timestamp</code></summary> <p>is (integer) UNIX sample timestamp in milliseconds or <code>*</code> to set the timestamp according to the server clock.</p> </details> <details open><summary><code>value</code></summary> <p>is (double) numeric data value of the sample. The double number should follow <a href=\"https://tools.ietf.org/html/rfc7159\">RFC 7159</a> (JSON standard). In particular, the parser rejects overly large values that do not fit in binary64. It does not accept NaN or infinite values.</p> </details> <p><note><b>Notes:</b></note></p> <ul> <li> <p>When specified key does not exist, a new time series is created.</p> <p>if a <a href=\"https://redis.io/docs/stack/timeseries/configuration/#compaction_policy\">COMPACTION_POLICY</a> configuration parameter is defined, compacted time series would be created as well.</p> </li> <li> <p>If <code>timestamp</code> is older than the retention period compared to the maximum existing timestamp, the sample is discarded and an error is returned.</p> </li> <li> <p>When adding a sample to a time series for which compaction rules are defined:</p> <ul> <li>If all the original samples for an affected aggregated time bucket are available, the compacted value is recalculated based on the reported sample and the original samples.</li> <li>If only a part of the original samples for an affected aggregated time bucket is available due to trimming caused in accordance with the time series RETENTION policy, the compacted value is recalculated based on the reported sample and the available original samples.</li> <li>If the original samples for an affected aggregated time bucket are not available due to trimming caused in accordance with the time series RETENTION policy, the compacted value bucket is not updated.</li> </ul> </li> <li> <p>Explicitly adding samples to a compacted time series (using <code>TS.ADD</code>, <a href=\"../ts.madd\"><code>TS.MADD</code></a>, <a href=\"../ts.incrby\"><code>TS.INCRBY</code></a>, or <a href=\"../ts.decrby\"><code>TS.DECRBY</code></a>) may result in inconsistencies between the raw and the compacted data. The compaction process may override such samples. </p> </li> </ul> <h2 id=\"optional-arguments\">Optional arguments</h2> <p>The following arguments are optional because they can be set by <a href=\"../ts.create\"><code>TS.CREATE</code></a>.</p> <details open><summary><code>RETENTION retentionPeriod</code></summary> <p>is maximum retention period, compared to the maximum existing timestamp, in milliseconds.</p> <p>Use it only if you are creating a new time series. It is ignored if you are adding samples to an existing time series. See <code>RETENTION</code> in <a href=\"../ts.create\"><code>TS.CREATE</code></a>.</p> </details> <details open><summary><code>ENCODING enc</code></summary> <p>specifies the series sample's encoding format.</p> <p>Use it only if you are creating a new time series. It is ignored if you are adding samples to an existing time series. See <code>ENCODING</code> in <a href=\"../ts.create\"><code>TS.CREATE</code></a>.</p> </details> <details open><summary><code>CHUNK_SIZE size</code></summary> is memory size, in bytes, allocated for each data chunk. <p>Use it only if you are creating a new time series. It is ignored if you are adding samples to an existing time series. See <code>CHUNK_SIZE</code> in <a href=\"../ts.create\"><code>TS.CREATE</code></a>.</p> </details> <details open><summary><code>ON_DUPLICATE policy</code></summary> <p>is overwrite key and database configuration for <a href=\"https://redis.io/docs/stack/timeseries/configuration/#duplicate_policy\">DUPLICATE_POLICY</a>, the policy for handling samples with identical timestamps. It is used with one of the following values:</p> <ul> <li>\n<code>BLOCK</code>: ignore any newly reported value and reply with an error</li> <li>\n<code>FIRST</code>: ignore any newly reported value</li> <li>\n<code>LAST</code>: override with the newly reported value</li> <li>\n<code>MIN</code>: only override if the value is lower than the existing value</li> <li>\n<code>MAX</code>: only override if the value is higher than the existing value</li> <li>\n<code>SUM</code>: If a previous sample exists, add the new sample to it so that the updated value is equal to (previous + new). If no previous sample exists, set the updated value equal to the new value.</li> </ul> </details> <details open><summary><code>LABELS {label value}...</code></summary> <p>is set of label-value pairs that represent metadata labels of the time series.</p> <p>Use it only if you are creating a new time series. It is ignored if you are adding samples to an existing time series. See <code>LABELS</code> in <a href=\"../ts.create\"><code>TS.CREATE</code></a>.</p> </details> <p><note><b>Notes:</b></note></p> <ul> <li>You can use this command to add data to a nonexisting time series in a single command. This is why <code>RETENTION</code>, <code>ENCODING</code>, <code>CHUNK_SIZE</code>, <code>ON_DUPLICATE</code>, and <code>LABELS</code> are optional arguments.</li> <li>Setting <code>RETENTION</code> and <code>LABELS</code> introduces additional time complexity. </li> </ul> <h2 id=\"return-value\">Return value</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> - the timestamp of the upserted sample, or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a>.</p> <h2 id=\"complexity\">Complexity</h2> <p>If a compaction rule exits on a time series, the performance of <code>TS.ADD</code> can be reduced. The complexity of <code>TS.ADD</code> is always <code>O(M)</code>, where <code>M</code> is the number of compaction rules or <code>O(1)</code> with no compaction.</p> <h2 id=\"examples\">Examples</h2> <details open><summary><b>Append a sample to a temperature time series</b></summary> <p>Create a temperature time series, set its retention to 1 year, and append a sample.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.ADD temperature:3:11 <span class=\"m\">1548149183000</span> <span class=\"m\">27</span> RETENTION <span class=\"m\">31536000000</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149183000</span></span></span></pre></div> <p><note><b>Note:</b> If a time series with such a name already exists, the sample is added, but the retention does not change.</note></p> <p>Add a sample to the time series, setting the sample's timestamp according to the server clock.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.ADD temperature:3:11 * <span class=\"m\">30</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1662042954573</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ts.create\"><code>TS.CREATE</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/timeseries\">RedisTimeSeries</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ts.add/\" class=\"_attribution-link\">https://redis.io/commands/ts.add/</a>\n  </p>\n</div>\n","ts.createrule/index":"<h1 class=\"command-name\">TS.CREATERULE</h1>\n<pre>TS.CREATERULE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TS.CREATERULE sourceKey destKey \n  AGGREGATION aggregator bucketDuration \n  [alignTimestamp]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/timeseries\">TimeSeries 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Create a compaction rule</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>sourceKey</code></summary> <p>is key name for the source time series.</p> </details> <details open><summary><code>destKey</code></summary> <p>is key name for destination (compacted) time series. It must be created before <code>TS.CREATERULE</code> is called.</p> </details> <details open><summary><code>AGGREGATION aggregator bucketDuration</code></summary> <p>aggregates results into time buckets.</p> <ul> <li> <p><code>aggregator</code> takes one of the following aggregation types:</p> <table> <thead> <tr> <th><code>aggregator</code></th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>avg</code></td> <td>Arithmetic mean of all values</td> </tr> <tr> <td><code>sum</code></td> <td>Sum of all values</td> </tr> <tr> <td><code>min</code></td> <td>Minimum value</td> </tr> <tr> <td><code>max</code></td> <td>Maximum value</td> </tr> <tr> <td><code>range</code></td> <td>Difference between the highest and the lowest value</td> </tr> <tr> <td><code>count</code></td> <td>Number of values</td> </tr> <tr> <td><code>first</code></td> <td>Value with lowest timestamp in the bucket</td> </tr> <tr> <td><code>last</code></td> <td>Value with highest timestamp in the bucket</td> </tr> <tr> <td><code>std.p</code></td> <td>Population standard deviation of the values</td> </tr> <tr> <td><code>std.s</code></td> <td>Sample standard deviation of the values</td> </tr> <tr> <td><code>var.p</code></td> <td>Population variance of the values</td> </tr> <tr> <td><code>var.s</code></td> <td>Sample variance of the values</td> </tr> <tr> <td><code>twa</code></td> <td>Time-weighted average over the bucket's timeframe (since RedisTimeSeries v1.8)</td> </tr> </tbody> </table> </li> <li> <p><code>bucketDuration</code> is duration of each bucket, in milliseconds.</p> </li> </ul> <p><note><b>Notes</b></note></p> <ul> <li>Only new samples that are added into the source series after the creation of the rule will be aggregated.</li> <li>Calling <code>TS.CREATERULE</code> with a nonempty <code>destKey</code> may result in inconsistencies between the raw and the compacted data.</li> <li>Explicitly adding samples to a compacted time series (using <a href=\"../ts.add\"><code>TS.ADD</code></a>, <a href=\"../ts.madd\"><code>TS.MADD</code></a>, <a href=\"../ts.incrby\"><code>TS.INCRBY</code></a>, or <a href=\"../ts.decrby\"><code>TS.DECRBY</code></a>) may result in inconsistencies between the raw and the compacted data. The compaction process may override such samples.</li> <li>If no samples are added to the source time series during a bucket period. no <em>compacted sample</em> is added to the destination time series.</li> <li>The timestamp of a compacted sample added to the destination time series is set to the start timestamp the appropriate compaction bucket. For example, for a 10-minute compaction bucket with no alignment, the compacted samples timestamps are <code>x:00</code>, <code>x:10</code>, <code>x:20</code>, and so on.</li> <li>Deleting <code>destKey</code> will cause the compaction rule to be deleted as well.</li> <li>On a clustered environment, hash tags should be used to force <code>sourceKey</code> and <code>destKey</code> to be stored in the same hash slot.</li> </ul> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>alignTimestamp</code> (since RedisTimeSeries v1.8)</summary> <p>ensures that there is a bucket that starts exactly at <code>alignTimestamp</code> and aligns all other buckets accordingly. It is expressed in milliseconds. The default value is 0 aligned with the epoch. For example, if <code>bucketDuration</code> is 24 hours (<code>24 * 3600 * 1000</code>), setting <code>alignTimestamp</code> to 6 hours after the epoch (<code>6 * 3600 * 1000</code>) ensures that each buckets timeframe is <code>[06:00 .. 06:00)</code>.</p> </details> <h2 id=\"return-value\">Return value</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> - <code>OK</code> if executed correctly, or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> otherwise.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Create a compaction rule</b></summary> <p>Create a time series to store the temperatures measured in Tel Aviv.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE temp:TLV LABELS <span class=\"nb\">type</span> temp location TLV\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Next, create a compacted time series named <em>dailyAvgTemp</em> containing one compacted sample per 24 hours: the time-weighted average of all measurements taken from midnight to next midnight.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE dailyAvgTemp:TLV LABELS <span class=\"nb\">type</span> temp location TLV\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATERULE temp:TLV dailyAvgTemp:TLV AGGREGATION twa <span class=\"m\">86400000</span> </span></span></pre></div> <p>Now, also create a compacted time series named <em>dailyDiffTemp</em>. This time series will contain one compacted sample per 24 hours: the difference between the minimum and the maximum temperature measured between 06:00 and 06:00 next day. Here, 86400000 is the number of milliseconds in 24 hours, 21600000 is the number of milliseconds in 6 hours.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE dailyDiffTemp:TLV LABELS <span class=\"nb\">type</span> temp location TLV\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATERULE temp:TLV dailyDiffTemp:TLV AGGREGATION range <span class=\"m\">86400000</span> <span class=\"m\">21600000</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ts.deleterule\"><code>TS.DELETERULE</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/timeseries\">RedisTimeSeries</a></p>  </details><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ts.createrule/\" class=\"_attribution-link\">https://redis.io/commands/ts.createrule/</a>\n  </p>\n</div>\n","ts.create/index":"<h1 class=\"command-name\">TS.CREATE</h1>\n<pre>TS.CREATE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TS.CREATE key \n  [RETENTION retentionPeriod] \n  [ENCODING [UNCOMPRESSED|COMPRESSED]] \n  [CHUNK_SIZE size] \n  [DUPLICATE_POLICY policy] \n  [LABELS {label value}...]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/timeseries\">TimeSeries 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Create a new time series</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key name for the time series.</p> </details> <p><note><b>Notes:</b></note></p> <ul> <li>If a key already exists, you get a Redis error reply, <code>TSDB: key already exists</code>. You can check for the existence of a key with the <a href=\"../exists\"><code>EXISTS</code></a> command.</li> <li>Other commands that also create a new time series when called with a key that does not exist are <a href=\"../ts.add\"><code>TS.ADD</code></a>, <a href=\"../ts.incrby\"><code>TS.INCRBY</code></a>, and <a href=\"../ts.decrby\"><code>TS.DECRBY</code></a>. </li> </ul> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>RETENTION retentionPeriod</code></summary> <p>is maximum age for samples compared to the highest reported timestamp, in milliseconds. Samples are expired based solely on the difference between their timestamp and the timestamps passed to subsequent <a href=\"../ts.add\"><code>TS.ADD</code></a>, <a href=\"../ts.madd\"><code>TS.MADD</code></a>, <a href=\"../ts.incrby\"><code>TS.INCRBY</code></a>, and <a href=\"../ts.decrby\"><code>TS.DECRBY</code></a> calls with this key.</p> <p>When set to 0, samples never expire. When not specified, the option is set to the global <a href=\"https://redis.io/docs/stack/timeseries/configuration/#retention_policy\">RETENTION_POLICY</a> configuration of the database, which by default is 0.</p> </details> <details open><summary><code>ENCODING enc</code></summary> <p>specifies the series samples encoding format as one of the following values:</p> <ul> <li>\n<code>COMPRESSED</code>, applies compression to the series samples.</li> <li>\n<code>UNCOMPRESSED</code>, keeps the raw samples in memory. Adding this flag keeps data in an uncompressed form.</li> </ul> <p><code>COMPRESSED</code> is almost always the right choice. Compression not only saves memory but usually improves performance due to a lower number of memory accesses. It can result in about 90% memory reduction. The exception are highly irregular timestamps or values, which occur rarely.</p> <p>When not specified, the option is set to <code>COMPRESSED</code>.</p> </details> <details open><summary><code>CHUNK_SIZE size</code></summary> <p>is initial allocation size, in bytes, for the data part of each new chunk. Actual chunks may consume more memory. Changing chunkSize (using <a href=\"../ts.alter\"><code>TS.ALTER</code></a>) does not affect existing chunks.</p> <p>Must be a multiple of 8 in the range [48 .. 1048576]. When not specified, it is set to the global <a href=\"https://redis.io/docs/stack/timeseries/configuration/#chunk_size_bytes\">CHUNK_SIZE_BYTES</a> configuration of the database, which by default is 4096 (a single memory page).</p> <p>Note: Before v1.6.10 no minimum was enforced. Between v1.6.10 and v1.6.17 and in v1.8.0 the minimum value was 128. Since v1.8.1 the minimum value is 48.</p> <p>The data in each key is stored in chunks. Each chunk contains header and data for a given timeframe. An index contains all chunks. Iterations occur inside each chunk. Depending on your use case, consider these tradeoffs for having smaller or larger sizes of chunks:</p> <ul> <li>Insert performance: Smaller chunks result in slower inserts (more chunks need to be created).</li> <li>Query performance: Queries for a small subset when the chunks are very large are slower, as we need to iterate over the chunk to find the data.</li> <li>Larger chunks may take more memory when you have a very large number of keys and very few samples per key, or less memory when you have many samples per key.</li> </ul> <p>If you are unsure about your use case, select the default.</p> </details> <details open><summary><code>DUPLICATE_POLICY policy</code></summary> <p>is policy for handling insertion (<a href=\"../ts.add\"><code>TS.ADD</code></a> and <a href=\"../ts.madd\"><code>TS.MADD</code></a>) of multiple samples with identical timestamps, with one of the following values:</p> <ul> <li>\n<code>BLOCK</code>: ignore any newly reported value and reply with an error</li> <li>\n<code>FIRST</code>: ignore any newly reported value</li> <li>\n<code>LAST</code>: override with the newly reported value</li> <li>\n<code>MIN</code>: only override if the value is lower than the existing value</li> <li>\n<code>MAX</code>: only override if the value is higher than the existing value</li> <li>\n<code>SUM</code>: If a previous sample exists, add the new sample to it so that the updated value is equal to (previous + new). If no previous sample exists, set the updated value equal to the new value.</li> </ul> <p>When not specified: set to the global <a href=\"https://redis.io/docs/stack/timeseries/configuration/#duplicate_policy\">DUPLICATE_POLICY</a> configuration of the database (which, by default, is <code>BLOCK</code>).</p> </details> <details open><summary><code>LABELS {label value}...</code></summary> <p>is set of label-value pairs that represent metadata labels of the key and serve as a secondary index.</p> <p>The <a href=\"../ts.mget\"><code>TS.MGET</code></a>, <a href=\"../ts.mrange\"><code>TS.MRANGE</code></a>, and <a href=\"../ts.mrevrange\"><code>TS.MREVRANGE</code></a> commands operate on multiple time series based on their labels. The <a href=\"../ts.queryindex\"><code>TS.QUERYINDEX</code></a> command returns all time series keys matching a given filter based on their labels.</p> </details> <h2 id=\"return-value\">Return value</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> - <code>OK</code> if executed correctly, or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> otherwise.</p> <h2 id=\"examples\">Examples</h2> <details open><summary><b>Create a temperature time series</b></summary> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE temperature:2:32 RETENTION <span class=\"m\">60000</span> DUPLICATE_POLICY MAX LABELS sensor_id <span class=\"m\">2</span> area_id <span class=\"m\">32</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ts.add\"><code>TS.ADD</code></a> | <a href=\"../ts.incrby\"><code>TS.INCRBY</code></a> | <a href=\"../ts.decrby\"><code>TS.DECRBY</code></a> | <a href=\"../ts.mget\"><code>TS.MGET</code></a> | <a href=\"../ts.mrange\"><code>TS.MRANGE</code></a> | <a href=\"../ts.mrevrange\"><code>TS.MREVRANGE</code></a> | <a href=\"../ts.queryindex\"><code>TS.QUERYINDEX</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <ul> <li><a href=\"https://redis.io/docs/stack/timeseries\">RedisTimeSeries</a></li> <li><a href=\"https://redis.com/blog/redistimeseries-version-1-2-is-here/\">RedisTimeSeries Version 1.2 Is Here!</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ts.create/\" class=\"_attribution-link\">https://redis.io/commands/ts.create/</a>\n  </p>\n</div>\n","ts.info/index":"<h1 class=\"command-name\">TS.INFO</h1>\n<pre>TS.INFO</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TS.INFO key \n  [DEBUG]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/timeseries\">TimeSeries 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Return information and statistics for a time series.</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>key</code></summary> is key name of the time series. </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open> <summary><code>[DEBUG]</code></summary> <p>is an optional flag to get a more detailed information about the chunks.</p> </details> <h2 id=\"return-value\">Return value</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> with information about the time series (name-value pairs):</p> <table> <thead> <tr> <th>Name<br><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>\n</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>totalSamples</code></td> <td>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a><br> Total number of samples in this time series</td> </tr> <tr> <td><code>memoryUsage</code></td> <td>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a><br> Total number of bytes allocated for this time series, which is the sum of <br> - The memory used for storing the series' configuration parameters (retention period, duplication policy, etc.)<br>- The memory used for storing the series' compaction rules<br>- The memory used for storing the series' labels (key-value pairs)<br>- The memory used for storing the chunks (chunk header + compressed/uncompressed data)</td> </tr> <tr> <td><code>firstTimestamp</code></td> <td>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a><br> First timestamp present in this time series</td> </tr> <tr> <td><code>lastTimestamp</code></td> <td>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a><br> Last timestamp present in this time series</td> </tr> <tr> <td><code>retentionTime</code></td> <td>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a><br> The retention period, in milliseconds, for this time series</td> </tr> <tr> <td><code>chunkCount</code></td> <td>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a><br> Number of chunks used for this time series</td> </tr> <tr> <td><code>chunkSize</code></td> <td>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a><br> The initial allocation size, in bytes, for the data part of each new chunk.<br>Actual chunks may consume more memory. Changing the chunk size (using <a href=\"../ts.alter\"><code>TS.ALTER</code></a>) does not affect existing chunks.</td> </tr> <tr> <td><code>chunkType</code></td> <td>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a><br> The chunks type: <code>compressed</code> or <code>uncompressed</code>\n</td> </tr> <tr> <td><code>duplicatePolicy</code></td> <td>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Null reply</a><br> The <a href=\"https://redis.io/docs/stack/timeseries/configuration/#duplicate_policy\">duplicate policy</a> of this time series</td> </tr> <tr> <td><code>labels</code></td> <td>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Null reply</a><br> Metadata labels of this time series<br> Each element is a 2-elements <a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of (<a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>) representing (label, value)</td> </tr> <tr> <td><code>sourceKey</code></td> <td>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a> or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Null reply</a><br>Key name for source time series in case the current series is a target of a <a href=\"../ts.createrule/index\">compaction rule</a>\n</td> </tr> <tr> <td><code>rules</code></td> <td>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a><br> <a href=\"../ts.createrule/index\">Compaction rules</a> defined in this time series<br> Each rule is an <a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> with 4 elements:<br>- <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: The compaction key<br>- <a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: The bucket duration<br>- <a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: The aggregator<br>- <a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: The alignment (since RedisTimeSeries v1.8)</td> </tr> </tbody> </table> <p>When <a href=\"../debug\"><code>DEBUG</code></a> is specified, the response also contains:</p> <table> <thead> <tr> <th>Name<br><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>\n</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>keySelfName</code></td> <td>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a><br> Name of the key</td> </tr> <tr> <td><code>Chunks</code></td> <td>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> with information about the chunks<br>Each element is an <a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of information about a single chunk in a name(<a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>)-value pairs:<br>- <code>startTimestamp</code> - <a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> - First timestamp present in the chunk<br>- <code>endTimestamp</code> - <a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> - Last timestamp present in the chunk<br>- <code>samples</code> - <a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> - Total number of samples in the chunk<br>- <code>size</code> - <a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> - the chunk's internal data size (without overheads) in bytes<br>- <code>bytesPerSample</code> - <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a> (double) - Ratio of <code>size</code> and <code>samples</code>\n</td> </tr> </tbody> </table> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Find information about a temperature/humidity time series by location and sensor type</b></summary> <p>Create a set of sensors to measure temperature and humidity in your study and kitchen.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE telemetry:study:temperature LABELS room study <span class=\"nb\">type</span> temperature\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE telemetry:study:humidity LABELS room study <span class=\"nb\">type</span> humidity\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE telemetry:kitchen:temperature LABELS room kitchen <span class=\"nb\">type</span> temperature\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE telemetry:kitchen:humidity LABELS room kitchen <span class=\"nb\">type</span> humidity\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Find information about the time series for temperature in the kitchen.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.INFO telemetry:kitchen:temperature\n</span></span><span class=\"line\"><span class=\"cl\"> 1<span class=\"o\">)</span> totalSamples\n</span></span><span class=\"line\"><span class=\"cl\"> 2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 3<span class=\"o\">)</span> memoryUsage\n</span></span><span class=\"line\"><span class=\"cl\"> 4<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">4246</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 5<span class=\"o\">)</span> firstTimestamp\n</span></span><span class=\"line\"><span class=\"cl\"> 6<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 7<span class=\"o\">)</span> lastTimestamp\n</span></span><span class=\"line\"><span class=\"cl\"> 8<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 9<span class=\"o\">)</span> retentionTime\n</span></span><span class=\"line\"><span class=\"cl\">10<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\">11<span class=\"o\">)</span> chunkCount\n</span></span><span class=\"line\"><span class=\"cl\">12<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">13<span class=\"o\">)</span> chunkSize\n</span></span><span class=\"line\"><span class=\"cl\">14<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">4096</span>\n</span></span><span class=\"line\"><span class=\"cl\">15<span class=\"o\">)</span> chunkType\n</span></span><span class=\"line\"><span class=\"cl\">16<span class=\"o\">)</span> compressed\n</span></span><span class=\"line\"><span class=\"cl\">17<span class=\"o\">)</span> duplicatePolicy\n</span></span><span class=\"line\"><span class=\"cl\">18<span class=\"o\">)</span> <span class=\"o\">(</span>nil<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">19<span class=\"o\">)</span> labels\n</span></span><span class=\"line\"><span class=\"cl\">20<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"room\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">       2<span class=\"o\">)</span> <span class=\"s2\">\"kitchen\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"type\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">       2<span class=\"o\">)</span> <span class=\"s2\">\"temperature\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">21<span class=\"o\">)</span> sourceKey\n</span></span><span class=\"line\"><span class=\"cl\">22<span class=\"o\">)</span> <span class=\"o\">(</span>nil<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">23<span class=\"o\">)</span> rules\n</span></span><span class=\"line\"><span class=\"cl\">24<span class=\"o\">)</span> <span class=\"o\">(</span>empty array<span class=\"o\">)</span></span></span></pre></div> <p>Query the time series using DEBUG to get more information about the chunks.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.INFO telemetry:kitchen:temperature DEBUG\n</span></span><span class=\"line\"><span class=\"cl\"> 1<span class=\"o\">)</span> totalSamples\n</span></span><span class=\"line\"><span class=\"cl\"> 2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 3<span class=\"o\">)</span> memoryUsage\n</span></span><span class=\"line\"><span class=\"cl\"> 4<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">4246</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 5<span class=\"o\">)</span> firstTimestamp\n</span></span><span class=\"line\"><span class=\"cl\"> 6<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 7<span class=\"o\">)</span> lastTimestamp\n</span></span><span class=\"line\"><span class=\"cl\"> 8<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\"> 9<span class=\"o\">)</span> retentionTime\n</span></span><span class=\"line\"><span class=\"cl\">10<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\">11<span class=\"o\">)</span> chunkCount\n</span></span><span class=\"line\"><span class=\"cl\">12<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">13<span class=\"o\">)</span> chunkSize\n</span></span><span class=\"line\"><span class=\"cl\">14<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">4096</span>\n</span></span><span class=\"line\"><span class=\"cl\">15<span class=\"o\">)</span> chunkType\n</span></span><span class=\"line\"><span class=\"cl\">16<span class=\"o\">)</span> compressed\n</span></span><span class=\"line\"><span class=\"cl\">17<span class=\"o\">)</span> duplicatePolicy\n</span></span><span class=\"line\"><span class=\"cl\">18<span class=\"o\">)</span> <span class=\"o\">(</span>nil<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">19<span class=\"o\">)</span> labels\n</span></span><span class=\"line\"><span class=\"cl\">20<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"room\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">       2<span class=\"o\">)</span> <span class=\"s2\">\"kitchen\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">    2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"type\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">       2<span class=\"o\">)</span> <span class=\"s2\">\"temperature\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">21<span class=\"o\">)</span> sourceKey\n</span></span><span class=\"line\"><span class=\"cl\">22<span class=\"o\">)</span> <span class=\"o\">(</span>nil<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">23<span class=\"o\">)</span> rules\n</span></span><span class=\"line\"><span class=\"cl\">24<span class=\"o\">)</span> <span class=\"o\">(</span>empty array<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">25<span class=\"o\">)</span> keySelfName\n</span></span><span class=\"line\"><span class=\"cl\">26<span class=\"o\">)</span> <span class=\"s2\">\"telemetry:kitchen:temperature\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">27<span class=\"o\">)</span> Chunks\n</span></span><span class=\"line\"><span class=\"cl\">28<span class=\"o\">)</span> 1<span class=\"o\">)</span>  1<span class=\"o\">)</span> startTimestamp\n</span></span><span class=\"line\"><span class=\"cl\">        2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\">        3<span class=\"o\">)</span> endTimestamp\n</span></span><span class=\"line\"><span class=\"cl\">        4<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\">        5<span class=\"o\">)</span> samples\n</span></span><span class=\"line\"><span class=\"cl\">        6<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">0</span>\n</span></span><span class=\"line\"><span class=\"cl\">        7<span class=\"o\">)</span> size\n</span></span><span class=\"line\"><span class=\"cl\">        8<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">4096</span>\n</span></span><span class=\"line\"><span class=\"cl\">        9<span class=\"o\">)</span> bytesPerSample\n</span></span><span class=\"line\"><span class=\"cl\">       10<span class=\"o\">)</span> <span class=\"s2\">\"inf\"</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ts.range\"><code>TS.RANGE</code></a> | <a href=\"../ts.queryindex\"><code>TS.QUERYINDEX</code></a> | <a href=\"../ts.get\"><code>TS.GET</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/timeseries\">RedisTimeSeries</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ts.info/\" class=\"_attribution-link\">https://redis.io/commands/ts.info/</a>\n  </p>\n</div>\n","ts.mget/index":"<h1 class=\"command-name\">TS.MGET</h1>\n<pre>TS.MGET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TS.MGET [LATEST] [WITHLABELS | SELECTED_LABELS label...] FILTER filterExpr...\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/timeseries\">TimeSeries 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(n) where n is the number of time-series that match the filters</dd> </dl> <p>Get the sample with the highest timestamp from each time series matching a specific filter</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>FILTER filterExpr...</code></summary> <p>filters time series based on their labels and label values. Each filter expression has one of the following syntaxes:</p> <ul> <li>\n<code>label=value</code>, where <code>label</code> equals <code>value</code>\n</li> <li>\n<code>label!=value</code>, where <code>label</code> does not equal <code>value</code>\n</li> <li>\n<code>label=</code>, where <code>key</code> does not have label <code>label</code>\n</li> <li>\n<code>label!=</code>, where <code>key</code> has label <code>label</code>\n</li> <li>\n<code>label=(value1,value2,...)</code>, where <code>key</code> with label <code>label</code> equals one of the values in the list</li> <li>\n<code>label!=(value1,value2,...)</code> where key with label <code>label</code> does not equal any of the values in the list</li> </ul> <p><note><b>NOTES:</b></note></p> <ul> <li>At least one <code>label=value</code> filter is required.</li> <li>Filters are conjunctive. For example, the FILTER <code>type=temperature room=study</code> means the a time series is a temperature time series of a study room.</li> <li>Don't use whitespaces in the filter expression. </li> </ul> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open> <summary><code>LATEST</code> (since RedisTimeSeries v1.8)</summary> <p>is used when a time series is a compaction. With <code>LATEST</code>, TS.MGET also reports the compacted value of the latest possibly partial bucket, given that this bucket's start time falls within <code>[fromTimestamp, toTimestamp]</code>. Without <code>LATEST</code>, TS.MGET does not report the latest possibly partial bucket. When a time series is not a compaction, <code>LATEST</code> is ignored.</p> <p>The data in the latest bucket of a compaction is possibly partial. A bucket is <em>closed</em> and compacted only upon arrival of a new sample that <em>opens</em> a new <em>latest</em> bucket. There are cases, however, when the compacted value of the latest possibly partial bucket is also required. In such a case, use <code>LATEST</code>.</p> </details> <details open> <summary><code>WITHLABELS</code></summary> <p>includes in the reply all label-value pairs representing metadata labels of the time series. If <code>WITHLABELS</code> or <code>SELECTED_LABELS</code> are not specified, by default, an empty list is reported as label-value pairs.</p> </details> <details open> <summary><code>SELECTED_LABELS label...</code> (since RedisTimeSeries v1.6)</summary> <p>returns a subset of the label-value pairs that represent metadata labels of the time series. Use when a large number of labels exists per series, but only the values of some of the labels are required. If <code>WITHLABELS</code> or <code>SELECTED_LABELS</code> are not specified, by default, an empty list is reported as label-value pairs.</p> </details> <p><note><b>Note:</b> The <a href=\"../mget\"><code>MGET</code></a> command cannot be part of transaction when running on a Redis cluster.</note></p> <h2 id=\"return-value\">Return value</h2> <ul> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: for each time series matching the specified filters, the following is reported: <ul> <li>bulk-string-reply: The time series key name</li> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: label-value pairs (<a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>) <ul> <li>By default, an empty array is reported</li> <li>If <code>WITHLABELS</code> is specified, all labels associated with this time series are reported</li> <li>If <code>SELECTED_LABELS label...</code> is specified, the selected labels are reported (null value when no such label defined)</li> </ul> </li> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a single timestamp-value pair (<a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> (double))</li> </ul> </li> </ul> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Select labels to retrieve</b></summary> <p>Create time series for temperature in Tel Aviv and Jerusalem, then add different temperature samples.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE temp:TLV LABELS <span class=\"nb\">type</span> temp location TLV\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE temp:JLM LABELS <span class=\"nb\">type</span> temp location JLM\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD temp:TLV <span class=\"m\">1000</span> <span class=\"m\">30</span> temp:TLV <span class=\"m\">1010</span> <span class=\"m\">35</span> temp:TLV <span class=\"m\">1020</span> <span class=\"m\">9999</span> temp:TLV <span class=\"m\">1030</span> <span class=\"m\">40</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1020</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1030</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD temp:JLM <span class=\"m\">1005</span> <span class=\"m\">30</span> temp:JLM <span class=\"m\">1015</span> <span class=\"m\">35</span> temp:JLM <span class=\"m\">1025</span> <span class=\"m\">9999</span> temp:JLM <span class=\"m\">1035</span> <span class=\"m\">40</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1005</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1015</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1025</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1035</span></span></span></pre></div> <p>Get all the labels associated with the last sample.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MGET WITHLABELS FILTER <span class=\"nv\">type</span><span class=\"o\">=</span>temp\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"temp:JLM\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"type\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"temp\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"location\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"JLM\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1035</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> <span class=\"m\">40</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"temp:TLV\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"type\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"temp\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"location\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"TLV\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1030</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> <span class=\"m\">40</span></span></span></pre></div> <p>To get only the <code>location</code> label for each last sample, use <code>SELECTED_LABELS</code>.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MGET SELECTED_LABELS location FILTER <span class=\"nv\">type</span><span class=\"o\">=</span>temp\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"temp:JLM\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"location\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"JLM\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1035</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> <span class=\"m\">40</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"temp:TLV\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"location\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"TLV\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1030</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> <span class=\"m\">40</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ts.mrange\"><code>TS.MRANGE</code></a> | <a href=\"../ts.range\"><code>TS.RANGE</code></a> | <a href=\"../ts.mrevrange\"><code>TS.MREVRANGE</code></a> | <a href=\"../ts.revrange\"><code>TS.REVRANGE</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/timeseries\">RedisTimeSeries</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ts.mget/\" class=\"_attribution-link\">https://redis.io/commands/ts.mget/</a>\n  </p>\n</div>\n","ts.deleterule/index":"<h1 class=\"command-name\">TS.DELETERULE</h1>\n<pre>TS.DELETERULE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TS.DELETERULE sourceKey destKey\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/timeseries\">TimeSeries 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Delete a compaction rule</p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>sourceKey</code></summary> <p>is key name for the source time series.</p> </details> <details open><summary><code>destKey</code></summary> <p>is key name for destination (compacted) time series.</p> </details> <p><note><b>Note:</b> This command does not delete the compacted series.</note></p> <h2 id=\"return-value\">Return value</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> - <code>OK</code> if executed correctly, or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> otherwise.</p> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ts.createrule\"><code>TS.CREATERULE</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/timeseries\">RedisTimeSeries</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ts.deleterule/\" class=\"_attribution-link\">https://redis.io/commands/ts.deleterule/</a>\n  </p>\n</div>\n","ts.del/index":"<h1 class=\"command-name\">TS.DEL</h1>\n<pre>TS.DEL</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TS.DEL key fromTimestamp toTimestamp\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/timeseries\">TimeSeries 1.6.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of data points that will be removed</dd> </dl> <p>Delete all samples between two timestamps for a given time series</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key name for the time series.</p> </details> <details open><summary><code>fromTimestamp</code></summary> <p>is start timestamp for the range deletion.</p> </details> <details open><summary><code>toTimestamp</code></summary> <p>is end timestamp for the range deletion.</p> <p>The given timestamp interval is closed (inclusive), meaning that samples whose timestamp eqauls the <code>fromTimestamp</code> or <code>toTimestamp</code> are also deleted.</p> <p><note><b>Notes:</b></note></p> <ul> <li>If fromTimestamp is older than the retention period compared to the maximum existing timestamp, the deletion is discarded and an error is returned.</li> <li>When deleting a sample from a time series for which compaction rules are defined: <ul> <li>If all the original samples for an affected compaction bucket are available, the compacted value is recalculated based on the remaining original samples, or removed if all original samples within the compaction bucket were deleted.</li> <li>If some or all the original samples for an affected compaction bucket were expired, the deletion is discarded and an error is returned.</li> </ul> </li> <li>Explicitly deleting samples from a compacted time series may result in inconsistencies between the raw and the compacted data. The compaction process may override such samples. That being said, it is safe to explicitly delete samples from a compacted time series beyond the retention period of the original time series.</li> </ul> <h2 id=\"return-value\">Return value</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: The number of samples that were deleted, or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a>.</p> <h2 id=\"examples\">Examples</h2> <details open><summary><b>Delete range of data points</b></summary> <p>Create time series for temperature in Tel Aviv and Jerusalem, then add different temperature samples.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE temp:TLV LABELS <span class=\"nb\">type</span> temp location TLV\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE temp:JLM LABELS <span class=\"nb\">type</span> temp location JLM\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD temp:TLV <span class=\"m\">1000</span> <span class=\"m\">30</span> temp:TLV <span class=\"m\">1010</span> <span class=\"m\">35</span> temp:TLV <span class=\"m\">1020</span> <span class=\"m\">9999</span> temp:TLV <span class=\"m\">1030</span> <span class=\"m\">40</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1020</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1030</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD temp:JLM <span class=\"m\">1005</span> <span class=\"m\">30</span> temp:JLM <span class=\"m\">1015</span> <span class=\"m\">35</span> temp:JLM <span class=\"m\">1025</span> <span class=\"m\">9999</span> temp:JLM <span class=\"m\">1035</span> <span class=\"m\">40</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1005</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1015</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1025</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1035</span></span></span></pre></div> <p>Delete the range of data points for temperature in Tel Aviv.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.DEL temp:TLV <span class=\"m\">1000</span> <span class=\"m\">1030</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">4</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ts.add\"><code>TS.ADD</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/timeseries\">RedisTimeSeries</a></p>  </details><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ts.del/\" class=\"_attribution-link\">https://redis.io/commands/ts.del/</a>\n  </p>\n</div>\n","ts.decrby/index":"<h1 class=\"command-name\">TS.DECRBY</h1>\n<pre>TS.DECRBY</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TS.DECRBY key value \n  [TIMESTAMP timestamp] \n  [RETENTION retentionPeriod] \n  [UNCOMPRESSED] \n  [CHUNK_SIZE size] \n  [LABELS {label value}...]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/timeseries\">TimeSeries 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(M) when M is the amount of compaction rules or O(1) with no compaction</dd> </dl> <p>Decrease the value of the sample with the maximum existing timestamp, or create a new sample with a value equal to the value of the sample with the maximum existing timestamp with a given decrement</p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key name for the time series.</p> </details> <details open><summary><code>value</code></summary> <p>is numeric data value of the sample (double)</p> </details> <p><note><b>Notes</b></note></p> <ul> <li>When specified key does not exist, a new time series is created.</li> <li>You can use this command as a counter or gauge that automatically gets history as a time series.</li> <li>Explicitly adding samples to a compacted time series (using <a href=\"../ts.add\"><code>TS.ADD</code></a>, <a href=\"../ts.madd\"><code>TS.MADD</code></a>, <a href=\"../ts.incrby\"><code>TS.INCRBY</code></a>, or <code>TS.DECRBY</code>) may result in inconsistencies between the raw and the compacted data. The compaction process may override such samples. </li> </ul> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>TIMESTAMP timestamp</code></summary> <p>is (integer) UNIX sample timestamp in milliseconds or <code>*</code> to set the timestamp according to the server clock.</p> <p><code>timestamp</code> must be equal to or higher than the maximum existing timestamp. When equal, the value of the sample with the maximum existing timestamp is decreased. If it is higher, a new sample with a timestamp set to <code>timestamp</code> is created, and its value is set to the value of the sample with the maximum existing timestamp minus <code>value</code>.</p> <p>If the time series is empty, the value is set to <code>value</code>.</p> <p>When not specified, the timestamp is set according to the server clock.</p> </details> <details open><summary><code>RETENTION retentionPeriod</code> <p>is maximum retention period, compared to the maximum existing timestamp, in milliseconds. Use it only if you are creating a new time series. It is ignored if you are adding samples to an existing time series. See <code>RETENTION</code> in <a href=\"../ts.create\"><code>TS.CREATE</code></a>.</p> </summary></details> <details open><summary><code>UNCOMPRESSED</code></summary> <p>changes data storage from compressed (default) to uncompressed. Use it only if you are creating a new time series. It is ignored if you are adding samples to an existing time series. See <code>ENCODING</code> in <a href=\"../ts.create\"><code>TS.CREATE</code></a>.</p> </details> <details open><summary><code>CHUNK_SIZE size</code></summary> <p>is memory size, in bytes, allocated for each data chunk. Use it only if you are creating a new time series. It is ignored if you are adding samples to an existing time series. See <code>CHUNK_SIZE</code> in <a href=\"../ts.create\"><code>TS.CREATE</code></a>.</p> </details> <details open><summary><code>LABELS [{label value}...]</code></summary> <p>is set of label-value pairs that represent metadata labels of the key and serve as a secondary index. Use it only if you are creating a new time series. It is ignored if you are adding samples to an existing time series. See <code>LABELS</code> in <a href=\"../ts.create\"><code>TS.CREATE</code></a>.</p> </details> <p><note><b>Notes</b></note></p> <ul> <li>You can use this command to add data to a nonexisting time series in a single command. This is why <code>RETENTION</code>, <code>UNCOMPRESSED</code>, <code>CHUNK_SIZE</code>, and <code>LABELS</code> are optional arguments.</li> <li>When specified and the key doesn't exist, a new time series is created. Setting the <code>RETENTION</code> and <code>LABELS</code> introduces additional time complexity. </li> </ul> <h2 id=\"return-value\">Return value</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> - the timestamp of the upserted sample, or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a>.</p> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ts.incrby\"><code>TS.INCRBY</code></a> | <a href=\"../ts.create\"><code>TS.CREATE</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/timeseries\">RedisTimeSeries</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ts.decrby/\" class=\"_attribution-link\">https://redis.io/commands/ts.decrby/</a>\n  </p>\n</div>\n","ts.incrby/index":"<h1 class=\"command-name\">TS.INCRBY</h1>\n<pre>TS.INCRBY</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TS.INCRBY key value \n  [TIMESTAMP timestamp] \n  [RETENTION retentionPeriod] \n  [UNCOMPRESSED] \n  [CHUNK_SIZE size] \n  [LABELS {label value}...]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/timeseries\">TimeSeries 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(M) when M is the amount of compaction rules or O(1) with no compaction</dd> </dl> <p>Increase the value of the sample with the maximum existing timestamp, or create a new sample with a value equal to the value of the sample with the maximum existing timestamp with a given increment</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key name for the time series.</p> </details> <details open><summary><code>value</code></summary> <p>is numeric data value of the sample (double)</p> </details> <p><note><b>Notes</b></note></p> <ul> <li>When specified key does not exist, a new time series is created.</li> <li>You can use this command as a counter or gauge that automatically gets history as a time series.</li> <li>Explicitly adding samples to a compacted time series (using <a href=\"../ts.add\"><code>TS.ADD</code></a>, <a href=\"../ts.madd\"><code>TS.MADD</code></a>, <code>TS.INCRBY</code>, or <a href=\"../ts.decrby\"><code>TS.DECRBY</code></a>) may result in inconsistencies between the raw and the compacted data. The compaction process may override such samples.<br> </li> </ul> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>TIMESTAMP timestamp</code></summary> <p>is (integer) UNIX sample timestamp in milliseconds or <code>*</code> to set the timestamp according to the server clock.</p> <p><code>timestamp</code> must be equal to or higher than the maximum existing timestamp. When equal, the value of the sample with the maximum existing timestamp is increased. If it is higher, a new sample with a timestamp set to <code>timestamp</code> is created, and its value is set to the value of the sample with the maximum existing timestamp plus <code>value</code>.</p> <p>If the time series is empty, the value is set to <code>value</code>.</p> <p>When not specified, the timestamp is set according to the server clock.</p> </details> <details open><summary><code>RETENTION retentionPeriod</code> <p>is maximum retention period, compared to the maximum existing timestamp, in milliseconds. Use it only if you are creating a new time series. It is ignored if you are adding samples to an existing time series. See <code>RETENTION</code> in <a href=\"../ts.create\"><code>TS.CREATE</code></a>.</p> </summary></details> <details open><summary><code>UNCOMPRESSED</code></summary> <p>changes data storage from compressed (default) to uncompressed. Use it only if you are creating a new time series. It is ignored if you are adding samples to an existing time series. See <code>ENCODING</code> in <a href=\"../ts.create\"><code>TS.CREATE</code></a>.</p> </details> <details open><summary><code>CHUNK_SIZE size</code></summary> <p>is memory size, in bytes, allocated for each data chunk. Use it only if you are creating a new time series. It is ignored if you are adding samples to an existing time series. See <code>CHUNK_SIZE</code> in <a href=\"../ts.create\"><code>TS.CREATE</code></a>.</p> </details> <details open><summary><code>LABELS [{label value}...]</code></summary> <p>is set of label-value pairs that represent metadata labels of the key and serve as a secondary index. Use it only if you are creating a new time series. It is ignored if you are adding samples to an existing time series. See <code>LABELS</code> in <a href=\"../ts.create\"><code>TS.CREATE</code></a>.</p> </details> <p><note><b>Notes</b></note></p> <ul> <li>You can use this command to add data to a nonexisting time series in a single command. This is why <code>RETENTION</code>, <code>UNCOMPRESSED</code>, <code>CHUNK_SIZE</code>, and <code>LABELS</code> are optional arguments.</li> <li>When specified and the key doesn't exist, a new time series is created. Setting the <code>RETENTION</code> and <code>LABELS</code> introduces additional time complexity. </li> </ul> <h2 id=\"return-value\">Return value</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a> - the timestamp of the upserted sample, or <a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a>.</p> <h2 id=\"examples\">Examples</h2> <details open><summary><b>Store sum of data from several sources</b></summary> <p>Suppose you are getting number of orders or total income per minute from several points of sale, and you want to store only the combined value. Call TS.INCRBY for each point-of-sale report.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.INCRBY a <span class=\"m\">232</span> TIMESTAMP 1657811829000\t\t// point-of-sale <span class=\"c1\">#1</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1657811829000</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.INCRBY a <span class=\"m\">157</span> TIMESTAMP 1657811829000\t\t// point-of-sale <span class=\"c1\">#2</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1657811829000</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.INCRBY a <span class=\"m\">432</span> TIMESTAMP 1657811829000\t\t// point-of-sale <span class=\"c1\">#3</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1657811829000</span></span></span></pre></div> <p>Note that the timestamps must arrive in non-decreasing order.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; ts.incrby a <span class=\"m\">100</span> TIMESTAMP <span class=\"m\">50</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>error<span class=\"o\">)</span> TSDB: timestamp must be equal to or higher than the maximum existing timestamp</span></span></pre></div> <p>You can achieve similar results without such protection using <code>TS.ADD key timestamp value ON_DUPLICATE sum</code>.</p> </details> <details open><summary><b>Count sensor captures</b></summary> <p>Supose a sensor ticks whenever a car is passed on a road, and you want to count occurrences. Whenever you get a tick from the sensor you can simply call:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.INCRBY a <span class=\"m\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1658431553109</span></span></span></pre></div> <p>The timestamp is filled automatically.</p> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ts.decrby\"><code>TS.DECRBY</code></a> | <a href=\"../ts.create\"><code>TS.CREATE</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/timeseries\">RedisTimeSeries</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ts.incrby/\" class=\"_attribution-link\">https://redis.io/commands/ts.incrby/</a>\n  </p>\n</div>\n","type/index":"<h1 class=\"command-name\">TYPE</h1>\n<pre>TYPE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TYPE key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the string representation of the type of the value stored at <code>key</code>. The different types that can be returned are: <code>string</code>, <code>list</code>, <code>set</code>, <code>zset</code>, <code>hash</code> and <code>stream</code>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: type of <code>key</code>, or <code>none</code> when <code>key</code> does not exist.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET key1 \"value\"\nLPUSH key2 \"value\"\nSADD key3 \"value\"\nTYPE key1\nTYPE key2\nTYPE key3\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/type/\" class=\"_attribution-link\">https://redis.io/commands/type/</a>\n  </p>\n</div>\n","ts.queryindex/index":"<h1 class=\"command-name\">TS.QUERYINDEX</h1>\n<pre>TS.QUERYINDEX</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TS.QUERYINDEX filterExpr...\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/timeseries\">TimeSeries 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(n) where n is the number of time-series that match the filters</dd> </dl> <p>Get all time series keys matching a filter list</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>filterExpr...</code></summary> filters time series based on their labels and label values. Each filter expression has one of the following syntaxes: <ul> <li>\n<code>label=value</code>, where <code>label</code> equals <code>value</code>\n</li> <li>\n<code>label!=value</code>, where <code>label</code> does not equal <code>value</code>\n</li> <li>\n<code>label=</code>, where <code>key</code> does not have label <code>label</code>\n</li> <li>\n<code>label!=</code>, where <code>key</code> has label <code>label</code>\n</li> <li>\n<code>label=(value1,value2,...)</code>, where <code>key</code> with label <code>label</code> equals one of the values in the list</li> <li>\n<code>label!=(value1,value2,...)</code>, where key with label <code>label</code> does not equal any of the values in the list</li> </ul> <p><note><b>Notes:</b></note></p> <ul> <li>At least one <code>label=value</code> filter is required.</li> <li>Filters are conjunctive. For example, the FILTER <code>type=temperature room=study</code> means the a time series is a temperature time series of a study room.</li> <li>Don't use whitespaces in the filter expression. </li> </ul> </details> <p><note><b>Note:</b> The <code>QUERYINDEX</code> command cannot be part of transaction when running on a Redis cluster.</note></p> <h2 id=\"return-value\">Return value</h2> <p>Either</p> <ul> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> where each element is a <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: a time series key. The array is empty if no time series matches the filter.</li> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> (e.g., on invalid filter expression)</li> </ul> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Find keys by location and sensor type</b></summary> <p>Create a set of sensors to measure temperature and humidity in your study and kitchen.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE telemetry:study:temperature LABELS room study <span class=\"nb\">type</span> temperature\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE telemetry:study:humidity LABELS room study <span class=\"nb\">type</span> humidity\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE telemetry:kitchen:temperature LABELS room kitchen <span class=\"nb\">type</span> temperature\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE telemetry:kitchen:humidity LABELS room kitchen <span class=\"nb\">type</span> humidity\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Retrieve keys of all time series representing sensors located in the kitchen.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.QUERYINDEX <span class=\"nv\">room</span><span class=\"o\">=</span>kitchen\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"s2\">\"telemetry:kitchen:humidity\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"s2\">\"telemetry:kitchen:temperature\"</span></span></span></pre></div> <p>To retrieve the keys of all time series representing sensors that measure temperature, use this query:</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.QUERYINDEX <span class=\"nv\">type</span><span class=\"o\">=</span>temperature\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"s2\">\"telemetry:kitchen:temperature\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"s2\">\"telemetry:study:temperature\"</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ts.create\"><code>TS.CREATE</code></a> | <a href=\"../ts.mrange\"><code>TS.MRANGE</code></a> | <a href=\"../ts.mrevrange\"><code>TS.MREVRANGE</code></a> | <a href=\"../ts.mget\"><code>TS.MGET</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/timeseries\">RedisTimeSeries</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ts.queryindex/\" class=\"_attribution-link\">https://redis.io/commands/ts.queryindex/</a>\n  </p>\n</div>\n","ts.mrevrange/index":"<h1 class=\"command-name\">TS.MREVRANGE</h1>\n<pre>TS.MREVRANGE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TS.MREVRANGE fromTimestamp toTimestamp\n  [LATEST]\n  [FILTER_BY_TS TS...]\n  [FILTER_BY_VALUE min max]\n  [WITHLABELS | SELECTED_LABELS label...]\n  [COUNT count]\n  [[ALIGN align] AGGREGATION aggregator bucketDuration [BUCKETTIMESTAMP bt] [EMPTY]]\n  FILTER filterExpr...\n  [GROUPBY label REDUCE reducer]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/timeseries\">TimeSeries 1.4.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(n/m+k) where n = Number of data points, m = Chunk size (data points per chunk), k = Number of data points that are in the requested ranges</dd> </dl> <p>Query a range across multiple time series by filters in reverse direction</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>fromTimestamp</code></summary> <p>is start timestamp for the range query (integer UNIX timestamp in milliseconds) or <code>-</code> to denote the timestamp of the earliest sample amongs all time series that passes <code>FILTER filterExpr...</code>.</p> </details> <details open> <summary><code>toTimestamp</code></summary> <p>is end timestamp for the range query (integer UNIX timestamp in milliseconds) or <code>+</code> to denote the timestamp of the latest sample amongs all time series that passes <code>FILTER filterExpr...</code>.</p> </details> <details open> <summary><code>FILTER filterExpr...</code></summary> <p>filters time series based on their labels and label values. Each filter expression has one of the following syntaxes:</p> <ul> <li>\n<code>label=value</code>, where <code>label</code> equals <code>value</code>\n</li> <li>\n<code>label!=value</code>, where <code>label</code> does not equal <code>value</code>\n</li> <li>\n<code>label=</code>, where <code>key</code> does not have label <code>label</code>\n</li> <li>\n<code>label!=</code>, where <code>key</code> has label <code>label</code>\n</li> <li>\n<code>label=(value1,value2,...)</code>, where <code>key</code> with label <code>label</code> equals one of the values in the list</li> <li>\n<code>label!=(value1,value2,...)</code>, where key with label <code>label</code> does not equal any of the values in the list</li> </ul> <p><note><b>Notes:</b></note></p> <ul> <li>At least one <code>label=value</code> filter is required.</li> <li>Filters are conjunctive. For example, the FILTER <code>type=temperature room=study</code> means the a time series is a temperature time series of a study room.</li> <li>Don't use whitespaces in the filter expression. </li> </ul> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open> <summary><code>LATEST</code> (since RedisTimeSeries v1.8)</summary> <p>is used when a time series is a compaction. With <code>LATEST</code>, TS.MREVRANGE also reports the compacted value of the latest possibly partial bucket, given that this bucket's start time falls within <code>[fromTimestamp, toTimestamp]</code>. Without <code>LATEST</code>, TS.MREVRANGE does not report the latest possibly partial bucket. When a time series is not a compaction, <code>LATEST</code> is ignored.</p> <p>The data in the latest bucket of a compaction is possibly partial. A bucket is <em>closed</em> and compacted only upon arrival of a new sample that <em>opens</em> a new <em>latest</em> bucket. There are cases, however, when the compacted value of the latest possibly partial bucket is also required. In such a case, use <code>LATEST</code>.</p> </details> <details open> <summary><code>FILTER_BY_TS ts...</code> (since RedisTimeSeries v1.6)</summary> <p>filters samples by a list of specific timestamps. A sample passes the filter if its exact timestamp is specified and falls within <code>[fromTimestamp, toTimestamp]</code>.</p> </details> <details open> <summary><code>FILTER_BY_VALUE min max</code> (since RedisTimeSeries v1.6)</summary> <p>filters samples by minimum and maximum values.</p> </details> <details open> <summary><code>WITHLABELS</code></summary> <p>includes in the reply all label-value pairs representing metadata labels of the time series. If <code>WITHLABELS</code> or <code>SELECTED_LABELS</code> are not specified, by default, an empty list is reported as label-value pairs.</p> </details> <details open> <summary><code>SELECTED_LABELS label...</code> (since RedisTimeSeries v1.6)</summary> <p>returns a subset of the label-value pairs that represent metadata labels of the time series. Use when a large number of labels exists per series, but only the values of some of the labels are required. If <code>WITHLABELS</code> or <code>SELECTED_LABELS</code> are not specified, by default, an empty list is reported as label-value pairs.</p> </details> <details open> <summary><code>COUNT count</code></summary> <p>limits the number of returned samples.</p> </details> <details open> <summary><code>ALIGN align</code> (since RedisTimeSeries v1.6)</summary> <p>is a time bucket alignment control for <code>AGGREGATION</code>. It controls the time bucket timestamps by changing the reference timestamp on which a bucket is defined.</p> <p>Values include:</p> <ul> <li>\n<code>start</code> or <code>-</code>: The reference timestamp will be the query start interval time (<code>fromTimestamp</code>) which can't be <code>-</code>\n</li> <li>\n<code>end</code> or <code>+</code>: The reference timestamp will be the query end interval time (<code>toTimestamp</code>) which can't be <code>+</code>\n</li> <li>A specific timestamp: align the reference timestamp to a specific time</li> </ul> <p><note><b>Note:</b> When not provided, alignment is set to <code>0</code>.</note></p> </details> <details open> <summary><code>AGGREGATION aggregator bucketDuration</code></summary> <p>per time series, aggregates samples into time buckets, where:</p> <ul> <li> <p><code>aggregator</code> takes one of the following aggregation types:</p> <table> <thead> <tr> <th><code>aggregator</code></th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>avg</code></td> <td>Arithmetic mean of all values</td> </tr> <tr> <td><code>sum</code></td> <td>Sum of all values</td> </tr> <tr> <td><code>min</code></td> <td>Minimum value</td> </tr> <tr> <td><code>max</code></td> <td>Maximum value</td> </tr> <tr> <td><code>range</code></td> <td>Difference between maximum value and minimum value</td> </tr> <tr> <td><code>count</code></td> <td>Number of values</td> </tr> <tr> <td><code>first</code></td> <td>Value with lowest timestamp in the bucket</td> </tr> <tr> <td><code>last</code></td> <td>Value with highest timestamp in the bucket</td> </tr> <tr> <td><code>std.p</code></td> <td>Population standard deviation of the values</td> </tr> <tr> <td><code>std.s</code></td> <td>Sample standard deviation of the values</td> </tr> <tr> <td><code>var.p</code></td> <td>Population variance of the values</td> </tr> <tr> <td><code>var.s</code></td> <td>Sample variance of the values</td> </tr> <tr> <td><code>twa</code></td> <td>Time-weighted average over the bucket's timeframe (since RedisTimeSeries v1.8)</td> </tr> </tbody> </table> </li> <li> <p><code>bucketDuration</code> is duration of each bucket, in milliseconds.</p> </li> </ul> <p>Without <code>ALIGN</code>, bucket start times are multiples of <code>bucketDuration</code>.</p> <p>With <code>ALIGN align</code>, bucket start times are multiples of <code>bucketDuration</code> with remainder <code>align % bucketDuration</code>.</p> <p>The first bucket start time is less than or equal to <code>fromTimestamp</code>.</p> </details> <details open> <summary><code>[BUCKETTIMESTAMP bt]</code> (since RedisTimeSeries v1.8)</summary> <p>controls how bucket timestamps are reported.</p> <table> <thead> <tr> <th><code>bt</code></th> <th>Timestamp reported for each bucket</th> </tr> </thead> <tbody> <tr> <td>\n<code>-</code> or <code>low</code>\n</td> <td>the bucket's start time (default)</td> </tr> <tr> <td>\n<code>+</code> or <code>high</code>\n</td> <td>the bucket's end time</td> </tr> <tr> <td>\n<code>~</code> or <code>mid</code>\n</td> <td>the bucket's mid time (rounded down if not an integer)</td> </tr> </tbody> </table> </details> <details open> <summary><code>[EMPTY]</code> (since RedisTimeSeries v1.8)</summary> <p>is a flag, which, when specified, reports aggregations also for empty buckets.</p> <table> <thead> <tr> <th><code>aggregator</code></th> <th>Value reported for each empty bucket</th> </tr> </thead> <tbody> <tr> <td>\n<code>sum</code>, <code>count</code>\n</td> <td><code>0</code></td> </tr> <tr> <td><code>last</code></td> <td>The value of the last sample before the bucket's start. <code>NaN</code> when no such sample.</td> </tr> <tr> <td><code>twa</code></td> <td>Average value over the bucket's timeframe based on linear interpolation of the last sample before the bucket's start and the first sample after the bucket's end. <code>NaN</code> when no such samples.</td> </tr> <tr> <td>\n<code>min</code>, <code>max</code>, <code>range</code>, <code>avg</code>, <code>first</code>, <code>std.p</code>, <code>std.s</code>\n</td> <td><code>NaN</code></td> </tr> </tbody> </table> <p>Regardless of the values of <code>fromTimestamp</code> and <code>toTimestamp</code>, no data is reported for buckets that end before the earliest sample or begin after the latest sample in the time series.</p> </details> <details open> <summary><code>GROUPBY label REDUCE reducer</code> (since RedisTimeSeries v1.6)</summary> <p>splits time series into groups, each group contains time series that share the same value for the provided label name, then aggregates results in each group.</p> <p>When combined with <code>AGGREGATION</code> the <code>GROUPBY</code>/<code>REDUCE</code> is applied post aggregation stage.</p> <ul> <li> <p><code>label</code> is label name. A group is created for all time series that share the same value for this label.</p> </li> <li> <p><code>reducer</code> is an aggregation type used to aggregate the results in each group.</p> <table> <thead> <tr> <th><code>reducer</code></th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>avg</code></td> <td>Arithmetic mean of all non-NaN values (since RedisTimeSeries v1.8)</td> </tr> <tr> <td><code>sum</code></td> <td>Sum of all non-NaN values</td> </tr> <tr> <td><code>min</code></td> <td>Minimum non-NaN value</td> </tr> <tr> <td><code>max</code></td> <td>Maximum non-NaN value</td> </tr> <tr> <td><code>range</code></td> <td>Difference between maximum non-NaN value and minimum non-NaN value (since RedisTimeSeries v1.8)</td> </tr> <tr> <td><code>count</code></td> <td>Number of non-NaN values (since RedisTimeSeries v1.8)</td> </tr> <tr> <td><code>std.p</code></td> <td>Population standard deviation of all non-NaN values (since RedisTimeSeries v1.8)</td> </tr> <tr> <td><code>std.s</code></td> <td>Sample standard deviation of all non-NaN values (since RedisTimeSeries v1.8)</td> </tr> <tr> <td><code>var.p</code></td> <td>Population variance of all non-NaN values (since RedisTimeSeries v1.8)</td> </tr> <tr> <td><code>var.s</code></td> <td>Sample variance of all non-NaN values (since RedisTimeSeries v1.8)</td> </tr> </tbody> </table> </li> </ul> <p><note><b>Notes:</b></note></p> <ul> <li>The produced time series is named <code>&lt;label&gt;=&lt;value&gt;</code>\n</li> <li>The produced time series contains two labels with these label array structures: <ul> <li>\n<code>__reducer__</code>, the reducer used (e.g., <code>\"count\"</code>)</li> <li>\n<code>__source__</code>, the list of time series keys used to compute the grouped series (e.g., <code>\"key1,key2,key3\"</code>) </li> </ul> </li> </ul> </details> <p><note><b>Note:</b> An <code>MREVRANGE</code> command cannot be part of a transaction when running on a Redis cluster.</note></p> <h2 id=\"return-value\">Return value</h2> <p>If <code>GROUPBY label REDUCE reducer</code> is not specified:</p> <ul> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: for each time series matching the specified filters, the following is reported: <ul> <li>bulk-string-reply: The time series key name</li> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: label-value pairs (<a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>) <ul> <li>By default, an empty list is reported</li> <li>If <code>WITHLABELS</code> is specified, all labels associated with this time series are reported</li> <li>If <code>SELECTED_LABELS label...</code> is specified, the selected labels are reported</li> </ul> </li> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: timestamp-value pairs (<a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> (double)): all samples/aggregations matching the range</li> </ul> </li> </ul> <p>If <code>GROUPBY label REDUCE reducer</code> is specified:</p> <ul> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: for each group of time series matching the specified filters, the following is reported: <ul> <li>bulk-string-reply with the format <code>label=value</code> where <code>label</code> is the <code>GROUPBY</code> label argument</li> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a single pair (<a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>): the <code>GROUPBY</code> label argument and value</li> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a single pair (<a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>): the string <code>__reducer__</code> and the reducer argument</li> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a single pair (<a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>): the string <code>__source__</code> and the time series key names separated by <code>,</code>\n</li> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: timestamp-value pairs (<a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> (double)): all samples/aggregations matching the range</li> </ul> </li> </ul> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Retrieve maximum stock price per timestamp</b></summary> <p>Create two stocks and add their prices at three different timestamps.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE stock:A LABELS <span class=\"nb\">type</span> stock name A\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE stock:B LABELS <span class=\"nb\">type</span> stock name B\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:A <span class=\"m\">1000</span> <span class=\"m\">100</span> stock:A <span class=\"m\">1010</span> <span class=\"m\">110</span> stock:A <span class=\"m\">1020</span> <span class=\"m\">120</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1020</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:B <span class=\"m\">1000</span> <span class=\"m\">120</span> stock:B <span class=\"m\">1010</span> <span class=\"m\">110</span> stock:B <span class=\"m\">1020</span> <span class=\"m\">100</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1020</span></span></span></pre></div> <p>You can now retrieve the maximum stock price per timestamp.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MREVRANGE - + WITHLABELS FILTER <span class=\"nv\">type</span><span class=\"o\">=</span>stock GROUPBY <span class=\"nb\">type</span> REDUCE max\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"type=stock\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"type\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"stock\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"__reducer__\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"max\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"__source__\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"stock:A,stock:B\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1020</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">120</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1010</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">110</span>\n</span></span><span class=\"line\"><span class=\"cl\">      3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">120</span></span></span></pre></div> <p>The <code>FILTER type=stock</code> clause returns a single time series representing stock prices. The <code>GROUPBY type REDUCE max</code> clause splits the time series into groups with identical type values, and then, for each timestamp, aggregates all series that share the same type value using the max aggregator.</p> </details> <details open> <summary><b>Calculate average stock price and retrieve maximum average</b></summary> <p>Create two stocks and add their prices at nine different timestamps.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE stock:A LABELS <span class=\"nb\">type</span> stock name A\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE stock:B LABELS <span class=\"nb\">type</span> stock name B\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:A <span class=\"m\">1000</span> <span class=\"m\">100</span> stock:A <span class=\"m\">1010</span> <span class=\"m\">110</span> stock:A <span class=\"m\">1020</span> <span class=\"m\">120</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1020</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:B <span class=\"m\">1000</span> <span class=\"m\">120</span> stock:B <span class=\"m\">1010</span> <span class=\"m\">110</span> stock:B <span class=\"m\">1020</span> <span class=\"m\">100</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1020</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:A <span class=\"m\">2000</span> <span class=\"m\">200</span> stock:A <span class=\"m\">2010</span> <span class=\"m\">210</span> stock:A <span class=\"m\">2020</span> <span class=\"m\">220</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2020</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:B <span class=\"m\">2000</span> <span class=\"m\">220</span> stock:B <span class=\"m\">2010</span> <span class=\"m\">210</span> stock:B <span class=\"m\">2020</span> <span class=\"m\">200</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2020</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:A <span class=\"m\">3000</span> <span class=\"m\">300</span> stock:A <span class=\"m\">3010</span> <span class=\"m\">310</span> stock:A <span class=\"m\">3020</span> <span class=\"m\">320</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3020</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:B <span class=\"m\">3000</span> <span class=\"m\">320</span> stock:B <span class=\"m\">3010</span> <span class=\"m\">310</span> stock:B <span class=\"m\">3020</span> <span class=\"m\">300</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3020</span></span></span></pre></div> <p>Now, for each stock, calculate the average stock price per a 1000-millisecond timeframe, and then retrieve the stock with the maximum average for that timeframe in reverse direction.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MREVRANGE - + WITHLABELS AGGREGATION avg <span class=\"m\">1000</span> FILTER <span class=\"nv\">type</span><span class=\"o\">=</span>stock GROUPBY <span class=\"nb\">type</span> REDUCE max\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"type=stock\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"type\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"stock\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"__reducer__\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"max\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"__source__\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"stock:A,stock:B\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">310</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">210</span>\n</span></span><span class=\"line\"><span class=\"cl\">      3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">110</span></span></span></pre></div> </details> <details open> <summary><b>Group query results</b></summary> <p>Query all time series with the metric label equal to <code>cpu</code>, then group the time series by the value of their <code>metric_name</code> label value and for each group return the maximum value and the time series keys (<em>source</em>) with that value.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.ADD ts1 <span class=\"m\">1548149180000</span> <span class=\"m\">90</span> labels metric cpu metric_name system\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.ADD ts1 <span class=\"m\">1548149185000</span> <span class=\"m\">45</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149185000</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.ADD ts2 <span class=\"m\">1548149180000</span> <span class=\"m\">99</span> labels metric cpu metric_name user\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MREVRANGE - + WITHLABELS FILTER <span class=\"nv\">metric</span><span class=\"o\">=</span>cpu GROUPBY metric_name REDUCE max\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"metric_name=system\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"metric_name\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"system\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"__reducer__\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"max\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"__source__\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"ts1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149185000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">45</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">90</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"metric_name=user\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"metric_name\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"user\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"__reducer__\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"max\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"__source__\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"ts2\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">99</span></span></span></pre></div> </details> <details open> <summary><b>Filter query by value</b></summary> <p>Query all time series with the metric label equal to <code>cpu</code>, then filter values larger or equal to 90.0 and smaller or equal to 100.0.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.ADD ts1 <span class=\"m\">1548149180000</span> <span class=\"m\">90</span> labels metric cpu metric_name system\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.ADD ts1 <span class=\"m\">1548149185000</span> <span class=\"m\">45</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149185000</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.ADD ts2 <span class=\"m\">1548149180000</span> <span class=\"m\">99</span> labels metric cpu metric_name user\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MREVRANGE - + FILTER_BY_VALUE <span class=\"m\">90</span> <span class=\"m\">100</span> WITHLABELS FILTER <span class=\"nv\">metric</span><span class=\"o\">=</span>cpu\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"ts1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"metric\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"cpu\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"metric_name\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"system\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">90</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"ts2\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"metric\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"cpu\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"metric_name\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"user\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">99</span></span></span></pre></div> </details> <details open> <summary><b>Query using a label</b></summary> <p>Query all time series with the metric label equal to <code>cpu</code>, but only return the team label.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.ADD ts1 <span class=\"m\">1548149180000</span> <span class=\"m\">90</span> labels metric cpu metric_name system team NY\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.ADD ts1 <span class=\"m\">1548149185000</span> <span class=\"m\">45</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149185000</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.ADD ts2 <span class=\"m\">1548149180000</span> <span class=\"m\">99</span> labels metric cpu metric_name user team SF\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MREVRANGE - + SELECTED_LABELS team FILTER <span class=\"nv\">metric</span><span class=\"o\">=</span>cpu\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"ts1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"team\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"o\">(</span>nil<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149185000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">45</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">90</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"ts2\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"team\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"o\">(</span>nil<span class=\"o\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">99</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ts.mrange\"><code>TS.MRANGE</code></a> | <a href=\"../ts.range\"><code>TS.RANGE</code></a> | <a href=\"../ts.revrange\"><code>TS.REVRANGE</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/timeseries\">RedisTimeSeries</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ts.mrevrange/\" class=\"_attribution-link\">https://redis.io/commands/ts.mrevrange/</a>\n  </p>\n</div>\n","ts.mrange/index":"<h1 class=\"command-name\">TS.MRANGE</h1>\n<pre>TS.MRANGE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TS.MRANGE fromTimestamp toTimestamp\n  [LATEST]\n  [FILTER_BY_TS ts...]\n  [FILTER_BY_VALUE min max]\n  [WITHLABELS | SELECTED_LABELS label...]\n  [COUNT count]\n  [[ALIGN align] AGGREGATION aggregator bucketDuration [BUCKETTIMESTAMP bt] [EMPTY]]\n  FILTER filterExpr...\n  [GROUPBY label REDUCE reducer]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/timeseries\">TimeSeries 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(n/m+k) where n = Number of data points, m = Chunk size (data points per chunk), k = Number of data points that are in the requested ranges</dd> </dl> <p>Query a range across multiple time series by filters in forward direction</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>fromTimestamp</code></summary> <p>is start timestamp for the range query (integer UNIX timestamp in milliseconds) or <code>-</code> to denote the timestamp of the earliest sample amongs all time series that passes <code>FILTER filterExpr...</code>.</p> </details> <details open> <summary><code>toTimestamp</code></summary> <p>is end timestamp for the range query (integer UNIX timestamp in milliseconds) or <code>+</code> to denote the timestamp of the latest sample amongs all time series that passes <code>FILTER filterExpr...</code>.</p> </details> <details open> <summary><code>FILTER filterExpr...</code></summary> <p>filters time series based on their labels and label values. Each filter expression has one of the following syntaxes:</p> <ul> <li>\n<code>label=value</code>, where <code>label</code> equals <code>value</code>\n</li> <li>\n<code>label!=value</code>, where <code>label</code> does not equal <code>value</code>\n</li> <li>\n<code>label=</code>, where <code>key</code> does not have label <code>label</code>\n</li> <li>\n<code>label!=</code>, where <code>key</code> has label <code>label</code>\n</li> <li>\n<code>label=(value1,value2,...)</code>, where <code>key</code> with label <code>label</code> equals one of the values in the list</li> <li>\n<code>label!=(value1,value2,...)</code>, where key with label <code>label</code> does not equal any of the values in the list</li> </ul> <p><note><b>Notes:</b></note></p> <ul> <li>At least one <code>label=value</code> filter is required.</li> <li>Filters are conjunctive. For example, the FILTER <code>type=temperature room=study</code> means the a time series is a temperature time series of a study room.</li> <li>Don't use whitespaces in the filter expression. </li> </ul> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open> <summary><code>LATEST</code> (since RedisTimeSeries v1.8)</summary> <p>is used when a time series is a compaction. With <code>LATEST</code>, TS.MRANGE also reports the compacted value of the latest possibly partial bucket, given that this bucket's start time falls within <code>[fromTimestamp, toTimestamp]</code>. Without <code>LATEST</code>, TS.MRANGE does not report the latest possibly partial bucket. When a time series is not a compaction, <code>LATEST</code> is ignored.</p> <p>The data in the latest bucket of a compaction is possibly partial. A bucket is <em>closed</em> and compacted only upon arrival of a new sample that <em>opens</em> a new <em>latest</em> bucket. There are cases, however, when the compacted value of the latest possibly partial bucket is also required. In such a case, use <code>LATEST</code>.</p> </details> <details open> <summary><code>FILTER_BY_TS ts...</code> (since RedisTimeSeries v1.6)</summary> <p>filters samples by a list of specific timestamps. A sample passes the filter if its exact timestamp is specified and falls within <code>[fromTimestamp, toTimestamp]</code>.</p> </details> <details open> <summary><code>FILTER_BY_VALUE min max</code> (since RedisTimeSeries v1.6)</summary> <p>filters samples by minimum and maximum values.</p> </details> <details open> <summary><code>WITHLABELS</code></summary> <p>includes in the reply all label-value pairs representing metadata labels of the time series. If <code>WITHLABELS</code> or <code>SELECTED_LABELS</code> are not specified, by default, an empty list is reported as label-value pairs.</p> </details> <details open> <summary><code>SELECTED_LABELS label...</code> (since RedisTimeSeries v1.6)</summary> <p>returns a subset of the label-value pairs that represent metadata labels of the time series. Use when a large number of labels exists per series, but only the values of some of the labels are required. If <code>WITHLABELS</code> or <code>SELECTED_LABELS</code> are not specified, by default, an empty list is reported as label-value pairs.</p> </details> <details open> <summary><code>COUNT count</code></summary> <p>limits the number of returned samples.</p> </details> <details open> <summary><code>ALIGN align</code> (since RedisTimeSeries v1.6)</summary> <p>is a time bucket alignment control for <code>AGGREGATION</code>. It controls the time bucket timestamps by changing the reference timestamp on which a bucket is defined.</p> <p>Values include:</p> <ul> <li>\n<code>start</code> or <code>-</code>: The reference timestamp will be the query start interval time (<code>fromTimestamp</code>) which can't be <code>-</code>\n</li> <li>\n<code>end</code> or <code>+</code>: The reference timestamp will be the query end interval time (<code>toTimestamp</code>) which can't be <code>+</code>\n</li> <li>A specific timestamp: align the reference timestamp to a specific time</li> </ul> <p><note><b>Note:</b> When not provided, alignment is set to <code>0</code>.</note></p> </details> <details open> <summary><code>AGGREGATION aggregator bucketDuration</code></summary> <p>per time series, aggregates samples into time buckets, where:</p> <ul> <li> <p><code>aggregator</code> takes one of the following aggregation types:</p> <table> <thead> <tr> <th><code>aggregator</code></th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>avg</code></td> <td>Arithmetic mean of all values</td> </tr> <tr> <td><code>sum</code></td> <td>Sum of all values</td> </tr> <tr> <td><code>min</code></td> <td>Minimum value</td> </tr> <tr> <td><code>max</code></td> <td>Maximum value</td> </tr> <tr> <td><code>range</code></td> <td>Difference between maximum value and minimum value</td> </tr> <tr> <td><code>count</code></td> <td>Number of values</td> </tr> <tr> <td><code>first</code></td> <td>Value with lowest timestamp in the bucket</td> </tr> <tr> <td><code>last</code></td> <td>Value with highest timestamp in the bucket</td> </tr> <tr> <td><code>std.p</code></td> <td>Population standard deviation of the values</td> </tr> <tr> <td><code>std.s</code></td> <td>Sample standard deviation of the values</td> </tr> <tr> <td><code>var.p</code></td> <td>Population variance of the values</td> </tr> <tr> <td><code>var.s</code></td> <td>Sample variance of the values</td> </tr> <tr> <td><code>twa</code></td> <td>Time-weighted average over the bucket's timeframe (since RedisTimeSeries v1.8)</td> </tr> </tbody> </table> </li> <li> <p><code>bucketDuration</code> is duration of each bucket, in milliseconds.</p> </li> </ul> <p>Without <code>ALIGN</code>, bucket start times are multiples of <code>bucketDuration</code>.</p> <p>With <code>ALIGN align</code>, bucket start times are multiples of <code>bucketDuration</code> with remainder <code>align % bucketDuration</code>.</p> <p>The first bucket start time is less than or equal to <code>fromTimestamp</code>.</p> </details> <details open> <summary><code>[BUCKETTIMESTAMP bt]</code> (since RedisTimeSeries v1.8)</summary> <p>controls how bucket timestamps are reported.</p> <table> <thead> <tr> <th><code>bt</code></th> <th>Timestamp reported for each bucket</th> </tr> </thead> <tbody> <tr> <td>\n<code>-</code> or <code>low</code>\n</td> <td>the bucket's start time (default)</td> </tr> <tr> <td>\n<code>+</code> or <code>high</code>\n</td> <td>the bucket's end time</td> </tr> <tr> <td>\n<code>~</code> or <code>mid</code>\n</td> <td>the bucket's mid time (rounded down if not an integer)</td> </tr> </tbody> </table> </details> <details open> <summary><code>[EMPTY]</code> (since RedisTimeSeries v1.8)</summary> <p>is a flag, which, when specified, reports aggregations also for empty buckets.</p> <table> <thead> <tr> <th><code>aggregator</code></th> <th>Value reported for each empty bucket</th> </tr> </thead> <tbody> <tr> <td>\n<code>sum</code>, <code>count</code>\n</td> <td><code>0</code></td> </tr> <tr> <td><code>last</code></td> <td>The value of the last sample before the bucket's start. <code>NaN</code> when no such sample.</td> </tr> <tr> <td><code>twa</code></td> <td>Average value over the bucket's timeframe based on linear interpolation of the last sample before the bucket's start and the first sample after the bucket's end. <code>NaN</code> when no such samples.</td> </tr> <tr> <td>\n<code>min</code>, <code>max</code>, <code>range</code>, <code>avg</code>, <code>first</code>, <code>std.p</code>, <code>std.s</code>\n</td> <td><code>NaN</code></td> </tr> </tbody> </table> <p>Regardless of the values of <code>fromTimestamp</code> and <code>toTimestamp</code>, no data is reported for buckets that end before the earliest sample or begin after the latest sample in the time series.</p> </details> <details open> <summary><code>GROUPBY label REDUCE reducer</code> (since RedisTimeSeries v1.6)</summary> <p>splits time series into groups, each group contains time series that share the same value for the provided label name, then aggregates results in each group.</p> <p>When combined with <code>AGGREGATION</code> the <code>GROUPBY</code>/<code>REDUCE</code> is applied post aggregation stage.</p> <ul> <li> <p><code>label</code> is label name. A group is created for all time series that share the same value for this label.</p> </li> <li> <p><code>reducer</code> is an aggregation type used to aggregate the results in each group.</p> <table> <thead> <tr> <th><code>reducer</code></th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>avg</code></td> <td>Arithmetic mean of all non-NaN values (since RedisTimeSeries v1.8)</td> </tr> <tr> <td><code>sum</code></td> <td>Sum of all non-NaN values</td> </tr> <tr> <td><code>min</code></td> <td>Minimum non-NaN value</td> </tr> <tr> <td><code>max</code></td> <td>Maximum non-NaN value</td> </tr> <tr> <td><code>range</code></td> <td>Difference between maximum non-NaN value and minimum non-NaN value (since RedisTimeSeries v1.8)</td> </tr> <tr> <td><code>count</code></td> <td>Number of non-NaN values (since RedisTimeSeries v1.8)</td> </tr> <tr> <td><code>std.p</code></td> <td>Population standard deviation of all non-NaN values (since RedisTimeSeries v1.8)</td> </tr> <tr> <td><code>std.s</code></td> <td>Sample standard deviation of all non-NaN values (since RedisTimeSeries v1.8)</td> </tr> <tr> <td><code>var.p</code></td> <td>Population variance of all non-NaN values (since RedisTimeSeries v1.8)</td> </tr> <tr> <td><code>var.s</code></td> <td>Sample variance of all non-NaN values (since RedisTimeSeries v1.8)</td> </tr> </tbody> </table> </li> </ul> <p><note><b>Notes:</b></note></p> <ul> <li>The produced time series is named <code>&lt;label&gt;=&lt;value&gt;</code>\n</li> <li>The produced time series contains two labels with these label array structures: <ul> <li>\n<code>__reducer__</code>, the reducer used (e.g., <code>\"count\"</code>)</li> <li>\n<code>__source__</code>, the list of time series keys used to compute the grouped series (e.g., <code>\"key1,key2,key3\"</code>) </li> </ul> </li> </ul> </details> <p><note><b>Note:</b> An <code>MRANGE</code> command cannot be part of a transaction when running on a Redis cluster.</note></p> <h2 id=\"return-value\">Return value</h2> <p>If <code>GROUPBY label REDUCE reducer</code> is not specified:</p> <ul> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: for each time series matching the specified filters, the following is reported: <ul> <li>bulk-string-reply: The time series key name</li> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: label-value pairs (<a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>) <ul> <li>By default, an empty array is reported</li> <li>If <code>WITHLABELS</code> is specified, all labels associated with this time series are reported</li> <li>If <code>SELECTED_LABELS label...</code> is specified, the selected labels are reported (null value when no such label defined)</li> </ul> </li> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: timestamp-value pairs (<a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> (double)): all samples/aggregations matching the range</li> </ul> </li> </ul> <p>If <code>GROUPBY label REDUCE reducer</code> is specified:</p> <ul> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: for each group of time series matching the specified filters, the following is reported: <ul> <li>bulk-string-reply with the format <code>label=value</code> where <code>label</code> is the <code>GROUPBY</code> label argument</li> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: label-value pairs (<a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>): <ul> <li>By default, an empty array is reported</li> <li>If <code>WITHLABELS</code> is specified, the <code>GROUPBY</code> label argument and value are reported</li> <li>If <code>SELECTED_LABELS label...</code> is specified, the selected labels are reported (null value when no such label defined or label does not have the same value for all grouped time series)</li> </ul> </li> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: either a single pair (<a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>): the <code>GROUPBY</code> label argument and value, or empty array if</li> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a single pair (<a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>): the string <code>__reducer__</code> and the reducer argument</li> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a single pair (<a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>): the string <code>__source__</code> and the time series key names separated by <code>,</code>\n</li> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: timestamp-value pairs (<a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a> (double)): all samples/aggregations matching the range</li> </ul> </li> </ul> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Retrieve maximum stock price per timestamp</b></summary> <p>Create two stocks and add their prices at three different timestamps.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE stock:A LABELS <span class=\"nb\">type</span> stock name A\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE stock:B LABELS <span class=\"nb\">type</span> stock name B\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:A <span class=\"m\">1000</span> <span class=\"m\">100</span> stock:A <span class=\"m\">1010</span> <span class=\"m\">110</span> stock:A <span class=\"m\">1020</span> <span class=\"m\">120</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1020</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:B <span class=\"m\">1000</span> <span class=\"m\">120</span> stock:B <span class=\"m\">1010</span> <span class=\"m\">110</span> stock:B <span class=\"m\">1020</span> <span class=\"m\">100</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1020</span></span></span></pre></div> <p>You can now retrieve the maximum stock price per timestamp.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MRANGE - + WITHLABELS FILTER <span class=\"nv\">type</span><span class=\"o\">=</span>stock GROUPBY <span class=\"nb\">type</span> REDUCE max\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"type=stock\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"type\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"stock\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"__reducer__\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"max\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"__source__\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"stock:A,stock:B\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">120</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1010</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">110</span>\n</span></span><span class=\"line\"><span class=\"cl\">      3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1020</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">120</span></span></span></pre></div> <p>The <code>FILTER type=stock</code> clause returns a single time series representing stock prices. The <code>GROUPBY type REDUCE max</code> clause splits the time series into groups with identical type values, and then, for each timestamp, aggregates all series that share the same type value using the max aggregator.</p> </details> <details open> <summary><b>Calculate average stock price and retrieve maximum average</b></summary> <p>Create two stocks and add their prices at nine different timestamps.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE stock:A LABELS <span class=\"nb\">type</span> stock name A\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE stock:B LABELS <span class=\"nb\">type</span> stock name B\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:A <span class=\"m\">1000</span> <span class=\"m\">100</span> stock:A <span class=\"m\">1010</span> <span class=\"m\">110</span> stock:A <span class=\"m\">1020</span> <span class=\"m\">120</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1020</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:B <span class=\"m\">1000</span> <span class=\"m\">120</span> stock:B <span class=\"m\">1010</span> <span class=\"m\">110</span> stock:B <span class=\"m\">1020</span> <span class=\"m\">100</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1020</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:A <span class=\"m\">2000</span> <span class=\"m\">200</span> stock:A <span class=\"m\">2010</span> <span class=\"m\">210</span> stock:A <span class=\"m\">2020</span> <span class=\"m\">220</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2020</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:B <span class=\"m\">2000</span> <span class=\"m\">220</span> stock:B <span class=\"m\">2010</span> <span class=\"m\">210</span> stock:B <span class=\"m\">2020</span> <span class=\"m\">200</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2020</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:A <span class=\"m\">3000</span> <span class=\"m\">300</span> stock:A <span class=\"m\">3010</span> <span class=\"m\">310</span> stock:A <span class=\"m\">3020</span> <span class=\"m\">320</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3020</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:B <span class=\"m\">3000</span> <span class=\"m\">320</span> stock:B <span class=\"m\">3010</span> <span class=\"m\">310</span> stock:B <span class=\"m\">3020</span> <span class=\"m\">300</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3020</span></span></span></pre></div> <p>Now, for each stock, calculate the average stock price per a 1000-millisecond timeframe, and then retrieve the stock with the maximum average for that timeframe.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MRANGE - + WITHLABELS AGGREGATION avg <span class=\"m\">1000</span> FILTER <span class=\"nv\">type</span><span class=\"o\">=</span>stock GROUPBY <span class=\"nb\">type</span> REDUCE max\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"type=stock\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"type\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"stock\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"__reducer__\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"max\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"__source__\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"stock:A,stock:B\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">110</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">210</span>\n</span></span><span class=\"line\"><span class=\"cl\">      3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">310</span></span></span></pre></div> </details> <details open> <summary><b>Group query results</b></summary> <p>Query all time series with the metric label equal to <code>cpu</code>, then group the time series by the value of their <code>metric_name</code> label value and for each group return the maximum value and the time series keys (<em>source</em>) with that value.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.ADD ts1 <span class=\"m\">1548149180000</span> <span class=\"m\">90</span> labels metric cpu metric_name system\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.ADD ts1 <span class=\"m\">1548149185000</span> <span class=\"m\">45</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149185000</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.ADD ts2 <span class=\"m\">1548149180000</span> <span class=\"m\">99</span> labels metric cpu metric_name user\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MRANGE - + WITHLABELS FILTER <span class=\"nv\">metric</span><span class=\"o\">=</span>cpu GROUPBY metric_name REDUCE max\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"metric_name=system\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"metric_name\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"system\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"__reducer__\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"max\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"__source__\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"ts1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">90</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149185000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">45</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"metric_name=user\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"metric_name\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"user\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"__reducer__\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"max\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"__source__\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"ts2\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">99</span></span></span></pre></div> </details> <details open> <summary><b>Filter query by value</b></summary> <p>Query all time series with the metric label equal to <code>cpu</code>, then filter values larger or equal to 90.0 and smaller or equal to 100.0.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.ADD ts1 <span class=\"m\">1548149180000</span> <span class=\"m\">90</span> labels metric cpu metric_name system\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.ADD ts1 <span class=\"m\">1548149185000</span> <span class=\"m\">45</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149185000</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.ADD ts2 <span class=\"m\">1548149180000</span> <span class=\"m\">99</span> labels metric cpu metric_name user\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MRANGE - + FILTER_BY_VALUE <span class=\"m\">90</span> <span class=\"m\">100</span> WITHLABELS FILTER <span class=\"nv\">metric</span><span class=\"o\">=</span>cpu\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"ts1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"metric\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"cpu\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"metric_name\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"system\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">90</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"ts2\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"metric\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"cpu\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"metric_name\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"user\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">99</span></span></span></pre></div> </details> <details open> <summary><b>Query using a label</b></summary> <p>Query all time series with the metric label equal to <code>cpu</code>, but only return the team label.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.ADD ts1 <span class=\"m\">1548149180000</span> <span class=\"m\">90</span> labels metric cpu metric_name system team NY\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.ADD ts1 <span class=\"m\">1548149185000</span> <span class=\"m\">45</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149185000</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.ADD ts2 <span class=\"m\">1548149180000</span> <span class=\"m\">99</span> labels metric cpu metric_name user team SF\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MRANGE - + SELECTED_LABELS team FILTER <span class=\"nv\">metric</span><span class=\"o\">=</span>cpu\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"ts1\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"team\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"NY\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">90</span>\n</span></span><span class=\"line\"><span class=\"cl\">      2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149185000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">45</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"ts2\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"s2\">\"team\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"s2\">\"SF\"</span>\n</span></span><span class=\"line\"><span class=\"cl\">   3<span class=\"o\">)</span> 1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1548149180000</span>\n</span></span><span class=\"line\"><span class=\"cl\">         2<span class=\"o\">)</span> <span class=\"m\">99</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ts.range\"><code>TS.RANGE</code></a> | <a href=\"../ts.mrevrange\"><code>TS.MREVRANGE</code></a> | <a href=\"../ts.revrange\"><code>TS.REVRANGE</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/timeseries\">RedisTimeSeries</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ts.mrange/\" class=\"_attribution-link\">https://redis.io/commands/ts.mrange/</a>\n  </p>\n</div>\n","ts.range/index":"<h1 class=\"command-name\">TS.RANGE</h1>\n<pre>TS.RANGE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TS.RANGE key fromTimestamp toTimestamp\n  [LATEST]\n  [FILTER_BY_TS ts...]\n  [FILTER_BY_VALUE min max]\n  [COUNT count] \n  [[ALIGN align] AGGREGATION aggregator bucketDuration [BUCKETTIMESTAMP bt] [EMPTY]]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/timeseries\">TimeSeries 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(n/m+k) where n = Number of data points, m = Chunk size (data points per chunk), k = Number of data points that are in the requested range</dd> </dl> <p>Query a range in forward direction</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>key</code></summary> <p>is the key name for the time series.</p> </details> <details open> <summary><code>fromTimestamp</code></summary> <p>is start timestamp for the range query (integer UNIX timestamp in milliseconds) or <code>-</code> to denote the timestamp of the earliest sample in the time series.</p> </details> <details open> <summary><code>toTimestamp</code></summary> <p>is end timestamp for the range query (integer UNIX timestamp in milliseconds) or <code>+</code> to denote the timestamp of the latest sample in the time series.</p> <p><note><b>Note:</b> When the time series is a compaction, the last compacted value may aggregate raw values with timestamp beyond <code>toTimestamp</code>. That is because <code>toTimestamp</code> only limits the timestamp of the compacted value, which is the start time of the raw bucket that was compacted.</note></p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open> <summary><code>LATEST</code> (since RedisTimeSeries v1.8)</summary> <p>is used when a time series is a compaction. With <code>LATEST</code>, TS.RANGE also reports the compacted value of the latest, possibly partial, bucket, given that this bucket's start time falls within <code>[fromTimestamp, toTimestamp]</code>. Without <code>LATEST</code>, TS.RANGE does not report the latest, possibly partial, bucket. When a time series is not a compaction, <code>LATEST</code> is ignored.</p> <p>The data in the latest bucket of a compaction is possibly partial. A bucket is <em>closed</em> and compacted only upon arrival of a new sample that <em>opens</em> a new <em>latest</em> bucket. There are cases, however, when the compacted value of the latest, possibly partial, bucket is also required. In such a case, use <code>LATEST</code>.</p> </details> <details open> <summary><code>FILTER_BY_TS ts...</code> (since RedisTimeSeries v1.6)</summary> <p>filters samples by a list of specific timestamps. A sample passes the filter if its exact timestamp is specified and falls within <code>[fromTimestamp, toTimestamp]</code>.</p> </details> <details open> <summary><code>FILTER_BY_VALUE min max</code> (since RedisTimeSeries v1.6)</summary> <p>filters samples by minimum and maximum values.</p> </details> <details open> <summary><code>COUNT count</code></summary> <p>limits the number of returned samples.</p> </details> <details open> <summary><code>ALIGN align</code> (since RedisTimeSeries v1.6)</summary> <p>is a time bucket alignment control for <code>AGGREGATION</code>. It controls the time bucket timestamps by changing the reference timestamp on which a bucket is defined.</p> <p><code>align</code> values include:</p> <ul> <li>\n<code>start</code> or <code>-</code>: The reference timestamp will be the query start interval time (<code>fromTimestamp</code>) which can't be <code>-</code>\n</li> <li>\n<code>end</code> or <code>+</code>: The reference timestamp will be the query end interval time (<code>toTimestamp</code>) which can't be <code>+</code>\n</li> <li>A specific timestamp: align the reference timestamp to a specific time</li> </ul> <p><note><b>Note:</b> When not provided, alignment is set to <code>0</code>.</note></p> </details> <details open> <summary><code>AGGREGATION aggregator bucketDuration</code></summary> <p>aggregates samples into time buckets, where:</p> <ul> <li> <p><code>aggregator</code> takes one of the following aggregation types:</p> <table> <thead> <tr> <th><code>aggregator</code></th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>avg</code></td> <td>Arithmetic mean of all values</td> </tr> <tr> <td><code>sum</code></td> <td>Sum of all values</td> </tr> <tr> <td><code>min</code></td> <td>Minimum value</td> </tr> <tr> <td><code>max</code></td> <td>Maximum value</td> </tr> <tr> <td><code>range</code></td> <td>Difference between the maximum and the minimum value</td> </tr> <tr> <td><code>count</code></td> <td>Number of values</td> </tr> <tr> <td><code>first</code></td> <td>Value with lowest timestamp in the bucket</td> </tr> <tr> <td><code>last</code></td> <td>Value with highest timestamp in the bucket</td> </tr> <tr> <td><code>std.p</code></td> <td>Population standard deviation of the values</td> </tr> <tr> <td><code>std.s</code></td> <td>Sample standard deviation of the values</td> </tr> <tr> <td><code>var.p</code></td> <td>Population variance of the values</td> </tr> <tr> <td><code>var.s</code></td> <td>Sample variance of the values</td> </tr> <tr> <td><code>twa</code></td> <td>Time-weighted average over the bucket's timeframe (since RedisTimeSeries v1.8)</td> </tr> </tbody> </table> </li> <li> <p><code>bucketDuration</code> is duration of each bucket, in milliseconds.</p> </li> </ul> <p>Without <code>ALIGN</code>, bucket start times are multiples of <code>bucketDuration</code>.</p> <p>With <code>ALIGN align</code>, bucket start times are multiples of <code>bucketDuration</code> with remainder <code>align % bucketDuration</code>.</p> <p>The first bucket start time is less than or equal to <code>fromTimestamp</code>.</p> </details> <details open> <summary><code>[BUCKETTIMESTAMP bt]</code> (since RedisTimeSeries v1.8)</summary> <p>controls how bucket timestamps are reported.</p> <table> <thead> <tr> <th><code>bt</code></th> <th>Timestamp reported for each bucket</th> </tr> </thead> <tbody> <tr> <td>\n<code>-</code> or <code>low</code>\n</td> <td>the bucket's start time (default)</td> </tr> <tr> <td>\n<code>+</code> or <code>high</code>\n</td> <td>the bucket's end time</td> </tr> <tr> <td>\n<code>~</code> or <code>mid</code>\n</td> <td>the bucket's mid time (rounded down if not an integer)</td> </tr> </tbody> </table> </details> <details open> <summary><code>[EMPTY]</code> (since RedisTimeSeries v1.8)</summary> <p>is a flag, which, when specified, reports aggregations also for empty buckets.</p> <table> <thead> <tr> <th><code>aggregator</code></th> <th>Value reported for each empty bucket</th> </tr> </thead> <tbody> <tr> <td>\n<code>sum</code>, <code>count</code>\n</td> <td><code>0</code></td> </tr> <tr> <td><code>last</code></td> <td>The value of the last sample before the bucket's start. <code>NaN</code> when no such sample.</td> </tr> <tr> <td><code>twa</code></td> <td>Average value over the bucket's timeframe based on linear interpolation of the last sample before the bucket's start and the first sample after the bucket's end. <code>NaN</code> when no such samples.</td> </tr> <tr> <td>\n<code>min</code>, <code>max</code>, <code>range</code>, <code>avg</code>, <code>first</code>, <code>std.p</code>, <code>std.s</code>\n</td> <td><code>NaN</code></td> </tr> </tbody> </table> <p>Regardless of the values of <code>fromTimestamp</code> and <code>toTimestamp</code>, no data is reported for buckets that end before the earliest sample or begin after the latest sample in the time series.</p> </details> <h2 id=\"return-value\">Return value</h2> <p>Either</p> <ul> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of (<a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>) pairs representing (timestamp, value(double))</li> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> (e.g., on invalid filter value)</li> </ul> <h2 id=\"complexity\">Complexity</h2> <p>TS.RANGE complexity can be improved in the future by using binary search to find the start of the range, which makes this <code>O(Log(n/m)+k*m)</code>. But, because <code>m</code> is small, you can disregard it and look at the operation as <code>O(Log(n)+k)</code>.</p> <h2 id=\"examples\">Examples</h2> <details open><summary><b>Filter results by timestamp or sample value</b></summary> <p>Consider a metric where acceptable values are between -100 and 100, and the value 9999 is used as an indication of bad measurement.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE temp:TLV LABELS <span class=\"nb\">type</span> temp location TLV\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD temp:TLV <span class=\"m\">1000</span> <span class=\"m\">30</span> temp:TLV <span class=\"m\">1010</span> <span class=\"m\">35</span> temp:TLV <span class=\"m\">1020</span> <span class=\"m\">9999</span> temp:TLV <span class=\"m\">1030</span> <span class=\"m\">40</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1020</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1030</span></span></span></pre></div> <p>Now, retrieve all values except out-of-range values.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">TS.RANGE temp:TLV - + FILTER_BY_VALUE -100 <span class=\"m\">100</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">30</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1010</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">35</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1030</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">40</span></span></span></pre></div> <p>Now, retrieve the average value, while ignoring out-of-range values.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">TS.RANGE temp:TLV - + FILTER_BY_VALUE -100 <span class=\"m\">100</span> AGGREGATION avg <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">35</span></span></span></pre></div> </details> <details open><summary><b>Align aggregation buckets</b></summary> <p>To demonstrate alignment, lets create a stock and add prices at nine different timestamps.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE stock:A LABELS <span class=\"nb\">type</span> stock name A\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:A <span class=\"m\">1000</span> <span class=\"m\">100</span> stock:A <span class=\"m\">1010</span> <span class=\"m\">110</span> stock:A <span class=\"m\">1020</span> <span class=\"m\">120</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1020</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:A <span class=\"m\">2000</span> <span class=\"m\">200</span> stock:A <span class=\"m\">2010</span> <span class=\"m\">210</span> stock:A <span class=\"m\">2020</span> <span class=\"m\">220</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2020</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:A <span class=\"m\">3000</span> <span class=\"m\">300</span> stock:A <span class=\"m\">3010</span> <span class=\"m\">310</span> stock:A <span class=\"m\">3020</span> <span class=\"m\">320</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3020</span></span></span></pre></div> <p>Next, aggregate without using <code>ALIGN</code>, defaulting to alignment 0.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.RANGE stock:A - + AGGREGATION min <span class=\"m\">20</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">100</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1020</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">120</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1040</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">210</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1060</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">300</span>\n</span></span><span class=\"line\"><span class=\"cl\">5<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1080</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">320</span></span></span></pre></div> <p>And now set <code>ALIGN</code> to 10 to have a bucket start at time 10, and align all the buckets with a 20 milliseconds duration.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.RANGE stock:A - + ALIGN <span class=\"m\">10</span> AGGREGATION min <span class=\"m\">20</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">990</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">100</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1010</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">110</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1990</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">200</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2010</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">210</span>\n</span></span><span class=\"line\"><span class=\"cl\">5<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2990</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">300</span>\n</span></span><span class=\"line\"><span class=\"cl\">6<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3010</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">310</span></span></span></pre></div> <p>When the start timestamp for the range query is explicitly stated (not <code>-</code>), you can set <code>ALIGN</code> to that time by setting align to <code>-</code> or to <code>start</code>.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.RANGE stock:A <span class=\"m\">5</span> + ALIGN - AGGREGATION min <span class=\"m\">20</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">985</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">100</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1005</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">110</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1985</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">200</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2005</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">210</span>\n</span></span><span class=\"line\"><span class=\"cl\">5<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2985</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">300</span>\n</span></span><span class=\"line\"><span class=\"cl\">6<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3005</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">310</span></span></span></pre></div> <p>Similarly, when the end timestamp for the range query is explicitly stated, you can set <code>ALIGN</code> to that time by setting align to <code>+</code> or to <code>end</code>.</p> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ts.mrange\"><code>TS.MRANGE</code></a> | <a href=\"../ts.revrange\"><code>TS.REVRANGE</code></a> | <a href=\"../ts.mrevrange\"><code>TS.MREVRANGE</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/timeseries\">RedisTimeSeries</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ts.range/\" class=\"_attribution-link\">https://redis.io/commands/ts.range/</a>\n  </p>\n</div>\n","unsubscribe/index":"<h1 class=\"command-name\">UNSUBSCRIBE</h1>\n<pre>UNSUBSCRIBE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">UNSUBSCRIBE [channel [channel ...]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of clients already subscribed to a channel.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@pubsub</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Unsubscribes the client from the given channels, or from all of them if none is given.</p> <p>When no channels are specified, the client is unsubscribed from all the previously subscribed channels. In this case, a message for every unsubscribed channel will be sent to the client.</p> <h2 id=\"return\">Return</h2> <p>When successful, this command doesn't return anything. Instead, for each channel, one message with the first element being the string \"unsubscribe\" is pushed as a confirmation that the command succeeded.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/unsubscribe/\" class=\"_attribution-link\">https://redis.io/commands/unsubscribe/</a>\n  </p>\n</div>\n","wait/index":"<h1 class=\"command-name\">WAIT</h1>\n<pre>WAIT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">WAIT numreplicas timeout</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>3.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@connection</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command blocks the current client until all the previous write commands are successfully transferred and acknowledged by at least the specified number of replicas. If the timeout, specified in milliseconds, is reached, the command returns even if the specified number of replicas were not yet reached.</p> <p>The command <strong>will always return</strong> the number of replicas that acknowledged the write commands sent by the current client before the <code>WAIT</code> command, both in the case where the specified number of replicas are reached, or when the timeout is reached.</p> <p>A few remarks:</p> <ol> <li>When <code>WAIT</code> returns, all the previous write commands sent in the context of the current connection are guaranteed to be received by the number of replicas returned by <code>WAIT</code>.</li> <li>If the command is sent as part of a <a href=\"../multi\"><code>MULTI</code></a> transaction (since Redis 7.0, any context that does not allow blocking, such as inside scripts), the command does not block but instead just return ASAP the number of replicas that acknowledged the previous write commands.</li> <li>A timeout of 0 means to block forever.</li> <li>Since <code>WAIT</code> returns the number of replicas reached both in case of failure and success, the client should check that the returned value is equal or greater to the replication level it demanded.</li> </ol> <h2 id=\"consistency-and-wait\">Consistency and WAIT</h2> <p>Note that <code>WAIT</code> does not make Redis a strongly consistent store: while synchronous replication is part of a replicated state machine, it is not the only thing needed. However in the context of Sentinel or Redis Cluster failover, <code>WAIT</code> improves the real world data safety.</p> <p>Specifically if a given write is transferred to one or more replicas, it is more likely (but not guaranteed) that if the master fails, we'll be able to promote, during a failover, a replica that received the write: both Sentinel and Redis Cluster will do a best-effort attempt to promote the best replica among the set of available replicas.</p> <p>However this is just a best-effort attempt so it is possible to still lose a write synchronously replicated to multiple replicas.</p> <h2 id=\"implementation-details\">Implementation details</h2> <p>Since the introduction of partial resynchronization with replicas (PSYNC feature) Redis replicas asynchronously ping their master with the offset they already processed in the replication stream. This is used in multiple ways:</p> <ol> <li>Detect timed out replicas.</li> <li>Perform a partial resynchronization after a disconnection.</li> <li>Implement <code>WAIT</code>.</li> </ol> <p>In the specific case of the implementation of <code>WAIT</code>, Redis remembers, for each client, the replication offset of the produced replication stream when a given write command was executed in the context of a given client. When <code>WAIT</code> is called Redis checks if the specified number of replicas already acknowledged this offset or a greater one.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: The command returns the number of replicas reached by all the writes performed in the context of the current connection.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; SET foo bar\nOK\n&gt; WAIT 1 0\n(integer) 1\n&gt; WAIT 2 1000\n(integer) 1\n</pre>\n<p>In the following example the first call to <code>WAIT</code> does not use a timeout and asks for the write to reach 1 replica. It returns with success. In the second attempt instead we put a timeout, and ask for the replication of the write to two replicas. Since there is a single replica available, after one second <code>WAIT</code> unblocks and returns 1, the number of replicas reached.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/wait/\" class=\"_attribution-link\">https://redis.io/commands/wait/</a>\n  </p>\n</div>\n","ts.revrange/index":"<h1 class=\"command-name\">TS.REVRANGE</h1>\n<pre>TS.REVRANGE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TS.REVRANGE key fromTimestamp toTimestamp\n  [LATEST]\n  [FILTER_BY_TS TS...]\n  [FILTER_BY_VALUE min max]\n  [COUNT count]\n  [[ALIGN align] AGGREGATION aggregator bucketDuration [BUCKETTIMESTAMP bt] [EMPTY]]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/timeseries\">TimeSeries 1.4.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(n/m+k) where n = Number of data points, m = Chunk size (data points per chunk), k = Number of data points that are in the requested range</dd> </dl> <p>Query a range in reverse direction</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open> <summary><code>key</code></summary> <p>is the key name for the time series.</p> </details> <details open> <summary><code>fromTimestamp</code></summary> <p>is start timestamp for the range query (integer UNIX timestamp in milliseconds) or <code>-</code> to denote the timestamp of the earliest sample in the time series.</p> </details> <details open> <summary><code>toTimestamp</code></summary> <p>is end timestamp for the range query (integer UNIX timestamp in milliseconds) or <code>+</code> to denote the timestamp of the latest sample in the time series.</p> <p><note><b>Note:</b> When the time series is a compaction, the last compacted value may aggregate raw values with timestamp beyond <code>toTimestamp</code>. That is because <code>toTimestamp</code> limits only the timestamp of the compacted value, which is the start time of the raw bucket that was compacted.</note></p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open> <summary><code>LATEST</code> (since RedisTimeSeries v1.8)</summary> <p>is used when a time series is a compaction. With <code>LATEST</code>, TS.REVRANGE also reports the compacted value of the latest, possibly partial, bucket, given that this bucket's start time falls within <code>[fromTimestamp, toTimestamp]</code>. Without <code>LATEST</code>, TS.REVRANGE does not report the latest, possibly partial, bucket. When a time series is not a compaction, <code>LATEST</code> is ignored.</p> <p>The data in the latest bucket of a compaction is possibly partial. A bucket is <em>closed</em> and compacted only upon arrival of a new sample that <em>opens</em> a new <em>latest</em> bucket. There are cases, however, when the compacted value of the latest, possibly partial, bucket is also required. In such a case, use <code>LATEST</code>.</p> </details> <details open> <summary><code>FILTER_BY_TS ts...</code> (since RedisTimeSeries v1.6)</summary> <p>filters samples by a list of specific timestamps. A sample passes the filter if its exact timestamp is specified and falls within <code>[fromTimestamp, toTimestamp]</code>.</p> </details> <details open> <summary><code>FILTER_BY_VALUE min max</code> (since RedisTimeSeries v1.6)</summary> <p>filters samples by minimum and maximum values.</p> </details> <details open> <summary><code>COUNT count</code></summary> limits the number of returned samples. </details> <details open> <summary><code>ALIGN align</code> (since RedisTimeSeries v1.6)</summary> <p>is a time bucket alignment control for <code>AGGREGATION</code>. It controls the time bucket timestamps by changing the reference timestamp on which a bucket is defined. Values include:</p> <ul> <li>\n<code>start</code> or <code>-</code>: The reference timestamp will be the query start interval time (<code>fromTimestamp</code>) which can't be <code>-</code>\n</li> <li>\n<code>end</code> or <code>+</code>: The reference timestamp will be the query end interval time (<code>toTimestamp</code>) which can't be <code>+</code>\n</li> <li>A specific timestamp: align the reference timestamp to a specific time</li> </ul> <p><note><b>NOTE:</b> When not provided, alignment is set to <code>0</code>.</note></p> </details> <details open> <summary><code>AGGREGATION aggregator bucketDuration</code></summary> aggregates samples into time buckets, where: <ul> <li> <p><code>aggregator</code> takes one of the following aggregation types:</p> <table> <thead> <tr> <th><code>aggregator</code></th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>avg</code></td> <td>Arithmetic mean of all values</td> </tr> <tr> <td><code>sum</code></td> <td>Sum of all values</td> </tr> <tr> <td><code>min</code></td> <td>Minimum value</td> </tr> <tr> <td><code>max</code></td> <td>Maximum value</td> </tr> <tr> <td><code>range</code></td> <td>Difference between the maximum and the minimum value</td> </tr> <tr> <td><code>count</code></td> <td>Number of values</td> </tr> <tr> <td><code>first</code></td> <td>Value with lowest timestamp in the bucket</td> </tr> <tr> <td><code>last</code></td> <td>Value with highest timestamp in the bucket</td> </tr> <tr> <td><code>std.p</code></td> <td>Population standard deviation of the values</td> </tr> <tr> <td><code>std.s</code></td> <td>Sample standard deviation of the values</td> </tr> <tr> <td><code>var.p</code></td> <td>Population variance of the values</td> </tr> <tr> <td><code>var.s</code></td> <td>Sample variance of the values</td> </tr> <tr> <td><code>twa</code></td> <td>Time-weighted average over the bucket's timeframe (since RedisTimeSeries v1.8)</td> </tr> </tbody> </table> </li> <li> <p><code>bucketDuration</code> is duration of each bucket, in milliseconds.</p> </li> </ul> <p>Without <code>ALIGN</code>, bucket start times are multiples of <code>bucketDuration</code>.</p> <p>With <code>ALIGN align</code>, bucket start times are multiples of <code>bucketDuration</code> with remainder <code>align % bucketDuration</code>.</p> <p>The first bucket start time is less than or equal to <code>fromTimestamp</code>.</p> </details> <details open> <summary><code>[BUCKETTIMESTAMP bt]</code> (since RedisTimeSeries v1.8)</summary> <p>controls how bucket timestamps are reported.</p> <table> <thead> <tr> <th><code>bt</code></th> <th>Timestamp reported for each bucket</th> </tr> </thead> <tbody> <tr> <td>\n<code>-</code> or <code>low</code>\n</td> <td>the bucket's start time (default)</td> </tr> <tr> <td>\n<code>+</code> or <code>high</code>\n</td> <td>the bucket's end time</td> </tr> <tr> <td>\n<code>~</code> or <code>mid</code>\n</td> <td>the bucket's mid time (rounded down if not an integer)</td> </tr> </tbody> </table> </details> <details open> <summary><code>[EMPTY]</code> (since RedisTimeSeries v1.8)</summary> is a flag, which, when specified, reports aggregations also for empty buckets. <table> <thead> <tr> <th><code>aggregator</code></th> <th>Value reported for each empty bucket</th> </tr> </thead> <tbody> <tr> <td>\n<code>sum</code>, <code>count</code>\n</td> <td><code>0</code></td> </tr> <tr> <td><code>last</code></td> <td>The value of the last sample before the bucket's start. <code>NaN</code> when no such sample.</td> </tr> <tr> <td><code>twa</code></td> <td>Average value over the bucket's timeframe based on linear interpolation of the last sample before the bucket's start and the first sample after the bucket's end. <code>NaN</code> when no such samples.</td> </tr> <tr> <td>\n<code>min</code>, <code>max</code>, <code>range</code>, <code>avg</code>, <code>first</code>, <code>std.p</code>, <code>std.s</code>\n</td> <td><code>NaN</code></td> </tr> </tbody> </table> <p>Regardless of the values of <code>fromTimestamp</code> and <code>toTimestamp</code>, no data is reported for buckets that end before the earliest sample or begin after the latest sample in the time series.</p> </details> <h2 id=\"return-value\">Return value</h2> <ul> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of (<a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>) pairs representing (timestamp, value(double))</li> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> (e.g., on invalid filter value)</li> </ul> <h2 id=\"complexity\">Complexity</h2> <p>TS.REVRANGE complexity can be improved in the future by using binary search to find the start of the range, which makes this <code>O(Log(n/m)+k*m)</code>. But, because <code>m</code> is small, you can disregard it and look at the operation as <code>O(Log(n)+k)</code>.</p> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Filter results by timestamp or sample value</b></summary> <p>Consider a metric where acceptable values are between -100 and 100, and the value 9999 is used as an indication of bad measurement.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE temp:TLV LABELS <span class=\"nb\">type</span> temp location TLV\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD temp:TLV <span class=\"m\">1000</span> <span class=\"m\">30</span> temp:TLV <span class=\"m\">1010</span> <span class=\"m\">35</span> temp:TLV <span class=\"m\">1020</span> <span class=\"m\">9999</span> temp:TLV <span class=\"m\">1030</span> <span class=\"m\">40</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1020</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1030</span></span></span></pre></div> <p>Now, retrieve all values except out-of-range values.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">TS.REVRANGE temp:TLV - + FILTER_BY_VALUE -100 <span class=\"m\">100</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1030</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">40</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1010</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">35</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">30</span></span></span></pre></div> <p>Now, retrieve the average value, while ignoring out-of-range values.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">TS.REVRANGE temp:TLV - + FILTER_BY_VALUE -100 <span class=\"m\">100</span> AGGREGATION avg <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">35</span></span></span></pre></div> </details> <details open> <summary><b>Align aggregation buckets</b></summary> <p>To demonstrate alignment, lets create a stock and add prices at three different timestamps.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE stock:A LABELS <span class=\"nb\">type</span> stock name A\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:A <span class=\"m\">1000</span> <span class=\"m\">100</span> stock:A <span class=\"m\">1010</span> <span class=\"m\">110</span> stock:A <span class=\"m\">1020</span> <span class=\"m\">120</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1020</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:A <span class=\"m\">2000</span> <span class=\"m\">200</span> stock:A <span class=\"m\">2010</span> <span class=\"m\">210</span> stock:A <span class=\"m\">2020</span> <span class=\"m\">220</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2020</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD stock:A <span class=\"m\">3000</span> <span class=\"m\">300</span> stock:A <span class=\"m\">3010</span> <span class=\"m\">310</span> stock:A <span class=\"m\">3020</span> <span class=\"m\">320</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3010</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3020</span></span></span></pre></div> <p>Next, aggregate without using <code>ALIGN</code>, defaulting to alignment 0.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.REVRANGE stock:A - + AGGREGATION min <span class=\"m\">20</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3020</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">320</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3000</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">300</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2020</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">220</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2000</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">200</span>\n</span></span><span class=\"line\"><span class=\"cl\">5<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1020</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">120</span>\n</span></span><span class=\"line\"><span class=\"cl\">6<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1000</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">100</span></span></span></pre></div> <p>And now set <code>ALIGN</code> to 10 to have a bucket start at time 10, and align all the buckets with a 20 milliseconds duration.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.REVRANGE stock:A - + ALIGN <span class=\"m\">10</span> AGGREGATION min <span class=\"m\">20</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3010</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">310</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2990</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">300</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2010</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">210</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1990</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">200</span>\n</span></span><span class=\"line\"><span class=\"cl\">5<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1010</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">110</span>\n</span></span><span class=\"line\"><span class=\"cl\">6<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">990</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">100</span></span></span></pre></div> <p>When the start timestamp for the range query is explicitly stated (not <code>-</code>), you can set ALIGN to that time by setting align to <code>-</code> or to <code>start</code>.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.REVRANGE stock:A <span class=\"m\">5</span> + ALIGN - AGGREGATION min <span class=\"m\">20</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">3005</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">310</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2985</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">300</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">2005</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">210</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1985</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">200</span>\n</span></span><span class=\"line\"><span class=\"cl\">5<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1005</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">110</span>\n</span></span><span class=\"line\"><span class=\"cl\">6<span class=\"o\">)</span> 1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">985</span>\n</span></span><span class=\"line\"><span class=\"cl\">   2<span class=\"o\">)</span> <span class=\"m\">100</span></span></span></pre></div> <p>Similarly, when the end timestamp for the range query is explicitly stated, you can set ALIGN to that time by setting align to <code>+</code> or to <code>end</code>.</p> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ts.range\"><code>TS.RANGE</code></a> | <a href=\"../ts.mrange\"><code>TS.MRANGE</code></a> | <a href=\"../ts.mrevrange\"><code>TS.MREVRANGE</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/timeseries\">RedisTimeSeries</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ts.revrange/\" class=\"_attribution-link\">https://redis.io/commands/ts.revrange/</a>\n  </p>\n</div>\n","ts.get/index":"<h1 class=\"command-name\">TS.GET</h1>\n<pre>TS.GET</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TS.GET key \n  [LATEST]\n</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available in:</dt> <dd> <a href=\"https://redis.io/docs/stack\">Redis Stack</a> / <a href=\"https://redis.io/docs/stack/timeseries\">TimeSeries 1.0.0</a> </dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> </dl> <p>Get the sample with the highest timestamp from a given time series</p> <p><a href=\"#examples\">Examples</a></p> <h2 id=\"required-arguments\">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key name for the time series.</p> </details> <h2 id=\"optional-arguments\">Optional arguments</h2> <details open><summary><code>LATEST</code> (since RedisTimeSeries v1.8)</summary> <p>is used when a time series is a compaction. With <code>LATEST</code>, TS.GET reports the compacted value of the latest, possibly partial, bucket. Without <code>LATEST</code>, TS.GET does not report the latest, possibly partial, bucket. When a time series is not a compaction, <code>LATEST</code> is ignored.</p> <p>The data in the latest bucket of a compaction is possibly partial. A bucket is <em>closed</em> and compacted only upon arrival of a new sample that <em>opens</em> a new <em>latest</em> bucket. There are cases, however, when the compacted value of the latest, possibly partial, bucket is also required. In such a case, use <code>LATEST</code>.</p> </details> <h2 id=\"return-value\">Return value</h2> <p>One of:</p> <ul> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> of a single (<a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>) pair representing (timestamp, value(double)) of the sample with the highest timetamp</li> <li>An empty <a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a> - when the time series is empty</li> <li>\n<a href=\"https://redis.io/docs/reference/protocol-spec#resp-errors\">Error reply</a> (e.g., when the key does not exist or when the number of arguments is wrong)</li> </ul> <h2 id=\"examples\">Examples</h2> <details open> <summary><b>Get latest measured temperature for a city</b></summary> <p>Create a time series to store the temperatures measured in Tel Aviv and add four measurements for Sun Jan 01 2023</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE temp:TLV LABELS <span class=\"nb\">type</span> temp location TLV\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD temp:TLV <span class=\"m\">1672534800</span> <span class=\"m\">12</span> temp:TLV <span class=\"m\">1672556400</span> <span class=\"m\">16</span> temp:TLV <span class=\"m\">1672578000</span> <span class=\"m\">21</span> temp:TLV <span class=\"m\">1672599600</span> <span class=\"m\">14</span></span></span></pre></div> <p>Next, get the latest measured temperature (the temperature with the highest timestamp)</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.GET temp:TLV\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1672599600</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"m\">14</span></span></span></pre></div> </details> <details open> <summary><b>Get latest maximal daily temperature for a city</b></summary> <p>Create a time series to store the temperatures measured in Jerusalem</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE temp:JLM LABELS <span class=\"nb\">type</span> temp location JLM\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Next, create a compacted time series named <em>dailyAvgTemp:JLM</em> containing one compacted sample per 24 hours: the maximum of all measurements taken from midnight to next midnight.</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATE dailyMaxTemp:JLM LABELS <span class=\"nb\">type</span> temp location JLM\n</span></span><span class=\"line\"><span class=\"cl\">OK\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.CREATERULE temp:JLM dailyMaxTemp:JLM AGGREGATION max <span class=\"m\">86400000</span>\n</span></span><span class=\"line\"><span class=\"cl\">OK</span></span></pre></div> <p>Add four measurements for Sun Jan 01 2023 and three measurements for Mon Jan 02 2023</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD temp:JLM <span class=\"m\">1672534800000</span> <span class=\"m\">12</span> temp:JLM <span class=\"m\">1672556400000</span> <span class=\"m\">16</span> temp:JLM <span class=\"m\">1672578000000</span> <span class=\"m\">21</span> temp:JLM <span class=\"m\">1672599600000</span> <span class=\"m\">14</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1672534800000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1672556400000</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1672578000000</span>\n</span></span><span class=\"line\"><span class=\"cl\">4<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1672599600000</span>\n</span></span><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.MADD temp:JLM <span class=\"m\">1672621200000</span> <span class=\"m\">11</span> temp:JLM <span class=\"m\">1672642800000</span> <span class=\"m\">21</span> temp:JLM <span class=\"m\">1672664400000</span> <span class=\"m\">26</span>\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1672621200000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1672642800000</span>\n</span></span><span class=\"line\"><span class=\"cl\">3<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1672664400000</span></span></span></pre></div> <p>Next, get the latest maximum daily temperature; do not report the latest, possibly partial, bucket</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.GET dailyMaxTemp:JLM\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1672531200000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"m\">21</span></span></span></pre></div> <p>Get the latest maximum daily temperature (the temperature with the highest timestamp); report the latest, possibly partial, bucket</p> <div class=\"highlight\"><pre tabindex=\"0\" class=\"chroma\"><span class=\"line\"><span class=\"cl\">127.0.0.1:6379&gt; TS.GET dailyMaxTemp:JLM LATEST\n</span></span><span class=\"line\"><span class=\"cl\">1<span class=\"o\">)</span> <span class=\"o\">(</span>integer<span class=\"o\">)</span> <span class=\"m\">1672617600000</span>\n</span></span><span class=\"line\"><span class=\"cl\">2<span class=\"o\">)</span> <span class=\"m\">26</span></span></span></pre></div> </details> <h2 id=\"see-also\">See also</h2> <p><a href=\"../ts.mget\"><code>TS.MGET</code></a></p> <h2 id=\"related-topics\">Related topics</h2> <p><a href=\"https://redis.io/docs/stack/timeseries\">RedisTimeSeries</a></p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ts.get/\" class=\"_attribution-link\">https://redis.io/commands/ts.get/</a>\n  </p>\n</div>\n","unwatch/index":"<h1 class=\"command-name\">UNWATCH</h1>\n<pre>UNWATCH</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">UNWATCH</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> <code>@transaction</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Flushes all the previously watched keys for a <a href=\"https://redis.io/topics/transactions\">transaction</a>.</p> <p>If you call <a href=\"../exec\"><code>EXEC</code></a> or <a href=\"../discard\"><code>DISCARD</code></a>, there's no need to manually call <code>UNWATCH</code>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: always <code>OK</code>.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/unwatch/\" class=\"_attribution-link\">https://redis.io/commands/unwatch/</a>\n  </p>\n</div>\n","watch/index":"<h1 class=\"command-name\">WATCH</h1>\n<pre>WATCH</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">WATCH key [key ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) for every key.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> <code>@transaction</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Marks the given keys to be watched for conditional execution of a <a href=\"https://redis.io/topics/transactions\">transaction</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: always <code>OK</code>.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/watch/\" class=\"_attribution-link\">https://redis.io/commands/watch/</a>\n  </p>\n</div>\n","xautoclaim/index":"<h1 class=\"command-name\">XAUTOCLAIM</h1>\n<pre>XAUTOCLAIM</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">XAUTOCLAIM key group consumer min-idle-time start [COUNTcount]\n  [JUSTID]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) if COUNT is small.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@stream</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command transfers ownership of pending stream entries that match the specified criteria. Conceptually, <code>XAUTOCLAIM</code> is equivalent to calling <a href=\"../xpending\"><code>XPENDING</code></a> and then <a href=\"../xclaim\"><code>XCLAIM</code></a>, but provides a more straightforward way to deal with message delivery failures via <a href=\"../scan\"><code>SCAN</code></a>-like semantics.</p> <p>Like <a href=\"../xclaim\"><code>XCLAIM</code></a>, the command operates on the stream entries at <code>&lt;key&gt;</code> and in the context of the provided <code>&lt;group&gt;</code>. It transfers ownership to <code>&lt;consumer&gt;</code> of messages pending for more than <code>&lt;min-idle-time&gt;</code> milliseconds and having an equal or greater ID than <code>&lt;start&gt;</code>.</p> <p>The optional <code>&lt;count&gt;</code> argument, which defaults to 100, is the upper limit of the number of entries that the command attempts to claim. Internally, the command begins scanning the consumer group's Pending Entries List (PEL) from <code>&lt;start&gt;</code> and filters out entries having an idle time less than or equal to <code>&lt;min-idle-time&gt;</code>. The maximum number of pending entries that the command scans is the product of multiplying <code>&lt;count&gt;</code>'s value by 10 (hard-coded). It is possible, therefore, that the number of entries claimed will be less than the specified value.</p> <p>The optional <code>JUSTID</code> argument changes the reply to return just an array of IDs of messages successfully claimed, without returning the actual message. Using this option means the retry counter is not incremented.</p> <p>The command returns the claimed entries as an array. It also returns a stream ID intended for cursor-like use as the <code>&lt;start&gt;</code> argument for its subsequent call. When there are no remaining PEL entries, the command returns the special <code>0-0</code> ID to signal completion. However, note that you may want to continue calling <code>XAUTOCLAIM</code> even after the scan is complete with the <code>0-0</code> as <code>&lt;start&gt;</code> ID, because enough time passed, so older pending entries may now be eligible for claiming.</p> <p>Note that only messages that are idle longer than <code>&lt;min-idle-time&gt;</code> are claimed, and claiming a message resets its idle time. This ensures that only a single consumer can successfully claim a given pending message at a specific instant of time and trivially reduces the probability of processing the same message multiple times.</p> <p>While iterating the PEL, if <code>XAUTOCLAIM</code> stumbles upon a message which doesn't exist in the stream anymore (either trimmed or deleted by <a href=\"../xdel\"><code>XDEL</code></a>) it does not claim it, and deletes it from the PEL in which it was found. This feature was introduced in Redis 7.0. These message IDs are returned to the caller as a part of <code>XAUTOCLAIM</code>s reply.</p> <p>Lastly, claiming a message with <code>XAUTOCLAIM</code> also increments the attempted deliveries count for that message, unless the <code>JUSTID</code> option has been specified (which only delivers the message ID, not the message itself). Messages that cannot be processed for some reason - for example, because consumers systematically crash when processing them - will exhibit high attempted delivery counts that can be detected by monitoring.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>, specifically:</p> <p>An array with three elements:</p> <ol> <li>A stream ID to be used as the <code>&lt;start&gt;</code> argument for the next call to <code>XAUTOCLAIM</code>.</li> <li>An array containing all the successfully claimed messages in the same format as <a href=\"../xrange\"><code>XRANGE</code></a>.</li> <li>An array containing message IDs that no longer exist in the stream, and were deleted from the PEL in which they were found.</li> </ol> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; XAUTOCLAIM mystream mygroup Alice 3600000 0-0 COUNT 25\n1) \"0-0\"\n2) 1) 1) \"1609338752495-0\"\n      2) 1) \"field\"\n         2) \"value\"\n3) (empty array)\n</pre>\n<p>In the above example, we attempt to claim up to 25 entries that are pending and idle (not having been acknowledged or claimed) for at least an hour, starting at the stream's beginning. The consumer \"Alice\" from the \"mygroup\" group acquires ownership of these messages. Note that the stream ID returned in the example is <code>0-0</code>, indicating that the entire stream was scanned. We can also see that <code>XAUTOCLAIM</code> did not stumble upon any deleted messages (the third reply element is an empty array).</p> <h2>History</h2> <ul> <li>Starting with Redis version 7.0.0: Added an element to the reply array, containing deleted entries the command cleared from the PEL</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/xautoclaim/\" class=\"_attribution-link\">https://redis.io/commands/xautoclaim/</a>\n  </p>\n</div>\n","ttl/index":"<h1 class=\"command-name\">TTL</h1>\n<pre>TTL</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">TTL key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the remaining time to live of a key that has a timeout. This introspection capability allows a Redis client to check how many seconds a given key will continue to be part of the dataset.</p> <p>In Redis 2.6 or older the command returns <code>-1</code> if the key does not exist or if the key exist but has no associated expire.</p> <p>Starting with Redis 2.8 the return value in case of error changed:</p> <ul> <li>The command returns <code>-2</code> if the key does not exist.</li> <li>The command returns <code>-1</code> if the key exists but has no associated expire.</li> </ul> <p>See also the <a href=\"../pttl\"><code>PTTL</code></a> command that returns the same information with milliseconds resolution (Only available in Redis 2.6 or greater).</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: TTL in seconds, or a negative value in order to signal an error (see the description above).</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET mykey \"Hello\"\nEXPIRE mykey 10\nTTL mykey\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 2.8.0: Added the -2 reply.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/ttl/\" class=\"_attribution-link\">https://redis.io/commands/ttl/</a>\n  </p>\n</div>\n","xack/index":"<h1 class=\"command-name\">XACK</h1>\n<pre>XACK</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">XACK key group id [id ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) for each message ID processed.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@stream</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>XACK</code> command removes one or multiple messages from the <em>Pending Entries List</em> (PEL) of a stream consumer group. A message is pending, and as such stored inside the PEL, when it was delivered to some consumer, normally as a side effect of calling <a href=\"../xreadgroup\"><code>XREADGROUP</code></a>, or when a consumer took ownership of a message calling <a href=\"../xclaim\"><code>XCLAIM</code></a>. The pending message was delivered to some consumer but the server is yet not sure it was processed at least once. So new calls to <a href=\"../xreadgroup\"><code>XREADGROUP</code></a> to grab the messages history for a consumer (for instance using an ID of 0), will return such message. Similarly the pending message will be listed by the <a href=\"../xpending\"><code>XPENDING</code></a> command, that inspects the PEL.</p> <p>Once a consumer <em>successfully</em> processes a message, it should call <code>XACK</code> so that such message does not get processed again, and as a side effect, the PEL entry about this message is also purged, releasing memory from the Redis server.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, specifically:</p> <p>The command returns the number of messages successfully acknowledged. Certain message IDs may no longer be part of the PEL (for example because they have already been acknowledged), and XACK will not count them as successfully acknowledged.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">redis&gt; XACK mystream mygroup 1526569495631-0\n(integer) 1\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/xack/\" class=\"_attribution-link\">https://redis.io/commands/xack/</a>\n  </p>\n</div>\n","xadd/index":"<h1 class=\"command-name\">XADD</h1>\n<pre>XADD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">XADD key [NOMKSTREAM] [&lt;MAXLEN | MINID&gt; [= | ~] threshold\n  [LIMITcount]] &lt;* | id&gt; field value [field value ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) when adding a new entry, O(N) when trimming where N being the number of entries evicted.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@stream</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Appends the specified stream entry to the stream at the specified key. If the key does not exist, as a side effect of running this command the key is created with a stream value. The creation of stream's key can be disabled with the <code>NOMKSTREAM</code> option.</p> <p>An entry is composed of a list of field-value pairs. The field-value pairs are stored in the same order they are given by the user. Commands that read the stream, such as <a href=\"../xrange\"><code>XRANGE</code></a> or <a href=\"../xread\"><code>XREAD</code></a>, are guaranteed to return the fields and values exactly in the same order they were added by <code>XADD</code>.</p> <p><code>XADD</code> is the <em>only Redis command</em> that can add data to a stream, but there are other commands, such as <a href=\"../xdel\"><code>XDEL</code></a> and <a href=\"../xtrim\"><code>XTRIM</code></a>, that are able to remove data from a stream.</p> <h2 id=\"specifying-a-stream-id-as-an-argument\">Specifying a Stream ID as an argument</h2> <p>A stream entry ID identifies a given entry inside a stream.</p> <p>The <code>XADD</code> command will auto-generate a unique ID for you if the ID argument specified is the <code>*</code> character (asterisk ASCII character). However, while useful only in very rare cases, it is possible to specify a well-formed ID, so that the new entry will be added exactly with the specified ID.</p> <p>IDs are specified by two numbers separated by a <code>-</code> character:</p> <pre>1526919030474-55\n</pre> <p>Both quantities are 64-bit numbers. When an ID is auto-generated, the first part is the Unix time in milliseconds of the Redis instance generating the ID. The second part is just a sequence number and is used in order to distinguish IDs generated in the same millisecond.</p> <p>You can also specify an incomplete ID, that consists only of the milliseconds part, which is interpreted as a zero value for sequence part. To have only the sequence part automatically generated, specify the milliseconds part followed by the <code>-</code> separator and the <code>*</code> character:</p> <pre tabindex=\"0\">&gt; XADD mystream 1526919030474-55 message \"Hello,\"\n\"1526919030474-55\"\n&gt; XADD mystream 1526919030474-* message \" World!\"\n\"1526919030474-56\"\n</pre>\n<p>IDs are guaranteed to be always incremental: If you compare the ID of the entry just inserted it will be greater than any other past ID, so entries are totally ordered inside a stream. In order to guarantee this property, if the current top ID in the stream has a time greater than the current local time of the instance, the top entry time will be used instead, and the sequence part of the ID incremented. This may happen when, for instance, the local clock jumps backward, or if after a failover the new master has a different absolute time.</p> <p>When a user specified an explicit ID to <code>XADD</code>, the minimum valid ID is <code>0-1</code>, and the user <em>must</em> specify an ID which is greater than any other ID currently inside the stream, otherwise the command will fail and return an error. Usually resorting to specific IDs is useful only if you have another system generating unique IDs (for instance an SQL table) and you really want the Redis stream IDs to match the one of this other system.</p> <h2 id=\"capped-streams\">Capped streams</h2> <p><code>XADD</code> incorporates the same semantics as the <a href=\"../xtrim\"><code>XTRIM</code></a> command - refer to its documentation page for more information. This allows adding new entries and keeping the stream's size in check with a single call to <code>XADD</code>, effectively capping the stream with an arbitrary threshold. Although exact trimming is possible and is the default, due to the internal representation of steams it is more efficient to add an entry and trim stream with <code>XADD</code> using <strong>almost exact</strong> trimming (the <code>~</code> argument).</p> <p>For example, calling <code>XADD</code> in the following form:</p> <pre>XADD mystream MAXLEN ~ 1000 * ... entry fields here ...\n</pre> <p>Will add a new entry but will also evict old entries so that the stream will contain only 1000 entries, or at most a few tens more.</p> <h2 id=\"additional-information-about-streams\">Additional information about streams</h2> <p>For further information about Redis streams please check our <a href=\"https://redis.io/topics/streams-intro\">introduction to Redis Streams document</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>, specifically:</p> <p>The command returns the ID of the added entry. The ID is the one auto-generated if <code>*</code> is passed as ID argument, otherwise the command just returns the same ID specified by the user during insertion.</p> <p>The command returns a <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Null reply</a> when used with the <code>NOMKSTREAM</code> option and the key doesn't exist.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nXADD mystream * name Sara surname OConnor\nXADD mystream * field1 value1 field2 value2 field3 value3\nXLEN mystream\nXRANGE mystream - +\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 6.2.0: Added the <code>NOMKSTREAM</code> option, <code>MINID</code> trimming strategy and the <code>LIMIT</code> option.</li> <li>Starting with Redis version 7.0.0: Added support for the <code>&lt;ms&gt;-*</code> explicit ID form.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/xadd/\" class=\"_attribution-link\">https://redis.io/commands/xadd/</a>\n  </p>\n</div>\n","unlink/index":"<h1 class=\"command-name\">UNLINK</h1>\n<pre>UNLINK</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">UNLINK key [key ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>4.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) for each key removed regardless of its size. Then the command does O(N) work in a different thread in order to reclaim memory, where N is the number of allocations the deleted objects where composed of.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@keyspace</code><span class=\"mr-1 last:hidden\">,</span> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command is very similar to <a href=\"../del\"><code>DEL</code></a>: it removes the specified keys. Just like <a href=\"../del\"><code>DEL</code></a> a key is ignored if it does not exist. However the command performs the actual memory reclaiming in a different thread, so it is not blocking, while <a href=\"../del\"><code>DEL</code></a> is. This is where the command name comes from: the command just <strong>unlinks</strong> the keys from the keyspace. The actual removal will happen later asynchronously.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: The number of keys that were unlinked.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nSET key1 \"Hello\"\nSET key2 \"World\"\nUNLINK key1 key2 key3\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/unlink/\" class=\"_attribution-link\">https://redis.io/commands/unlink/</a>\n  </p>\n</div>\n","xclaim/index":"<h1 class=\"command-name\">XCLAIM</h1>\n<pre>XCLAIM</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">XCLAIM key group consumer min-idle-time id [id ...] [IDLEms]\n  [TIMEunix-time-milliseconds] [RETRYCOUNTcount] [FORCE] [JUSTID]\n  [LASTIDlastid]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log N) with N being the number of messages in the PEL of the consumer group.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@stream</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>In the context of a stream consumer group, this command changes the ownership of a pending message, so that the new owner is the consumer specified as the command argument. Normally this is what happens:</p> <ol> <li>There is a stream with an associated consumer group.</li> <li>Some consumer A reads a message via <a href=\"../xreadgroup\"><code>XREADGROUP</code></a> from a stream, in the context of that consumer group.</li> <li>As a side effect a pending message entry is created in the Pending Entries List (PEL) of the consumer group: it means the message was delivered to a given consumer, but it was not yet acknowledged via <a href=\"../xack\"><code>XACK</code></a>.</li> <li>Then suddenly that consumer fails forever.</li> <li>Other consumers may inspect the list of pending messages, that are stale for quite some time, using the <a href=\"../xpending\"><code>XPENDING</code></a> command. In order to continue processing such messages, they use <code>XCLAIM</code> to acquire the ownership of the message and continue. Consumers can also use the <a href=\"../xautoclaim\"><code>XAUTOCLAIM</code></a> command to automatically scan and claim stale pending messages.</li> </ol> <p>This dynamic is clearly explained in the <a href=\"https://redis.io/topics/streams-intro\">Stream intro documentation</a>.</p> <p>Note that the message is claimed only if its idle time is greater than the minimum idle time we specify when calling <code>XCLAIM</code>. Because as a side effect <code>XCLAIM</code> will also reset the idle time (since this is a new attempt at processing the message), two consumers trying to claim a message at the same time will never both succeed: only one will successfully claim the message. This avoids that we process a given message multiple times in a trivial way (yet multiple processing is possible and unavoidable in the general case).</p> <p>Moreover, as a side effect, <code>XCLAIM</code> will increment the count of attempted deliveries of the message unless the <code>JUSTID</code> option has been specified (which only delivers the message ID, not the message itself). In this way messages that cannot be processed for some reason, for instance because the consumers crash attempting to process them, will start to have a larger counter and can be detected inside the system.</p> <p><code>XCLAIM</code> will not claim a message in the following cases:</p> <ol> <li>The message doesn't exist in the group PEL (i.e. it was never read by any consumer)</li> <li>The message exists in the group PEL but not in the stream itself (i.e. the message was read but never acknowledged, and then was deleted from the stream, either by trimming or by <a href=\"../xdel\"><code>XDEL</code></a>)</li> </ol> <p>In both cases the reply will not contain a corresponding entry to that message (i.e. the length of the reply array may be smaller than the number of IDs provided to <code>XCLAIM</code>). In the latter case, the message will also be deleted from the PEL in which it was found. This feature was introduced in Redis 7.0.</p> <h2 id=\"command-options\">Command options</h2> <p>The command has multiple options, however most are mainly for internal use in order to transfer the effects of <code>XCLAIM</code> or other commands to the AOF file and to propagate the same effects to the replicas, and are unlikely to be useful to normal users:</p> <ol> <li>\n<code>IDLE &lt;ms&gt;</code>: Set the idle time (last time it was delivered) of the message. If IDLE is not specified, an IDLE of 0 is assumed, that is, the time count is reset because the message has now a new owner trying to process it.</li> <li>\n<code>TIME &lt;ms-unix-time&gt;</code>: This is the same as IDLE but instead of a relative amount of milliseconds, it sets the idle time to a specific Unix time (in milliseconds). This is useful in order to rewrite the AOF file generating <code>XCLAIM</code> commands.</li> <li>\n<code>RETRYCOUNT &lt;count&gt;</code>: Set the retry counter to the specified value. This counter is incremented every time a message is delivered again. Normally <code>XCLAIM</code> does not alter this counter, which is just served to clients when the XPENDING command is called: this way clients can detect anomalies, like messages that are never processed for some reason after a big number of delivery attempts.</li> <li>\n<code>FORCE</code>: Creates the pending message entry in the PEL even if certain specified IDs are not already in the PEL assigned to a different client. However the message must be exist in the stream, otherwise the IDs of non existing messages are ignored.</li> <li>\n<code>JUSTID</code>: Return just an array of IDs of messages successfully claimed, without returning the actual message. Using this option means the retry counter is not incremented.</li> </ol> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>, specifically:</p> <p>The command returns all the messages successfully claimed, in the same format as <a href=\"../xrange\"><code>XRANGE</code></a>. However if the <code>JUSTID</code> option was specified, only the message IDs are reported, without including the actual message.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; XCLAIM mystream mygroup Alice 3600000 1526569498055-0\n1) 1) 1526569498055-0\n   2) 1) \"message\"\n      2) \"orange\"\n</pre>\n<p>In the above example we claim the message with ID <code>1526569498055-0</code>, only if the message is idle for at least one hour without the original consumer or some other consumer making progresses (acknowledging or claiming it), and assigns the ownership to the consumer <code>Alice</code>.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/xclaim/\" class=\"_attribution-link\">https://redis.io/commands/xclaim/</a>\n  </p>\n</div>\n","xdel/index":"<h1 class=\"command-name\">XDEL</h1>\n<pre>XDEL</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">XDEL key id [id ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) for each single item to delete in the stream, regardless of the stream size.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@stream</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Removes the specified entries from a stream, and returns the number of entries deleted. This number may be less than the number of IDs passed to the command in the case where some of the specified IDs do not exist in the stream.</p> <p>Normally you may think at a Redis stream as an append-only data structure, however Redis streams are represented in memory, so we are also able to delete entries. This may be useful, for instance, in order to comply with certain privacy policies.</p> <h2 id=\"understanding-the-low-level-details-of-entries-deletion\">Understanding the low level details of entries deletion</h2> <p>Redis streams are represented in a way that makes them memory efficient: a radix tree is used in order to index macro-nodes that pack linearly tens of stream entries. Normally what happens when you delete an entry from a stream is that the entry is not <em>really</em> evicted, it just gets marked as deleted.</p> <p>Eventually if all the entries in a macro-node are marked as deleted, the whole node is destroyed and the memory reclaimed. This means that if you delete a large amount of entries from a stream, for instance more than 50% of the entries appended to the stream, the memory usage per entry may increment, since what happens is that the stream will become fragmented. However the stream performance will remain the same.</p> <p>In future versions of Redis it is possible that we'll trigger a node garbage collection in case a given macro-node reaches a given amount of deleted entries. Currently with the usage we anticipate for this data structure, it is not a good idea to add such complexity.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of entries actually deleted.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; XADD mystream * a 1\n1538561698944-0\n&gt; XADD mystream * b 2\n1538561700640-0\n&gt; XADD mystream * c 3\n1538561701744-0\n&gt; XDEL mystream 1538561700640-0\n(integer) 1\n127.0.0.1:6379&gt; XRANGE mystream - +\n1) 1) 1538561698944-0\n   2) 1) \"a\"\n      2) \"1\"\n2) 1) 1538561701744-0\n   2) 1) \"c\"\n      2) \"3\"\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/xdel/\" class=\"_attribution-link\">https://redis.io/commands/xdel/</a>\n  </p>\n</div>\n","xgroup-createconsumer/index":"<h1 class=\"command-name\">XGROUP</h1>\n<pre>XGROUP CREATECONSUMER</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">XGROUP CREATECONSUMER key group consumer</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@stream</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Create a consumer named <code>&lt;consumername&gt;</code> in the consumer group <code>&lt;groupname&gt;</code> of the stream that's stored at <code>&lt;key&gt;</code>.</p> <p>Consumers are also created automatically whenever an operation, such as <a href=\"../xreadgroup\"><code>XREADGROUP</code></a>, references a consumer that doesn't exist. This is valid for <a href=\"../xreadgroup\"><code>XREADGROUP</code></a> only when there is data in the stream.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of created consumers (0 or 1)</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/xgroup-createconsumer/\" class=\"_attribution-link\">https://redis.io/commands/xgroup-createconsumer/</a>\n  </p>\n</div>\n","xgroup-create/index":"<h1 class=\"command-name\">XGROUP</h1>\n<pre>XGROUP CREATE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">XGROUP CREATE key group &lt;id | $&gt; [MKSTREAM]\n  [ENTRIESREADentries-read]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@stream</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Create a new consumer group uniquely identified by <code>&lt;groupname&gt;</code> for the stream stored at <code>&lt;key&gt;</code></p> <p>Every group has a unique name in a given stream. When a consumer group with the same name already exists, the command returns a <code>-BUSYGROUP</code> error.</p> <p>The command's <code>&lt;id&gt;</code> argument specifies the last delivered entry in the stream from the new group's perspective. The special ID <code>$</code> is the ID of the last entry in the stream, but you can substitute it with any valid ID.</p> <p>For example, if you want the group's consumers to fetch the entire stream from the beginning, use zero as the starting ID for the consumer group:</p> <pre>XGROUP CREATE mystream mygroup 0\n</pre> <p>By default, the <code>XGROUP CREATE</code> command expects that the target stream exists, and returns an error when it doesn't. If a stream does not exist, you can create it automatically with length of 0 by using the optional <code>MKSTREAM</code> subcommand as the last argument after the <code>&lt;id&gt;</code>:</p> <pre>XGROUP CREATE mystream mygroup $ MKSTREAM\n</pre> <p>To enable consumer group lag tracking, specify the optional <code>entries_read</code> named argument with an arbitrary ID. An arbitrary ID is any ID that isn't the ID of the stream's first entry, last entry, or zero (\"0-0\") ID. Use it to find out how many entries are between the arbitrary ID (excluding it) and the stream's last entry. Set the <code>entries_read</code> the stream's <code>entries_added</code> subtracted by the number of entries.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> on success.</p> <h2>History</h2> <ul> <li>Starting with Redis version 7.0.0: Added the <code>entries_read</code> named argument.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/xgroup-create/\" class=\"_attribution-link\">https://redis.io/commands/xgroup-create/</a>\n  </p>\n</div>\n","xgroup-delconsumer/index":"<h1 class=\"command-name\">XGROUP</h1>\n<pre>XGROUP DELCONSUMER</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">XGROUP DELCONSUMER key group consumer</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@stream</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>XGROUP DELCONSUMER</code> command deletes a consumer from the consumer group.</p> <p>Sometimes it may be useful to remove old consumers since they are no longer used.</p> <p>Note, however, that any pending messages that the consumer had will become unclaimable after it was deleted. It is strongly recommended, therefore, that any pending messages are claimed or acknowledged prior to deleting the consumer from the group.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of pending messages that the consumer had before it was deleted</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/xgroup-delconsumer/\" class=\"_attribution-link\">https://redis.io/commands/xgroup-delconsumer/</a>\n  </p>\n</div>\n","xgroup-destroy/index":"<h1 class=\"command-name\">XGROUP</h1>\n<pre>XGROUP DESTROY</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">XGROUP DESTROY key group</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of entries in the group's pending entries list (PEL).</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@stream</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>XGROUP DESTROY</code> command completely destroys a consumer group.</p> <p>The consumer group will be destroyed even if there are active consumers, and pending messages, so make sure to call this command only when really needed.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of destroyed consumer groups (0 or 1)</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/xgroup-destroy/\" class=\"_attribution-link\">https://redis.io/commands/xgroup-destroy/</a>\n  </p>\n</div>\n","xrevrange/index":"<h1 class=\"command-name\">XREVRANGE</h1>\n<pre>XREVRANGE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">XREVRANGE key end start [COUNTcount]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) with N being the number of elements returned. If N is constant (e.g. always asking for the first 10 elements with COUNT), you can consider it O(1).</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@stream</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command is exactly like <a href=\"../xrange\"><code>XRANGE</code></a>, but with the notable difference of returning the entries in reverse order, and also taking the start-end range in reverse order: in <code>XREVRANGE</code> you need to state the <em>end</em> ID and later the <em>start</em> ID, and the command will produce all the element between (or exactly like) the two IDs, starting from the <em>end</em> side.</p> <p>So for instance, to get all the elements from the higher ID to the lower ID one could use:</p> <pre>XREVRANGE somestream + -\n</pre> <p>Similarly to get just the last element added into the stream it is enough to send:</p> <pre>XREVRANGE somestream + - COUNT 1\n</pre> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>, specifically:</p> <p>The command returns the entries with IDs matching the specified range, from the higher ID to the lower ID matching. The returned entries are complete, that means that the ID and all the fields they are composed are returned. Moreover the entries are returned with their fields and values in the exact same order as <a href=\"../xadd\"><code>XADD</code></a> added them.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nXADD writers * name Virginia surname Woolf\nXADD writers * name Jane surname Austen\nXADD writers * name Toni surname Morrison\nXADD writers * name Agatha surname Christie\nXADD writers * name Ngozi surname Adichie\nXLEN writers\nXREVRANGE writers + - COUNT 1\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 6.2.0: Added exclusive ranges.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/xrevrange/\" class=\"_attribution-link\">https://redis.io/commands/xrevrange/</a>\n  </p>\n</div>\n","xinfo-consumers/index":"<h1 class=\"command-name\">XINFO</h1>\n<pre>XINFO CONSUMERS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">XINFO CONSUMERS key group</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@stream</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command returns the list of consumers that belong to the <code>&lt;groupname&gt;</code> consumer group of the stream stored at <code>&lt;key&gt;</code>.</p> <p>The following information is provided for each consumer in the group:</p> <ul> <li>\n<strong>name</strong>: the consumer's name</li> <li>\n<strong>pending</strong>: the number of entries in the PEL: pending messages for the consumer, which are messages that were delivered but are yet to be acknowledged</li> <li>\n<strong>idle</strong>: the number of milliseconds that have passed since the consumer's last attempted interaction (Examples: <a href=\"../xreadgroup\"><code>XREADGROUP</code></a>, <a href=\"../xclaim\"><code>XCLAIM</code></a>, <a href=\"../xautoclaim\"><code>XAUTOCLAIM</code></a>)</li> <li>\n<strong>inactive</strong>: the number of milliseconds that have passed since the consumer's last successful interaction (Examples: <a href=\"../xreadgroup\"><code>XREADGROUP</code></a> that actually read some entries into the PEL, <a href=\"../xclaim\"><code>XCLAIM</code></a>/<a href=\"../xautoclaim\"><code>XAUTOCLAIM</code></a> that actually claimed some entries)</li> </ul> <p>@reply</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a list of consumers.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; XINFO CONSUMERS mystream mygroup\n1) 1) name\n   2) \"Alice\"\n   3) pending\n   4) (integer) 1\n   5) idle\n   6) (integer) 9104628\n   7) inactive\n   8) (integer) 18104698\n2) 1) name\n   2) \"Bob\"\n   3) pending\n   4) (integer) 1\n   5) idle\n   6) (integer) 83841983\n   7) inactive\n   8) (integer) 993841998\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 7.2.0: Added the <code>inactive</code> field.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/xinfo-consumers/\" class=\"_attribution-link\">https://redis.io/commands/xinfo-consumers/</a>\n  </p>\n</div>\n","zdiff/index":"<h1 class=\"command-name\">ZDIFF</h1>\n<pre>ZDIFF</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZDIFF numkeys key [key ...] [WITHSCORES]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(L + (N-K)log(N)) worst case where L is the total number of elements in all the sets, N is the size of the first set, and K is the size of the result set.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command is similar to <a href=\"../zdiffstore\"><code>ZDIFFSTORE</code></a>, but instead of storing the resulting sorted set, it is returned to the client.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: the result of the difference (optionally with their scores, in case the <code>WITHSCORES</code> option is given).</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD zset1 1 \"one\"\nZADD zset1 2 \"two\"\nZADD zset1 3 \"three\"\nZADD zset2 1 \"one\"\nZADD zset2 2 \"two\"\nZDIFF 2 zset1 zset2\nZDIFF 2 zset1 zset2 WITHSCORES\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zdiff/\" class=\"_attribution-link\">https://redis.io/commands/zdiff/</a>\n  </p>\n</div>\n","zincrby/index":"<h1 class=\"command-name\">ZINCRBY</h1>\n<pre>ZINCRBY</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZINCRBY key increment member</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N)) where N is the number of elements in the sorted set.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Increments the score of <code>member</code> in the sorted set stored at <code>key</code> by <code>increment</code>. If <code>member</code> does not exist in the sorted set, it is added with <code>increment</code> as its score (as if its previous score was <code>0.0</code>). If <code>key</code> does not exist, a new sorted set with the specified <code>member</code> as its sole member is created.</p> <p>An error is returned when <code>key</code> exists but does not hold a sorted set.</p> <p>The <code>score</code> value should be the string representation of a numeric value, and accepts double precision floating point numbers. It is possible to provide a negative value to decrement the score.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the new score of <code>member</code> (a double precision floating point number), represented as string.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD myzset 1 \"one\"\nZADD myzset 2 \"two\"\nZINCRBY myzset 2 \"one\"\nZRANGE myzset 0 -1 WITHSCORES\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zincrby/\" class=\"_attribution-link\">https://redis.io/commands/zincrby/</a>\n  </p>\n</div>\n","xread/index":"<h1 class=\"command-name\">XREAD</h1>\n<pre>XREAD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">XREAD [COUNTcount] [BLOCKmilliseconds] STREAMSkey [key ...] id\n  [id ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt>  <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@stream</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@blocking</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Read data from one or multiple streams, only returning entries with an ID greater than the last received ID reported by the caller. This command has an option to block if items are not available, in a similar fashion to <a href=\"../brpop\"><code>BRPOP</code></a> or <a href=\"../bzpopmin\"><code>BZPOPMIN</code></a> and others.</p> <p>Please note that before reading this page, if you are new to streams, we recommend to read <a href=\"https://redis.io/topics/streams-intro\">our introduction to Redis Streams</a>.</p> <h2 id=\"non-blocking-usage\">Non-blocking usage</h2> <p>If the <strong>BLOCK</strong> option is not used, the command is synchronous, and can be considered somewhat related to <a href=\"../xrange\"><code>XRANGE</code></a>: it will return a range of items inside streams, however it has two fundamental differences compared to <a href=\"../xrange\"><code>XRANGE</code></a> even if we just consider the synchronous usage:</p> <ul> <li>This command can be called with multiple streams if we want to read at the same time from a number of keys. This is a key feature of <code>XREAD</code> because especially when blocking with <strong>BLOCK</strong>, to be able to listen with a single connection to multiple keys is a vital feature.</li> <li>While <a href=\"../xrange\"><code>XRANGE</code></a> returns items in a range of IDs, <code>XREAD</code> is more suited in order to consume the stream starting from the first entry which is greater than any other entry we saw so far. So what we pass to <code>XREAD</code> is, for each stream, the ID of the last element that we received from that stream.</li> </ul> <p>For example, if I have two streams <code>mystream</code> and <code>writers</code>, and I want to read data from both the streams starting from the first element they contain, I could call <code>XREAD</code> like in the following example.</p> <p>Note: we use the <strong>COUNT</strong> option in the example, so that for each stream the call will return at maximum two elements per stream.</p> <pre tabindex=\"0\">&gt; XREAD COUNT 2 STREAMS mystream writers 0-0 0-0\n1) 1) \"mystream\"\n   2) 1) 1) 1526984818136-0\n         2) 1) \"duration\"\n            2) \"1532\"\n            3) \"event-id\"\n            4) \"5\"\n            5) \"user-id\"\n            6) \"7782813\"\n      2) 1) 1526999352406-0\n         2) 1) \"duration\"\n            2) \"812\"\n            3) \"event-id\"\n            4) \"9\"\n            5) \"user-id\"\n            6) \"388234\"\n2) 1) \"writers\"\n   2) 1) 1) 1526985676425-0\n         2) 1) \"name\"\n            2) \"Virginia\"\n            3) \"surname\"\n            4) \"Woolf\"\n      2) 1) 1526985685298-0\n         2) 1) \"name\"\n            2) \"Jane\"\n            3) \"surname\"\n            4) \"Austen\"\n</pre>\n<p>The <strong>STREAMS</strong> option is mandatory and MUST be the final option because such option gets a variable length of argument in the following format:</p> <pre>STREAMS key_1 key_2 key_3 ... key_N ID_1 ID_2 ID_3 ... ID_N\n</pre> <p>So we start with a list of keys, and later continue with all the associated IDs, representing <em>the last ID we received for that stream</em>, so that the call will serve us only greater IDs from the same stream.</p> <p>For instance in the above example, the last items that we received for the stream <code>mystream</code> has ID <code>1526999352406-0</code>, while for the stream <code>writers</code> has the ID <code>1526985685298-0</code>.</p> <p>To continue iterating the two streams I'll call:</p> <pre tabindex=\"0\">&gt; XREAD COUNT 2 STREAMS mystream writers 1526999352406-0 1526985685298-0\n1) 1) \"mystream\"\n   2) 1) 1) 1526999626221-0\n         2) 1) \"duration\"\n            2) \"911\"\n            3) \"event-id\"\n            4) \"7\"\n            5) \"user-id\"\n            6) \"9488232\"\n2) 1) \"writers\"\n   2) 1) 1) 1526985691746-0\n         2) 1) \"name\"\n            2) \"Toni\"\n            3) \"surname\"\n            4) \"Morrison\"\n      2) 1) 1526985712947-0\n         2) 1) \"name\"\n            2) \"Agatha\"\n            3) \"surname\"\n            4) \"Christie\"\n</pre>\n<p>And so forth. Eventually, the call will not return any item, but just an empty array, then we know that there is nothing more to fetch from our stream (and we would have to retry the operation, hence this command also supports a blocking mode).</p> <h2 id=\"incomplete-ids\">Incomplete IDs</h2> <p>To use incomplete IDs is valid, like it is valid for <a href=\"../xrange\"><code>XRANGE</code></a>. However here the sequence part of the ID, if missing, is always interpreted as zero, so the command:</p> <pre tabindex=\"0\">&gt; XREAD COUNT 2 STREAMS mystream writers 0 0\n</pre>\n<p>is exactly equivalent to</p> <pre tabindex=\"0\">&gt; XREAD COUNT 2 STREAMS mystream writers 0-0 0-0\n</pre>\n<h2 id=\"blocking-for-data\">Blocking for data</h2> <p>In its synchronous form, the command can get new data as long as there are more items available. However, at some point, we'll have to wait for producers of data to use <a href=\"../xadd\"><code>XADD</code></a> to push new entries inside the streams we are consuming. In order to avoid polling at a fixed or adaptive interval the command is able to block if it could not return any data, according to the specified streams and IDs, and automatically unblock once one of the requested keys accept data.</p> <p>It is important to understand that this command <em>fans out</em> to all the clients that are waiting for the same range of IDs, so every consumer will get a copy of the data, unlike to what happens when blocking list pop operations are used.</p> <p>In order to block, the <strong>BLOCK</strong> option is used, together with the number of milliseconds we want to block before timing out. Normally Redis blocking commands take timeouts in seconds, however this command takes a millisecond timeout, even if normally the server will have a timeout resolution near to 0.1 seconds. This time it is possible to block for a shorter time in certain use cases, and if the server internals will improve over time, it is possible that the resolution of timeouts will improve.</p> <p>When the <strong>BLOCK</strong> command is passed, but there is data to return at least in one of the streams passed, the command is executed synchronously <em>exactly like if the BLOCK option would be missing</em>.</p> <p>This is an example of blocking invocation, where the command later returns a null reply because the timeout has elapsed without new data arriving:</p> <pre tabindex=\"0\">&gt; XREAD BLOCK 1000 STREAMS mystream 1526999626221-0\n(nil)\n</pre>\n<h2 id=\"the-special--id\">The special <code>$</code> ID.</h2> <p>When blocking sometimes we want to receive just entries that are added to the stream via <a href=\"../xadd\"><code>XADD</code></a> starting from the moment we block. In such a case we are not interested in the history of already added entries. For this use case, we would have to check the stream top element ID, and use such ID in the <code>XREAD</code> command line. This is not clean and requires to call other commands, so instead it is possible to use the special <code>$</code> ID to signal the stream that we want only the new things.</p> <p>It is <strong>very important</strong> to understand that you should use the <code>$</code> ID only for the first call to <code>XREAD</code>. Later the ID should be the one of the last reported item in the stream, otherwise you could miss all the entries that are added in between.</p> <p>This is how a typical <code>XREAD</code> call looks like in the first iteration of a consumer willing to consume only new entries:</p> <pre tabindex=\"0\">&gt; XREAD BLOCK 5000 COUNT 100 STREAMS mystream $\n</pre>\n<p>Once we get some replies, the next call will be something like:</p> <pre tabindex=\"0\">&gt; XREAD BLOCK 5000 COUNT 100 STREAMS mystream 1526999644174-3\n</pre>\n<p>And so forth.</p> <h2 id=\"how-multiple-clients-blocked-on-a-single-stream-are-served\">How multiple clients blocked on a single stream are served</h2> <p>Blocking list operations on lists or sorted sets have a <em>pop</em> behavior. Basically, the element is removed from the list or sorted set in order to be returned to the client. In this scenario you want the items to be consumed in a fair way, depending on the moment clients blocked on a given key arrived. Normally Redis uses the FIFO semantics in this use cases.</p> <p>However note that with streams this is not a problem: stream entries are not removed from the stream when clients are served, so every client waiting will be served as soon as an <a href=\"../xadd\"><code>XADD</code></a> command provides data to the stream.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>, specifically:</p> <p>The command returns an array of results: each element of the returned array is an array composed of a two element containing the key name and the entries reported for that key. The entries reported are full stream entries, having IDs and the list of all the fields and values. Field and values are guaranteed to be reported in the same order they were added by <a href=\"../xadd\"><code>XADD</code></a>.</p> <p>When <strong>BLOCK</strong> is used, on timeout a null reply is returned.</p> <p>Reading the <a href=\"https://redis.io/topics/streams-intro\">Redis Streams introduction</a> is highly suggested in order to understand more about the streams overall behavior and semantics.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/xread/\" class=\"_attribution-link\">https://redis.io/commands/xread/</a>\n  </p>\n</div>\n","xgroup-setid/index":"<h1 class=\"command-name\">XGROUP</h1>\n<pre>XGROUP SETID</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">XGROUP SETID key group &lt;id | $&gt; [ENTRIESREADentries-read]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@stream</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Set the <strong>last delivered ID</strong> for a consumer group.</p> <p>Normally, a consumer group's last delivered ID is set when the group is created with <a href=\"../xgroup-create\"><code>XGROUP CREATE</code></a>. The <code>XGROUP SETID</code> command allows modifying the group's last delivered ID, without having to delete and recreate the group. For instance if you want the consumers in a consumer group to re-process all the messages in a stream, you may want to set its next ID to 0:</p> <pre>XGROUP SETID mystream mygroup 0\n</pre> <p>The optional <code>entries_read</code> argument can be specified to enable consumer group lag tracking for an arbitrary ID. An arbitrary ID is any ID that isn't the ID of the stream's first entry, its last entry or the zero (\"0-0\") ID. This can be useful you know exactly how many entries are between the arbitrary ID (excluding it) and the stream's last entry. In such cases, the <code>entries_read</code> can be set to the stream's <code>entries_added</code> subtracted with the number of entries.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-simple-strings\">Simple string reply</a>: <code>OK</code> on success.</p> <h2>History</h2> <ul> <li>Starting with Redis version 7.0.0: Added the optional <code>entries_read</code> argument.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/xgroup-setid/\" class=\"_attribution-link\">https://redis.io/commands/xgroup-setid/</a>\n  </p>\n</div>\n","xinfo-groups/index":"<h1 class=\"command-name\">XINFO</h1>\n<pre>XINFO GROUPS</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">XINFO GROUPS key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@stream</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command returns the list of all consumers groups of the stream stored at <code>&lt;key&gt;</code>.</p> <p>By default, only the following information is provided for each of the groups:</p> <ul> <li>\n<strong>name</strong>: the consumer group's name</li> <li>\n<strong>consumers</strong>: the number of consumers in the group</li> <li>\n<strong>pending</strong>: the length of the group's pending entries list (PEL), which are messages that were delivered but are yet to be acknowledged</li> <li>\n<strong>last-delivered-id</strong>: the ID of the last entry delivered the group's consumers</li> <li>\n<strong>entries-read</strong>: the logical \"read counter\" of the last entry delivered to group's consumers</li> <li>\n<strong>lag</strong>: the number of entries in the stream that are still waiting to be delivered to the group's consumers, or a NULL when that number can't be determined.</li> </ul> <h3 id=\"consumer-group-lag\">Consumer group lag</h3> <p>The lag of a given consumer group is the number of entries in the range between the group's <code>entries_read</code> and the stream's <code>entries_added</code>. Put differently, it is the number of entries that are yet to be delivered to the group's consumers.</p> <p>The values and trends of this metric are helpful in making scaling decisions about the consumer group. You can address high lag values by adding more consumers to the group, whereas low values may indicate that you can remove consumers from the group to scale it down.</p> <p>Redis reports the lag of a consumer group by keeping two counters: the number of all entries added to the stream and the number of logical reads made by the consumer group. The lag is the difference between these two.</p> <p>The stream's counter (the <code>entries_added</code> field of the <a href=\"../xinfo-stream\"><code>XINFO STREAM</code></a> command) is incremented by one with every <a href=\"../xadd\"><code>XADD</code></a> and counts all of the entries added to the stream during its lifetime.</p> <p>The consumer group's counter, <code>entries_read</code>, is the logical counter of entries that the group had read. It is important to note that this counter is only a heuristic rather than an accurate counter, and therefore the use of the term \"logical\". The counter attempts to reflect the number of entries that the group <strong>should have read</strong> to get to its current <code>last-delivered-id</code>. The <code>entries_read</code> counter is accurate only in a perfect world, where a consumer group starts at the stream's first entry and processes all of its entries (i.e., no entries deleted before processing).</p> <p>There are two special cases in which this mechanism is unable to report the lag:</p> <ol> <li>A consumer group is created or set with an arbitrary last delivered ID (the <a href=\"../xgroup-create\"><code>XGROUP CREATE</code></a> and <a href=\"../xgroup-setid\"><code>XGROUP SETID</code></a> commands, respectively). An arbitrary ID is any ID that isn't the ID of the stream's first entry, its last entry or the zero (\"0-0\") ID.</li> <li>One or more entries between the group's <code>last-delivered-id</code> and the stream's <code>last-generated-id</code> were deleted (with <a href=\"../xdel\"><code>XDEL</code></a> or a trimming operation).</li> </ol> <p>In both cases, the group's read counter is considered invalid, and the returned value is set to NULL to signal that the lag isn't currently available.</p> <p>However, the lag is only temporarily unavailable. It is restored automatically during regular operation as consumers keep processing messages. Once the consumer group delivers the last message in the stream to its members, it will be set with the correct logical read counter, and tracking its lag can be resumed.</p> <p>@reply</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a list of consumer groups.</p> <h2 id=\"examples\">Examples</h2> <pre tabindex=\"0\">&gt; XINFO GROUPS mystream\n1)  1) \"name\"\n    2) \"mygroup\"\n    3) \"consumers\"\n    4) (integer) 2\n    5) \"pending\"\n    6) (integer) 2\n    7) \"last-delivered-id\"\n    8) \"1638126030001-0\"\n    9) \"entries-read\"\n   10) (integer) 2\n   11) \"lag\"\n   12) (integer) 0\n2)  1) \"name\"\n    2) \"some-other-group\"\n    3) \"consumers\"\n    4) (integer) 1\n    5) \"pending\"\n    6) (integer) 0\n    7) \"last-delivered-id\"\n    8) \"1638126028070-0\"\n    9) \"entries-read\"\n   10) (integer) 1\n   11) \"lag\"\n   12) (integer) 1\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 7.0.0: Added the <code>entries-read</code> and <code>lag</code> fields</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/xinfo-groups/\" class=\"_attribution-link\">https://redis.io/commands/xinfo-groups/</a>\n  </p>\n</div>\n","xreadgroup/index":"<h1 class=\"command-name\">XREADGROUP</h1>\n<pre>XREADGROUP</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">XREADGROUP GROUPgroup consumer [COUNTcount] [BLOCKmilliseconds]\n  [NOACK] STREAMSkey [key ...] id [id ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>For each stream mentioned: O(M) with M being the number of elements returned. If M is constant (e.g. always asking for the first 10 elements with COUNT), you can consider it O(1). On the other side when XREADGROUP blocks, XADD will pay the O(N) time in order to serve the N clients blocked on the stream getting new data.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@stream</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> <code>@blocking</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>XREADGROUP</code> command is a special version of the <a href=\"../xread\"><code>XREAD</code></a> command with support for consumer groups. Probably you will have to understand the <a href=\"../xread\"><code>XREAD</code></a> command before reading this page will makes sense.</p> <p>Moreover, if you are new to streams, we recommend to read our <a href=\"https://redis.io/topics/streams-intro\">introduction to Redis Streams</a>. Make sure to understand the concept of consumer group in the introduction so that following how this command works will be simpler.</p> <h2 id=\"consumer-groups-in-30-seconds\">Consumer groups in 30 seconds</h2> <p>The difference between this command and the vanilla <a href=\"../xread\"><code>XREAD</code></a> is that this one supports consumer groups.</p> <p>Without consumer groups, just using <a href=\"../xread\"><code>XREAD</code></a>, all the clients are served with all the entries arriving in a stream. Instead using consumer groups with <code>XREADGROUP</code>, it is possible to create groups of clients that consume different parts of the messages arriving in a given stream. If, for instance, the stream gets the new entries A, B, and C and there are two consumers reading via a consumer group, one client will get, for instance, the messages A and C, and the other the message B, and so forth.</p> <p>Within a consumer group, a given consumer (that is, just a client consuming messages from the stream), has to identify with a unique <em>consumer name</em>. Which is just a string.</p> <p>One of the guarantees of consumer groups is that a given consumer can only see the history of messages that were delivered to it, so a message has just a single owner. However there is a special feature called <em>message claiming</em> that allows other consumers to claim messages in case there is a non recoverable failure of some consumer. In order to implement such semantics, consumer groups require explicit acknowledgment of the messages successfully processed by the consumer, via the <a href=\"../xack\"><code>XACK</code></a> command. This is needed because the stream will track, for each consumer group, who is processing what message.</p> <p>This is how to understand if you want to use a consumer group or not:</p> <ol> <li>If you have a stream and multiple clients, and you want all the clients to get all the messages, you do not need a consumer group.</li> <li>If you have a stream and multiple clients, and you want the stream to be <em>partitioned</em> or <em>sharded</em> across your clients, so that each client will get a sub set of the messages arriving in a stream, you need a consumer group.</li> </ol> <h2 id=\"differences-between-xread-and-xreadgroup\">Differences between XREAD and XREADGROUP</h2> <p>From the point of view of the syntax, the commands are almost the same, however <code>XREADGROUP</code> <em>requires</em> a special and mandatory option:</p> <pre>GROUP &lt;group-name&gt; &lt;consumer-name&gt;\n</pre> <p>The group name is just the name of a consumer group associated to the stream. The group is created using the <a href=\"../xgroup\"><code>XGROUP</code></a> command. The consumer name is the string that is used by the client to identify itself inside the group. The consumer is auto created inside the consumer group the first time it is saw. Different clients should select a different consumer name.</p> <p>When you read with <code>XREADGROUP</code>, the server will <em>remember</em> that a given message was delivered to you: the message will be stored inside the consumer group in what is called a Pending Entries List (PEL), that is a list of message IDs delivered but not yet acknowledged.</p> <p>The client will have to acknowledge the message processing using <a href=\"../xack\"><code>XACK</code></a> in order for the pending entry to be removed from the PEL. The PEL can be inspected using the <a href=\"../xpending\"><code>XPENDING</code></a> command.</p> <p>The <code>NOACK</code> subcommand can be used to avoid adding the message to the PEL in cases where reliability is not a requirement and the occasional message loss is acceptable. This is equivalent to acknowledging the message when it is read.</p> <p>The ID to specify in the <strong>STREAMS</strong> option when using <code>XREADGROUP</code> can be one of the following two:</p> <ul> <li>The special <code>&gt;</code> ID, which means that the consumer want to receive only messages that were <em>never delivered to any other consumer</em>. It just means, give me new messages.</li> <li>Any other ID, that is, 0 or any other valid ID or incomplete ID (just the millisecond time part), will have the effect of returning entries that are pending for the consumer sending the command with IDs greater than the one provided. So basically if the ID is not <code>&gt;</code>, then the command will just let the client access its pending entries: messages delivered to it, but not yet acknowledged. Note that in this case, both <code>BLOCK</code> and <code>NOACK</code> are ignored.</li> </ul> <p>Like <a href=\"../xread\"><code>XREAD</code></a> the <code>XREADGROUP</code> command can be used in a blocking way. There are no differences in this regard.</p> <h2 id=\"what-happens-when-a-message-is-delivered-to-a-consumer\">What happens when a message is delivered to a consumer?</h2> <p>Two things:</p> <ol> <li>If the message was never delivered to anyone, that is, if we are talking about a new message, then a PEL (Pending Entries List) is created.</li> <li>If instead the message was already delivered to this consumer, and it is just re-fetching the same message again, then the <em>last delivery counter</em> is updated to the current time, and the <em>number of deliveries</em> is incremented by one. You can access those message properties using the <a href=\"../xpending\"><code>XPENDING</code></a> command.</li> </ol> <h2 id=\"usage-example\">Usage example</h2> <p>Normally you use the command like that in order to get new messages and process them. In pseudo-code:</p> <pre tabindex=\"0\">WHILE true\n    entries = XREADGROUP GROUP $GroupName $ConsumerName BLOCK 2000 COUNT 10 STREAMS mystream &gt;\n    if entries == nil\n        puts \"Timeout... try again\"\n        CONTINUE\n    end\n\n    FOREACH entries AS stream_entries\n        FOREACH stream_entries as message\n            process_message(message.id,message.fields)\n\n            # ACK the message as processed\n            XACK mystream $GroupName message.id\n        END\n    END\nEND\n</pre>\n<p>In this way the example consumer code will fetch only new messages, process them, and acknowledge them via <a href=\"../xack\"><code>XACK</code></a>. However the example code above is not complete, because it does not handle recovering after a crash. What will happen if we crash in the middle of processing messages, is that our messages will remain in the pending entries list, so we can access our history by giving <code>XREADGROUP</code> initially an ID of 0, and performing the same loop. Once providing an ID of 0 the reply is an empty set of messages, we know that we processed and acknowledged all the pending messages: we can start to use <code>&gt;</code> as ID, in order to get the new messages and rejoin the consumers that are processing new things.</p> <p>To see how the command actually replies, please check the <a href=\"../xread\"><code>XREAD</code></a> command page.</p> <h2 id=\"what-happens-when-a-pending-message-is-deleted\">What happens when a pending message is deleted?</h2> <p>Entries may be deleted from the stream due to trimming or explicit calls to <a href=\"../xdel\"><code>XDEL</code></a> at any time. By design, Redis doesn't prevent the deletion of entries that are present in the stream's PELs. When this happens, the PELs retain the deleted entries' IDs, but the actual entry payload is no longer available. Therefore, when reading such PEL entries, Redis will return a null value in place of their respective data.</p> <p>Example:</p> <pre tabindex=\"0\">&gt; XADD mystream 1 myfield mydata\n\"1-0\"\n&gt; XGROUP CREATE mystream mygroup 0\nOK\n&gt; XREADGROUP GROUP mygroup myconsumer STREAMS mystream &gt;\n1) 1) \"mystream\"\n   2) 1) 1) \"1-0\"\n         2) 1) \"myfield\"\n            2) \"mydata\"\n&gt; XDEL mystream 1-0\n(integer) 1\n&gt; XREADGROUP GROUP mygroup myconsumer STREAMS mystream 0\n1) 1) \"mystream\"\n   2) 1) 1) \"1-0\"\n         2) (nil)\n</pre>\n<h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>, specifically:</p> <p>The command returns an array of results: each element of the returned array is an array composed of a two element containing the key name and the entries reported for that key. The entries reported are full stream entries, having IDs and the list of all the fields and values. Field and values are guaranteed to be reported in the same order they were added by <a href=\"../xadd\"><code>XADD</code></a>.</p> <p>When <strong>BLOCK</strong> is used, on timeout a null reply is returned.</p> <p>Reading the <a href=\"https://redis.io/topics/streams-intro\">Redis Streams introduction</a> is highly suggested in order to understand more about the streams overall behavior and semantics.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/xreadgroup/\" class=\"_attribution-link\">https://redis.io/commands/xreadgroup/</a>\n  </p>\n</div>\n","xpending/index":"<h1 class=\"command-name\">XPENDING</h1>\n<pre>XPENDING</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">XPENDING key group [[IDLEmin-idle-time] start end count [consumer]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) with N being the number of elements returned, so asking for a small fixed number of entries per call is O(1). O(M), where M is the total number of entries scanned when used with the IDLE filter. When the command returns just the summary and the list of consumers is small, it runs in O(1) time; otherwise, an additional O(N) time for iterating every consumer.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@stream</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Fetching data from a stream via a consumer group, and not acknowledging such data, has the effect of creating <em>pending entries</em>. This is well explained in the <a href=\"../xreadgroup\"><code>XREADGROUP</code></a> command, and even better in our <a href=\"https://redis.io/topics/streams-intro\">introduction to Redis Streams</a>. The <a href=\"../xack\"><code>XACK</code></a> command will immediately remove the pending entry from the Pending Entries List (PEL) since once a message is successfully processed, there is no longer need for the consumer group to track it and to remember the current owner of the message.</p> <p>The <code>XPENDING</code> command is the interface to inspect the list of pending messages, and is as thus a very important command in order to observe and understand what is happening with a streams consumer groups: what clients are active, what messages are pending to be consumed, or to see if there are idle messages. Moreover this command, together with <a href=\"../xclaim\"><code>XCLAIM</code></a> is used in order to implement recovering of consumers that are failing for a long time, and as a result certain messages are not processed: a different consumer can claim the message and continue. This is better explained in the <a href=\"https://redis.io/topics/streams-intro\">streams intro</a> and in the <a href=\"../xclaim\"><code>XCLAIM</code></a> command page, and is not covered here.</p> <h2 id=\"summary-form-of-xpending\">Summary form of XPENDING</h2> <p>When <code>XPENDING</code> is called with just a key name and a consumer group name, it just outputs a summary about the pending messages in a given consumer group. In the following example, we create a consumer group and immediately create a pending message by reading from the group with <a href=\"../xreadgroup\"><code>XREADGROUP</code></a>.</p> <pre tabindex=\"0\">&gt; XGROUP CREATE mystream group55 0-0\nOK\n\n&gt; XREADGROUP GROUP group55 consumer-123 COUNT 1 STREAMS mystream &gt;\n1) 1) \"mystream\"\n   2) 1) 1) 1526984818136-0\n         2) 1) \"duration\"\n            2) \"1532\"\n            3) \"event-id\"\n            4) \"5\"\n            5) \"user-id\"\n            6) \"7782813\"\n</pre>\n<p>We expect the pending entries list for the consumer group <code>group55</code> to have a message right now: consumer named <code>consumer-123</code> fetched the message without acknowledging its processing. The simple <code>XPENDING</code> form will give us this information:</p> <pre tabindex=\"0\">&gt; XPENDING mystream group55\n1) (integer) 1\n2) 1526984818136-0\n3) 1526984818136-0\n4) 1) 1) \"consumer-123\"\n      2) \"1\"\n</pre>\n<p>In this form, the command outputs the total number of pending messages for this consumer group, which is one, followed by the smallest and greatest ID among the pending messages, and then list every consumer in the consumer group with at least one pending message, and the number of pending messages it has.</p> <h2 id=\"extended-form-of-xpending\">Extended form of XPENDING</h2> <p>The summary provides a good overview, but sometimes we are interested in the details. In order to see all the pending messages with more associated information we need to also pass a range of IDs, in a similar way we do it with <a href=\"../xrange\"><code>XRANGE</code></a>, and a non optional <em>count</em> argument, to limit the number of messages returned per call:</p> <pre tabindex=\"0\">&gt; XPENDING mystream group55 - + 10\n1) 1) 1526984818136-0\n   2) \"consumer-123\"\n   3) (integer) 196415\n   4) (integer) 1\n</pre>\n<p>In the extended form we no longer see the summary information, instead there is detailed information for each message in the pending entries list. For each message four attributes are returned:</p> <ol> <li>The ID of the message.</li> <li>The name of the consumer that fetched the message and has still to acknowledge it. We call it the current <em>owner</em> of the message.</li> <li>The number of milliseconds that elapsed since the last time this message was delivered to this consumer.</li> <li>The number of times this message was delivered.</li> </ol> <p>The deliveries counter, that is the fourth element in the array, is incremented when some other consumer <em>claims</em> the message with <a href=\"../xclaim\"><code>XCLAIM</code></a>, or when the message is delivered again via <a href=\"../xreadgroup\"><code>XREADGROUP</code></a>, when accessing the history of a consumer in a consumer group (see the <a href=\"../xreadgroup\"><code>XREADGROUP</code></a> page for more info).</p> <p>It is possible to pass an additional argument to the command, in order to see the messages having a specific owner:</p> <pre tabindex=\"0\">&gt; XPENDING mystream group55 - + 10 consumer-123\n</pre>\n<p>But in the above case the output would be the same, since we have pending messages only for a single consumer. However what is important to keep in mind is that this operation, filtering by a specific consumer, is not inefficient even when there are many pending messages from many consumers: we have a pending entries list data structure both globally, and for every consumer, so we can very efficiently show just messages pending for a single consumer.</p> <h2 id=\"idle-time-filter\">Idle time filter</h2> <p>It is also possible to filter pending stream entries by their idle-time, given in milliseconds (useful for <a href=\"../xclaim\"><code>XCLAIM</code></a>ing entries that have not been processed for some time):</p> <pre tabindex=\"0\">&gt; XPENDING mystream group55 IDLE 9000 - + 10\n&gt; XPENDING mystream group55 IDLE 9000 - + 10 consumer-123\n</pre>\n<p>The first case will return the first 10 (or less) PEL entries of the entire group that are idle for over 9 seconds, whereas in the second case only those of <code>consumer-123</code>.</p> <h2 id=\"exclusive-ranges-and-iterating-the-pel\">Exclusive ranges and iterating the PEL</h2> <p>The <code>XPENDING</code> command allows iterating over the pending entries just like <a href=\"../xrange\"><code>XRANGE</code></a> and <a href=\"../xrevrange\"><code>XREVRANGE</code></a> allow for the stream's entries. You can do this by prefixing the ID of the last-read pending entry with the <code>(</code> character that denotes an open (exclusive) range, and proving it to the subsequent call to the command.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>, specifically:</p> <p>The command returns data in different format depending on the way it is called, as previously explained in this page. However the reply is always an array of items.</p> <h2>History</h2> <ul> <li>Starting with Redis version 6.2.0: Added the <code>IDLE</code> option and exclusive range intervals.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/xpending/\" class=\"_attribution-link\">https://redis.io/commands/xpending/</a>\n  </p>\n</div>\n","zintercard/index":"<h1 class=\"command-name\">ZINTERCARD</h1>\n<pre>ZINTERCARD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZINTERCARD numkeys key [key ...] [LIMITlimit]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N*K) worst case with N being the smallest input sorted set, K being the number of input sorted sets.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command is similar to <a href=\"../zinter\"><code>ZINTER</code></a>, but instead of returning the result set, it returns just the cardinality of the result.</p> <p>Keys that do not exist are considered to be empty sets. With one of the keys being an empty set, the resulting set is also empty (since set intersection with an empty set always results in an empty set).</p> <p>By default, the command calculates the cardinality of the intersection of all given sets. When provided with the optional <code>LIMIT</code> argument (which defaults to 0 and means unlimited), if the intersection cardinality reaches limit partway through the computation, the algorithm will exit and yield limit as the cardinality. Such implementation ensures a significant speedup for queries where the limit is lower than the actual intersection cardinality.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of elements in the resulting intersection.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD zset1 1 \"one\"\nZADD zset1 2 \"two\"\nZADD zset2 1 \"one\"\nZADD zset2 2 \"two\"\nZADD zset2 3 \"three\"\nZINTER 2 zset1 zset2\nZINTERCARD 2 zset1 zset2\nZINTERCARD 2 zset1 zset2 LIMIT 1\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zintercard/\" class=\"_attribution-link\">https://redis.io/commands/zintercard/</a>\n  </p>\n</div>\n","xlen/index":"<h1 class=\"command-name\">XLEN</h1>\n<pre>XLEN</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">XLEN key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@stream</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the number of entries inside a stream. If the specified key does not exist the command returns zero, as if the stream was empty. However note that unlike other Redis types, zero-length streams are possible, so you should call <a href=\"../type\"><code>TYPE</code></a> or <a href=\"../exists\"><code>EXISTS</code></a> in order to check if a key exists or not.</p> <p>Streams are not auto-deleted once they have no entries inside (for instance after an <a href=\"../xdel\"><code>XDEL</code></a> call), because the stream may have consumer groups associated with it.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of entries of the stream at <code>key</code>.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nXADD mystream * item 1\nXADD mystream * item 2\nXADD mystream * item 3\nXLEN mystream\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/xlen/\" class=\"_attribution-link\">https://redis.io/commands/xlen/</a>\n  </p>\n</div>\n","zcard/index":"<h1 class=\"command-name\">ZCARD</h1>\n<pre>ZCARD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZCARD key</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the sorted set cardinality (number of elements) of the sorted set stored at <code>key</code>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the cardinality (number of elements) of the sorted set, or <code>0</code> if <code>key</code> does not exist.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD myzset 1 \"one\"\nZADD myzset 2 \"two\"\nZCARD myzset\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zcard/\" class=\"_attribution-link\">https://redis.io/commands/zcard/</a>\n  </p>\n</div>\n","xsetid/index":"<h1 class=\"command-name\">XSETID</h1>\n<pre>XSETID</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">XSETID key last-id [ENTRIESADDEDentries-added]\n  [MAXDELETEDIDmax-deleted-id]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@stream</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The <code>XSETID</code> command is an internal command. It is used by a Redis master to replicate the last delivered ID of streams.</p> <h2>History</h2> <ul> <li>Starting with Redis version 7.0.0: Added the <code>entries_added</code> and <code>max_deleted_entry_id</code> arguments.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/xsetid/\" class=\"_attribution-link\">https://redis.io/commands/xsetid/</a>\n  </p>\n</div>\n","zcount/index":"<h1 class=\"command-name\">ZCOUNT</h1>\n<pre>ZCOUNT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZCOUNT key min max</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N)) with N being the number of elements in the sorted set.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the number of elements in the sorted set at <code>key</code> with a score between <code>min</code> and <code>max</code>.</p> <p>The <code>min</code> and <code>max</code> arguments have the same semantic as described for <a href=\"../zrangebyscore\"><code>ZRANGEBYSCORE</code></a>.</p> <p>Note: the command has a complexity of just O(log(N)) because it uses elements ranks (see <a href=\"../zrank\"><code>ZRANK</code></a>) to get an idea of the range. Because of this there is no need to do a work proportional to the size of the range.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of elements in the specified score range.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD myzset 1 \"one\"\nZADD myzset 2 \"two\"\nZADD myzset 3 \"three\"\nZCOUNT myzset -inf +inf\nZCOUNT myzset (1 3\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zcount/\" class=\"_attribution-link\">https://redis.io/commands/zcount/</a>\n  </p>\n</div>\n","xinfo-stream/index":"<h1 class=\"command-name\">XINFO</h1>\n<pre>XINFO STREAM</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">XINFO STREAM key [FULL [COUNTcount]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@stream</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command returns information about the stream stored at <code>&lt;key&gt;</code>.</p> <p>The informative details provided by this command are:</p> <ul> <li>\n<strong>length</strong>: the number of entries in the stream (see <a href=\"../xlen\"><code>XLEN</code></a>)</li> <li>\n<strong>radix-tree-keys</strong>: the number of keys in the underlying radix data structure</li> <li>\n<strong>radix-tree-nodes</strong>: the number of nodes in the underlying radix data structure</li> <li>\n<strong>groups</strong>: the number of consumer groups defined for the stream</li> <li>\n<strong>last-generated-id</strong>: the ID of the least-recently entry that was added to the stream</li> <li>\n<strong>max-deleted-entry-id</strong>: the maximal entry ID that was deleted from the stream</li> <li>\n<strong>entries-added</strong>: the count of all entries added to the stream during its lifetime</li> <li>\n<strong>first-entry</strong>: the ID and field-value tuples of the first entry in the stream</li> <li>\n<strong>last-entry</strong>: the ID and field-value tuples of the last entry in the stream</li> </ul> <p>The optional <code>FULL</code> modifier provides a more verbose reply. When provided, the <code>FULL</code> reply includes an <strong>entries</strong> array that consists of the stream entries (ID and field-value tuples) in ascending order. Furthermore, <strong>groups</strong> is also an array, and for each of the consumer groups it consists of the information reported by <a href=\"../xinfo-groups\"><code>XINFO GROUPS</code></a> and <a href=\"../xinfo-consumers\"><code>XINFO CONSUMERS</code></a>.</p> <p>The <code>COUNT</code> option can be used to limit the number of stream and PEL entries that are returned (The first <code>&lt;count&gt;</code> entries are returned). The default <code>COUNT</code> is 10 and a <code>COUNT</code> of 0 means that all entries will be returned (execution time may be long if the stream has a lot of entries).</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: a list of informational bits</p> <h2 id=\"examples\">Examples</h2> <p>Default reply:</p> <pre tabindex=\"0\">&gt; XINFO STREAM mystream\n 1) \"length\"\n 2) (integer) 2\n 3) \"radix-tree-keys\"\n 4) (integer) 1\n 5) \"radix-tree-nodes\"\n 6) (integer) 2\n 7) \"last-generated-id\"\n 8) \"1638125141232-0\"\n 9) \"max-deleted-entry-id\"\n10) \"0-0\"\n11) \"entries-added\"\n12) (integer) 2\n13) \"groups\"\n14) (integer) 1\n15) \"first-entry\"\n16) 1) \"1638125133432-0\"\n    2) 1) \"message\"\n       2) \"apple\"\n17) \"last-entry\"\n18) 1) \"1638125141232-0\"\n    2) 1) \"message\"\n       2) \"banana\"\n</pre>\n<p>Full reply:</p> <pre tabindex=\"0\">&gt; XADD mystream * foo bar\n\"1638125133432-0\"\n&gt; XADD mystream * foo bar2\n\"1638125141232-0\"\n&gt; XGROUP CREATE mystream mygroup 0-0\nOK\n&gt; XREADGROUP GROUP mygroup Alice COUNT 1 STREAMS mystream &gt;\n1) 1) \"mystream\"\n   2) 1) 1) \"1638125133432-0\"\n         2) 1) \"foo\"\n            2) \"bar\"\n&gt; XINFO STREAM mystream FULL\n 1) \"length\"\n 2) (integer) 2\n 3) \"radix-tree-keys\"\n 4) (integer) 1\n 5) \"radix-tree-nodes\"\n 6) (integer) 2\n 7) \"last-generated-id\"\n 8) \"1638125141232-0\"\n 9) \"max-deleted-entry-id\"\n10) \"0-0\"\n11) \"entries-added\"\n12) (integer) 2\n13) \"entries\"\n14) 1) 1) \"1638125133432-0\"\n       2) 1) \"foo\"\n          2) \"bar\"\n    2) 1) \"1638125141232-0\"\n       2) 1) \"foo\"\n          2) \"bar2\"\n15) \"groups\"\n16) 1)  1) \"name\"\n        2) \"mygroup\"\n        3) \"last-delivered-id\"\n        4) \"1638125133432-0\"\n        5) \"entries-read\"\n        6) (integer) 1\n        7) \"lag\"\n        8) (integer) 1\n        9) \"pel-count\"\n       10) (integer) 1\n       11) \"pending\"\n       12) 1) 1) \"1638125133432-0\"\n              2) \"Alice\"\n              3) (integer) 1638125153423\n              4) (integer) 1\n       13) \"consumers\"\n       14) 1) 1) \"name\"\n              2) \"Alice\"\n              3) \"seen-time\"\n              4) (integer) 1638125133422\n              5) \"active-time\"\n              6) (integer) 1638125133432\n              7) \"pel-count\"\n              8) (integer) 1\n              9) \"pending\"\n              10) 1) 1) \"1638125133432-0\"\n                     2) (integer) 1638125133432\n                     3) (integer) 1\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 6.0.0: Added the <code>FULL</code> modifier.</li> <li>Starting with Redis version 7.0.0: Added the <code>max-deleted-entry-id</code>, <code>entries-added</code>, <code>recorded-first-entry-id</code>, <code>entries-read</code> and <code>lag</code> fields</li> <li>Starting with Redis version 7.2.0: Added the <code>active-time</code> field, and changed the meaning of <code>seen-time</code>.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/xinfo-stream/\" class=\"_attribution-link\">https://redis.io/commands/xinfo-stream/</a>\n  </p>\n</div>\n","xtrim/index":"<h1 class=\"command-name\">XTRIM</h1>\n<pre>XTRIM</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">XTRIM key &lt;MAXLEN | MINID&gt; [= | ~] threshold [LIMITcount]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N), with N being the number of evicted entries. Constant times are very small however, since entries are organized in macro nodes containing multiple entries that can be released with a single deallocation.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@stream</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p><code>XTRIM</code> trims the stream by evicting older entries (entries with lower IDs) if needed.</p> <p>Trimming the stream can be done using one of these strategies:</p> <ul> <li>\n<code>MAXLEN</code>: Evicts entries as long as the stream's length exceeds the specified <code>threshold</code>, where <code>threshold</code> is a positive integer.</li> <li>\n<code>MINID</code>: Evicts entries with IDs lower than <code>threshold</code>, where <code>threshold</code> is a stream ID.</li> </ul> <p>For example, this will trim the stream to exactly the latest 1000 items:</p> <pre tabindex=\"0\">XTRIM mystream MAXLEN 1000\n</pre>\n<p>Whereas in this example, all entries that have an ID lower than 649085820-0 will be evicted:</p> <pre tabindex=\"0\">XTRIM mystream MINID 649085820\n</pre>\n<p>By default, or when provided with the optional <code>=</code> argument, the command performs exact trimming.</p> <p>Depending on the strategy, exact trimming means:</p> <ul> <li>\n<code>MAXLEN</code>: the trimmed stream's length will be exactly the minimum between its original length and the specified <code>threshold</code>.</li> <li>\n<code>MINID</code>: the oldest ID in the stream will be exactly the maximum between its original oldest ID and the specified <code>threshold</code>.</li> </ul> <h2 id=\"nearly-exact-trimming\">Nearly exact trimming</h2> <p>Because exact trimming may require additional effort from the Redis server, the optional <code>~</code> argument can be provided to make it more efficient.</p> <p>For example:</p> <pre tabindex=\"0\">XTRIM mystream MAXLEN ~ 1000\n</pre>\n<p>The <code>~</code> argument between the <code>MAXLEN</code> strategy and the <code>threshold</code> means that the user is requesting to trim the stream so its length is <strong>at least</strong> the <code>threshold</code>, but possibly slightly more. In this case, Redis will stop trimming early when performance can be gained (for example, when a whole macro node in the data structure can't be removed). This makes trimming much more efficient, and it is usually what you want, although after trimming, the stream may have few tens of additional entries over the <code>threshold</code>.</p> <p>Another way to control the amount of work done by the command when using the <code>~</code>, is the <code>LIMIT</code> clause. When used, it specifies the maximal <code>count</code> of entries that will be evicted. When <code>LIMIT</code> and <code>count</code> aren't specified, the default value of 100 * the number of entries in a macro node will be implicitly used as the <code>count</code>. Specifying the value 0 as <code>count</code> disables the limiting mechanism entirely.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: The number of entries deleted from the stream.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nXADD mystream * field1 A field2 B field3 C field4 D\nXTRIM mystream MAXLEN 2\nXRANGE mystream - +\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 6.2.0: Added the <code>MINID</code> trimming strategy and the <code>LIMIT</code> option.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/xtrim/\" class=\"_attribution-link\">https://redis.io/commands/xtrim/</a>\n  </p>\n</div>\n","zinter/index":"<h1 class=\"command-name\">ZINTER</h1>\n<pre>ZINTER</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZINTER numkeys key [key ...] [WEIGHTSweight [weight ...]]\n  [AGGREGATE&lt;SUM | MIN | MAX&gt;] [WITHSCORES]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N*K)+O(M*log(M)) worst case with N being the smallest input sorted set, K being the number of input sorted sets and M being the number of elements in the resulting sorted set.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command is similar to <a href=\"../zinterstore\"><code>ZINTERSTORE</code></a>, but instead of storing the resulting sorted set, it is returned to the client.</p> <p>For a description of the <code>WEIGHTS</code> and <code>AGGREGATE</code> options, see <a href=\"../zunionstore\"><code>ZUNIONSTORE</code></a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: the result of intersection (optionally with their scores, in case the <code>WITHSCORES</code> option is given).</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD zset1 1 \"one\"\nZADD zset1 2 \"two\"\nZADD zset2 1 \"one\"\nZADD zset2 2 \"two\"\nZADD zset2 3 \"three\"\nZINTER 2 zset1 zset2\nZINTER 2 zset1 zset2 WITHSCORES\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zinter/\" class=\"_attribution-link\">https://redis.io/commands/zinter/</a>\n  </p>\n</div>\n","zadd/index":"<h1 class=\"command-name\">ZADD</h1>\n<pre>ZADD</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZADD key [NX | XX] [GT | LT] [CH] [INCR] score member [score member\n  ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N)) for each item added, where N is the number of elements in the sorted set.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Adds all the specified members with the specified scores to the sorted set stored at <code>key</code>. It is possible to specify multiple score / member pairs. If a specified member is already a member of the sorted set, the score is updated and the element reinserted at the right position to ensure the correct ordering.</p> <p>If <code>key</code> does not exist, a new sorted set with the specified members as sole members is created, like if the sorted set was empty. If the key exists but does not hold a sorted set, an error is returned.</p> <p>The score values should be the string representation of a double precision floating point number. <code>+inf</code> and <code>-inf</code> values are valid values as well.</p> <h2 id=\"zadd-options\">ZADD options</h2> <p>ZADD supports a list of options, specified after the name of the key and before the first score argument. Options are:</p> <ul> <li>\n<strong>XX</strong>: Only update elements that already exist. Don't add new elements.</li> <li>\n<strong>NX</strong>: Only add new elements. Don't update already existing elements.</li> <li>\n<strong>LT</strong>: Only update existing elements if the new score is <strong>less than</strong> the current score. This flag doesn't prevent adding new elements.</li> <li>\n<strong>GT</strong>: Only update existing elements if the new score is <strong>greater than</strong> the current score. This flag doesn't prevent adding new elements.</li> <li>\n<strong>CH</strong>: Modify the return value from the number of new elements added, to the total number of elements changed (CH is an abbreviation of <em>changed</em>). Changed elements are <strong>new elements added</strong> and elements already existing for which <strong>the score was updated</strong>. So elements specified in the command line having the same score as they had in the past are not counted. Note: normally the return value of <code>ZADD</code> only counts the number of new elements added.</li> <li>\n<strong>INCR</strong>: When this option is specified <code>ZADD</code> acts like <a href=\"../zincrby\"><code>ZINCRBY</code></a>. Only one score-element pair can be specified in this mode.</li> </ul> <p>Note: The <strong>GT</strong>, <strong>LT</strong> and <strong>NX</strong> options are mutually exclusive.</p> <h2 id=\"range-of-integer-scores-that-can-be-expressed-precisely\">Range of integer scores that can be expressed precisely</h2> <p>Redis sorted sets use a <em>double 64-bit floating point number</em> to represent the score. In all the architectures we support, this is represented as an <strong>IEEE 754 floating point number</strong>, that is able to represent precisely integer numbers between <code>-(2^53)</code> and <code>+(2^53)</code> included. In more practical terms, all the integers between -9007199254740992 and 9007199254740992 are perfectly representable. Larger integers, or fractions, are internally represented in exponential form, so it is possible that you get only an approximation of the decimal number, or of the very big integer, that you set as score.</p> <h2 id=\"sorted-sets-101\">Sorted sets 101</h2> <p>Sorted sets are sorted by their score in an ascending way. The same element only exists a single time, no repeated elements are permitted. The score can be modified both by <code>ZADD</code> that will update the element score, and as a side effect, its position on the sorted set, and by <a href=\"../zincrby\"><code>ZINCRBY</code></a> that can be used in order to update the score relatively to its previous value.</p> <p>The current score of an element can be retrieved using the <a href=\"../zscore\"><code>ZSCORE</code></a> command, that can also be used to verify if an element already exists or not.</p> <p>For an introduction to sorted sets, see the data types page on <a href=\"https://redis.io/topics/data-types#sorted-sets\">sorted sets</a>.</p> <h2 id=\"elements-with-the-same-score\">Elements with the same score</h2> <p>While the same element can't be repeated in a sorted set since every element is unique, it is possible to add multiple different elements <em>having the same score</em>. When multiple elements have the same score, they are <em>ordered lexicographically</em> (they are still ordered by score as a first key, however, locally, all the elements with the same score are relatively ordered lexicographically).</p> <p>The lexicographic ordering used is binary, it compares strings as array of bytes.</p> <p>If the user inserts all the elements in a sorted set with the same score (for example 0), all the elements of the sorted set are sorted lexicographically, and range queries on elements are possible using the command <a href=\"../zrangebylex\"><code>ZRANGEBYLEX</code></a> (Note: it is also possible to query sorted sets by range of scores using <a href=\"../zrangebyscore\"><code>ZRANGEBYSCORE</code></a>).</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, specifically:</p> <ul> <li>When used without optional arguments, the number of elements added to the sorted set (excluding score updates).</li> <li>If the <code>CH</code> option is specified, the number of elements that were changed (added or updated).</li> </ul> <p>If the <a href=\"../incr\"><code>INCR</code></a> option is specified, the return value will be <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>:</p> <ul> <li>The new score of <code>member</code> (a double precision floating point number) represented as string, or <code>nil</code> if the operation was aborted (when called with either the <code>XX</code> or the <code>NX</code> option).</li> </ul> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD myzset 1 \"one\"\nZADD myzset 1 \"uno\"\nZADD myzset 2 \"two\" 3 \"three\"\nZRANGE myzset 0 -1 WITHSCORES\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 2.4.0: Accepts multiple elements.</li> <li>Starting with Redis version 3.0.2: Added the <code>XX</code>, <code>NX</code>, <code>CH</code> and <code>INCR</code> options.</li> <li>Starting with Redis version 6.2.0: Added the <code>GT</code> and <code>LT</code> options.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zadd/\" class=\"_attribution-link\">https://redis.io/commands/zadd/</a>\n  </p>\n</div>\n","zdiffstore/index":"<h1 class=\"command-name\">ZDIFFSTORE</h1>\n<pre>ZDIFFSTORE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZDIFFSTORE destination numkeys key [key ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(L + (N-K)log(N)) worst case where L is the total number of elements in all the sets, N is the size of the first set, and K is the size of the result set.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Computes the difference between the first and all successive input sorted sets and stores the result in <code>destination</code>. The total number of input keys is specified by <code>numkeys</code>.</p> <p>Keys that do not exist are considered to be empty sets.</p> <p>If <code>destination</code> already exists, it is overwritten.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of elements in the resulting sorted set at <code>destination</code>.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD zset1 1 \"one\"\nZADD zset1 2 \"two\"\nZADD zset1 3 \"three\"\nZADD zset2 1 \"one\"\nZADD zset2 2 \"two\"\nZDIFFSTORE out 2 zset1 zset2\nZRANGE out 0 -1 WITHSCORES\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zdiffstore/\" class=\"_attribution-link\">https://redis.io/commands/zdiffstore/</a>\n  </p>\n</div>\n","zrange/index":"<h1 class=\"command-name\">ZRANGE</h1>\n<pre>ZRANGE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZRANGE key start stop [BYSCORE | BYLEX] [REV] [LIMIToffset count]\n  [WITHSCORES]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements returned.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the specified range of elements in the sorted set stored at <code>&lt;key&gt;</code>.</p> <p><code>ZRANGE</code> can perform different types of range queries: by index (rank), by the score, or by lexicographical order.</p> <p>Starting with Redis 6.2.0, this command can replace the following commands: <a href=\"../zrevrange\"><code>ZREVRANGE</code></a>, <a href=\"../zrangebyscore\"><code>ZRANGEBYSCORE</code></a>, <a href=\"../zrevrangebyscore\"><code>ZREVRANGEBYSCORE</code></a>, <a href=\"../zrangebylex\"><code>ZRANGEBYLEX</code></a> and <a href=\"../zrevrangebylex\"><code>ZREVRANGEBYLEX</code></a>.</p> <h2 id=\"common-behavior-and-options\">Common behavior and options</h2> <p>The order of elements is from the lowest to the highest score. Elements with the same score are ordered lexicographically.</p> <p>The optional <code>REV</code> argument reverses the ordering, so elements are ordered from highest to lowest score, and score ties are resolved by reverse lexicographical ordering.</p> <p>The optional <code>LIMIT</code> argument can be used to obtain a sub-range from the matching elements (similar to <em>SELECT LIMIT offset, count</em> in SQL). A negative <code>&lt;count&gt;</code> returns all elements from the <code>&lt;offset&gt;</code>. Keep in mind that if <code>&lt;offset&gt;</code> is large, the sorted set needs to be traversed for <code>&lt;offset&gt;</code> elements before getting to the elements to return, which can add up to O(N) time complexity.</p> <p>The optional <code>WITHSCORES</code> argument supplements the command's reply with the scores of elements returned. The returned list contains <code>value1,score1,...,valueN,scoreN</code> instead of <code>value1,...,valueN</code>. Client libraries are free to return a more appropriate data type (suggestion: an array with (value, score) arrays/tuples).</p> <h2 id=\"index-ranges\">Index ranges</h2> <p>By default, the command performs an index range query. The <code>&lt;start&gt;</code> and <code>&lt;stop&gt;</code> arguments represent zero-based indexes, where <code>0</code> is the first element, <code>1</code> is the next element, and so on. These arguments specify an <strong>inclusive range</strong>, so for example, <code>ZRANGE myzset 0 1</code> will return both the first and the second element of the sorted set.</p> <p>The indexes can also be negative numbers indicating offsets from the end of the sorted set, with <code>-1</code> being the last element of the sorted set, <code>-2</code> the penultimate element, and so on.</p> <p>Out of range indexes do not produce an error.</p> <p>If <code>&lt;start&gt;</code> is greater than either the end index of the sorted set or <code>&lt;stop&gt;</code>, an empty list is returned.</p> <p>If <code>&lt;stop&gt;</code> is greater than the end index of the sorted set, Redis will use the last element of the sorted set.</p> <h2 id=\"score-ranges\">Score ranges</h2> <p>When the <code>BYSCORE</code> option is provided, the command behaves like <a href=\"../zrangebyscore\"><code>ZRANGEBYSCORE</code></a> and returns the range of elements from the sorted set having scores equal or between <code>&lt;start&gt;</code> and <code>&lt;stop&gt;</code>.</p> <p><code>&lt;start&gt;</code> and <code>&lt;stop&gt;</code> can be <code>-inf</code> and <code>+inf</code>, denoting the negative and positive infinities, respectively. This means that you are not required to know the highest or lowest score in the sorted set to get all elements from or up to a certain score.</p> <p>By default, the score intervals specified by <code>&lt;start&gt;</code> and <code>&lt;stop&gt;</code> are closed (inclusive). It is possible to specify an open interval (exclusive) by prefixing the score with the character <code>(</code>.</p> <p>For example:</p> <pre tabindex=\"0\">ZRANGE zset (1 5 BYSCORE\n</pre>\n<p>Will return all elements with <code>1 &lt; score &lt;= 5</code> while:</p> <pre tabindex=\"0\">ZRANGE zset (5 (10 BYSCORE\n</pre>\n<p>Will return all the elements with <code>5 &lt; score &lt; 10</code> (5 and 10 excluded).</p> <h2 id=\"reverse-ranges\">Reverse ranges</h2> <p>Using the <code>REV</code> option reverses the sorted set, with index 0 as the element with the highest score.</p> <p>By default, <code>&lt;start&gt;</code> must be less than or equal to <code>&lt;stop&gt;</code> to return anything. However, if the <code>BYSCORE</code>, or <code>BYLEX</code> options are selected, the <code>&lt;start&gt;</code> is the highest score to consider, and <code>&lt;stop&gt;</code> is the lowest score to consider, therefore <code>&lt;start&gt;</code> must be greater than or equal to <code>&lt;stop&gt;</code> in order to return anything.</p> <p>For example:</p> <pre tabindex=\"0\">ZRANGE zset 5 10 REV\n</pre>\n<p>Will return the elements between index 5 and 10 in the reversed index.</p> <pre tabindex=\"0\">ZRANGE zset 10 5 REV BYSCORE\n</pre>\n<p>Will return all elements with scores less than 10 and greater than 5.</p> <h2 id=\"lexicographical-ranges\">Lexicographical ranges</h2> <p>When the <code>BYLEX</code> option is used, the command behaves like <a href=\"../zrangebylex\"><code>ZRANGEBYLEX</code></a> and returns the range of elements from the sorted set between the <code>&lt;start&gt;</code> and <code>&lt;stop&gt;</code> lexicographical closed range intervals.</p> <p>Note that lexicographical ordering relies on all elements having the same score. The reply is unspecified when the elements have different scores.</p> <p>Valid <code>&lt;start&gt;</code> and <code>&lt;stop&gt;</code> must start with <code>(</code> or <code>[</code>, in order to specify whether the range interval is exclusive or inclusive, respectively.</p> <p>The special values of <code>+</code> or <code>-</code> for <code>&lt;start&gt;</code> and <code>&lt;stop&gt;</code> mean positive and negative infinite strings, respectively, so for instance the command <code>ZRANGE myzset - + BYLEX</code> is guaranteed to return all the elements in the sorted set, providing that all the elements have the same score.</p> <p>The <code>REV</code> options reverses the order of the <code>&lt;start&gt;</code> and <code>&lt;stop&gt;</code> elements, where <code>&lt;start&gt;</code> must be lexicographically greater than <code>&lt;stop&gt;</code> to produce a non-empty result.</p> <h3 id=\"lexicographical-comparison-of-strings\">Lexicographical comparison of strings</h3> <p>Strings are compared as a binary array of bytes. Because of how the ASCII character set is specified, this means that usually this also have the effect of comparing normal ASCII characters in an obvious dictionary way. However, this is not true if non-plain ASCII strings are used (for example, utf8 strings).</p> <p>However, the user can apply a transformation to the encoded string so that the first part of the element inserted in the sorted set will compare as the user requires for the specific application. For example, if I want to add strings that will be compared in a case-insensitive way, but I still want to retrieve the real case when querying, I can add strings in the following way:</p> <pre>ZADD autocomplete 0 foo:Foo 0 bar:BAR 0 zap:zap\n</pre> <p>Because of the first <em>normalized</em> part in every element (before the colon character), we are forcing a given comparison. However, after the range is queried using <code>ZRANGE ... BYLEX</code>, the application can display to the user the second part of the string, after the colon.</p> <p>The binary nature of the comparison allows to use sorted sets as a general purpose index, for example, the first part of the element can be a 64-bit big-endian number. Since big-endian numbers have the most significant bytes in the initial positions, the binary comparison will match the numerical comparison of the numbers. This can be used in order to implement range queries on 64-bit values. As in the example below, after the first 8 bytes, we can store the value of the element we are indexing.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list of elements in the specified range (optionally with their scores, in case the <code>WITHSCORES</code> option is given).</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD myzset 1 \"one\"\nZADD myzset 2 \"two\"\nZADD myzset 3 \"three\"\nZRANGE myzset 0 -1\nZRANGE myzset 2 3\nZRANGE myzset -2 -1\n</pre> <p>The following example using <code>WITHSCORES</code> shows how the command returns always an array, but this time, populated with <em>element_1</em>, <em>score_1</em>, <em>element_2</em>, <em>score_2</em>, ..., <em>element_N</em>, <em>score_N</em>.</p>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZRANGE myzset 0 1 WITHSCORES\n</pre> <p>This example shows how to query the sorted set by score, excluding the value <code>1</code> and up to infinity, returning only the second element of the result:</p>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZRANGE myzset (1 +inf BYSCORE LIMIT 1 1\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 6.2.0: Added the <code>REV</code>, <code>BYSCORE</code>, <code>BYLEX</code> and <code>LIMIT</code> options.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zrange/\" class=\"_attribution-link\">https://redis.io/commands/zrange/</a>\n  </p>\n</div>\n","zpopmin/index":"<h1 class=\"command-name\">ZPOPMIN</h1>\n<pre>ZPOPMIN</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZPOPMIN key [count]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N)*M) with N being the number of elements in the sorted set, and M being the number of elements popped.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Removes and returns up to <code>count</code> members with the lowest scores in the sorted set stored at <code>key</code>.</p> <p>When left unspecified, the default value for <code>count</code> is 1. Specifying a <code>count</code> value that is higher than the sorted set's cardinality will not produce an error. When returning multiple elements, the one with the lowest score will be the first, followed by the elements with greater scores.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list of popped elements and scores.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD myzset 1 \"one\"\nZADD myzset 2 \"two\"\nZADD myzset 3 \"three\"\nZPOPMIN myzset\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zpopmin/\" class=\"_attribution-link\">https://redis.io/commands/zpopmin/</a>\n  </p>\n</div>\n","zinterstore/index":"<h1 class=\"command-name\">ZINTERSTORE</h1>\n<pre>ZINTERSTORE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZINTERSTORE destination numkeys key [key ...] [WEIGHTSweight\n  [weight ...]] [AGGREGATE&lt;SUM | MIN | MAX&gt;]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N*K)+O(M*log(M)) worst case with N being the smallest input sorted set, K being the number of input sorted sets and M being the number of elements in the resulting sorted set.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Computes the intersection of <code>numkeys</code> sorted sets given by the specified keys, and stores the result in <code>destination</code>. It is mandatory to provide the number of input keys (<code>numkeys</code>) before passing the input keys and the other (optional) arguments.</p> <p>By default, the resulting score of an element is the sum of its scores in the sorted sets where it exists. Because intersection requires an element to be a member of every given sorted set, this results in the score of every element in the resulting sorted set to be equal to the number of input sorted sets.</p> <p>For a description of the <code>WEIGHTS</code> and <code>AGGREGATE</code> options, see <a href=\"../zunionstore\"><code>ZUNIONSTORE</code></a>.</p> <p>If <code>destination</code> already exists, it is overwritten.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of elements in the resulting sorted set at <code>destination</code>.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD zset1 1 \"one\"\nZADD zset1 2 \"two\"\nZADD zset2 1 \"one\"\nZADD zset2 2 \"two\"\nZADD zset2 3 \"three\"\nZINTERSTORE out 2 zset1 zset2 WEIGHTS 2 3\nZRANGE out 0 -1 WITHSCORES\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zinterstore/\" class=\"_attribution-link\">https://redis.io/commands/zinterstore/</a>\n  </p>\n</div>\n","zremrangebylex/index":"<h1 class=\"command-name\">ZREMRANGEBYLEX</h1>\n<pre>ZREMRANGEBYLEX</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZREMRANGEBYLEX key min max</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.9</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements removed by the operation.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>When all the elements in a sorted set are inserted with the same score, in order to force lexicographical ordering, this command removes all elements in the sorted set stored at <code>key</code> between the lexicographical range specified by <code>min</code> and <code>max</code>.</p> <p>The meaning of <code>min</code> and <code>max</code> are the same of the <a href=\"../zrangebylex\"><code>ZRANGEBYLEX</code></a> command. Similarly, this command actually removes the same elements that <a href=\"../zrangebylex\"><code>ZRANGEBYLEX</code></a> would return if called with the same <code>min</code> and <code>max</code> arguments.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of elements removed.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD myzset 0 aaaa 0 b 0 c 0 d 0 e\nZADD myzset 0 foo 0 zap 0 zip 0 ALPHA 0 alpha\nZRANGE myzset 0 -1\nZREMRANGEBYLEX myzset [alpha [omega\nZRANGE myzset 0 -1\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zremrangebylex/\" class=\"_attribution-link\">https://redis.io/commands/zremrangebylex/</a>\n  </p>\n</div>\n","xrange/index":"<h1 class=\"command-name\">XRANGE</h1>\n<pre>XRANGE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">XRANGE key start end [COUNTcount]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) with N being the number of elements being returned. If N is constant (e.g. always asking for the first 10 elements with COUNT), you can consider it O(1).</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@stream</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>The command returns the stream entries matching a given range of IDs. The range is specified by a minimum and maximum ID. All the entries having an ID between the two specified or exactly one of the two IDs specified (closed interval) are returned.</p> <p>The <code>XRANGE</code> command has a number of applications:</p> <ul> <li>Returning items in a specific time range. This is possible because Stream IDs are <a href=\"https://redis.io/topics/streams-intro\">related to time</a>.</li> <li>Iterating a stream incrementally, returning just a few items at every iteration. However it is semantically much more robust than the <a href=\"../scan\"><code>SCAN</code></a> family of functions.</li> <li>Fetching a single entry from a stream, providing the ID of the entry to fetch two times: as start and end of the query interval.</li> </ul> <p>The command also has a reciprocal command returning items in the reverse order, called <a href=\"../xrevrange\"><code>XREVRANGE</code></a>, which is otherwise identical.</p> <h2 id=\"--and--special-ids\">\n<code>-</code> and <code>+</code> special IDs</h2> <p>The <code>-</code> and <code>+</code> special IDs mean respectively the minimum ID possible and the maximum ID possible inside a stream, so the following command will just return every entry in the stream:</p> <pre tabindex=\"0\">&gt; XRANGE somestream - +\n1) 1) 1526985054069-0\n   2) 1) \"duration\"\n      2) \"72\"\n      3) \"event-id\"\n      4) \"9\"\n      5) \"user-id\"\n      6) \"839248\"\n2) 1) 1526985069902-0\n   2) 1) \"duration\"\n      2) \"415\"\n      3) \"event-id\"\n      4) \"2\"\n      5) \"user-id\"\n      6) \"772213\"\n... other entries here ...\n</pre>\n<p>The <code>-</code> and <code>+</code> special IDs mean, respectively, the minimal and maximal range IDs, however they are nicer to type.</p> <h2 id=\"incomplete-ids\">Incomplete IDs</h2> <p>Stream IDs are composed of two parts, a Unix millisecond time stamp and a sequence number for entries inserted in the same millisecond. It is possible to use <code>XRANGE</code> specifying just the first part of the ID, the millisecond time, like in the following example:</p> <pre tabindex=\"0\">&gt; XRANGE somestream 1526985054069 1526985055069\n</pre>\n<p>In this case, <code>XRANGE</code> will auto-complete the start interval with <code>-0</code> and end interval with <code>-18446744073709551615</code>, in order to return all the entries that were generated between a given millisecond and the end of the other specified millisecond. This also means that repeating the same millisecond two times, we get all the entries within such millisecond, because the sequence number range will be from zero to the maximum.</p> <p>Used in this way <code>XRANGE</code> works as a range query command to obtain entries in a specified time. This is very handy in order to access the history of past events in a stream.</p> <h2 id=\"exclusive-ranges\">Exclusive ranges</h2> <p>The range is close (inclusive) by default, meaning that the reply can include entries with IDs matching the query's start and end intervals. It is possible to specify an open interval (exclusive) by prefixing the ID with the character <code>(</code>. This is useful for iterating the stream, as explained below.</p> <h2 id=\"returning-a-maximum-number-of-entries\">Returning a maximum number of entries</h2> <p>Using the <strong>COUNT</strong> option it is possible to reduce the number of entries reported. This is a very important feature even if it may look marginal, because it allows, for instance, to model operations such as <em>give me the entry greater or equal to the following</em>:</p> <pre tabindex=\"0\">&gt; XRANGE somestream 1526985054069-0 + COUNT 1\n1) 1) 1526985054069-0\n   2) 1) \"duration\"\n      2) \"72\"\n      3) \"event-id\"\n      4) \"9\"\n      5) \"user-id\"\n      6) \"839248\"\n</pre>\n<p>In the above case the entry <code>1526985054069-0</code> exists, otherwise the server would have sent us the next one. Using <code>COUNT</code> is also the base in order to use <code>XRANGE</code> as an iterator.</p> <h2 id=\"iterating-a-stream\">Iterating a stream</h2> <p>In order to iterate a stream, we can proceed as follows. Let's assume that we want two elements per iteration. We start fetching the first two elements, which is trivial:</p> <pre tabindex=\"0\">&gt; XRANGE writers - + COUNT 2\n1) 1) 1526985676425-0\n   2) 1) \"name\"\n      2) \"Virginia\"\n      3) \"surname\"\n      4) \"Woolf\"\n2) 1) 1526985685298-0\n   2) 1) \"name\"\n      2) \"Jane\"\n      3) \"surname\"\n      4) \"Austen\"\n</pre>\n<p>Then instead of starting the iteration again from <code>-</code>, as the start of the range we use the entry ID of the <em>last</em> entry returned by the previous <code>XRANGE</code> call as an exclusive interval.</p> <p>The ID of the last entry is <code>1526985685298-0</code>, so we just prefix it with a '(', and continue our iteration:</p> <pre tabindex=\"0\">&gt; XRANGE writers (1526985685298-0 + COUNT 2\n1) 1) 1526985691746-0\n   2) 1) \"name\"\n      2) \"Toni\"\n      3) \"surname\"\n      4) \"Morrison\"\n2) 1) 1526985712947-0\n   2) 1) \"name\"\n      2) \"Agatha\"\n      3) \"surname\"\n      4) \"Christie\"\n</pre>\n<p>And so forth. Eventually this will allow to visit all the entries in the stream. Obviously, we can start the iteration from any ID, or even from a specific time, by providing a given incomplete start ID. Moreover, we can limit the iteration to a given ID or time, by providing an end ID or incomplete ID instead of <code>+</code>.</p> <p>The command <a href=\"../xread\"><code>XREAD</code></a> is also able to iterate the stream. The command <a href=\"../xrevrange\"><code>XREVRANGE</code></a> can iterate the stream reverse, from higher IDs (or times) to lower IDs (or times).</p> <h3 id=\"iterating-with-earlier-versions-of-redis\">Iterating with earlier versions of Redis</h3> <p>While exclusive range intervals are only available from Redis 6.2, it is still possible to use a similar stream iteration pattern with earlier versions. You start fetching from the stream the same way as described above to obtain the first entries.</p> <p>For the subsequent calls, you'll need to programmatically advance the last entry's ID returned. Most Redis client should abstract this detail, but the implementation can also be in the application if needed. In the example above, this means incrementing the sequence of <code>1526985685298-0</code> by one, from 0 to 1. The second call would, therefore, be:</p> <pre tabindex=\"0\">&gt; XRANGE writers 1526985685298-1 + COUNT 2\n1) 1) 1526985691746-0\n   2) 1) \"name\"\n      2) \"Toni\"\n...\n</pre>\n<p>Also, note that once the sequence part of the last ID equals 18446744073709551615, you'll need to increment the timestamp and reset the sequence part to 0. For example, incrementing the ID <code>1526985685298-18446744073709551615</code> should result in <code>1526985685299-0</code>.</p> <p>A symmetrical pattern applies to iterating the stream with <a href=\"../xrevrange\"><code>XREVRANGE</code></a>. The only difference is that the client needs to decrement the ID for the subsequent calls. When decrementing an ID with a sequence part of 0, the timestamp needs to be decremented by 1 and the sequence set to 18446744073709551615.</p> <h2 id=\"fetching-single-items\">Fetching single items</h2> <p>If you look for an <code>XGET</code> command you'll be disappointed because <code>XRANGE</code> is effectively the way to go in order to fetch a single entry from a stream. All you have to do is to specify the ID two times in the arguments of XRANGE:</p> <pre tabindex=\"0\">&gt; XRANGE mystream 1526984818136-0 1526984818136-0\n1) 1) 1526984818136-0\n   2) 1) \"duration\"\n      2) \"1532\"\n      3) \"event-id\"\n      4) \"5\"\n      5) \"user-id\"\n      6) \"7782813\"\n</pre>\n<h2 id=\"additional-information-about-streams\">Additional information about streams</h2> <p>For further information about Redis streams please check our <a href=\"https://redis.io/topics/streams-intro\">introduction to Redis Streams document</a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>, specifically:</p> <p>The command returns the entries with IDs matching the specified range. The returned entries are complete, that means that the ID and all the fields they are composed are returned. Moreover, the entries are returned with their fields and values in the exact same order as <a href=\"../xadd\"><code>XADD</code></a> added them.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nXADD writers * name Virginia surname Woolf\nXADD writers * name Jane surname Austen\nXADD writers * name Toni surname Morrison\nXADD writers * name Agatha surname Christie\nXADD writers * name Ngozi surname Adichie\nXLEN writers\nXRANGE writers - + COUNT 2\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 6.2.0: Added exclusive ranges.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/xrange/\" class=\"_attribution-link\">https://redis.io/commands/xrange/</a>\n  </p>\n</div>\n","zlexcount/index":"<h1 class=\"command-name\">ZLEXCOUNT</h1>\n<pre>ZLEXCOUNT</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZLEXCOUNT key min max</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.9</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N)) with N being the number of elements in the sorted set.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>When all the elements in a sorted set are inserted with the same score, in order to force lexicographical ordering, this command returns the number of elements in the sorted set at <code>key</code> with a value between <code>min</code> and <code>max</code>.</p> <p>The <code>min</code> and <code>max</code> arguments have the same meaning as described for <a href=\"../zrangebylex\"><code>ZRANGEBYLEX</code></a>.</p> <p>Note: the command has a complexity of just O(log(N)) because it uses elements ranks (see <a href=\"../zrank\"><code>ZRANK</code></a>) to get an idea of the range. Because of this there is no need to do a work proportional to the size of the range.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of elements in the specified score range.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD myzset 0 a 0 b 0 c 0 d 0 e\nZADD myzset 0 f 0 g\nZLEXCOUNT myzset - +\nZLEXCOUNT myzset [b [f\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zlexcount/\" class=\"_attribution-link\">https://redis.io/commands/zlexcount/</a>\n  </p>\n</div>\n","zmscore/index":"<h1 class=\"command-name\">ZMSCORE</h1>\n<pre>ZMSCORE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZMSCORE key member [member ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of members being requested.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the scores associated with the specified <code>members</code> in the sorted set stored at <code>key</code>.</p> <p>For every <code>member</code> that does not exist in the sorted set, a <code>nil</code> value is returned.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list of scores or <code>nil</code> associated with the specified <code>member</code> values (a double precision floating point number), represented as strings.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD myzset 1 \"one\"\nZADD myzset 2 \"two\"\nZMSCORE myzset \"one\" \"two\" \"nofield\"\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zmscore/\" class=\"_attribution-link\">https://redis.io/commands/zmscore/</a>\n  </p>\n</div>\n","zmpop/index":"<h1 class=\"command-name\">ZMPOP</h1>\n<pre>ZMPOP</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZMPOP numkeys key [key ...] &lt;MIN | MAX&gt; [COUNTcount]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>7.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(K) + O(M*log(N)) where K is the number of provided keys, N being the number of elements in the sorted set, and M being the number of elements popped.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Pops one or more elements, that are member-score pairs, from the first non-empty sorted set in the provided list of key names.</p> <p><code>ZMPOP</code> and <a href=\"../bzmpop\"><code>BZMPOP</code></a> are similar to the following, more limited, commands:</p> <ul> <li>\n<a href=\"../zpopmin\"><code>ZPOPMIN</code></a> or <a href=\"../zpopmax\"><code>ZPOPMAX</code></a> which take only one key, and can return multiple elements.</li> <li>\n<a href=\"../bzpopmin\"><code>BZPOPMIN</code></a> or <a href=\"../bzpopmax\"><code>BZPOPMAX</code></a> which take multiple keys, but return only one element from just one key.</li> </ul> <p>See <a href=\"../bzmpop\"><code>BZMPOP</code></a> for the blocking variant of this command.</p> <p>When the <code>MIN</code> modifier is used, the elements popped are those with the lowest scores from the first non-empty sorted set. The <code>MAX</code> modifier causes elements with the highest scores to be popped. The optional <code>COUNT</code> can be used to specify the number of elements to pop, and is set to 1 by default.</p> <p>The number of popped elements is the minimum from the sorted set's cardinality and <code>COUNT</code>'s value.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: specifically:</p> <ul> <li>A <code>nil</code> when no element could be popped.</li> <li>A two-element array with the first element being the name of the key from which elements were popped, and the second element is an array of the popped elements. Every entry in the elements array is also an array that contains the member and its score.</li> </ul> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZMPOP 1 notsuchkey MIN\nZADD myzset 1 \"one\" 2 \"two\" 3 \"three\"\nZMPOP 1 myzset MIN\nZRANGE myzset 0 -1 WITHSCORES\nZMPOP 1 myzset MAX COUNT 10\nZADD myzset2 4 \"four\" 5 \"five\" 6 \"six\"\nZMPOP 2 myzset myzset2 MIN COUNT 10\nZRANGE myzset 0 -1 WITHSCORES\nZMPOP 2 myzset myzset2 MAX COUNT 10\nZRANGE myzset2 0 -1 WITHSCORES\nEXISTS myzset myzset2\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zmpop/\" class=\"_attribution-link\">https://redis.io/commands/zmpop/</a>\n  </p>\n</div>\n","zrangebylex/index":"<h1 class=\"command-name\">ZRANGEBYLEX</h1>\n<pre>ZRANGEBYLEX (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 6.2.0, this command is regarded as deprecated.</p> <p>It can be replaced by <a href=\"../zrange\"><code>ZRANGE</code></a> with the <code>BYLEX</code> argument when migrating or writing new code.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZRANGEBYLEX key min max [LIMIToffset count]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.9</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements being returned. If M is constant (e.g. always asking for the first 10 elements with LIMIT), you can consider it O(log(N)).</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>When all the elements in a sorted set are inserted with the same score, in order to force lexicographical ordering, this command returns all the elements in the sorted set at <code>key</code> with a value between <code>min</code> and <code>max</code>.</p> <p>If the elements in the sorted set have different scores, the returned elements are unspecified.</p> <p>The elements are considered to be ordered from lower to higher strings as compared byte-by-byte using the <code>memcmp()</code> C function. Longer strings are considered greater than shorter strings if the common part is identical.</p> <p>The optional <code>LIMIT</code> argument can be used to only get a range of the matching elements (similar to <em>SELECT LIMIT offset, count</em> in SQL). A negative <code>count</code> returns all elements from the <code>offset</code>. Keep in mind that if <code>offset</code> is large, the sorted set needs to be traversed for <code>offset</code> elements before getting to the elements to return, which can add up to O(N) time complexity.</p> <h2 id=\"how-to-specify-intervals\">How to specify intervals</h2> <p>Valid <em>start</em> and <em>stop</em> must start with <code>(</code> or <code>[</code>, in order to specify if the range item is respectively exclusive or inclusive. The special values of <code>+</code> or <code>-</code> for <em>start</em> and <em>stop</em> have the special meaning or positively infinite and negatively infinite strings, so for instance the command <strong>ZRANGEBYLEX myzset - +</strong> is guaranteed to return all the elements in the sorted set, if all the elements have the same score.</p> <h2 id=\"details-on-strings-comparison\">Details on strings comparison</h2> <p>Strings are compared as binary array of bytes. Because of how the ASCII character set is specified, this means that usually this also have the effect of comparing normal ASCII characters in an obvious dictionary way. However this is not true if non plain ASCII strings are used (for example utf8 strings).</p> <p>However the user can apply a transformation to the encoded string so that the first part of the element inserted in the sorted set will compare as the user requires for the specific application. For example if I want to add strings that will be compared in a case-insensitive way, but I still want to retrieve the real case when querying, I can add strings in the following way:</p> <pre>ZADD autocomplete 0 foo:Foo 0 bar:BAR 0 zap:zap\n</pre> <p>Because of the first <em>normalized</em> part in every element (before the colon character), we are forcing a given comparison, however after the range is queries using <code>ZRANGEBYLEX</code> the application can display to the user the second part of the string, after the colon.</p> <p>The binary nature of the comparison allows to use sorted sets as a general purpose index, for example the first part of the element can be a 64 bit big endian number: since big endian numbers have the most significant bytes in the initial positions, the binary comparison will match the numerical comparison of the numbers. This can be used in order to implement range queries on 64 bit values. As in the example below, after the first 8 bytes we can store the value of the element we are actually indexing.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list of elements in the specified score range.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD myzset 0 a 0 b 0 c 0 d 0 e 0 f 0 g\nZRANGEBYLEX myzset - [c\nZRANGEBYLEX myzset - (c\nZRANGEBYLEX myzset [aaa (g\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zrangebylex/\" class=\"_attribution-link\">https://redis.io/commands/zrangebylex/</a>\n  </p>\n</div>\n","zrem/index":"<h1 class=\"command-name\">ZREM</h1>\n<pre>ZREM</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZREM key member [member ...]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(M*log(N)) with N being the number of elements in the sorted set and M the number of elements to be removed.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Removes the specified members from the sorted set stored at <code>key</code>. Non existing members are ignored.</p> <p>An error is returned when <code>key</code> exists and does not hold a sorted set.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>, specifically:</p> <ul> <li>The number of members removed from the sorted set, not including non existing members.</li> </ul> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD myzset 1 \"one\"\nZADD myzset 2 \"two\"\nZADD myzset 3 \"three\"\nZREM myzset \"two\"\nZRANGE myzset 0 -1 WITHSCORES\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 2.4.0: Accepts multiple elements.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zrem/\" class=\"_attribution-link\">https://redis.io/commands/zrem/</a>\n  </p>\n</div>\n","zremrangebyrank/index":"<h1 class=\"command-name\">ZREMRANGEBYRANK</h1>\n<pre>ZREMRANGEBYRANK</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZREMRANGEBYRANK key start stop</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements removed by the operation.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Removes all elements in the sorted set stored at <code>key</code> with rank between <code>start</code> and <code>stop</code>. Both <code>start</code> and <code>stop</code> are <code>0</code> -based indexes with <code>0</code> being the element with the lowest score. These indexes can be negative numbers, where they indicate offsets starting at the element with the highest score. For example: <code>-1</code> is the element with the highest score, <code>-2</code> the element with the second highest score and so forth.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of elements removed.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD myzset 1 \"one\"\nZADD myzset 2 \"two\"\nZADD myzset 3 \"three\"\nZREMRANGEBYRANK myzset 0 1\nZRANGE myzset 0 -1 WITHSCORES\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zremrangebyrank/\" class=\"_attribution-link\">https://redis.io/commands/zremrangebyrank/</a>\n  </p>\n</div>\n","zpopmax/index":"<h1 class=\"command-name\">ZPOPMAX</h1>\n<pre>ZPOPMAX</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZPOPMAX key [count]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>5.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N)*M) with N being the number of elements in the sorted set, and M being the number of elements popped.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Removes and returns up to <code>count</code> members with the highest scores in the sorted set stored at <code>key</code>.</p> <p>When left unspecified, the default value for <code>count</code> is 1. Specifying a <code>count</code> value that is higher than the sorted set's cardinality will not produce an error. When returning multiple elements, the one with the highest score will be the first, followed by the elements with lower scores.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list of popped elements and scores.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD myzset 1 \"one\"\nZADD myzset 2 \"two\"\nZADD myzset 3 \"three\"\nZPOPMAX myzset\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zpopmax/\" class=\"_attribution-link\">https://redis.io/commands/zpopmax/</a>\n  </p>\n</div>\n","zrangebyscore/index":"<h1 class=\"command-name\">ZRANGEBYSCORE</h1>\n<pre>ZRANGEBYSCORE (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 6.2.0, this command is regarded as deprecated.</p> <p>It can be replaced by <a href=\"../zrange\"><code>ZRANGE</code></a> with the <code>BYSCORE</code> argument when migrating or writing new code.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZRANGEBYSCORE key min max [WITHSCORES] [LIMIToffset count]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.0.5</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements being returned. If M is constant (e.g. always asking for the first 10 elements with LIMIT), you can consider it O(log(N)).</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns all the elements in the sorted set at <code>key</code> with a score between <code>min</code> and <code>max</code> (including elements with score equal to <code>min</code> or <code>max</code>). The elements are considered to be ordered from low to high scores.</p> <p>The elements having the same score are returned in lexicographical order (this follows from a property of the sorted set implementation in Redis and does not involve further computation).</p> <p>The optional <code>LIMIT</code> argument can be used to only get a range of the matching elements (similar to <em>SELECT LIMIT offset, count</em> in SQL). A negative <code>count</code> returns all elements from the <code>offset</code>. Keep in mind that if <code>offset</code> is large, the sorted set needs to be traversed for <code>offset</code> elements before getting to the elements to return, which can add up to O(N) time complexity.</p> <p>The optional <code>WITHSCORES</code> argument makes the command return both the element and its score, instead of the element alone. This option is available since Redis 2.0.</p> <h2 id=\"exclusive-intervals-and-infinity\">Exclusive intervals and infinity</h2> <p><code>min</code> and <code>max</code> can be <code>-inf</code> and <code>+inf</code>, so that you are not required to know the highest or lowest score in the sorted set to get all elements from or up to a certain score.</p> <p>By default, the interval specified by <code>min</code> and <code>max</code> is closed (inclusive). It is possible to specify an open interval (exclusive) by prefixing the score with the character <code>(</code>. For example:</p> <pre tabindex=\"0\">ZRANGEBYSCORE zset (1 5\n</pre>\n<p>Will return all elements with <code>1 &lt; score &lt;= 5</code> while:</p> <pre tabindex=\"0\">ZRANGEBYSCORE zset (5 (10\n</pre>\n<p>Will return all the elements with <code>5 &lt; score &lt; 10</code> (5 and 10 excluded).</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list of elements in the specified score range (optionally with their scores).</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD myzset 1 \"one\"\nZADD myzset 2 \"two\"\nZADD myzset 3 \"three\"\nZRANGEBYSCORE myzset -inf +inf\nZRANGEBYSCORE myzset 1 2\nZRANGEBYSCORE myzset (1 2\nZRANGEBYSCORE myzset (1 (2\n</pre> <h2 id=\"pattern-weighted-random-selection-of-an-element\">Pattern: weighted random selection of an element</h2> <p>Normally <code>ZRANGEBYSCORE</code> is simply used in order to get range of items where the score is the indexed integer key, however it is possible to do less obvious things with the command.</p> <p>For example a common problem when implementing Markov chains and other algorithms is to select an element at random from a set, but different elements may have different weights that change how likely it is they are picked.</p> <p>This is how we use this command in order to mount such an algorithm:</p> <p>Imagine you have elements A, B and C with weights 1, 2 and 3. You compute the sum of the weights, which is 1+2+3 = 6</p> <p>At this point you add all the elements into a sorted set using this algorithm:</p> <pre tabindex=\"0\">SUM = ELEMENTS.TOTAL_WEIGHT // 6 in this case.\nSCORE = 0\nFOREACH ELE in ELEMENTS\n    SCORE += ELE.weight / SUM\n    ZADD KEY SCORE ELE\nEND\n</pre>\n<p>This means that you set:</p> <pre tabindex=\"0\">A to score 0.16\nB to score .5\nC to score 1\n</pre>\n<p>Since this involves approximations, in order to avoid C is set to, like, 0.998 instead of 1, we just modify the above algorithm to make sure the last score is 1 (left as an exercise for the reader...).</p> <p>At this point, each time you want to get a weighted random element, just compute a random number between 0 and 1 (which is like calling <code>rand()</code> in most languages), so you can just do:</p> <pre>RANDOM_ELE = ZRANGEBYSCORE key RAND() +inf LIMIT 0 1\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 2.0.0: Added the <code>WITHSCORES</code> modifier.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zrangebyscore/\" class=\"_attribution-link\">https://redis.io/commands/zrangebyscore/</a>\n  </p>\n</div>\n","zrank/index":"<h1 class=\"command-name\">ZRANK</h1>\n<pre>ZRANK</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZRANK key member [WITHSCORE]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N))</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the rank of <code>member</code> in the sorted set stored at <code>key</code>, with the scores ordered from low to high. The rank (or index) is 0-based, which means that the member with the lowest score has rank <code>0</code>.</p> <p>The optional <code>WITHSCORE</code> argument supplements the command's reply with the score of the element returned.</p> <p>Use <a href=\"../zrevrank\"><code>ZREVRANK</code></a> to get the rank of an element with the scores ordered from high to low.</p> <h2 id=\"return\">Return</h2> <ul> <li>If <code>member</code> exists in the sorted set: <ul> <li>using <code>WITHSCORE</code>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: an array containing the rank and score of <code>member</code>.</li> <li>without using <code>WITHSCORE</code>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the rank of <code>member</code>.</li> </ul> </li> <li>If <code>member</code> does not exist in the sorted set or <code>key</code> does not exist: <ul> <li>using <code>WITHSCORE</code>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: <code>nil</code>.</li> <li>without using <code>WITHSCORE</code>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: <code>nil</code>.</li> </ul> </li> </ul> <p>Note that in RESP3 null and nullarray are the same, but in RESP2 they are not.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD myzset 1 \"one\"\nZADD myzset 2 \"two\"\nZADD myzset 3 \"three\"\nZRANK myzset \"three\"\nZRANK myzset \"four\"\nZRANK myzset \"three\" WITHSCORE\nZRANK myzset \"four\" WITHSCORE\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 7.2.0: Added the optional <code>WITHSCORE</code> argument.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zrank/\" class=\"_attribution-link\">https://redis.io/commands/zrank/</a>\n  </p>\n</div>\n","zrevrange/index":"<h1 class=\"command-name\">ZREVRANGE</h1>\n<pre>ZREVRANGE (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 6.2.0, this command is regarded as deprecated.</p> <p>It can be replaced by <a href=\"../zrange\"><code>ZRANGE</code></a> with the <code>REV</code> argument when migrating or writing new code.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZREVRANGE key start stop [WITHSCORES]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements returned.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the specified range of elements in the sorted set stored at <code>key</code>. The elements are considered to be ordered from the highest to the lowest score. Descending lexicographical order is used for elements with equal score.</p> <p>Apart from the reversed ordering, <code>ZREVRANGE</code> is similar to <a href=\"../zrange\"><code>ZRANGE</code></a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list of elements in the specified range (optionally with their scores).</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD myzset 1 \"one\"\nZADD myzset 2 \"two\"\nZADD myzset 3 \"three\"\nZREVRANGE myzset 0 -1\nZREVRANGE myzset 2 3\nZREVRANGE myzset -2 -1\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zrevrange/\" class=\"_attribution-link\">https://redis.io/commands/zrevrange/</a>\n  </p>\n</div>\n","zrandmember/index":"<h1 class=\"command-name\">ZRANDMEMBER</h1>\n<pre>ZRANDMEMBER</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZRANDMEMBER key [count [WITHSCORES]]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N) where N is the number of members returned</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>When called with just the <code>key</code> argument, return a random element from the sorted set value stored at <code>key</code>.</p> <p>If the provided <code>count</code> argument is positive, return an array of <strong>distinct elements</strong>. The array's length is either <code>count</code> or the sorted set's cardinality (<a href=\"../zcard\"><code>ZCARD</code></a>), whichever is lower.</p> <p>If called with a negative <code>count</code>, the behavior changes and the command is allowed to return the <strong>same element multiple times</strong>. In this case, the number of returned elements is the absolute value of the specified <code>count</code>.</p> <p>The optional <code>WITHSCORES</code> modifier changes the reply so it includes the respective scores of the randomly selected elements from the sorted set.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: without the additional <code>count</code> argument, the command returns a Bulk Reply with the randomly selected element, or <code>nil</code> when <code>key</code> does not exist.</p> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: when the additional <code>count</code> argument is passed, the command returns an array of elements, or an empty array when <code>key</code> does not exist. If the <code>WITHSCORES</code> modifier is used, the reply is a list elements and their scores from the sorted set.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD dadi 1 uno 2 due 3 tre 4 quattro 5 cinque 6 sei\nZRANDMEMBER dadi\nZRANDMEMBER dadi\nZRANDMEMBER dadi -5 WITHSCORES\n</pre> <h2 id=\"specification-of-the-behavior-when-count-is-passed\">Specification of the behavior when count is passed</h2> <p>When the <code>count</code> argument is a positive value this command behaves as follows:</p> <ul> <li>No repeated elements are returned.</li> <li>If <code>count</code> is bigger than the cardinality of the sorted set, the command will only return the whole sorted set without additional elements.</li> <li>The order of elements in the reply is not truly random, so it is up to the client to shuffle them if needed.</li> </ul> <p>When the <code>count</code> is a negative value, the behavior changes as follows:</p> <ul> <li>Repeating elements are possible.</li> <li>Exactly <code>count</code> elements, or an empty array if the sorted set is empty (non-existing key), are always returned.</li> <li>The order of elements in the reply is truly random.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zrandmember/\" class=\"_attribution-link\">https://redis.io/commands/zrandmember/</a>\n  </p>\n</div>\n","zremrangebyscore/index":"<h1 class=\"command-name\">ZREMRANGEBYSCORE</h1>\n<pre>ZREMRANGEBYSCORE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZREMRANGEBYSCORE key min max</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements removed by the operation.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Removes all elements in the sorted set stored at <code>key</code> with a score between <code>min</code> and <code>max</code> (inclusive).</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of elements removed.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD myzset 1 \"one\"\nZADD myzset 2 \"two\"\nZADD myzset 3 \"three\"\nZREMRANGEBYSCORE myzset -inf (2\nZRANGE myzset 0 -1 WITHSCORES\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zremrangebyscore/\" class=\"_attribution-link\">https://redis.io/commands/zremrangebyscore/</a>\n  </p>\n</div>\n","zrevrangebyscore/index":"<h1 class=\"command-name\">ZREVRANGEBYSCORE</h1>\n<pre>ZREVRANGEBYSCORE (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 6.2.0, this command is regarded as deprecated.</p> <p>It can be replaced by <a href=\"../zrange\"><code>ZRANGE</code></a> with the <code>REV</code> and <code>BYSCORE</code> arguments when migrating or writing new code.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZREVRANGEBYSCORE key max min [WITHSCORES] [LIMIToffset count]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements being returned. If M is constant (e.g. always asking for the first 10 elements with LIMIT), you can consider it O(log(N)).</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns all the elements in the sorted set at <code>key</code> with a score between <code>max</code> and <code>min</code> (including elements with score equal to <code>max</code> or <code>min</code>). In contrary to the default ordering of sorted sets, for this command the elements are considered to be ordered from high to low scores.</p> <p>The elements having the same score are returned in reverse lexicographical order.</p> <p>Apart from the reversed ordering, <code>ZREVRANGEBYSCORE</code> is similar to <a href=\"../zrangebyscore\"><code>ZRANGEBYSCORE</code></a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list of elements in the specified score range (optionally with their scores).</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD myzset 1 \"one\"\nZADD myzset 2 \"two\"\nZADD myzset 3 \"three\"\nZREVRANGEBYSCORE myzset +inf -inf\nZREVRANGEBYSCORE myzset 2 1\nZREVRANGEBYSCORE myzset 2 (1\nZREVRANGEBYSCORE myzset (2 (1\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 2.1.6: <code>min</code> and <code>max</code> can be exclusive.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zrevrangebyscore/\" class=\"_attribution-link\">https://redis.io/commands/zrevrangebyscore/</a>\n  </p>\n</div>\n","zrevrangebylex/index":"<h1 class=\"command-name\">ZREVRANGEBYLEX</h1>\n<pre>ZREVRANGEBYLEX (deprecated)</pre> <div class=\"border-l-8 pl-4\"> <p>As of Redis version 6.2.0, this command is regarded as deprecated.</p> <p>It can be replaced by <a href=\"../zrange\"><code>ZRANGE</code></a> with the <code>REV</code> and <code>BYLEX</code> arguments when migrating or writing new code.</p> </div> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZREVRANGEBYLEX key max min [LIMIToffset count]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.9</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements being returned. If M is constant (e.g. always asking for the first 10 elements with LIMIT), you can consider it O(log(N)).</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>When all the elements in a sorted set are inserted with the same score, in order to force lexicographical ordering, this command returns all the elements in the sorted set at <code>key</code> with a value between <code>max</code> and <code>min</code>.</p> <p>Apart from the reversed ordering, <code>ZREVRANGEBYLEX</code> is similar to <a href=\"../zrangebylex\"><code>ZRANGEBYLEX</code></a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: list of elements in the specified score range.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD myzset 0 a 0 b 0 c 0 d 0 e 0 f 0 g\nZREVRANGEBYLEX myzset [c -\nZREVRANGEBYLEX myzset (c -\nZREVRANGEBYLEX myzset (g [aaa\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zrevrangebylex/\" class=\"_attribution-link\">https://redis.io/commands/zrevrangebylex/</a>\n  </p>\n</div>\n","zscan/index":"<h1 class=\"command-name\">ZSCAN</h1>\n<pre>ZSCAN</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZSCAN key cursor [MATCHpattern] [COUNTcount]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.8.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1) for every call. O(N) for a complete iteration, including enough command calls for the cursor to return back to 0. N is the number of elements inside the collection.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>See <a href=\"../scan\"><code>SCAN</code></a> for <code>ZSCAN</code> documentation.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zscan/\" class=\"_attribution-link\">https://redis.io/commands/zscan/</a>\n  </p>\n</div>\n","zrangestore/index":"<h1 class=\"command-name\">ZRANGESTORE</h1>\n<pre>ZRANGESTORE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZRANGESTORE dst src min max [BYSCORE | BYLEX] [REV] [LIMIToffset\n  count]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements stored into the destination key.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command is like <a href=\"../zrange\"><code>ZRANGE</code></a>, but stores the result in the <code>&lt;dst&gt;</code> destination key.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of elements in the resulting sorted set.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD srczset 1 \"one\" 2 \"two\" 3 \"three\" 4 \"four\"\nZRANGESTORE dstzset srczset 2 -1\nZRANGE dstzset 0 -1\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zrangestore/\" class=\"_attribution-link\">https://redis.io/commands/zrangestore/</a>\n  </p>\n</div>\n","zrevrank/index":"<h1 class=\"command-name\">ZREVRANK</h1>\n<pre>ZREVRANK</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZREVRANK key member [WITHSCORE]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(log(N))</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the rank of <code>member</code> in the sorted set stored at <code>key</code>, with the scores ordered from high to low. The rank (or index) is 0-based, which means that the member with the highest score has rank <code>0</code>.</p> <p>The optional <code>WITHSCORE</code> argument supplements the command's reply with the score of the element returned.</p> <p>Use <a href=\"../zrank\"><code>ZRANK</code></a> to get the rank of an element with the scores ordered from low to high.</p> <h2 id=\"return\">Return</h2> <ul> <li>If <code>member</code> exists in the sorted set: <ul> <li>using <code>WITHSCORE</code>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: an array containing the rank and score of <code>member</code>.</li> <li>without using <code>WITHSCORE</code>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the rank of <code>member</code>.</li> </ul> </li> <li>If <code>member</code> does not exist in the sorted set or <code>key</code> does not exist: <ul> <li>using <code>WITHSCORE</code>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: <code>nil</code>.</li> <li>without using <code>WITHSCORE</code>, <a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: <code>nil</code>.</li> </ul> </li> </ul> <p>Note that in RESP3 null and nullarray are the same, but in RESP2 they are not.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD myzset 1 \"one\"\nZADD myzset 2 \"two\"\nZADD myzset 3 \"three\"\nZREVRANK myzset \"one\"\nZREVRANK myzset \"four\"\nZREVRANK myzset \"three\" WITHSCORE\nZREVRANK myzset \"four\" WITHSCORE\n</pre> <h2>History</h2> <ul> <li>Starting with Redis version 7.2.0: Added the optional <code>WITHSCORE</code> argument.</li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zrevrank/\" class=\"_attribution-link\">https://redis.io/commands/zrevrank/</a>\n  </p>\n</div>\n","zunionstore/index":"<h1 class=\"command-name\">ZUNIONSTORE</h1>\n<pre>ZUNIONSTORE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZUNIONSTORE destination numkeys key [key ...] [WEIGHTSweight\n  [weight ...]] [AGGREGATE&lt;SUM | MIN | MAX&gt;]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>2.0.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N)+O(M log(M)) with N being the sum of the sizes of the input sorted sets, and M being the number of elements in the resulting sorted set.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@write</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Computes the union of <code>numkeys</code> sorted sets given by the specified keys, and stores the result in <code>destination</code>. It is mandatory to provide the number of input keys (<code>numkeys</code>) before passing the input keys and the other (optional) arguments.</p> <p>By default, the resulting score of an element is the sum of its scores in the sorted sets where it exists.</p> <p>Using the <code>WEIGHTS</code> option, it is possible to specify a multiplication factor for each input sorted set. This means that the score of every element in every input sorted set is multiplied by this factor before being passed to the aggregation function. When <code>WEIGHTS</code> is not given, the multiplication factors default to <code>1</code>.</p> <p>With the <code>AGGREGATE</code> option, it is possible to specify how the results of the union are aggregated. This option defaults to <code>SUM</code>, where the score of an element is summed across the inputs where it exists. When this option is set to either <code>MIN</code> or <code>MAX</code>, the resulting set will contain the minimum or maximum score of an element across the inputs where it exists.</p> <p>If <code>destination</code> already exists, it is overwritten.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-integers\">Integer reply</a>: the number of elements in the resulting sorted set at <code>destination</code>.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD zset1 1 \"one\"\nZADD zset1 2 \"two\"\nZADD zset2 1 \"one\"\nZADD zset2 2 \"two\"\nZADD zset2 3 \"three\"\nZUNIONSTORE out 2 zset1 zset2 WEIGHTS 2 3\nZRANGE out 0 -1 WITHSCORES\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zunionstore/\" class=\"_attribution-link\">https://redis.io/commands/zunionstore/</a>\n  </p>\n</div>\n","zscore/index":"<h1 class=\"command-name\">ZSCORE</h1>\n<pre>ZSCORE</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZSCORE key member</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>1.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(1)</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@fast</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>Returns the score of <code>member</code> in the sorted set at <code>key</code>.</p> <p>If <code>member</code> does not exist in the sorted set, or <code>key</code> does not exist, <code>nil</code> is returned.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-bulk-strings\">Bulk string reply</a>: the score of <code>member</code> (a double precision floating point number), represented as string.</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD myzset 1 \"one\"\nZSCORE myzset \"one\"\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zscore/\" class=\"_attribution-link\">https://redis.io/commands/zscore/</a>\n  </p>\n</div>\n","zunion/index":"<h1 class=\"command-name\">ZUNION</h1>\n<pre>ZUNION</pre> <div class=\"font-semibold text-slate-900\">Syntax</div> <pre class=\"command-syntax\">ZUNION numkeys key [key ...] [WEIGHTSweight [weight ...]]\n  [AGGREGATE&lt;SUM | MIN | MAX&gt;] [WITHSCORES]</pre> <dl class=\"grid grid-cols-[auto,1fr] gap-x-2 mb-12\"> <dt class=\"font-semibold text-slate-900\">Available since:</dt> <dd>6.2.0</dd> <dt class=\"font-semibold text-slate-900\">Time complexity:</dt> <dd>O(N)+O(M*log(M)) with N being the sum of the sizes of the input sorted sets, and M being the number of elements in the resulting sorted set.</dd> <dt class=\"font-semibold text-slate-900\">ACL categories:</dt> <dd> <code>@read</code><span class=\"mr-1 last:hidden\">,</span> <code>@sortedset</code><span class=\"mr-1 last:hidden\">,</span> <code>@slow</code><span class=\"mr-1 last:hidden\">,</span> </dd> </dl> <p>This command is similar to <a href=\"../zunionstore\"><code>ZUNIONSTORE</code></a>, but instead of storing the resulting sorted set, it is returned to the client.</p> <p>For a description of the <code>WEIGHTS</code> and <code>AGGREGATE</code> options, see <a href=\"../zunionstore\"><code>ZUNIONSTORE</code></a>.</p> <h2 id=\"return\">Return</h2> <p><a href=\"https://redis.io/docs/reference/protocol-spec#resp-arrays\">Array reply</a>: the result of union (optionally with their scores, in case the <code>WITHSCORES</code> option is given).</p> <h2 id=\"examples\">Examples</h2>  <pre class=\"redis-cli overflow-y-auto max-h-80\">\nZADD zset1 1 \"one\"\nZADD zset1 2 \"two\"\nZADD zset2 1 \"one\"\nZADD zset2 2 \"two\"\nZADD zset2 3 \"three\"\nZUNION 2 zset1 zset2\nZUNION 2 zset1 zset2 WITHSCORES\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>\n    <a href=\"https://redis.io/commands/zunion/\" class=\"_attribution-link\">https://redis.io/commands/zunion/</a>\n  </p>\n</div>\n"}